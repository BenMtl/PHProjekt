//>>built
define("phpr/MetadataStore","exports,dojo/data/ItemFileReadStore,phpr/Api,dojo/topic,dojo/_base/lang,dojo/Deferred".split(","),function(e,k,f,g,h,i){var c={},j=function(a){for(var b in this._cache)if(this._cache.hasOwnProperty(b))for(var c in this._cache[b])this._cache[b].hasOwnProperty(c)&&a(this._cache[b][c])};g.subscribe("phpr/updateCacheData",{},function(){j(function(a){a.hasOwnProperty("deferred")||a.hasOwnProperty("data")&&delete a.data})});e.metadataFor=function(a,b){if(void 0===b)throw"No projectId provided in phpr.Metadatastore::metadataFor!";
if(!c.hasOwnProperty(a)||!c[a].hasOwnProperty(b)||!c[a][b].hasOwnProperty("data")&&!c[a][b].hasOwnProperty("deferred")){c.hasOwnProperty(a)||(c[a]={});c[a][b]={};var d="index.php/"+a+"/index/metadata",e={projectId:parseInt(b,10)},d=f.getData(d,{query:e}).then(h.hitch(this,function(d){c[a][b].data=d;delete c[a][b].deferred;return d}),function(){});return c[a][b].deferred=d}return c[a][b].hasOwnProperty("data")?(d=new i,d.resolve(c[a][b].data),d):c[a][b].deferred}});