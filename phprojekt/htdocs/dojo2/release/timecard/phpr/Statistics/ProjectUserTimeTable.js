//>>built
define("phpr/Statistics/ProjectUserTimeTable","dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/date/locale,dijit/_Widget,phpr/models/Timecard,phpr/Timehelper,dojox/grid/DataGrid,dojo/data/ItemFileWriteStore".split(","),function(h,i,d,o,j,k,l,m,n){return h([j],{baseClass:"projectUserTimeTable",startDate:null,endDate:null,buildRendering:function(){this.inherited(arguments);k.getProjectUserMinutes(this._getModelParams()).then(i.hitch(this,"_renderData"))},_renderData:function(a){if(!this._destroyed){var b=
{};d.forEach(a.projectUserMinutes,function(c){if(0!==parseInt(c.minutes,10)){var a=c.user_id;if("1"==c.project_id)c.project="Unassigned";var f={projectId:c.project_id,project:c.project,time:l.minutesToHMString(c.minutes)};b.hasOwnProperty(a)?b[a].projects.push(f):b[a]={user:c.user,id:a,projects:[f]}}});var g=[],a=[],e=0;for(e in b)a.push(b[e]);a=d.filter(a,function(a){return a&&"string"===typeof a.user});a.sort(function(a,b){return!a||!b?0:a.user.localeCompare(b.user)});d.forEach(a,function(a){var b=
a.projects;b.sort(function(a,b){return a.project.localeCompare(b.project)});b.forEach(function(b){g.push({id:""+e++,user:a.user,project:b.project,time:b.time})})});a=new n({data:{identifier:"id",items:g}});a=new m({store:a,structure:[[{name:"User",field:"user",width:"150px"},{name:"Project",field:"project",width:"250px"},{name:"Time",field:"time",width:"150px"}]],autoHeight:20});this.own(a);a.placeAt(this.domNode)}},_getModelParams:function(){return{start:this.startDate,end:this.endDate}}})});