//>>built
define("phpr/JsonRestQueryEngine",["dojo/_base/array","dojo/_base/lang","dojo/json","phpr/Timehelper"],function(n,o,p,j){var q=/^\d{4}-\d{2}-\d{2}$/,r=/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}(:\d{2})?$/;return function(g){return function(c){return!g||!g.hasOwnProperty("filter")?c:n.filter(c,function(c){var k=p.parse(g.filter),d;for(d in k){if(!c.hasOwnProperty(d))return!1;var l=o.trim(c[d]),a;a=l;a=""+new Date(a)==a?"Date":q.test(""+a)?"IsoDate":r.test(""+a)?"IsoDatetime":void 0;var m=k[d],h;for(h in m){var b;
a:{b=h;var i=a,e=l,f=m[h];switch(i){case "IsoDate":case "IsoDatetime":e=j.datetimeToJsDate(e),f=j.datetimeToJsDate(f),i="Date"}switch(i){case "Date":switch(b){case "!ge":b=(new Date(e)).getTime()>=(new Date(f)).getTime();break a;case "!lt":b=(new Date(e)).getTime()<(new Date(f)).getTime();break a}}b=!1}if(!b)return!1}}return!0})}}});