//>>built
(function(i,k){var j,h,c=function(){},e=function(a){for(var d in a)return 0;return 1},g={}.toString,b=function(a){return"[object Function]"==g.call(a)},f=function(a){return"[object String]"==g.call(a)},a=function(a){return"[object Array]"==g.call(a)},d=function(a,d){if(a)for(var b=0;b<a.length;)d(a[b++])},l=function(a,d){for(var b in d)a[b]=d[b];return a},p=function(a,d){return l(Error(a),{src:"dojoLoader",info:d})},r=1,n=function(){return"_"+r++},m=function(a,d,b){return Ba(a,d,b,0,m)},o=this,s=
o.document,t=s&&s.createElement("DiV"),q=m.has=function(a){return b(u[a])?u[a]=u[a](o,s,t):u[a]},u=q.cache=k.hasCache;q.add=function(a,d,b,f){(void 0===u[a]||f)&&(u[a]=d);return b&&q(a)};for(var v in i.has)q.add(v,i.has[v],0,1);m.async=1;var y=new Function("return eval(arguments[0]);");m.eval=function(a,d){return y(a+"\r\n////@ sourceURL="+d)};var x={},L=m.signal=function(b,f){var l=x[b];d(l&&l.slice(0),function(d){d.apply(null,a(f)?f:[f])})},z=m.on=function(a,d){var b=x[a]||(x[a]=[]);b.push(d);return{remove:function(){for(var a=
0;a<b.length;a++)if(b[a]===d){b.splice(a,1);break}}}},U=[],S={},V=[],ka={},D=m.map={},E=[],B={},F="",P={},N={};v={};var K=function(a){var d,b,f,l;for(d in N)b=N[d],(f=d.match(/^url\:(.+)/))?P["url:"+fb(f[1],a)]=b:"*now"==d?l=b:"*noref"!=d&&(f=La(d,a),P[f.mid]=P["url:"+f.url]=b);l&&l(Ca(a));N={}},G=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(a){return"\\"+a})},Y=function(a,d){d.splice(0,d.length);for(var b in a)d.push([b,a[b],RegExp("^"+G(b)+"(/|$)"),b.length]);d.sort(function(a,
d){return d[3]-a[3]});return d},H=function(a){var d=a.name;d||(d=a,a={name:d});a=l({main:"main"},a);a.location=a.location?a.location:d;if(a.packageMap)D[d]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);ka[d]=a},Q=[],ia=function(a,b,c){for(var e in a){if("waitSeconds"==e)m.waitms=1E3*(a[e]||0);"cacheBust"==e&&(F=a[e]?f(a[e])?a[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)m[e]=a[e];a[e]!==u&&(m.rawConfig[e]=a[e],"has"!=e&&q.add("config-"+e,a[e],0,b))}if(!m.baseUrl)m.baseUrl=
"./";/\/$/.test(m.baseUrl)||(m.baseUrl+="/");for(e in a.has)q.add(e,a.has[e],0,b);d(a.packages,H);for(h in a.packagePaths)d(a.packagePaths[h],function(a){var d=h+"/"+a;f(a)&&(a={name:a});a.location=d;H(a)});Y(l(D,a.map),E);d(E,function(a){a[1]=Y(a[1],[]);if("*"==a[0])E.star=a[1]});Y(l(S,a.paths),V);d(a.aliases,function(a){f(a[0])&&(a[0]=RegExp("^"+G(a[0])+"$"));U.push(a)});if(b)Q.push({config:a.config});else for(e in a.config)b=va(e,c),b.config=l(b.config||{},a.config[e]);if(a.cache)K(),N=a.cache,
a.cache["*noref"]&&K();L("config",[a,m.rawConfig])};if(q("dojo-cdn")){var R=s.getElementsByTagName("script");j=0;for(var O,Z,aa,qa;j<R.length;)if(O=R[j++],(aa=O.getAttribute("src"))&&(qa=aa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){Z=qa[3]||"";k.baseUrl=k.baseUrl||Z;(aa=O.getAttribute("data-dojo-config")||O.getAttribute("djConfig"))&&(v=m.eval("({ "+aa+" })","data-dojo-config"));break}}m.rawConfig={};ia(k,1);if(q("dojo-cdn"))(ka.dojo.location=Z)&&(Z+="/"),ka.dijit.location=Z+"../dijit/",ka.dojox.location=
Z+"../dojox/";ia(i,1);ia(v,1);var ma=function(a){Ua(function(){d(a.deps,gb)})},Ba=function(d,b,e,g,o){var h;if(f(d)){if((h=va(d,g,!0))&&h.executed)return h.result;throw p("undefinedModule",d);}a(d)||(ia(d,0,g),d=b,b=e);if(a(d))if(d.length){for(var e="require*"+n(),q,s=[],i=0;i<d.length;)q=d[i++],s.push(va(q,g));h=l(la("",e,0,""),{injected:2,deps:s,def:b||c,require:g?g.require:m,gc:1});B[h.mid]=h;ma(h);var r=Da&&0!="sync";Ua(function(){Ma(h,r)});h.executed||na.push(h);ba()}else b&&b();return o},Ca=
function(a){if(!a)return m;var d=a.require;if(!d)d=function(b,f,l){return Ba(b,f,l,a,d)},a.require=l(d,m),d.module=a,d.toUrl=function(d){return fb(d,a)},d.toAbsMid=function(d){return hb(d,a)};return d},na=[],ra=[],fa={},Db=function(a){a.injected=1;fa[a.mid]=1;a.url&&(fa[a.url]=a.pack||1);gc()},Na=function(a){a.injected=2;delete fa[a.mid];a.url&&delete fa[a.url];e(fa)&&ib()},jb=m.idle=function(){return!ra.length&&e(fa)&&!na.length&&!Da},Oa=function(a,d){if(d)for(var b=0;b<d.length;b++)if(d[b][2].test(a))return d[b];
return 0},Va=function(a){for(var d=[],b,f,a=a.replace(/\\/g,"/").split("/");a.length;)b=a.shift(),".."==b&&d.length&&".."!=f?(d.pop(),f=d[d.length-1]):"."!=b&&d.push(f=b);return d.join("/")},la=function(a,d,b,f){return{pid:a,mid:d,pack:b,url:f,executed:0,def:0}},kb=function(a,f,l,c,e,g,h,o){var n,m,q,s;s=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||s&&!f)return la(0,a,0,a);a=Va(s?f.mid+"/../"+a:a);if(/^\./.test(a))throw p("irrationalPath",a);f&&(q=Oa(f.mid,g));(q=(q=q||g.star)&&Oa(a,q[1]))&&(a=
q[1]+a.substring(q[3]));f=(qa=a.match(/^([^\/]+)(\/(.+))?$/))?qa[1]:"";(n=l[f])?a=f+"/"+(m=qa[3]||n.main):f="";var i=0;d(U,function(d){var f=a.match(d[0]);f&&0<f.length&&(i=b(d[1])?a.replace(d[0],d[1]):d[1])});if(i)return kb(i,0,l,c,e,g,h,o);if(l=c[a])return o?la(l.pid,l.mid,l.pack,l.url):c[a];c=(q=Oa(a,h))?q[1]+a.substring(q[3]):f?n.location+"/"+m:a;/(^\/)|(\:)/.test(c)||(c=e+c);return la(f,a,n,Va(c+".js"))},La=function(a,d){return kb(a,d,ka,B,m.baseUrl,E,V)},lb=function(a,d,b){return a.normalize?
a.normalize(d,function(a){return hb(a,b)}):hb(d,b)},mb=0,va=function(a,d,b){var f,l;(f=a.match(/^(.+?)\!(.*)$/))?(l=va(f[1],d,b),5===l.executed&&!l.load&&xa(l),l.load?(f=lb(l,f[2],d),a=l.mid+"!"+(l.dynamic?++mb+"!":"")+f):(f=f[2],a=l.mid+"!"+ ++mb+"!waitingForPlugin"),a={plugin:l,mid:a,req:Ca(d),prid:f}):a=La(a,d);return B[a.mid]||!b&&(B[a.mid]=a)},hb=m.toAbsMid=function(a,d){return La(a,d).mid},fb=m.toUrl=function(a,d){var b=La(a+"/x",d),f=b.url;return Ea(0===b.pid?a:f.substring(0,f.length-5))},
nb={injected:2,executed:5,def:3,result:3};Z=function(a){return B[a]=l({mid:a},nb)};var Eb=Z("require"),ic=Z("exports"),Fb=Z("module"),pa={},Wa=0,xa=function(a){var d=a.result;a.dynamic=d.dynamic;a.normalize=d.normalize;a.load=d.load;return a},Xa=function(a){var b={};d(a.loadQ,function(d){var f=lb(a,d.prid,d.req.module),c=a.dynamic?d.mid.replace(/waitingForPlugin$/,f):a.mid+"!"+f,f=l(l({},d),{mid:c,prid:f,injected:0});B[c]||Pa(B[c]=f);b[d.mid]=B[c];Na(d);delete B[d.mid]});a.loadQ=0;var f=function(a){for(var d=
a.deps||[],f=0;f<d.length;f++)(a=b[d[f].mid])&&(d[f]=a)},c;for(c in B)f(B[c]);d(na,f)},ob=function(a){m.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Wa++;a.loadQ&&(xa(a),Xa(a));for(j=0;j<na.length;)na[j]===a?na.splice(j,1):j++;/^require\*/.test(a.mid)&&delete B[a.mid]},pb=[],Ma=function(a,d){if(4===a.executed)return m.trace("loader-circular-dependency",[pb.concat(a.mid).join("->")]),!a.def||d?pa:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return pa;var f=a.mid,l=a.deps||[],c,e=[],
g=0;for(a.executed=4;g<l.length;){c=l[g++];c=c===Eb?Ca(a):c===ic?a.cjs.exports:c===Fb?a.cjs:Ma(c,d);if(c===pa)return a.executed=0,m.trace("loader-exec-module",["abort",f]),pa;e.push(c)}m.trace("loader-run-factory",[a.mid]);f=a.def;e=b(f)?f.apply(null,e):f;a.result=void 0===e&&a.cjs?a.cjs.exports:e;ob(a)}return a.result},Da=0,Ua=function(a){try{Da++,a()}finally{Da--}jb()&&L("idle",[])},ba=function(){Da||Ua(function(){for(var a,d,b=0;b<na.length;)a=Wa,d=na[b],Ma(d),a!=Wa?b=0:b++})};void 0===q("dojo-loader-eval-hint-url")&&
q.add("dojo-loader-eval-hint-url",1);var Ea=function(a){a+="";return a+(F?(/\?/.test(a)?"&":"?")+F:"")},Pa=function(a){var d=a.plugin;5===d.executed&&!d.load&&xa(d);var b=function(d){a.result=d;Na(a);ob(a);ba()};d.load?d.load(a.prid,a.req,b):d.loadQ?d.loadQ.push(a):(d.loadQ=[a],na.unshift(d),gb(d))},ya=0,qb=0,Ya=0,Gb=function(a,d){q("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));Ya=1;a===ya?ya.call(null):m.eval(a,q("dojo-loader-eval-hint-url")?d.url:d.mid);Ya=0},gb=function(a){var d=a.mid,
b=a.url;if(!a.executed&&!a.injected&&!(fa[d]||a.url&&(a.pack&&fa[a.url]===a.pack||1==fa[a.url])))if(Db(a),a.plugin)Pa(a);else{var f=function(){rb(a);2!==a.injected&&(Na(a),l(a,nb),m.trace("loader-define-nonmodule",[a.url]));ba()};(ya=P[d]||P["url:"+a.url])?(m.trace("loader-inject",["cache",a.mid,b]),Gb(ya,a),f()):(m.trace("loader-inject",["script",a.mid,b]),qb=a,m.injectUrl(Ea(b),f,a),qb=0)}},Za=function(a,d,f){m.trace("loader-define-module",[a.mid,d]);if(2===a.injected)return L("error",p("multipleDefine",
a)),a;l(a,{deps:d,def:f,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(d){a.cjs.exports=d},config:function(){return a.config}}});for(var c=0;c<d.length;c++)d[c]=va(d[c],a);Na(a);if(!b(f)&&!d.length)a.result=f,ob(a);return a},rb=function(a,b){for(var f=[],l,c;ra.length;)c=ra.shift(),b&&(c[0]=b.shift()),l=c[0]&&va(c[0])||a,f.push([l,c[1],c[2]]);K(a);d(f,function(a){ma(Za.apply(null,a))})},ib=c,gc=c;q.add("ie-event-behavior",!!s.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=
opera.toString()));var sb=function(a,d,b,f){if(q("ie-event-behavior"))return a.attachEvent(b,f),function(){a.detachEvent(b,f)};a.addEventListener(d,f,!1);return function(){a.removeEventListener(d,f,!1)}},Hb=sb(window,"load","onload",function(){m.pageLoaded=1;"complete"!=s.readyState&&(s.readyState="complete");Hb()}),$a=s.getElementsByTagName("script")[0],ab=$a.parentNode;m.injectUrl=function(a,d,b){var b=b.node=s.createElement("script"),f=sb(b,"load","onreadystatechange",function(a){var a=a||window.event,
b=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(b.readyState))f(),l(),d&&d()}),l=sb(b,"error","onerror",function(d){f();l();L("error",p("scriptError",[a,d]))});b.type="text/javascript";b.charset="utf-8";b.src=a;ab.insertBefore(b,$a);return b};m.log=c;m.trace=c;Z=function(a,d,l){var c=arguments.length,e=["require","exports","module"],g=[0,a,d];1==c?g=[0,b(a)?e:[],a]:2==c&&f(a)?g=[a,b(d)?e:[],d]:3==c&&(g=[a,d,l]);m.trace("loader-define",g.slice(0,2));if((c=g[0]&&va(g[0]))&&!fa[c.mid])ma(Za(c,
g[1],g[2]));else if(!q("ie-event-behavior")||Ya)ra.push(g);else{c=c||qb;if(!c)for(a in fa)if((e=B[a])&&e.node&&"interactive"===e.node.readyState){c=e;break}c?(K(c),ma(Za(c,g[1],g[2]))):L("error",p("ieDefineFailed",g[0]));ba()}};Z.amd={vendor:"dojotoolkit.org"};l(l(m,k.loaderPatch),i.loaderPatch);z("error",function(a){try{if(console.error(a),a instanceof Error)for(var d in a);}catch(b){}});l(m,{uid:n,cache:P,packs:ka});if(!o.define)o.define=Z,o.require=m,d(Q,function(a){ia(a)}),z=v.deps||i.deps||k.deps,
v=v.callback||i.callback||k.callback,m.boot=z||v?[z||[],v]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../phpr",main:"run",name:"phpr"},{location:"../d3",name:"d3"}]});
require({cache:{"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,require,./_base/browser,require".split(","),function(i,k,j,h,c,e,g){g.isDebug&&j(["./_firebug/firebug"]);return i})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(i,k,j,h){var c,i={},e={},g={config:k,global:this,dijit:i,dojox:e},i={dojo:["dojo",g],dijit:["dijit",
i],dojox:["dojox",e]},h=j.map&&j.map[h.id.match(/[^\/]+/)[0]];for(c in h)i[c]?i[c][0]=h[c]:i[c]=[h[c],{}];for(c in i)h=i[c],h[1]._scopeName=h[0],k.noGlobals||(this[h[0]]=h[1]);g.scopeMap=i;g.baseUrl=g.config.baseUrl=j.baseUrl;g.isAsync=j.async;g.locale=k.locale;k="$Rev: 29801 $".match(/\d+/);g.version={major:1,minor:0,patch:0,flag:"",revision:k?+k[0]:NaN,toString:function(){var b=g.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(g);
g.exit=function(){};"undefined"!=typeof console||(console={});for(var j="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),b,k=0;b=j[k++];)console[b]||function(){var f=b+"";console[f]="log"in console?function(){var a=Array.apply({},arguments);a.unshift(f+":");console.log(a.join(" "))}:function(){};console[f]._fake=!0}();g.deprecated=g.experimental=function(){};g._hasResource={};return g})},"dojo/has":function(){define(["require","module"],
function(i){var k=i.has||function(){};k.add("dom-addeventlistener",!!document.addEventListener);k.add("touch","ontouchstart"in document);k.add("device-width",screen.availWidth||innerWidth);i=document.createElement("form");k.add("dom-attributes-explicit",0==i.attributes.length);k.add("dom-attributes-specified-flag",0<i.attributes.length&&40>i.attributes.length);k.clearElement=function(i){i.innerHTML="";return i};k.normalize=function(i,h){var c=i.match(/[\?:]|[^:\?]*/g),e=0,g=function(b){var f=c[e++];
if(":"==f)return 0;if("?"==c[e++]){if(!b&&k(f))return g();g(!0);return g(b)}return f||0};return(i=g())&&h(i)};k.load=function(i,h,c){i?h([i],c):c()};return k})},"dojo/_base/config":function(){define(["../has","require"],function(i,k){var j={},h=k.rawConfig,c;for(c in h)j[c]=h[c];return j})},"dojo/sniff":function(){define(["./has"],function(i){var k=navigator,j=k.userAgent,k=k.appVersion,h=parseFloat(k);i.add("air",0<=j.indexOf("AdobeAIR"));i.add("khtml",0<=k.indexOf("Konqueror")?h:void 0);i.add("webkit",
parseFloat(j.split("WebKit/")[1])||void 0);i.add("chrome",parseFloat(j.split("Chrome/")[1])||void 0);i.add("safari",0<=k.indexOf("Safari")&&!i("chrome")?parseFloat(k.split("Version/")[1]):void 0);i.add("mac",0<=k.indexOf("Macintosh"));i.add("quirks","BackCompat"==document.compatMode);i.add("ios",/iPhone|iPod|iPad/.test(j));i.add("android",parseFloat(j.split("Android ")[1])||void 0);if(!i("webkit")){0<=j.indexOf("Opera")&&i.add("opera",9.8<=h?parseFloat(j.split("Version/")[1])||h:h);0<=j.indexOf("Gecko")&&
!i("khtml")&&!i("webkit")&&i.add("mozilla",h);i("mozilla")&&i.add("ff",parseFloat(j.split("Firefox/")[1]||j.split("Minefield/")[1])||void 0);if(document.all&&!i("opera"))j=parseFloat(k.split("MSIE ")[1])||void 0,(k=document.documentMode)&&5!=k&&Math.floor(j)!=k&&(j=k),i.add("ie",j);i.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return i})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(i,k){k.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;
return 1});var j=k("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],h=j.length,c=function(a,d,b){var f,c=0,e=i.global;if(!b)if(a.length){f=a[c++];try{b=i.scopeMap[f]&&i.scopeMap[f][1]}catch(g){}b=b||(f in e?e[f]:d?e[f]={}:void 0)}else return e;for(;b&&(f=a[c++]);)b=f in b?b[f]:d?b[f]={}:void 0;return b},e=Object.prototype.toString,g=function(a,d,b){return(b||[]).concat(Array.prototype.slice.call(a,d||0))},b=
/\{([^\}]+)\}/g,f={_extraNames:j,_mixin:function(a,d,b){var f,c,e,g={};for(f in d)if(c=d[f],!(f in a)||a[f]!==c&&(!(f in g)||g[f]!==c))a[f]=b?b(c):c;if(k("bug-for-in-skips-shadowed")&&d)for(e=0;e<h;++e)if(f=j[e],c=d[f],!(f in a)||a[f]!==c&&(!(f in g)||g[f]!==c))a[f]=b?b(c):c;return a},mixin:function(a,d){a||(a={});for(var b=1,c=arguments.length;b<c;b++)f._mixin(a,arguments[b]);return a},setObject:function(a,d,b){var f=a.split("."),a=f.pop();return(b=c(f,!0,b))&&a?b[a]=d:void 0},getObject:function(a,
d,b){return c(a.split("."),d,b)},exists:function(a,d){return void 0!==f.getObject(a,!1,d)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===e.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||f.isArray(a)||f.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!f.isString(a)&&!f.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&
(f.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!f.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,d){for(var b=1,c=arguments.length;b<c;b++)f._mixin(a.prototype,arguments[b]);return a},_hitchArgs:function(a,d){var b=f._toArray(arguments,2),c=f.isString(d);return function(){var e=f._toArray(arguments),g=c?(a||i.global)[d]:d;return g&&g.apply(a||this,b.concat(e))}},hitch:function(a,d){if(2<arguments.length)return f._hitchArgs.apply(i,arguments);d||(d=a,a=
null);if(f.isString(d)){a=a||i.global;if(!a[d])throw['lang.hitch: scope["',d,'"] is null (scope="',a,'")'].join("");return function(){return a[d].apply(a,arguments||[])}}return!a?d:function(){return d.apply(a,arguments||[])}},delegate:function(){function a(){}return function(d,b){a.prototype=d;var c=new a;a.prototype=null;b&&f._mixin(c,b);return c}}(),_toArray:k("ie")?function(){function a(a,b,f){f=f||[];for(b=b||0;b<a.length;b++)f.push(a[b]);return f}return function(d){return(d.item?a:g).apply(this,
arguments)}}():g,partial:function(a){return f.hitch.apply(i,[null].concat(f._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||f.isFunction(a))return a;if(a.nodeType&&"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var d,b,c;if(f.isArray(a)){d=[];for(b=0,c=a.length;b<c;++b)b in a&&d.push(f.clone(a[b]))}else d=a.constructor?new a.constructor:{};return f._mixin(d,a,f.clone)},trim:String.prototype.trim?
function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,d,c){return a.replace(c||b,f.isFunction(d)?d:function(a,b){return f.getObject(b,!1,d)})}};f.mixin(i,f);return f})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(i,k,j){function h(a){return g[a]=new Function("item","index","array",a)}function c(a){var d=!a;return function(b,f,c){var e=0,m=b&&b.length||0,o;m&&"string"==typeof b&&(b=b.split(""));"string"==typeof f&&
(f=g[f]||h(f));if(c)for(;e<m;++e){if(o=!f.call(c,b[e],e,b),a^o)return!o}else for(;e<m;++e)if(o=!f(b[e],e,b),a^o)return!o;return d}}function e(a){var d=1,c=0,e=0;a||(d=c=e=-1);return function(g,h,m,o){if(o&&0<d)return f.lastIndexOf(g,h,m);var o=g&&g.length||0,s=a?o+e:c;m===b?m=a?c:o+e:0>m?(m=o+m,0>m&&(m=c)):m=m>=o?o+e:m;for(o&&"string"==typeof g&&(g=g.split(""));m!=s;m+=d)if(g[m]==h)return m;return-1}}var g={},b,f={every:c(!1),some:c(!0),indexOf:e(!0),lastIndexOf:e(!1),forEach:function(a,d,b){var f=
0,c=a&&a.length||0;c&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&(d=g[d]||h(d));if(b)for(;f<c;++f)d.call(b,a[f],f,a);else for(;f<c;++f)d(a[f],f,a)},map:function(a,d,b,f){var c=0,e=a&&a.length||0,f=new (f||Array)(e);e&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&(d=g[d]||h(d));if(b)for(;c<e;++c)f[c]=d.call(b,a[c],c,a);else for(;c<e;++c)f[c]=d(a[c],c,a);return f},filter:function(a,d,b){var f=0,c=a&&a.length||0,e=[],m;c&&"string"==typeof a&&(a=a.split(""));"string"==typeof d&&
(d=g[d]||h(d));if(b)for(;f<c;++f)m=a[f],d.call(b,m,f,a)&&e.push(m);else for(;f<c;++f)m=a[f],d(m,f,a)&&e.push(m);return e},clearCache:function(){g={}}};j.mixin(i,f);return f})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(i,k,j,h,c){var e=0,g,b=[],f=0,a=function(){if(e&&!f&&b.length){f=1;var d=b.shift();try{d()}finally{f=0}f=0;b.length&&g(a)}};j.on("idle",a);g=function(){j.idle()&&a()};var k=i.ready=i.addOnLoad=function(a,d,f){var e=c._toArray(arguments);
"number"!=typeof a?(f=d,d=a,a=1E3):e.shift();f=f?c.hitch.apply(i,e):function(){d()};f.priority=a;for(e=0;e<b.length&&a>=b[e].priority;e++);b.splice(e,0,f);g()},d=i.config.addOnLoad;if(d)k[c.isArray(d)?"apply":"call"](i,d);h(function(){e=1;i._postLoad=i.config.afterOnLoad=!0;b.length&&g(a)});return k})},"dojo/domReady":function(){define(["./has"],function(i){function k(a){g?a(h):b.push(a)}var j=this,h=document,c={loaded:1,complete:1},e="string"!=typeof h.readyState,g=!!c[h.readyState];if(e)h.readyState=
"loading";if(!g){var b=[],f=[],a=function(a){a=a||j.event;if(!(g||"readystatechange"==a.type&&!c[h.readyState])){g=1;if(e)h.readyState="complete";for(;b.length;)b.shift()(h)}},d=function(d,f){d.addEventListener(f,a,!1);b.push(function(){d.removeEventListener(f,a,!1)})};if(!i("dom-addeventlistener")){var d=function(d,f){f="on"+f;d.attachEvent(f,a);b.push(function(){d.detachEvent(f,a)})},l=h.createElement("div");try{l.doScroll&&null===j.frameElement&&f.push(function(){try{return l.doScroll("left"),
1}catch(a){}})}catch(p){}}d(h,"DOMContentLoaded");d(j,"load");"onreadystatechange"in h?d(h,"readystatechange"):e||f.push(function(){return c[h.readyState]});if(f.length){var r=function(){if(!g){for(var d=f.length;d--;)if(f[d]()){a("poller");return}setTimeout(r,30)}};r()}}k.load=function(a,d,b){k(b)};return k})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(i,k,j){function h(a,d){throw Error("declare"+(d?" "+d:"")+": "+a);}function c(a,d,b){var f,c,e,l,g,o,n,p=this._inherited=
this._inherited||{};"string"==typeof a&&(f=a,a=d,d=b);b=0;l=a.callee;(f=f||l.nom)||h("can't deduce a name to call inherited()",this.declaredClass);g=this.constructor._meta;e=g.bases;n=p.p;if(f!=x){if(p.c!==l&&(n=0,o=e[0],g=o._meta,g.hidden[f]!==l)){(c=g.chains)&&"string"==typeof c[f]&&h("calling chained method with inherited: "+f,this.declaredClass);do if(g=o._meta,c=o.prototype,g&&(c[f]===l&&c.hasOwnProperty(f)||g.hidden[f]===l))break;while(o=e[++n]);n=o?n:-1}if(o=e[++n])if(c=o.prototype,o._meta&&
c.hasOwnProperty(f))b=c[f];else{l=q[f];do if(c=o.prototype,(b=c[f])&&(o._meta?c.hasOwnProperty(f):b!==l))break;while(o=e[++n])}b=o&&b||q[f]}else{if(p.c!==l&&(n=0,(g=e[0]._meta)&&g.ctor!==l)){c=g.chains;for((!c||"manual"!==c.constructor)&&h("calling chained constructor with inherited",this.declaredClass);(o=e[++n])&&!((g=o._meta)&&g.ctor===l););n=o?n:-1}for(;(o=e[++n])&&!(b=(g=o._meta)?g.ctor:o););b=o&&b}p.c=b;p.p=n;if(b)return!0===d?b:b.apply(this,d||a)}function e(a,d){return"string"==typeof a?this.__inherited(a,
d,!0):this.__inherited(a,!0)}function g(a,d,b){var f=this.getInherited(a,d);if(f)return f.apply(this,b||d||a)}function b(a){for(var d=this.constructor._meta.bases,b=0,f=d.length;b<f;++b)if(d[b]===a)return!0;return this instanceof a}function f(a,d){for(var b in d)b!=x&&d.hasOwnProperty(b)&&(a[b]=d[b]);if(k("bug-for-in-skips-shadowed"))for(var f=j._extraNames,c=f.length;c;)b=f[--c],b!=x&&d.hasOwnProperty(b)&&(a[b]=d[b])}function a(a){s.safeMixin(this.prototype,a);return this}function d(a){return s([this].concat(a))}
function l(a,d){return function(){var w;var b=arguments,f=b,c=b[0],e,l;l=a.length;var g;if(!(this instanceof b.callee))return o(b);if(d&&(c&&c.preamble||this.preamble)){g=Array(a.length);g[0]=b;for(e=0;;){if(c=b[0])(c=c.preamble)&&(b=c.apply(this,b)||b);c=a[e].prototype;(c=c.hasOwnProperty("preamble")&&c.preamble)&&(b=c.apply(this,b)||b);if(++e==l)break;g[e]=b}}for(e=l-1;0<=e;--e)c=a[e],(w=(l=c._meta)?l.ctor:c,c=w)&&c.apply(this,g?g[e]:b);(c=this.postscript)&&c.apply(this,f)}}function p(a,d){return function(){var b=
arguments,f=b,c=b[0];if(!(this instanceof b.callee))return o(b);if(d){if(c)(c=c.preamble)&&(f=c.apply(this,f)||f);(c=this.preamble)&&c.apply(this,f)}a&&a.apply(this,b);(c=this.postscript)&&c.apply(this,b)}}function r(a){return function(){var w;var d=arguments,b=0,f,c;if(!(this instanceof d.callee))return o(d);for(;f=a[b];++b)if(w=(c=f._meta)?c.ctor:f,f=w){f.apply(this,d);break}(f=this.postscript)&&f.apply(this,d)}}function n(a,d,b){return function(){var f,c,e=0,l=1;b&&(e=d.length-1,l=-1);for(;f=d[e];e+=
l)c=f._meta,(f=(c?c.hidden:f.prototype)[a])&&f.apply(this,arguments)}}function m(a){v.prototype=a.prototype;a=new v;v.prototype=null;return a}function o(a){var d=a.callee,b=m(d);d.apply(b,a);return b}function s(g,o,i){"string"!=typeof g&&(i=o,o=g,g="");var i=i||{},k,v,D,E,B,F,P,N=1,K=o;if("[object Array]"==u.call(o)){N=g;D=[];E=[{cls:0,refs:[]}];F={};for(var G=1,Y=o.length,H=0,Q,ia,R,O;H<Y;++H){(Q=o[H])?"[object Function]"!=u.call(Q)&&h("mixin #"+H+" is not a callable constructor.",N):h("mixin #"+
H+" is unknown. Did you use dojo.require to pull it in?",N);ia=Q._meta?Q._meta.bases:[Q];R=0;for(Q=ia.length-1;0<=Q;--Q){O=ia[Q].prototype;if(!O.hasOwnProperty("declaredClass"))O.declaredClass="uniqName_"+y++;O=O.declaredClass;F.hasOwnProperty(O)||(F[O]={count:0,refs:[],cls:ia[Q]},++G);O=F[O];R&&R!==O&&(O.refs.push(R),++R.count);R=O}++R.count;E[0].refs.push(R)}for(;E.length;){R=E.pop();D.push(R.cls);for(--G;v=R.refs,1==v.length;){R=v[0];if(!R||--R.count){R=0;break}D.push(R.cls);--G}if(R)for(H=0,Y=
v.length;H<Y;++H)R=v[H],--R.count||E.push(R)}G&&h("can't build consistent linearization",N);Q=o[0];D[0]=Q?Q._meta&&Q===D[D.length-Q._meta.bases.length]?Q._meta.bases.length:1:0;F=D;D=F[0];N=F.length-D;o=F[N]}else F=[0],o?"[object Function]"==u.call(o)?(D=o._meta,F=F.concat(D?D.bases:o)):h("base class is not a callable constructor.",g):null!==o&&h("unknown base class. Did you use dojo.require to pull it in?",g);if(o)for(v=N-1;;--v){k=m(o);if(!v)break;D=F[v];(D._meta?f:t)(k,D.prototype);E=new Function;
E.superclass=o;E.prototype=k;o=k.constructor=E}else k={};s.safeMixin(k,i);D=i.constructor;if(D!==q.constructor)D.nom=x,k.constructor=D;for(v=N-1;v;--v)(D=F[v]._meta)&&D.chains&&(P=t(P||{},D.chains));k["-chains-"]&&(P=t(P||{},k["-chains-"]));D=!P||!P.hasOwnProperty(x);F[0]=E=P&&"manual"===P.constructor?r(F):1==F.length?p(i.constructor,D):l(F,D);E._meta={bases:F,hidden:i,chains:P,parents:K,ctor:i.constructor};E.superclass=o&&o.prototype;E.extend=a;E.createSubclass=d;E.prototype=k;k.constructor=E;k.getInherited=
e;k.isInstanceOf=b;k.inherited=L;k.__inherited=c;if(g)k.declaredClass=g,j.setObject(g,E);if(P)for(B in P)if(k[B]&&"string"==typeof P[B]&&B!=x)D=k[B]=n(B,F,"after"===P[B]),D.nom=B;return E}var t=j.mixin,q=Object.prototype,u=q.toString,v=new Function,y=0,x="constructor",L=i.config.isDebug?g:c;i.safeMixin=s.safeMixin=function(a,d){var b,f;for(b in d)if(f=d[b],(f!==q[b]||!(b in q))&&b!=x){if("[object Function]"==u.call(f))f.nom=b;a[b]=f}if(k("bug-for-in-skips-shadowed"))for(var c=j._extraNames,e=c.length;e;)if(b=
c[--e],f=d[b],(f!==q[b]||!(b in q))&&b!=x){if("[object Function]"==u.call(f))f.nom=b;a[b]=f}return a};return i.declare=s})},"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(i,k,j,h,c,e,g,b){function f(a,d,f,c,l){c=b.hitch(f,c);if(!a||!a.addEventListener&&!a.attachEvent)return h.after(a||i.global,d,c,!0);"string"==typeof d&&"on"==d.substring(0,2)&&(d=d.substring(2));if(!a)a=i.global;if(!l)switch(d){case "keypress":d=
r;break;case "mouseenter":d=e.enter;break;case "mouseleave":d=e.leave}return k(a,d,c,l)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}g.add("events-keypress-typed",function(){var a={charCode:0};try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(d){}return 0==a.charCode&&!g("opera")});var d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,
220:92,221:93,222:39,229:113},l=g("mac")?"metaKey":"ctrlKey",p=function(d,f){var c=b.mixin({},d,f);a(c);c.preventDefault=function(){d.preventDefault()};c.stopPropagation=function(){d.stopPropagation()};return c},r;r=g("events-keypress-typed")?function(a,b){var f=k(a,"keydown",function(a){var f=a.keyCode,c=13!=f&&32!=f&&(27!=f||!g("ie"))&&(48>f||90<f)&&(96>f||111<f)&&(186>f||192<f)&&(219>f||222<f)&&229!=f;if(c||a.ctrlKey){c=c?0:f;if(a.ctrlKey){if(3==f||13==f)return b.call(a.currentTarget,a);c=95<c&&
106>c?c-48:!a.shiftKey&&65<=c&&90>=c?c+32:d[c]||c}f=p(a,{type:"keypress",faux:!0,charCode:c});b.call(a.currentTarget,f);if(g("ie"))try{a.keyCode=f.keyCode}catch(e){}}}),c=k(a,"keypress",function(a){var d=a.charCode,a=p(a,{charCode:32<=d?d:0,faux:!0});return b.call(this,a)});return{remove:function(){f.remove();c.remove()}}}:g("opera")?function(a,d){return k(a,"keypress",function(a){var b=a.which;3==b&&(b=99);b=32>b&&!a.shiftKey?0:b;a.ctrlKey&&!a.shiftKey&&65<=b&&90>=b&&(b+=32);return d.call(this,p(a,
{charCode:b}))})}:function(d,b){return k(d,"keypress",function(d){a(d);return b.call(this,d)})};var n={_keypress:r,connect:function(a,d,b,c,e){var l=arguments,g=[],h=0;g.push("string"==typeof l[0]?null:l[h++],l[h++]);var n=l[h+1];g.push("string"==typeof n||"function"==typeof n?l[h++]:null,l[h++]);for(n=l.length;h<n;h++)g.push(l[h]);return f.apply(this,g)},disconnect:function(a){a&&a.remove()},subscribe:function(a,d,f){return j.subscribe(a,b.hitch(d,f))},publish:function(a,d){return j.publish.apply(j,
[a].concat(d))},connectPublisher:function(a,d,b){var f=function(){n.publish(a,arguments)};return b?n.connect(d,b,f):n.connect(d,f)},isCopyKey:function(a){return a[l]}};n.unsubscribe=n.disconnect;b.mixin(i,n);return n})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(i,k,j){function h(a,d,c,e,g){if(e=d.match(/(.*):(.*)/))return d=e[2],e=e[1],b.selector(e,d).call(g,a,c);j("touch")&&(f.test(d)&&(c=y(c)),!j("event-orientationchange")&&"orientationchange"==
d&&(d="resize",a=window,c=y(c)));r&&(c=r(c));if(a.addEventListener){var h=d in l,o=h?l[d]:d;a.addEventListener(o,c,h);return{remove:function(){a.removeEventListener(o,c,h)}}}if(s&&a.attachEvent)return s(a,"on"+d,c);throw Error("Target must be an event emitter");}function c(){this.cancelable=!1}function e(){this.bubbles=!1}var g=window.ScriptEngineMajorVersion;j.add("jscript",g&&g()+ScriptEngineMinorVersion()/10);j.add("event-orientationchange",j("touch")&&!j("android"));j.add("event-stopimmediatepropagation",
window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var b=function(a,d,f,c){return"function"==typeof a.on&&"function"!=typeof d?a.on(d,f):b.parse(a,d,f,h,c,this)};b.pausable=function(a,d,f,c){var e,a=b(a,d,function(){if(!e)return f.apply(this,arguments)},c);a.pause=function(){e=!0};a.resume=function(){e=!1};return a};b.once=function(a,d,f){var c=b(a,d,function(){c.remove();return f.apply(this,arguments)});return c};b.parse=function(a,d,b,f,c,e){if(d.call)return d.call(e,
a,b);if(-1<d.indexOf(",")){for(var d=d.split(/\s*,\s*/),l=[],g=0,h;h=d[g++];)l.push(f(a,h,b,c,e));l.remove=function(){for(var a=0;a<l.length;a++)l[a].remove()};return l}return f(a,d,b,c,e)};var f=/^touch/;b.selector=function(a,d,f){return function(c,e){function l(d){for(g=g&&g.matches?g:k.query;!g.matches(d,a,c);)if(d==c||!1===f||!(d=d.parentNode)||1!=d.nodeType)return;return d}var g="function"==typeof a?{matches:a}:this,h=d.bubble;return h?b(c,h(l),e):b(c,d,function(a){var d=l(a.target);return d&&
e.call(d,a)})}};var a=[].slice,d=b.emit=function(d,b,f){var l=a.call(arguments,2),g="on"+b;if("parentNode"in d){var h=l[0]={},o;for(o in f)h[o]=f[o];h.preventDefault=c;h.stopPropagation=e;h.target=d;h.type=b;f=h}do d[g]&&d[g].apply(d,l);while(f&&f.bubbles&&(d=d.parentNode));return f&&f.cancelable&&f},l={};if(!j("event-stopimmediatepropagation"))var p=function(){this.modified=this.immediatelyStopped=!0},r=function(a){return function(d){if(!d.immediatelyStopped)return d.stopImmediatePropagation=p,a.apply(this,
arguments)}};if(j("dom-addeventlistener")){l={focusin:"focus",focusout:"blur"};if(j("opera"))l.keydown="keypress";b.emit=function(a,f,c){if(a.dispatchEvent&&document.createEvent){var e=a.ownerDocument.createEvent("HTMLEvents");e.initEvent(f,!!c.bubbles,!!c.cancelable);for(var l in c)l in e||(e[l]=c[l]);return a.dispatchEvent(e)&&e}return d.apply(b,arguments)}}else{b._fixEvent=function(a,d){if(!a)a=(d&&(d.ownerDocument||d.document||d).parentWindow||window).event;if(!a)return a;n&&a.type==n.type&&(a=
n);if(!a.target){a.target=a.srcElement;a.currentTarget=d||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=t,a.preventDefault=q;switch(a.type){case "keypress":var b="charCode"in a?a.charCode:a.keyCode;10==b?(b=0,a.keyCode=13):13==b||27==b?b=0:3==b&&(b=99);a.charCode=b;b=a;b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}}return a};var n,m=function(a){this.handle=
a};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var o=function(a){return function(d){var d=b._fixEvent(d,this),f=a.call(this,d);d.modified&&(n||setTimeout(function(){n=null}),n=d);return f}},s=function(a,d,b){b=o(b);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>j("jscript"))&&!j("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var f=a[d];if(!f||!f.listeners){var c=f,f=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
f.listeners=[];a[d]=f;f.global=this;c&&f.listeners.push(_dojoIEListeners_.push(c)-1)}f.listeners.push(a=f.global._dojoIEListeners_.push(b)-1);return new m(a)}return i.after(a,d,b,!0)},t=function(){this.cancelBubble=!0},q=b._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(j("touch"))var u=function(){},v=window.orientation,y=function(a){return function(d){var b=d.corrected;if(!b){var f=d.type;try{delete d.type}catch(c){}d.type?
(u.prototype=d,b=new u,b.preventDefault=function(){d.preventDefault()},b.stopPropagation=function(){d.stopPropagation()}):(b=d,b.type=f);d.corrected=b;if("resize"==f){if(v==window.orientation)return null;v=window.orientation;b.type="orientationchange";return a.call(this,b)}if(!("rotation"in b))b.rotation=0,b.scale=1;var f=b.changedTouches[0],e;for(e in f)delete b[e],b[e]=f[e]}return a.call(this,b)}};return b})},"dojo/topic":function(){define(["./Evented"],function(i){var k=new i;return{publish:function(i,
h){return k.emit.apply(k,arguments)},subscribe:function(i,h){return k.on.apply(k,arguments)}}})},"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(i,k){function j(){}var h=i.after;j.prototype={on:function(c,e){return k.parse(this,c,e,function(c,b){return h(c,"on"+b,e,!0)})},emit:function(c,e){var g=[this];g.push.apply(g,arguments);return k.emit.apply(k,g)}};return j})},"dojo/aspect":function(){define("dojo/aspect",[],function(){function i(b,f,a,d){var c=b[f],e="around"==
f,g;if(e){var n=a(function(){return c.advice(this,arguments)});g={remove:function(){g.cancelled=!0},advice:function(a,d){return g.cancelled?c.advice(a,d):n.apply(a,d)}}}else g={remove:function(){var a=g.previous,d=g.next;if(!d&&!a)delete b[f];else if(a?a.next=d:b[f]=d,d)d.previous=a},id:h++,advice:a,receiveArguments:d};if(c&&!e)if("after"==f){for(a=c;a;)c=a,a=a.next;c.next=g;g.previous=c}else{if("before"==f)b[f]=g,g.next=c,c.previous=g}else b[f]=g;return g}function k(b){return function(f,a,d,c){var e=
f[a],g;if(!e||e.target!=f){f[a]=g=function(){for(var a=h,d=arguments,b=g.before;b;)d=b.advice.apply(this,d)||d,b=b.next;if(g.around)var f=g.around.advice(this,d);for(b=g.after;b&&b.id<a;){if(b.receiveArguments)var c=b.advice.apply(this,d),f=c===j?f:c;else f=b.advice.call(this,f,d);b=b.next}return f};if(e)g.around={advice:function(a,d){return e.apply(a,d)}};g.target=f}f=i(g||e,b,d,c);d=null;return f}}var j,h=0,c=k("after"),e=k("before"),g=k("around");return{before:e,around:g,after:c}})},"dojo/_base/event":function(){define(["./kernel",
"../on","../has","../dom-geometry"],function(i,k,j,h){if(k._fixEvent){var c=k._fixEvent;k._fixEvent=function(e,b){(e=c(e,b))&&h.normalizeEvent(e);return e}}var e={fix:function(c,b){return k._fixEvent?k._fixEvent(c,b):c},stop:function(c){j("dom-addeventlistener")||c&&c.preventDefault?(c.preventDefault(),c.stopPropagation()):(c=c||window.event,c.cancelBubble=!0,k._preventDefault.call(c))}};i.fixEvent=e.fix;i.stopEvent=e.stop;return e})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window",
"./dom","./dom-style"],function(i,k,j,h){function c(a,d,b,f,c,e){e=e||"px";a=a.style;if(!isNaN(d))a.left=d+e;if(!isNaN(b))a.top=b+e;if(0<=f)a.width=f+e;if(0<=c)a.height=c+e}function e(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function g(a){return"border-box"==b.boxModel||"table"==a.tagName.toLowerCase()||e(a)}var b={boxModel:"content-box"};if(i("ie"))b.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";
b.getPadExtents=function(a,d){var a=j.byId(a),b=d||h.getComputedStyle(a),f=h.toPixelValue,c=f(a,b.paddingLeft),e=f(a,b.paddingTop),g=f(a,b.paddingRight),b=f(a,b.paddingBottom);return{l:c,t:e,r:g,b:b,w:c+g,h:e+b}};b.getBorderExtents=function(a,d){var a=j.byId(a),b=h.toPixelValue,f=d||h.getComputedStyle(a),c="none"!=f.borderLeftStyle?b(a,f.borderLeftWidth):0,e="none"!=f.borderTopStyle?b(a,f.borderTopWidth):0,g="none"!=f.borderRightStyle?b(a,f.borderRightWidth):0,b="none"!=f.borderBottomStyle?b(a,f.borderBottomWidth):
0;return{l:c,t:e,r:g,b:b,w:c+g,h:e+b}};b.getPadBorderExtents=function(a,d){var a=j.byId(a),f=d||h.getComputedStyle(a),c=b.getPadExtents(a,f),f=b.getBorderExtents(a,f);return{l:c.l+f.l,t:c.t+f.t,r:c.r+f.r,b:c.b+f.b,w:c.w+f.w,h:c.h+f.h}};b.getMarginExtents=function(a,d){var a=j.byId(a),b=d||h.getComputedStyle(a),f=h.toPixelValue,c=f(a,b.marginLeft),e=f(a,b.marginTop),g=f(a,b.marginRight),b=f(a,b.marginBottom);return{l:c,t:e,r:g,b:b,w:c+g,h:e+b}};b.getMarginBox=function(a,d){var a=j.byId(a),f=d||h.getComputedStyle(a),
c=b.getMarginExtents(a,f),e=a.offsetLeft-c.l,g=a.offsetTop-c.t,m=a.parentNode,o=h.toPixelValue;if(i("mozilla")){var s=parseFloat(f.left),f=parseFloat(f.top);!isNaN(s)&&!isNaN(f)?(e=s,g=f):m&&m.style&&(m=h.getComputedStyle(m),"visible"!=m.overflow&&(e+="none"!=m.borderLeftStyle?o(a,m.borderLeftWidth):0,g+="none"!=m.borderTopStyle?o(a,m.borderTopWidth):0))}else if((i("opera")||8==i("ie")&&!i("quirks"))&&m)m=h.getComputedStyle(m),e-="none"!=m.borderLeftStyle?o(a,m.borderLeftWidth):0,g-="none"!=m.borderTopStyle?
o(a,m.borderTopWidth):0;return{l:e,t:g,w:a.offsetWidth+c.w,h:a.offsetHeight+c.h}};b.getContentBox=function(a,d){var a=j.byId(a),f=d||h.getComputedStyle(a),c=a.clientWidth,e=b.getPadExtents(a,f),g=b.getBorderExtents(a,f);c?(f=a.clientHeight,g.w=g.h=0):(c=a.offsetWidth,f=a.offsetHeight);i("opera")&&(e.l+=g.l,e.t+=g.t);return{l:e.l,t:e.t,w:c-e.w-g.w,h:f-e.h-g.h}};b.setContentSize=function(a,d,f){var a=j.byId(a),e=d.w,d=d.h;g(a)&&(f=b.getPadBorderExtents(a,f),0<=e&&(e+=f.w),0<=d&&(d+=f.h));c(a,NaN,NaN,
e,d)};var f={l:0,t:0,w:0,h:0};b.setMarginBox=function(a,d,l){var a=j.byId(a),p=l||h.getComputedStyle(a),l=d.w,r=d.h,n=g(a)?f:b.getPadBorderExtents(a,p),p=b.getMarginExtents(a,p);if(i("webkit")&&e(a)){var m=a.style;if(0<=l&&!m.width)m.width="4px";if(0<=r&&!m.height)m.height="4px"}0<=l&&(l=Math.max(l-n.w-p.w,0));0<=r&&(r=Math.max(r-n.h-p.h,0));c(a,d.l,d.t,l,r)};b.isBodyLtr=function(a){a=a||k.doc;return"ltr"==(k.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};b.docScroll=function(a){var a=
a||k.doc,d=k.doc.parentWindow||k.doc.defaultView;return"pageXOffset"in d?{x:d.pageXOffset,y:d.pageYOffset}:(d=i("quirks")?k.body(a):a.documentElement)&&{x:b.fixIeBiDiScrollLeft(d.scrollLeft||0,a),y:d.scrollTop||0}};if(i("ie"))b.getIeDocumentElementOffset=function(a){a=a||k.doc;a=a.documentElement;if(8>i("ie")){var d=a.getBoundingClientRect(),b=d.left,d=d.top;7>i("ie")&&(b+=a.clientLeft,d+=a.clientTop);return{x:0>b?0:b,y:0>d?0:d}}return{x:0,y:0}};b.fixIeBiDiScrollLeft=function(a,d){var d=d||k.doc,
f=i("ie");if(f&&!b.isBodyLtr(d)){var c=i("quirks"),e=c?k.body(d):d.documentElement,g=k.global;6==f&&!c&&g.frameElement&&e.scrollHeight>e.clientHeight&&(a+=e.clientLeft);return 8>f||c?a+e.clientWidth-e.scrollWidth:-a}return a};b.position=function(a,d){var a=j.byId(a),f=k.body(a.ownerDocument),c=a.getBoundingClientRect(),c={x:c.left,y:c.top,w:c.right-c.left,h:c.bottom-c.top};if(i("ie")){var e=b.getIeDocumentElementOffset(a.ownerDocument);c.x-=e.x+(i("quirks")?f.clientLeft+f.offsetLeft:0);c.y-=e.y+(i("quirks")?
f.clientTop+f.offsetTop:0)}d&&(f=b.docScroll(a.ownerDocument),c.x+=f.x,c.y+=f.y);return c};b.getMarginSize=function(a,d){var a=j.byId(a),f=b.getMarginExtents(a,d||h.getComputedStyle(a)),c=a.getBoundingClientRect();return{w:c.right-c.left+f.w,h:c.bottom-c.top+f.h}};b.normalizeEvent=function(a){if(!("layerX"in a))a.layerX=a.offsetX,a.layerY=a.offsetY;if(!i("dom-addeventlistener")){var d=a.target,d=d&&d.ownerDocument||document,f=i("quirks")?d.body:d.documentElement,c=b.getIeDocumentElementOffset(d);
a.pageX=a.clientX+b.fixIeBiDiScrollLeft(f.scrollLeft||0,d)-c.x;a.pageY=a.clientY+(f.scrollTop||0)-c.y}};return b})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(i,k,j){var h={global:i.global,doc:this.document||null,body:function(c){c=c||i.doc;return c.body||c.getElementsByTagName("body")[0]},setContext:function(c,e){i.global=h.global=c;i.doc=h.doc=e},withGlobal:function(c,e,g,b){var f=i.global;try{return i.global=h.global=c,h.withDoc.call(null,c.document,e,g,b)}finally{i.global=
h.global=f}},withDoc:function(c,e,g,b){var f=h.doc,a=j("quirks"),d=j("ie"),l,p,r;try{i.doc=h.doc=c;i.isQuirks=j.add("quirks","BackCompat"==i.doc.compatMode,!0,!0);if(j("ie")&&(r=c.parentWindow)&&r.navigator)l=parseFloat(r.navigator.appVersion.split("MSIE ")[1])||void 0,(p=c.documentMode)&&5!=p&&Math.floor(l)!=p&&(l=p),i.isIE=j.add("ie",l,!0,!0);g&&"string"==typeof e&&(e=g[e]);return e.apply(g,b||[])}finally{i.doc=h.doc=f,i.isQuirks=j.add("quirks",a,!0,!0),i.isIE=j.add("ie",d,!0,!0)}}};k.mixin(i,h);
return h})},"dojo/dom":function(){define(["./sniff","./_base/lang","./_base/window"],function(i,k,j){if(7>=i("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}var c={};c.byId=i("ie")?function(c,g){if("string"!=typeof c)return c;var b=g||j.doc,f=c&&b.getElementById(c);if(f&&(f.attributes.id.value==c||f.id==c))return f;b=b.all[c];if(!b||b.nodeName)b=[b];for(var a=0;f=b[a++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==c||f.id==c)return f}:function(c,g){return("string"==
typeof c?(g||j.doc).getElementById(c):c)||null};c.isDescendant=function(e,g){try{e=c.byId(e);for(g=c.byId(g);e;){if(e==g)return!0;e=e.parentNode}}catch(b){}return!1};c.setSelectable=function(e,g){e=c.byId(e);if(i("mozilla"))e.style.MozUserSelect=g?"":"none";else if(i("khtml")||i("webkit"))e.style.KhtmlUserSelect=g?"auto":"none";else if(i("ie"))for(var b=e.unselectable=g?"":"on",f=e.getElementsByTagName("*"),a=0,d=f.length;a<d;++a)f.item(a).unselectable=b};return c})},"dojo/dom-style":function(){define(["./sniff",
"./dom"],function(i,k){function j(b,f,c){f=f.toLowerCase();if(i("ie")){if("auto"==c){if("height"==f)return b.offsetHeight;if("width"==f)return b.offsetWidth}if("fontweight"==f)switch(c){case 700:return"bold";default:return"normal"}}f in a||(a[f]=d.test(f));return a[f]?e(b,c):c}var h,c={};h=i("webkit")?function(a){var d;if(1==a.nodeType){var b=a.ownerDocument.defaultView;d=b.getComputedStyle(a,null);if(!d&&a.style)a.style.display="",d=b.getComputedStyle(a,null)}return d||{}}:i("ie")&&(9>i("ie")||i("quirks"))?
function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};c.getComputedStyle=h;var e;e=i("ie")?function(a,d){if(!d)return 0;if("medium"==d)return 4;if(d.slice&&"px"==d.slice(-2))return parseFloat(d);var b=a.style,f=a.runtimeStyle,c=b.left,e=f.left;f.left=a.currentStyle.left;try{b.left=d,d=b.pixelLeft}catch(g){d=0}b.left=c;f.left=e;return d}:function(a,d){return parseFloat(d)||0};c.toPixelValue=e;var g=
function(a,d){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(b){return d?{}:null}},b=9>i("ie")||i("ie")&&i("quirks")?function(a){try{return g(a).Opacity/100}catch(d){return 1}}:function(a){return h(a).opacity},f=9>i("ie")||i("ie")&&i("quirks")?function(a,d){var b=100*d,c=1==d;a.style.zoom=c?"":1;if(g(a))g(a,1).Opacity=b;else{if(c)return d;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")"}g(a,1).Enabled=!c;if("tr"==a.tagName.toLowerCase())for(b=a.firstChild;b;b=
b.nextSibling)"td"==b.tagName.toLowerCase()&&f(b,d);return d}:function(a,d){return a.style.opacity=d},a={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,l=i("ie")?"styleFloat":"cssFloat",p={cssFloat:l,styleFloat:l,"float":l};c.get=function(a,d){var f=k.byId(a),e=arguments.length;if(2==e&&"opacity"==d)return b(f);var d=p[d]||d,g=c.getComputedStyle(f);return 1==e?g:j(f,d,g[d]||f.style[d])};c.set=function(a,d,b){var e=k.byId(a),g=arguments.length,l="opacity"==d,d=p[d]||d;if(3==g)return l?
f(e,b):e.style[d]=b;for(var h in d)c.set(a,h,d[h]);return c.getComputedStyle(e)};return c})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(i,k,j,h,c){function e(c,b){var f=function(a,d){return k(a,c,function(f){if(b)return b(f,d);if(!h.isDescendant(f.relatedTarget,a))return d.call(this,f)})};f.bubble=function(a){return e(c,function(d,b){var f=a(d.target),c=d.relatedTarget;if(f&&f!=(c&&1==c.nodeType&&a(c)))return b.call(f,d)})};return f}j.add("dom-quirks",
c.doc&&"BackCompat"==c.doc.compatMode);j.add("events-mouseenter",c.doc&&"onmouseenter"in c.doc.createElement("div"));j.add("events-mousewheel",c.doc&&"onmousewheel"in c.doc);c=j("dom-quirks")&&j("ie")||!j("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(c,b){return c.button&b},isLeft:function(c){return c.button&1},isMiddle:function(c){return c.button&4},isRight:function(c){return c.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(c,b){return c.button==b},isLeft:function(c){return 0==
c.button},isMiddle:function(c){return 1==c.button},isRight:function(c){return 2==c.button}};i.mouseButtons=c;i=j("events-mousewheel")?"mousewheel":function(c,b){return k(c,"DOMMouseScroll",function(f){f.wheelDelta=-f.detail;b.call(this,f)})};return{_eventHandler:e,enter:e("mouseover"),leave:e("mouseout"),wheel:i,isLeft:c.isLeft,isMiddle:c.isMiddle,isRight:c.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(i,k,j){i._name="browser";k.mixin(i,{isBrowser:!0,isFF:j("ff"),
isIE:j("ie"),isKhtml:j("khtml"),isWebKit:j("webkit"),isMozilla:j("mozilla"),isMoz:j("mozilla"),isOpera:j("opera"),isSafari:j("safari"),isChrome:j("chrome"),isMac:j("mac"),isIos:j("ios"),isAndroid:j("android"),isWii:j("wii"),isQuirks:j("quirks"),isAir:j("air")});i.locale=i.locale||(j("ie")?navigator.userLanguage:navigator.language).toLowerCase();return j})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(i,k){return i.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,
META:k("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,
F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:k("mac")&&!k("air")?k("safari")?91:224:17}})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),function(i,k,j,h,c,e,g){var b=function(){},f=Object.freeze||function(){},a=i.Deferred=function(d){function l(a){if(n)throw Error("This deferred has already been resolved");
i=a;n=!0;g()}function g(){for(var a;!a&&s;){var d=s;s=s.next;if(a=d.progress==b)n=!1;var f=m?d.error:d.resolved;c("config-useDeferredInstrumentation")&&m&&k.instrumentRejected&&k.instrumentRejected(i,!!f);if(f)try{var l=f(i);l&&"function"===typeof l.then?l.then(e.hitch(d.deferred,"resolve"),e.hitch(d.deferred,"reject"),e.hitch(d.deferred,"progress")):(f=a&&void 0===l,a&&!f&&(m=l instanceof Error),d.deferred[f&&m?"reject":"resolve"](f?i:l))}catch(h){d.deferred.reject(h)}else m?d.deferred.reject(i):
d.deferred.resolve(i)}}var i,n,m,o,s,t=this.promise=new j;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];l(a)};this.reject=this.errback=function(a){m=!0;this.fired=1;c("config-useDeferredInstrumentation")&&k.instrumentRejected&&k.instrumentRejected(a,!!s);l(a);this.results=[null,a]};this.progress=function(a){for(var d=s;d;){var b=d.progress;b&&b(a);d=d.next}};this.addCallbacks=function(a,d){this.then(a,d,b);return this};t.then=this.then=function(d,f,c){var e=c==b?this:new a(t.cancel),
d={resolved:d,error:f,progress:c,deferred:e};s?o=o.next=d:s=o=d;n&&g();return e.promise};var q=this;t.cancel=this.cancel=function(){if(!n){var a=d&&d(q);if(!n)a instanceof Error||(a=new h(a)),a.log=!1,q.reject(a)}};f(t)};e.extend(a,{addCallback:function(a){return this.addCallbacks(e.hitch.apply(i,arguments))},addErrback:function(a){return this.addCallbacks(null,e.hitch.apply(i,arguments))},addBoth:function(a){var b=e.hitch.apply(i,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=i.when=
g;return a})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(i,k,j,h,c){var e=Object.freeze||function(){},g=function(a,f,c,e,g){2===f&&d.instrumentRejected&&0===a.length&&d.instrumentRejected(c,!1,e,g);for(g=0;g<a.length;g++)b(a[g],f,c,e)},b=function(b,c,e,g){var h=b[c],o=b.deferred;if(h)try{var i=h(e);if(0===c)"undefined"!==typeof i&&a(o,c,i);else{if(i&&"function"===typeof i.then){b.cancel=
i.cancel;i.then(f(o,1),f(o,2),f(o,0));return}a(o,1,i)}}catch(t){a(o,2,t)}else a(o,c,e);2===c&&d.instrumentRejected&&d.instrumentRejected(e,!!h,g,o.promise)},f=function(d,b){return function(f){a(d,b,f)}},a=function(a,d,b){if(!a.isCanceled())switch(d){case 0:a.progress(b);break;case 1:a.resolve(b);break;case 2:a.reject(b)}},d=function(a){var f=this.promise=new h,c=this,i,m,o,s=!1,t=[];Error.captureStackTrace&&(Error.captureStackTrace(c,d),Error.captureStackTrace(f,d));this.isResolved=f.isResolved=function(){return 1===
i};this.isRejected=f.isRejected=function(){return 2===i};this.isFulfilled=f.isFulfilled=function(){return!!i};this.isCanceled=f.isCanceled=function(){return s};this.progress=function(a,d){if(i){if(!0===d)throw Error("This deferred has already been fulfilled.");return f}g(t,0,a,null,c);return f};this.resolve=function(a,d){if(i){if(!0===d)throw Error("This deferred has already been fulfilled.");return f}g(t,i=1,m=a,null,c);t=null;return f};var q=this.reject=function(a,d){if(i){if(!0===d)throw Error("This deferred has already been fulfilled.");
return f}Error.captureStackTrace&&Error.captureStackTrace(o={},q);g(t,i=2,m=a,o,c);t=null;return f};this.then=f.then=function(a,c,e){var g=[e,a,c];g.cancel=f.cancel;g.deferred=new d(function(a){return g.cancel&&g.cancel(a)});i&&!t?b(g,i,m,o):t.push(g);return g.deferred.promise};this.cancel=f.cancel=function(d,b){if(i){if(!0===b)throw Error("This deferred has already been fulfilled.");}else{if(a)var f=a(d),d="undefined"===typeof f?d:f;s=!0;if(i){if(2===i&&m===d)return d}else return"undefined"===typeof d&&
(d=new j),q(d),d}};e(f)};d.prototype.toString=function(){return"[object Deferred]"};c&&c(d);return d})},"dojo/errors/CancelError":function(){define(["./create"],function(i){return i("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],function(i){return function(k,j,h,c){var h=h||Error,e=function(c){if(h===Error){Error.captureStackTrace&&Error.captureStackTrace(this,e);var b=Error.call(this,c),f;for(f in b)b.hasOwnProperty(f)&&(this[f]=b[f]);this.message=
c;this.stack=b.stack}else h.apply(this,arguments);j&&j.apply(this,arguments)};e.prototype=i.delegate(h.prototype,c);e.prototype.name=k;return e.prototype.constructor=e}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(i){function k(){throw new TypeError("abstract");}return i.extend(function(){},{then:function(){k()},cancel:function(){k()},isResolved:function(){k()},isRejected:function(){k()},isFulfilled:function(){k()},isCanceled:function(){k()},always:function(i){return this.then(i,
i)},otherwise:function(i){return this.then(null,i)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(i,k,j,h){function c(a,d,b){var f="";a&&a.stack&&(f+=a.stack);d&&d.stack&&(f+="\n    ----------------------------------------\n    rejected"+d.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));b&&b.stack&&(f+=
"\n    ----------------------------------------\n"+b.stack);console.error(a,f)}function e(a,d,b,f){d||c(a,b,f)}function g(c,e,g,i){e?h.some(f,function(a,d){if(a.error===c)return f.splice(d,1),!0}):h.some(f,function(a){return a.error===c})||f.push({error:c,rejection:g,deferred:i,timestamp:(new Date).getTime()});a||(a=setTimeout(b,d))}function b(){var e=(new Date).getTime(),g=e-d;f=h.filter(f,function(a){return a.timestamp<g?(c(a.error,a.rejection,a.deferred),!1):!0});f.length&&(a=setTimeout(b,f[0].timestamp+
d-e))}var f=[],a=!1,d=1E3;return function(a){var b=k("config-useDeferredInstrumentation");if(b){i.on("resolved",j.hitch(console,"log","resolved"));i.on("rejected",j.hitch(console,"log","rejected"));i.on("progress",j.hitch(console,"log","progress"));var f=[];"string"===typeof b&&(f=b.split(","),b=f.shift());if("report-rejections"===b)a.instrumentRejected=e;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=g,d=parseInt(f[0],10)||d;else throw Error("Unsupported instrumentation usage <"+
b+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(i,k,j){function h(g){setTimeout(function(){e.apply(c,g)},0)}var c=new j,e=c.emit;c.emit=null;k.prototype.trace=function(){var c=i._toArray(arguments);this.then(function(b){h(["resolved",b].concat(c))},function(b){h(["rejected",b].concat(c))},function(b){h(["progress",b].concat(c))});return this};k.prototype.traceRejected=function(){var c=i._toArray(arguments);this.otherwise(function(b){h(["rejected",
b].concat(c))});return this};return c})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(i,k){return function(j,h,c,e){var g=j&&"function"===typeof j.then,b=g&&j instanceof k;if(g){if(!b)g=new i(j.cancel),j.then(g.resolve,g.reject,g.progress),j=g.promise}else return h?h(j):(new i).resolve(j);return h||c||e?j.then(h,c,e):j}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(i,k){i.fromJson=function(i){return eval("("+i+")")};i._escapeString=k.stringify;
i.toJsonIndentStr="\t";i.toJson=function(j,h){return k.stringify(j,function(c,e){if(e){var g=e.__json__||e.json;if("function"==typeof g)return g.call(e)}return e},h&&i.toJsonIndentStr)};return i})},"dojo/json":function(){define(["./has"],function(i){var k="undefined"!=typeof JSON;i.add("json-parse",k);i.add("json-stringify",k&&'{"a":1}'==JSON.stringify({a:0},function(h,c){return c||1}));if(i("json-stringify"))return JSON;var j=function(h){return('"'+h.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,
"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:i("json-parse")?JSON.parse:function(h,c){if(c&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(h))throw new SyntaxError("Invalid characters in JSON");return eval("("+h+")")},stringify:function(h,c,e){function g(f,a,d){c&&(f=c(d,f));var l;l=typeof f;if("number"==l)return isFinite(f)?f+"":"null";if("boolean"==l)return f+"";if(null===
f)return"null";if("string"==typeof f)return j(f);if("function"==l||"undefined"==l)return b;if("function"==typeof f.toJSON)return g(f.toJSON(d),a,d);if(f instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,d,b){a=f["getUTC"+d]()+(b?1:0);return 10>a?"0"+a:a});if(f.valueOf()!==f)return g(f.valueOf(),a,d);var h=e?a+e:"",i=e?" ":"",n=e?"\n":"";if(f instanceof Array){for(var i=f.length,m=[],d=0;d<i;d++)l=g(f[d],h,d),"string"!=typeof l&&
(l="null"),m.push(n+h+l);return"["+m.join(",")+n+a+"]"}m=[];for(d in f){var o;if(f.hasOwnProperty(d)){if("number"==typeof d)o='"'+d+'"';else if("string"==typeof d)o=j(d);else continue;l=g(f[d],h,d);"string"==typeof l&&m.push(n+h+o+":"+i+l)}}return"{"+m.join(",")+n+a+"}"}var b;"string"==typeof c&&(e=c,c=null);return g(h,"","")}}})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(i,k,j,h){var c=i.Color=function(c){c&&this.setColor(c)};c.named={black:[0,0,0],
silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:h.transparentColor||[0,0,0,0]};k.extend(c,{r:255,g:255,b:255,a:1,_set:function(c,g,b,f){this.r=c;this.g=g;this.b=b;this.a=f},setColor:function(e){k.isString(e)?c.fromString(e,this):k.isArray(e)?c.fromArray(e,this):(this._set(e.r,
e.g,e.b,e.a),e instanceof c||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+j.map(["r","g","b"],function(c){c=this[c].toString(16);return 2>c.length?"0"+c:c},this).join("")},toCss:function(c){var g=this.r+", "+this.g+", "+this.b;return(c?"rgba("+g+", "+this.a:"rgb("+g)+")"},toString:function(){return this.toCss(!0)}});c.blendColors=i.blendColors=function(e,
g,b,f){var a=f||new c;j.forEach(["r","g","b","a"],function(d){a[d]=e[d]+(g[d]-e[d])*b;"a"!=d&&(a[d]=Math.round(a[d]))});return a.sanitize()};c.fromRgb=i.colorFromRgb=function(e,g){var b=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return b&&c.fromArray(b[1].split(/\s*,\s*/),g)};c.fromHex=i.colorFromHex=function(e,g){var b=g||new c,f=4==e.length?4:8,a=(1<<f)-1,e=Number("0x"+e.substr(1));if(isNaN(e))return null;j.forEach(["b","g","r"],function(d){var c=e&a;e>>=f;b[d]=4==f?17*c:c});b.a=1;return b};
c.fromArray=i.colorFromArray=function(e,g){var b=g||new c;b._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]));if(isNaN(b.a))b.a=1;return b.sanitize()};c.fromString=i.colorFromString=function(e,g){var b=c.named[e];return b&&c.fromArray(b,g)||c.fromRgb(e,g)||c.fromHex(e,g)};return c})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(i){return i})},
"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(i,k,j){var h=window,c={addOnWindowUnload:function(c,g){if(!i.windowUnloaded)j(h,"unload",i.windowUnloaded=function(){});j(h,"unload",k.hitch(c,g))},addOnUnload:function(c,g){j(h,"beforeunload",k.hitch(c,g))}};i.addOnWindowUnload=c.addOnWindowUnload;i.addOnUnload=c.addOnUnload;return c})},"dojo/_base/html":function(){define("./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),
function(i,k,j,h,c,e,g,b){i.byId=k.byId;i.isDescendant=k.isDescendant;i.setSelectable=k.setSelectable;i.getAttr=h.get;i.setAttr=h.set;i.hasAttr=h.has;i.removeAttr=h.remove;i.getNodeProp=h.getNodeProp;i.attr=function(b,a,d){return 2==arguments.length?h["string"==typeof a?"get":"set"](b,a):h.set(b,a,d)};i.hasClass=e.contains;i.addClass=e.add;i.removeClass=e.remove;i.toggleClass=e.toggle;i.replaceClass=e.replace;i._toDom=i.toDom=g.toDom;i.place=g.place;i.create=g.create;i.empty=function(b){g.empty(b)};
i._destroyElement=i.destroy=function(b){g.destroy(b)};i._getPadExtents=i.getPadExtents=b.getPadExtents;i._getBorderExtents=i.getBorderExtents=b.getBorderExtents;i._getPadBorderExtents=i.getPadBorderExtents=b.getPadBorderExtents;i._getMarginExtents=i.getMarginExtents=b.getMarginExtents;i._getMarginSize=i.getMarginSize=b.getMarginSize;i._getMarginBox=i.getMarginBox=b.getMarginBox;i.setMarginBox=b.setMarginBox;i._getContentBox=i.getContentBox=b.getContentBox;i.setContentSize=b.setContentSize;i._isBodyLtr=
i.isBodyLtr=b.isBodyLtr;i._docScroll=i.docScroll=b.docScroll;i._getIeDocumentElementOffset=i.getIeDocumentElementOffset=b.getIeDocumentElementOffset;i._fixIeBiDiScrollLeft=i.fixIeBiDiScrollLeft=b.fixIeBiDiScrollLeft;i.position=b.position;i.marginBox=function(f,a){return a?b.setMarginBox(f,a):b.getMarginBox(f)};i.contentBox=function(f,a){return a?b.setContentSize(f,a):b.getContentBox(f)};i.coords=function(f,a){i.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var f=k.byId(f),
d=j.getComputedStyle(f),d=b.getMarginBox(f,d),c=b.position(f,a);d.x=c.x;d.y=c.y;return d};i.getProp=c.get;i.setProp=c.set;i.prop=function(b,a,d){return 2==arguments.length?c["string"==typeof a?"get":"set"](b,a):c.set(b,a,d)};i.getStyle=j.get;i.setStyle=j.set;i.getComputedStyle=j.getComputedStyle;i.__toPixelValue=i.toPixelValue=j.toPixelValue;i.style=function(b,a,d){switch(arguments.length){case 1:return j.get(b);case 2:return j["string"==typeof a?"get":"set"](b,a)}return j.set(b,a,d)};return i})},
"dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(i,k,j,h,c,e){function g(a,d){var b=a.getAttributeNode&&a.getAttributeNode(d);return b&&b.specified}var b={innerHTML:1,className:1,htmlFor:k("ie"),value:1},f={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};i.has=function(a,d){var c=d.toLowerCase();return b[e.names[c]||d]||g(h.byId(a),f[c]||d)};i.get=function(a,d){var a=h.byId(a),c=d.toLowerCase(),i=e.names[c]||
d,k=a[i];if(b[i]&&"undefined"!=typeof k||"href"!=i&&("boolean"==typeof k||j.isFunction(k)))return k;c=f[c]||d;return g(a,c)?a.getAttribute(c):null};i.set=function(a,d,g){a=h.byId(a);if(2==arguments.length){for(var p in d)i.set(a,p,d[p]);return a}p=d.toLowerCase();var k=e.names[p]||d,n=b[k];if("style"==k&&"string"!=typeof g)return c.set(a,g),a;if(n||"boolean"==typeof g||j.isFunction(g))return e.set(a,d,g);a.setAttribute(f[p]||d,g);return a};i.remove=function(a,d){h.byId(a).removeAttribute(f[d.toLowerCase()]||
d)};i.getNodeProp=function(a,d){var a=h.byId(a),b=d.toLowerCase(),c=e.names[b]||d;if(c in a&&"href"!=c)return a[c];b=f[b]||d;return g(a,b)?a.getAttribute(b):null}})},"dojo/dom-prop":function(){define("exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),function(i,k,j,h,c,e,g,b){var f={},a=0,d=k._scopeName+"attrid";i.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",
valuetype:"valueType"};i.get=function(a,d){var a=c.byId(a),b=d.toLowerCase();return a[i.names[b]||d]};i.set=function(l,p,k){l=c.byId(l);if(2==arguments.length&&"string"!=typeof p){for(var n in p)i.set(l,n,p[n]);return l}n=p.toLowerCase();n=i.names[n]||p;if("style"==n&&"string"!=typeof k)return e.set(l,k),l;if("innerHTML"==n)return j("ie")&&l.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(g.empty(l),l.appendChild(g.toDom(k,l.ownerDocument))):l[n]=k,l;if(h.isFunction(k)){var m=
l[d];m||(m=a++,l[d]=m);f[m]||(f[m]={});var o=f[m][n];if(o)b.disconnect(o);else try{delete l[n]}catch(s){}k?f[m][n]=b.connect(l,n,k):l[n]=null;return l}l[n]=k;return l}})},"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),function(i,k,j,h,c,e,g){function b(a,d){var b=d.parentNode;b&&b.insertBefore(a,d)}var f={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table",
"thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},a=/<\s*([\w\:]+)/,d={},l=0,p="__"+k._scopeName+"ToDomId",r;for(r in f)if(f.hasOwnProperty(r))k=f[r],k.pre="option"==r?'<select multiple="multiple">':"<"+k.join("><")+">",k.post="</"+k.reverse().join("></")+">";var n=null,m;g(window,"unload",function(){n=null});i.toDom=function(b,c){var c=c||h.doc,e=c[p];e||(c[p]=e=++l+"",d[e]=c.createElement("div"));var b=b+"",g=b.match(a),i=g?g[1].toLowerCase():
"",e=d[e];if(g&&f[i]){g=f[i];e.innerHTML=g.pre+b+g.post;for(g=g.length;g;--g)e=e.firstChild}else e.innerHTML=b;if(1==e.childNodes.length)return e.removeChild(e.firstChild);for(i=c.createDocumentFragment();g=e.firstChild;)i.appendChild(g);return i};i.place=function(a,d,f){d=c.byId(d);"string"==typeof a&&(a=/^\s*</.test(a)?i.toDom(a,d.ownerDocument):c.byId(a));if("number"==typeof f){var e=d.childNodes;!e.length||e.length<=f?d.appendChild(a):b(a,e[0>f?0:f])}else switch(f){case "before":b(a,d);break;
case "after":f=a;(e=d.parentNode)&&(e.lastChild==d?e.appendChild(f):e.insertBefore(f,d.nextSibling));break;case "replace":d.parentNode.replaceChild(a,d);break;case "only":i.empty(d);d.appendChild(a);break;case "first":if(d.firstChild){b(a,d.firstChild);break}default:d.appendChild(a)}return a};i.create=function(a,d,b,f){var g=h.doc;if(b)b=c.byId(b),g=b.ownerDocument;"string"==typeof a&&(a=g.createElement(a));d&&e.set(a,d);b&&i.place(a,b,f);return a};i.empty=j("ie")?function(a){for(var a=c.byId(a),
d;d=a.lastChild;)i.destroy(d)}:function(a){c.byId(a).innerHTML=""};i.destroy=function(a){a=c.byId(a);try{var d=a.ownerDocument;if(!n||m!=d)n=d.createElement("div"),m=d;n.appendChild(a.parentNode?a.parentNode.removeChild(a):a);n.innerHTML=""}catch(b){}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(i,k,j){function h(b){if("string"==typeof b||b instanceof String){if(b&&!e.test(b))return g[0]=b,g;b=b.split(e);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-
1]&&b.pop();return b}return!b?[]:k.filter(b,function(a){return a})}var c,e=/\s+/,g=[""],b={};return c={contains:function(b,a){return 0<=(" "+j.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){var b=j.byId(b),a=h(a),d=b.className,c,d=d?" "+d+" ":" ";c=d.length;for(var e=0,g=a.length,i;e<g;++e)(i=a[e])&&0>d.indexOf(" "+i+" ")&&(d+=i+" ");c<d.length&&(b.className=d.substr(1,d.length-2))},remove:function(b,a){var b=j.byId(b),d;if(void 0!==a){a=h(a);d=" "+b.className+" ";for(var c=0,e=a.length;c<
e;++c)d=d.replace(" "+a[c]+" "," ");d=i.trim(d)}else d="";b.className!=d&&(b.className=d)},replace:function(f,a,d){f=j.byId(f);b.className=f.className;c.remove(b,d);c.add(b,a);f.className!==b.className&&(f.className=b.className)},toggle:function(b,a,d){b=j.byId(b);if(void 0===d)for(var a=h(a),e=0,g=a.length,i;e<g;++e)i=a[e],c[c.contains(b,i)?"remove":"add"](b,i);else c[d?"add":"remove"](b,a);return d}}})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],
function(i,k,j){var k=k.NodeList,h=k.prototype;h.connect=k._adaptAsForEach(function(){return i.connect.apply(this,arguments)});h.coords=k._adaptAsMap(i.coords);k.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");j.forEach(k.events,function(c){var e="on"+c;h[e]=function(c,b){return this.connect(e,c,b)}});return i.NodeList=k})},"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),
function(i,k,j,h,c,e,g,b){function f(a,d){var b=function(b,c){if("string"==typeof c&&(c=j.byId(c),!c))return new d([]);var f="string"==typeof b?a(b,c):b?b.orphan?b:[b]:[];return f.orphan?f:new d(f)};b.matches=a.match||function(a,d,c){return 0<b.filter([a],d,c).length};b.filter=a.filter||function(a,d,f){return b(d,f).filter(function(b){return-1<c.indexOf(a,b)})};if("function"!=typeof a)var f=a.search,a=function(a,b){return f(b||document,a)};return b}k.add("array-extensible",function(){return 1==e.delegate([],
{length:1}).length&&!k("bug-for-in-skips-shadowed")});var a=Array.prototype,d=a.slice,l=a.concat,p=c.forEach,r=function(a,b,c){b=[0].concat(d.call(b,0));c=c||i.global;return function(d){b[0]=d;return a.apply(c,b)}},n=function(a){var b=this instanceof m&&k("array-extensible");"number"==typeof a&&(a=Array(a));var d=a&&"length"in a?a:arguments;if(b||!d.sort){for(var c=b?this:[],f=c.length=d.length,g=0;g<f;g++)c[g]=d[g];if(b)return c;d=c}e._mixin(d,o);d._NodeListCtor=function(a){return m(a)};return d},
m=n,o=m.prototype=k("array-extensible")?[]:{};m._wrap=o._wrap=function(a,b,d){a=new (d||this._NodeListCtor||m)(a);return b?a._stash(b):a};m._adaptAsMap=function(a,b){return function(){return this.map(r(a,arguments,b))}};m._adaptAsForEach=function(a,b){return function(){this.forEach(r(a,arguments,b));return this}};m._adaptAsFilter=function(a,b){return function(){return this.filter(r(a,arguments,b))}};m._adaptWithCondition=function(a,b,d){return function(){var c=arguments,f=r(a,c,d);if(b.call(d||i.global,
c))return this.map(f);this.forEach(f);return this}};p(["slice","splice"],function(b){var d=a[b];o[b]=function(){return this._wrap(d.apply(this,arguments),"slice"==b?this:null)}});p(["indexOf","lastIndexOf","every","some"],function(a){var b=c[a];o[a]=function(){return b.apply(i,[this].concat(d.call(arguments,0)))}});e.extend(n,{constructor:m,_NodeListCtor:m,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,b){var d=this.map(function(d){return h(d,
a,b)});d.remove=function(){for(var a=0;a<d.length;a++)d[a].remove()};return d},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=d.call(this,0),f=c.map(arguments,function(a){return d.call(a,0)});return this._wrap(l.apply(b,f),this)},map:function(a,b){return this._wrap(c.map(this,a,b),this)},forEach:function(a,b){p(this,a,b);return this},filter:function(a){var b=arguments,d=this,f=0;if("string"==typeof a){d=s._filterResult(this,b[0]);if(1==b.length)return d._stash(this);
f=1}return this._wrap(c.filter(d,b[f],b[f+1]),this)},instantiate:function(a,b){var d=e.isFunction(a)?a:e.getObject(a),b=b||{};return this.forEach(function(a){new d(b,a)})},at:function(){var a=new this._NodeListCtor(0);p(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var s=f(b,n);i.query=f(b,function(a){return n(a)});s.load=function(a,b,d){g.load(a,b,function(a){d(f(a,n))})};i._filterQueryResult=s._filterResult=function(a,b,d){return new n(s.filter(a,
b,d))};i.NodeList=s.NodeList=n;return s})},"dojo/selector/_loader":function(){define(["../has","require"],function(i,k){var j=document.createElement("div");i.add("dom-qsa2.1",!!j.querySelectorAll);i.add("dom-qsa3",function(){try{return j.innerHTML="<p class='TEST'></p>",1==j.querySelectorAll(".TEST:empty").length}catch(c){}});var h;return{load:function(c,e,g){var b=k,c="default"==c?i("config-selectorEngine")||"css3":c,c="css2"==c||"lite"==c?"./lite":"css2.1"==c?i("dom-qsa2.1")?"./lite":"./acme":"css3"==
c?i("dom-qsa3")?"./lite":"./acme":"acme"==c?"./acme":(b=e)&&c;if("?"==c.charAt(c.length-1))var c=c.substring(0,c.length-1),f=!0;if(f&&(i("dom-compliant-qsa")||h))return g(h);b([c],function(a){"./lite"!=c&&(h=a);g(a)})}}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(i,k,j,h,c){var e=h.trim,g=j.forEach,b="BackCompat"==c.doc.compatMode,f=!1,a=function(){return!0},d=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":
a+" ",b=function(b,d){return e(a.slice(b,d))},d=[],c=-1,g=-1,l=-1,h=-1,o=-1,i=-1,n=-1,m,p="",s="",q,j=0,k=a.length,t=null,r=null,u=function(){if(0<=i)t.id=b(i,j).replace(/\\/g,""),i=-1;if(0<=n){var a=n==j?null:b(n,j);t[0>">~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=o&&(t.classes.push(b(o+1,j).replace(/\\/g,"")),o=-1)};p=s,s=a.charAt(j),j<k;j++)if("\\"!=p)if(t||(q=j,t={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return f?this.otag:this.tag}},n=j),m)s==m&&(m=null);
else if("'"==s||'"'==s)m=s;else if(0<=c)if("]"==s){r.attr?r.matchFor=b(l||c+1,j):r.attr=b(c+1,j);if((c=r.matchFor)&&('"'==c.charAt(0)||"'"==c.charAt(0)))r.matchFor=c.slice(1,-1);if(r.matchFor)r.matchFor=r.matchFor.replace(/\\/g,"");t.attrs.push(r);r=null;c=l=-1}else{if("="==s)l=0<="|~^$*".indexOf(p)?p:"",r.type=l+s,r.attr=b(c+1,j-l.length),l=j+1}else if(0<=g){if(")"==s){if(0<=h)r.value=b(g+1,j);h=g=-1}}else if("#"==s)u(),i=j+1;else if("."==s)u(),o=j;else if(":"==s)u(),h=j;else if("["==s)u(),c=j,r=
{};else if("("==s)0<=h&&(r={name:b(h+1,j),value:null},t.pseudos.push(r)),g=j;else if(" "==s&&p!=s){u();0<=h&&t.pseudos.push({name:b(h+1,j)});t.loops=t.pseudos.length||t.attrs.length||t.classes.length;t.oquery=t.query=b(q,j);t.otag=t.tag=t.oper?null:t.tag||"*";if(t.tag)t.tag=t.tag.toUpperCase();if(d.length&&d[d.length-1].oper)t.infixOper=d.pop(),t.query=t.infixOper.query+" "+t.query;d.push(t);t=null}return d},l=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,
arguments)}},p=function(a,b){var d=b||[];a&&d.push(a);return d},r=function(a){return 1==a.nodeType},n=function(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(f?a.getAttribute(b):a.getAttribute(b,2))||""},m={"*=":function(a,b){return function(d){return 0<=n(d,a).indexOf(b)}},"^=":function(a,b){return function(d){return 0==n(d,a).indexOf(b)}},"$=":function(a,b){return function(d){var d=" "+n(d,a),c=d.lastIndexOf(b);return-1<c&&c==d.length-b.length}},
"~=":function(a,b){var d=" "+b+" ";return function(b){return 0<=(" "+n(b,a)+" ").indexOf(d)}},"|=":function(a,b){var d=b+"-";return function(c){c=n(c,a);return c==b||0==c.indexOf(d)}},"=":function(a,b){return function(d){return n(d,a)==b}}},o="undefined"==typeof c.doc.firstChild.nextElementSibling,s=!o?"nextElementSibling":"nextSibling",t=!o?"previousElementSibling":"previousSibling",q=o?r:a,u=function(a){for(;a=a[t];)if(q(a))return!1;return!0},v=function(a){for(;a=a[s];)if(q(a))return!1;return!0},
y=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,d=0,c=b.children||b.childNodes,f=a._i||a.getAttribute("_i")||-1,e=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!c)return-1;c=c.length;if(e==c&&0<=f&&0<=e)return f;k("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",c):b._l=c;f=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[s])if(q(b))k("ie")?b.setAttribute("_i",++d):b._i=++d,a===b&&(f=d);return f},x=function(a){return!(y(a)%2)},L=function(a){return y(a)%
2},z={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return u},"last-child":function(){return v},"only-child":function(){return function(a){return u(a)&&v(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var d=b[a].nodeType;if(1===d||3==d)return!1}return!0}},contains:function(a,
b){var d=b.charAt(0);if('"'==d||"'"==d)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=d(b)[0],f={el:1};if("*"!=c.tag)f.tag=1;if(!c.classes.length)f.classes=1;var e=S(c,f);return function(a){return!e(a)}},"nth-child":function(a,b){var d=parseInt;if("odd"==b)return L;if("even"==b)return x;if(-1!=b.indexOf("n")){var c=b.split("n",2),f=c[0]?"-"==c[0]?-1:d(c[0]):1,e=c[1]?d(c[1]):0,g=0,l=-1;0<f?0>e?e=e%f&&f+e%f:0<e&&(e>=f&&(g=e-e%f),e%=f):0>f&&(f*=-1,0<e&&
(l=e,e%=f));if(0<f)return function(a){a=y(a);return a>=g&&(0>l||a<=l)&&a%f==e};b=e}var h=d(b);return function(a){return y(a)==h}}},U=k("ie")&&(9>k("ie")||k("quirks"))?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(d){return f?d.getAttribute(a):d[a]||d[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},S=function(b,d){if(!b)return a;var d=d||{},c=null;"el"in d||(c=l(c,r));"tag"in d||"*"!=b.tag&&(c=l(c,function(a){return a&&(f?a.tagName:
a.tagName.toUpperCase())==b.getTag()}));"classes"in d||g(b.classes,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=l(c,function(a){return d.test(a.className)});c.count=b});"pseudos"in d||g(b.pseudos,function(a){var b=a.name;z[b]&&(c=l(c,z[b](b,a.value)))});"attrs"in d||g(b.attrs,function(a){var b,d=a.attr;a.type&&m[a.type]?b=m[a.type](d,a.matchFor):d.length&&(b=U(d));b&&(c=l(c,b))});"id"in d||b.id&&(c=l(c,function(a){return!!a&&a.id==b.id}));c||"default"in d||(c=a);return c},V=function(a){return function(b,
d,c){for(;b=b[s];)if(!o||r(b)){(!c||aa(b,c))&&a(b)&&d.push(b);break}return d}},ka=function(a){return function(b,d,c){for(b=b[s];b;){if(q(b)){if(c&&!aa(b,c))break;a(b)&&d.push(b)}b=b[s]}return d}},D=function(b){b=b||a;return function(a,d,c){for(var f=0,e=a.children||a.childNodes;a=e[f++];)q(a)&&(!c||aa(a,c))&&b(a,f)&&d.push(a);return d}},E={},B=function(d){var f=E[d.query];if(f)return f;var e=d.infixOper,e=e?e.oper:"",g=S(d,{el:1}),l="*"==d.tag,h=c.doc.getElementsByClassName;if(e){h={el:1};if(l)h.tag=
1;g=S(d,h);"+"==e?f=V(g):"~"==e?f=ka(g):">"==e&&(f=D(g))}else if(d.id)g=!d.loops&&l?a:S(d,{el:1,id:1}),f=function(a,b){var c=i.byId(d.id,a.ownerDocument||a);if(c&&g(c)){if(9==a.nodeType)return p(c,b);for(var f=c.parentNode;f&&!(f==a);)f=f.parentNode;if(f)return p(c,b)}};else if(h&&/\{\s*\[native code\]\s*\}/.test(""+h)&&d.classes.length&&!b)var g=S(d,{el:1,classes:1,id:1}),o=d.classes.join(" "),f=function(a,b,d){for(var b=p(0,b),c,f=0,e=a.getElementsByClassName(o);c=e[f++];)g(c,a)&&aa(c,d)&&b.push(c);
return b};else!l&&!d.loops?f=function(a,b,c){for(var b=p(0,b),f=0,e=d.getTag(),e=e?a.getElementsByTagName(e):[];a=e[f++];)aa(a,c)&&b.push(a);return b}:(g=S(d,{el:1,tag:1,id:1}),f=function(a,b,c){for(var b=p(0,b),f,e=0,l=(f=d.getTag())?a.getElementsByTagName(f):[];f=l[e++];)g(f,a)&&aa(f,c)&&b.push(f);return b});return E[d.query]=f},F={},P={},N=function(a){var b=d(e(a));if(1==b.length){var c=B(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=p(a),d,c,f=b.length,
e,g,l=0;l<f;l++){g=[];d=b[l];c=a.length-1;if(0<c)e={},g.nozip=!0;c=B(d);for(var h=0;d=a[h];h++)c(d,g,e);if(!g.length)break;a=g}return g}},K=k("ie")?"commentStrip":"nozip",G=!!c.doc.querySelectorAll,Y=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,H=function(a,b,d,c){return d?(b?b+" ":"")+d+(c?" "+c:""):a},Q=/([^[]*)([^\]]*])?/g,ia=function(a,b,d){return b.replace(Y,H)+(d||"")},R=function(a,d){a=a.replace(Q,ia);if(G){var c=P[a];if(c&&!d)return c}if(c=F[a])return c;var c=a.charAt(0),f=-1==a.indexOf(" ");
0<=a.indexOf("#")&&f&&(d=!0);if(G&&!d&&-1==">~+".indexOf(c)&&(!k("ie")||-1==a.indexOf(":"))&&!(b&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var e=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return P[a]=function(b){try{if(!(9==b.nodeType||f))throw"";var d=b.querySelectorAll(e);d[K]=!0;return d}catch(c){return R(a,!0)(b)}}}var g=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return F[a]=2>g.length?N(a):function(a){for(var b=0,
d=[],c;c=g[b++];)d=d.concat(N(c)(a));return d}},O=0,Z=k("ie")?function(a){return f?a.getAttribute("_uid")||a.setAttribute("_uid",++O)||O:a.uniqueID}:function(a){return a._uid||(a._uid=++O)},aa=function(a,b){if(!b)return 1;var d=Z(a);return!b[d]?b[d]=1:0},qa=function(a){if(a&&a.nozip)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;O++;var d,c;if(k("ie")&&f){var e=O+"";a[0].setAttribute("_zipIdx",e);for(d=1;c=a[d];d++)a[d].getAttribute("_zipIdx")!=e&&b.push(c),
c.setAttribute("_zipIdx",e)}else if(k("ie")&&a.commentStrip)try{for(d=1;c=a[d];d++)r(c)&&b.push(c)}catch(g){}else{a[0]&&(a[0]._zipIdx=O);for(d=1;c=a[d];d++)a[d]._zipIdx!=O&&b.push(c),c._zipIdx=O}return b},ma=function(a,b){b=b||c.doc;f="div"===(b.ownerDocument||b).createElement("div").tagName;var d=R(a)(b);return d&&d.nozip?d:qa(d)};ma.filter=function(a,b,c){for(var f=[],e=d(b),e=1==e.length&&!/[^\w#\.]/.test(b)?S(e[0]):function(a){return-1!=j.indexOf(ma(b,i.byId(c)),a)},g=0,l;l=a[g];g++)e(l)&&f.push(l);
return f};return ma})},"dojo/NodeList-dom":function(){define("dojo/NodeList-dom","./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(i,k,j,h,c,e,g,b,f){function a(a){return function(b,d,c){return 2==arguments.length?a["string"==typeof d?"get":"set"](b,d):a.set(b,d,c)}}var d=function(a){return 1==a.length&&"string"==typeof a[0]},l=function(a){var b=a.parentNode;b&&b.removeChild(a)},p=k.NodeList,r=p._adaptWithCondition,
n=p._adaptAsForEach,m=p._adaptAsMap;h.extend(p,{_normalize:function(a,b){var d=!0===a.parse;if("string"==typeof a.template)var c=a.templateFunc||i.string&&i.string.substitute,a=c?c(a.template,a):a;c=typeof a;"string"==c||"number"==c?(a=e.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?h._toArray(a.childNodes):[a]):h.isArrayLike(a)?h.isArray(a)||(a=h._toArray(a)):a=[a];if(d)a._runParse=!0;return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,d,c){if(!(1!=b.nodeType&&"only"==d))for(var f,
g=a.length,l=g-1;0<=l;l--){var h=c?this._cloneNode(a[l]):a[l];if(a._runParse&&i.parser&&i.parser.parse){f||(f=b.ownerDocument.createElement("div"));f.appendChild(h);i.parser.parse(f);for(h=f.firstChild;f.firstChild;)f.removeChild(f.firstChild)}l==g-1?e.place(h,b,d):b.parentNode.insertBefore(h,b);b=h}},position:m(g.position),attr:r(a(b),d),style:r(a(f),d),addClass:n(c.add),removeClass:n(c.remove),toggleClass:n(c.toggle),replaceClass:n(c.replace),empty:n(e.empty),removeAttr:n(b.remove),marginBox:m(g.getMarginBox),
place:function(a,b){var d=k(a)[0];return this.forEach(function(a){e.place(a,d,b)})},orphan:function(a){return(a?k._filterResult(this,a):this).forEach(l)},adopt:function(a,b){return k(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new p;this.map(function(d){k(a,d).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,d=this,c=0;if("string"==typeof a){d=k._filterResult(this,b[0]);if(1==b.length)return d._stash(this);c=1}return this._wrap(j.filter(d,
b[c],b[c+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),d=0,c;c=this[d];d++)this._place(a,c,b,0<d);return this}});return p})},"dojo/_base/xhr":function(){define("./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m){i._xhrObj=n._create;var o=i.config;i.objectToQuery=h.objectToQuery;i.queryToObject=h.queryToObject;
i.fieldToObject=e.fieldToObject;i.formToObject=e.toObject;i.formToQuery=e.toQuery;i.formToJson=e.toJson;i._blockAsync=!1;var s=i._contentHandlers=i.contentHandlers={text:function(a){return a.responseText},json:function(a){return f.fromJson(a.responseText||null)},"json-comment-filtered":function(a){b.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");
var a=a.responseText,d=a.indexOf("/*"),c=a.lastIndexOf("*/");if(-1==d||-1==c)throw Error("JSON was not comment filtered");return f.fromJson(a.substring(d+2,c))},javascript:function(a){return i.eval(a.responseText)},xml:function(a){var b=a.responseXML;if(k("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];d.some(c,function(d){try{var c=new ActiveXObject(d);c.async=!1;c.loadXML(a.responseText);b=c}catch(f){return!1}return!0})}return b},
"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?s["json-comment-filtered"](a):s.json(a)}};i._ioSetArgs=function(b,d,f,l){var n={args:b,url:b.url},m=null;if(b.form){var m=c.byId(b.form),p=m.getAttributeNode("action");n.url=n.url||(p?p.value:null);m=e.toObject(m)}p=[{}];m&&p.push(m);b.content&&p.push(b.content);b.preventCache&&p.push({"dojo.preventCache":(new Date).valueOf()});n.query=h.objectToQuery(a.mixin.apply(null,p));n.handleAs=b.handleAs||"text";
var s=new g(function(a){a.canceled=!0;d&&d(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});s.addCallback(f);var q=b.load;q&&a.isFunction(q)&&s.addCallback(function(a){return q.call(b,a,n)});var j=b.error;j&&a.isFunction(j)&&s.addErrback(function(a){return j.call(b,a,n)});var k=b.handle;k&&a.isFunction(k)&&s.addBoth(function(a){return k.call(b,a,n)});s.addErrback(function(a){return l(a,s)});o.ioPublish&&i.publish&&!1!==n.args.ioPublish&&(s.addCallbacks(function(a){i.publish("/dojo/io/load",
[s,a]);return a},function(a){i.publish("/dojo/io/error",[s,a]);return a}),s.addBoth(function(a){i.publish("/dojo/io/done",[s,a]);return a}));s.ioArgs=n;return s};var t=function(a){a=s[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},q=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},u=function(a){0>=v&&(v=0,o.ioPublish&&i.publish&&(!a||a&&!1!==a.ioArgs.args.ioPublish)&&i.publish("/dojo/io/stop"))},v=0;p.after(r,"_onAction",function(){v-=1});p.after(r,"_onInFlight",u);i._ioCancelAll=
r.cancelAll;i._ioNotifyStart=function(a){o.ioPublish&&i.publish&&!1!==a.ioArgs.args.ioPublish&&(v||i.publish("/dojo/io/start"),v+=1,i.publish("/dojo/io/send",[a]))};i._ioWatch=function(b,d,c,f){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(){return d(b)},isReady:function(){return c(b)},handleResponse:function(){return f(b)}});r(b);u(b)};i._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};i.xhr=function(a,b,d){var c,
f=i._ioSetArgs(b,function(){c&&c.cancel()},t,q),e=f.ioArgs;"postData"in b?e.query=b.postData:"putData"in b?e.query=b.putData:"rawBody"in b?e.query=b.rawBody:(2<arguments.length&&!d||-1==="POST|PUT".indexOf(a.toUpperCase()))&&i._ioAddQueryToUrl(e);var g={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:e};if("undefined"!==typeof b.headers)g.headers=b.headers;if("undefined"!==typeof b.contentType){if(!g.headers)g.headers={};g.headers["Content-Type"]=b.contentType}if("undefined"!==
typeof e.query)g.data=e.query;if("undefined"!==typeof b.sync)g.sync=b.sync;i._ioNotifyStart(f);try{c=n(e.url,g,!0)}catch(l){return f.cancel(),f}f.ioArgs.xhr=c.response.xhr;c.then(function(){f.resolve(f)}).otherwise(function(a){e.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;f.reject(a)});return f};i.xhrGet=function(a){return i.xhr("GET",a)};i.rawXhrPost=i.xhrPost=function(a){return i.xhr("POST",a,!0)};i.rawXhrPut=i.xhrPut=function(a){return i.xhr("PUT",
a,!0)};i.xhrDelete=function(a){return i.xhr("DELETE",a)};i._isDocumentOk=function(a){return m.checkStatus(a.status)};i._getText=function(a){var b;i.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(i.xhr,{_xhrObj:i._xhrObj,fieldToObject:e.fieldToObject,formToObject:e.toObject,objectToQuery:h.objectToQuery,formToQuery:e.toQuery,formToJson:e.toJson,queryToObject:h.queryToObject,contentHandlers:s,_ioSetArgs:i._ioSetArgs,_ioCancelAll:i._ioCancelAll,_ioNotifyStart:i._ioNotifyStart,_ioWatch:i._ioWatch,
_ioAddQueryToUrl:i._ioAddQueryToUrl,_isDocumentOk:i._isDocumentOk,_getText:i._getText,get:i.xhrGet,post:i.xhrPost,put:i.xhrPut,del:i.xhrDelete});return i.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(i){var k={};return{objectToQuery:function(j){var h=encodeURIComponent,c=[],e;for(e in j){var g=j[e];if(g!=k[e]){var b=h(e)+"=";if(i.isArray(g))for(var f=0,a=g.length;f<a;++f)c.push(b+h(g[f]));else c.push(b+h(g))}}return c.join("&")},queryToObject:function(j){for(var h=decodeURIComponent,
j=j.split("&"),c={},e,g,b=0,f=j.length;b<f;++b)if(g=j[b],g.length){var a=g.indexOf("=");0>a?(e=h(g),g=""):(e=h(g.slice(0,a)),g=h(g.slice(a+1)));"string"==typeof c[e]&&(c[e]=[c[e]]);i.isArray(c[e])?c[e].push(g):c[e]=g}return c}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(i,k,j,h){var c={fieldToObject:function(c){var g=null;if(c=k.byId(c)){var b=c.name,f=(c.type||"").toLowerCase();if(b&&f&&!c.disabled)if("radio"==f||"checkbox"==f){if(c.checked)g=c.value}else if(c.multiple){g=
[];for(c=[c.firstChild];c.length;)for(b=c.pop();b;b=b.nextSibling)if(1==b.nodeType&&"option"==b.tagName.toLowerCase())b.selected&&g.push(b.value);else{b.nextSibling&&c.push(b.nextSibling);b.firstChild&&c.push(b.firstChild);break}}else g=c.value}return g},toObject:function(e){for(var g={},e=k.byId(e).elements,b=0,f=e.length;b<f;++b){var a=e[b],d=a.name,l=(a.type||"").toLowerCase();if(d&&l&&0>"file|submit|image|reset|button".indexOf(l)&&!a.disabled){var h=g,j=d,a=c.fieldToObject(a);if(null!==a){var n=
h[j];"string"==typeof n?h[j]=[n,a]:i.isArray(n)?n.push(a):h[j]=a}if("image"==l)g[d+".x"]=g[d+".y"]=g[d].x=g[d].y=0}}return g},toQuery:function(e){return j.objectToQuery(c.toObject(e))},toJson:function(e,g){return h.stringify(c.toObject(e),null,g?4:0)}};return c})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),function(i,k,j,h,c,e){function g(){for(var d=
+new Date,c=0,e;c<a.length&&(e=a[c]);c++){var g=e.response,h=g.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(g))a.splice(c--,1),b._onAction&&b._onAction();else if(e.isReady&&e.isReady(g))a.splice(c--,1),e.handleResponse(g),b._onAction&&b._onAction();else if(e.startTime&&e.startTime+(h.timeout||0)<d)a.splice(c--,1),e.cancel(new k("Timeout exceeded",g)),b._onAction&&b._onAction()}b._onInFlight&&b._onInFlight(e);a.length||(clearInterval(f),f=null)}function b(b){if(b.response.options.timeout)b.startTime=
+new Date;b.isFulfilled()||(a.push(b),f||(f=setInterval(g,50)),b.response.options.sync&&g())}var f=null,a=[];b.cancelAll=function(){try{h.forEach(a,function(a){try{a.cancel(new j("All requests canceled."))}catch(b){}})}catch(b){}};c&&e&&c.doc.attachEvent&&e(c.global,"unload",function(){b.cancelAll()});return b})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang".split(","),function(i,k,j,h,c,e,g){function b(a){return f(a)}
i.deepCopy=function(a,b){for(var c in b){var f=a[c],e=b[c];f!==e&&(f&&"object"===typeof f&&e&&"object"===typeof e?i.deepCopy(f,e):a[c]=e)}return a};i.deepCreate=function(a,b){var b=b||{},c=g.delegate(a),f,e;for(f in a)(e=a[f])&&"object"===typeof e&&(c[f]=i.deepCreate(e,b[f]));return i.deepCopy(c,b)};var f=Object.freeze||function(a){return a};i.deferred=function(a,d,c,e,r,n){var m=new h(function(b){d&&d(m,a);return!b||!(b instanceof k)&&!(b instanceof j)?new j("Request canceled",a):b});m.response=
a;m.isValid=c;m.isReady=e;m.handleResponse=r;c=m.then(b).otherwise(function(b){b.response=a;throw b;});i.notify&&c.then(g.hitch(i.notify,"emit","load"),g.hitch(i.notify,"emit","error"));e=c.then(function(a){return a.data||a.text});c=f(g.delegate(e,{response:c}));n&&m.then(function(a){n.call(m,a)},function(b){n.call(m,a,b)});m.promise=c;m.then=c.then;return m};i.addCommonMethods=function(a,b){e.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(d,
c){c=g.delegate(c||{});c.method=b;return a(d,c)}})};i.parseArgs=function(a,b,f){var e=b.data,g=b.query;if(e&&!f&&"object"===typeof e)b.data=c.objectToQuery(e);g?("object"===typeof g&&(g=c.objectToQuery(g)),b.preventCache&&(g+=(g?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(g="request.preventCache="+ +new Date);a&&g&&(a+=(~a.indexOf("?")?"&":"?")+g);return{url:a,options:b,getHeader:function(){return null}}};i.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||
!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(i){return i("RequestError",function(i,j){this.response=j})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(i,k){return i("RequestTimeoutError",null,k,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(i,k,j,h,c){function e(a,b){var d=a.xhr;a.status=a.xhr.status;a.text=d.responseText;if("xml"===
a.options.handleAs)a.data=d.responseXML;if(!b)try{j(a)}catch(c){b=c}b?this.reject(b):h.checkStatus(d.status)?this.resolve(a):(b=new i("Unable to load "+a.url+" status: "+d.status,a),this.reject(b))}function g(n,o,s){var j=h.parseArgs(n,h.deepCreate(p,o),c("native-formdata")&&o&&o.data&&o.data instanceof FormData),n=j.url,o=j.options,q,u=h.deferred(j,d,b,f,e,function(){q&&q()}),v=j.xhr=g._create();if(!v)return u.cancel(new i("XHR was not created")),s?u:u.promise;j.getHeader=function(a){return this.xhr.getResponseHeader(a)};
a&&(q=a(v,u,j));var r=o.data,x=!o.sync,L=o.method;try{v.open(L,n,x,o.user||l,o.password||l);if(o.withCredentials)v.withCredentials=o.withCredentials;var z=o.headers,U;if(z)for(var S in z)"content-type"===S.toLowerCase()?U=z[S]:z[S]&&v.setRequestHeader(S,z[S]);U&&!1!==U&&v.setRequestHeader("Content-Type",U);(!z||!("X-Requested-With"in z))&&v.setRequestHeader("X-Requested-With","XMLHttpRequest");h.notify&&h.notify.emit("send",j,u.promise.cancel);v.send(r)}catch(V){u.reject(V)}k(u);v=null;return s?u:
u.promise}c.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});c.add("dojo-force-activex-xhr",function(){return c("activex")&&!document.addEventListener&&"file:"===window.location.protocol});c.add("native-xhr2",function(){if(c("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});c.add("native-formdata",function(){return"function"===typeof FormData});var b,f,a,d;c("native-xhr2")?(b=
function(){return!this.isFulfilled()},d=function(a,b){b.xhr.abort()},a=function(a,b,d){function c(){b.handleResponse(d)}function f(a){a=new i("Unable to load "+d.url+" status: "+a.target.status,d);b.handleResponse(d,a)}function e(a){if(a.lengthComputable)d.loaded=a.loaded,d.total=a.total,b.progress(d)}a.addEventListener("load",c,!1);a.addEventListener("error",f,!1);a.addEventListener("progress",e,!1);return function(){a.removeEventListener("load",c,!1);a.removeEventListener("error",f,!1);a.removeEventListener("progress",
e,!1)}}):(b=function(a){return a.xhr.readyState},f=function(a){return 4===a.xhr.readyState},d=function(a,b){var d=b.xhr,c=typeof d.abort;("function"===c||"object"===c||"unknown"===c)&&d.abort()});var l,p={data:null,query:null,sync:!1,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}};g._create=function(){throw Error("XMLHTTP not available");};if(c("native-xhr")&&!c("dojo-force-activex-xhr"))g._create=function(){return new XMLHttpRequest};else if(c("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),
g._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(r){try{new ActiveXObject("Microsoft.XMLHTTP"),g._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(n){}}h.addCommonMethods(g);return g})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has"],function(i,k,j,h){function c(c){var a=b[c.options.handleAs];c.data=a?a(c):c.data||c.text;return c}h.add("activex","undefined"!==typeof ActiveXObject);var e;if(h("activex")){var g=
["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];e=function(b){var a=b.data;if(!a||!a.documentElement){var d=b.text;j.some(g,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(d);a=c}catch(f){return!1}return!0})}return a}}var b={javascript:function(b){return k.eval(b.text||"")},json:function(b){return i.parse(b.text||null)},xml:e};c.register=function(c,a){b[c]=a};return c})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),
function(i,k,j,h,c,e,g,b,f){var a=j.mixin,d={},l=d._Line=function(a,b){this.start=a;this.end=b};l.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var p=d.Animation=function(b){a(this,b);if(j.isArray(this.curve))this.curve=new l(this.curve[0],this.curve[1])};p.prototype=new h;j.extend(p,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var d=b||[];if(this[a])if(k.debugAtAllCosts)this[a].apply(this,
d);else try{this[a].apply(this,d)}catch(c){console.error("exception in animation handler for:",a),console.error(c)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var d=a||this.delay,c=j.hitch(this,"_play",b);if(0<d)return this._delayTimer=setTimeout(c,d),this;c();return this},_play:function(){this._delayTimer&&this._clearTimer();
this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);
return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===
this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);
delete this._delayTimer}});var r=0,n=null,m={run:function(){}};j.extend(p,{_startTimer:function(){if(!this._timer)this._timer=e.connect(m,"run",this,"_cycle"),r++;n||(n=setInterval(j.hitch(m,"run"),this.rate))},_stopTimer:function(){if(this._timer)e.disconnect(this._timer),this._timer=null,r--;0>=r&&(clearInterval(n),n=null,r=0)}});var o=g("ie")?function(a){var b=a.style;if(!b.width.length&&"auto"==f.get(a,"width"))b.width="auto"}:function(){};d._fade=function(c){c.node=b.byId(c.node);var g=a({properties:{}},
c),c=g.properties.opacity={};c.start=!("start"in g)?function(){return+f.get(g.node,"opacity")||0}:g.start;c.end=g.end;c=d.animateProperty(g);e.connect(c,"beforeBegin",j.partial(o,g.node));return c};d.fadeIn=function(b){return d._fade(a({end:1},b))};d.fadeOut=function(b){return d._fade(a({end:0},b))};d._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var s=function(a){this._properties=a;for(var b in a){var d=a[b];if(d.start instanceof c)d.tempColor=new c}};s.prototype.getValue=function(a){var b=
{},d;for(d in this._properties){var f=this._properties[d],e=f.start;e instanceof c?b[d]=c.blendColors(e,f.end,a,f.tempColor).toCss():j.isArray(e)||(b[d]=(f.end-e)*a+e+("opacity"!=d?f.units||"px":0))}return b};d.animateProperty=function(d){var g=d.node=b.byId(d.node);if(!d.easing)d.easing=i._defaultEasing;d=new p(d);e.connect(d,"beforeBegin",d,function(){var b={},d;for(d in this.properties){if("width"==d||"height"==d)this.node.display="block";var e=this.properties[d];j.isFunction(e)&&(e=e(g));e=b[d]=
a({},j.isObject(e)?e:{end:e});if(j.isFunction(e.start))e.start=e.start(g);if(j.isFunction(e.end))e.end=e.end(g);var h=0<=d.toLowerCase().indexOf("color"),l=function(a,b){var d={height:a.offsetHeight,width:a.offsetWidth}[b];if(void 0!==d)return d;d=f.get(a,b);return"opacity"==b?+d:h?d:parseFloat(d)};if("end"in e){if(!("start"in e))e.start=l(g,d)}else e.end=l(g,d);h?(e.start=new c(e.start),e.end=new c(e.end)):e.start="opacity"==d?+e.start:parseFloat(e.start)}this.curve=new s(b)});e.connect(d,"onAnimate",
j.hitch(f,"set",d.node));return d};d.anim=function(a,b,c,f,e,g){return d.animateProperty({node:a,duration:c||p.prototype.duration,properties:b,easing:f,onEnd:e}).play(g||0)};a(i,d);i._Animation=p;return d})}}});
require({cache:{"phpr/main":function(){define("phpr/Api,phpr/BaseLayout,phpr/ViewManager,dojo/dom-construct,dojo/_base/window,dojo/window,dojo/parser,dojo/domReady!".split(","),function(i,k,j,h,c,e){var g=null;i.config.set("csrfToken",e.get(c.doc).csrfToken);i=new k({},h.create("div",null,c.body()));i.startup();g=new j(i);g.startup()})},"phpr/Api":function(){define("exports,dojo/_base/lang,dojo/_base/array,dojo/request/xhr,dojo/Deferred,dojo/json,dojo/topic,phpr/models/Project".split(","),function(i,
k,j,h,c,e,g,b){j=function(){var a={};return{get:function(b){return a.hasOwnProperty(b)?a[b]:null},set:function(b,c){b&&(a[b]=c)}}}();i.config=j;i.getData=function(a,b){var c=k.mixin({handleAs:"json",headers:{"X-CSRFToken":this.config.get("csrfToken")}},b||{});return h.get(a,c)};i.projectTitleForId=function(a){var d=null,f=new c;b.getProjects().then(function(a){d={};for(var b in a)d[b]=a[b].title;f.resolve(d);f=null});i.projectTitleForId=function(a){if(null===d)return f.then(function(b){return b[a]});
var b=new c;b.resolve(d[a]);return b};return i.projectTitleForId(a)};i.getModulePermissions=function(a){return i.getData("index.php/Default/index/jsonGetModulesPermission/nodeId/"+a)};var f=function(a,b){g.publish("notification",{message:a},b)};i.errorHandlerForTag=function(a){return function(b){try{if(msg=e.parse(b,!0),msg.message)return f(msg.message,a)}catch(c){}try{if(b&&b.response&&b.response.text&&(msg=e.parse(b.response.text,!0),msg.message))return f(msg.message,a)}catch(g){}return f(b,a)}};
i.defaultErrorHandler=i.errorHandlerForTag(void 0)})},"phpr/models/Project":function(){define("exports,dojo/_base/array,dojo/_base/lang,dojo/_base/json,dojo/Deferred,dojo/promise/all,phpr/Api".split(","),function(i,k,j,h,c,e,g){i.getProjects=function(){var b=new c,f;g.getData("index.php/Project/Project",{query:{recursive:!0,projectId:1}}).then(function(a){var d={1:{id:"1",title:"Unassigned"}};k.forEach(a,function(a){d[a.id]=a});f=d;a=b;b=null;a.resolve(d)},g.defaultErrorHandler);i.getProjects=function(){if(b)return b;
var a=new c;a.resolve(f);return a};return i.getProjects()};i.getRecentProjects=function(b){var f={count:2};j.mixin(f,b);var a=new c;e({projects:i.getProjects(),recent:g.getData("index.php/Timecard/index/recentProjects",{query:{n:f.count}})}).then(function(b){var c=k.map(b.recent,function(a){return b.projects[a]});a.resolve(c)},g.defaultErrorHandler);return a};i.getManagedProjects=function(){var b=new c;e({projects:i.getProjects(),managed:g.getData("index.php/Project/index/managedProjects")}).then(function(c){var a=
{};k.forEach(c.managed,function(b){a[b]=c.projects[b]});b.resolve(a)},g.defaultErrorHandler);return b};i.getBookedProjects=function(){var b=new c;e({projects:i.getProjects(),booked:g.getData("index.php/Timecard/index/bookedProjects")}).then(function(c){var a={};k.forEach(c.booked,function(b){a[b]=c.projects[b]});b.resolve(a)},g.defaultErrorHandler);return b}})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(i,k,j){var h=i.some;return function(c){var e,g;c instanceof
Array?g=c:c&&"object"===typeof c&&(e=c);var b,f=[];if(e){g=[];for(var a in e)Object.hasOwnProperty.call(e,a)&&(f.push(a),g.push(e[a]));b={}}else g&&(b=[]);if(!g||!g.length)return(new k).resolve(b);var d=new k;d.promise.always(function(){b=f=null});var l=g.length;h(g,function(a,c){e||f.push(c);j(a,function(a){d.isFulfilled()||(b[f[c]]=a,0===--l&&d.resolve(b))},d.reject);return d.isFulfilled()});return d.promise}})},"phpr/BaseLayout":function(){define("dojo/_base/declare,dojo/_base/lang,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/text!phpr/template/baseLayout.html,dijit/layout/ContentPane,phpr/Menubar,phpr/BookingList".split(","),
function(i,k,j,h,c,e){return i([j,h,c],{baseClass:"baseLayout",templateString:e})})},"dijit/_Widget":function(){define("dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p){function r(){}function n(a){return function(b,d,c,f){return b&&"string"==typeof d&&b[d]==r?b.on(d.substring(2).toLowerCase(),
g.hitch(c,f)):a.apply(j,arguments)}}i.around(j,"connect",n);e.connect&&i.around(e,"connect",n);i=h("dijit._Widget",[d,l,p],{onClick:r,onDblClick:r,onKeyDown:r,onKeyPress:r,onKeyUp:r,onMouseDown:r,onMouseMove:r,onMouseOut:r,onMouseOver:r,onMouseLeave:r,onMouseEnter:r,onMouseUp:r,constructor:function(a){this._toConnect={};for(var b in a)this[b]===r&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,
this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===r?j.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){e.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(k.isDebug){var d=arguments.callee._ach||(arguments.callee._ach={}),c=(arguments.callee.caller||"unknown caller").toString();
d[c]||(e.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+c,"","2.0"),d[c]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){e.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?b("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},
onClose:function(){return!0}});c("dijit-legacy-requires")&&f(0,function(){require(["dijit/_base"])});return i})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(i,k,j,h,c){var e={},g={},b={length:0,add:function(b){if(g[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");g[b.id]=b;this.length++},remove:function(b){g[b]&&(delete g[b],this.length--)},byId:function(b){return"string"==
typeof b?g[b]:b},byNode:function(b){return g[b.getAttribute("widgetId")]},toArray:function(){var b=[],a;for(a in g)b.push(g[a]);return b},getUniqueId:function(b){var a;do a=b+"_"+(b in e?++e[b]:e[b]=0);while(g[a]);return"dijit"==c._scopeName?a:c._scopeName+"_"+a},findWidgets:function(b,a){function d(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var f=b.getAttribute("widgetId");f?(f=g[f])&&c.push(f):b!==a&&d(b)}}var c=[];d(b);return c},_destroyAll:function(){c._curFocus=null;c._prevFocus=
null;c._activeStack=[];i.forEach(b.findWidgets(h.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var a=b.getAttribute&&b.getAttribute("widgetId");if(a)return g[a];b=b.parentNode}return null},_hash:g};return c.registry=b})},"dijit/main":function(){define(["dojo/_base/kernel"],function(i){return i.dijit})},"dijit/_WidgetBase":function(){define("require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t,q,u,v){function y(a){return function(d){b[d?"set":"remove"](this.domNode,a,d);this._set(a,d)}}p.add("dijit-legacy-requires",!r.isAsync);p("dijit-legacy-requires")&&o(0,function(){i(["dijit/_base/manager"])});var x={};return e("dijit._WidgetBase",[s,u],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:y("lang"),dir:"",_setDirAttr:y("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:h.blankGif||i.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=g.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,n.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=v.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:q.doc);this.ownerDocumentBody=q.body(this.ownerDocument);v.add(this);this.buildRendering();var d;if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&(c.parentNode.replaceChild(this.domNode,c),d=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();d&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],d;for(d in this.attributeMap)b.push(d);var a=a.prototype,c;for(c in a)c in this.attributeMap||"_set"+c.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(c)}var f={},e;for(e in this.params||{})f[e]=this[e];k.forEach(b,function(a){a in f||this[a]&&this.set(a,this[a])},this);for(e in f)this.set(e,f[e])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(k.map(a,function(a){return a+"Rtl"})));f.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,k.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&n.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(d){d.destroyRecursive?d.destroyRecursive(a):d.destroy&&d.destroy(a)}this._beingDestroyed=!0;this.uninitialize();k.forEach(this._connects,n.hitch(this,"disconnect"));k.forEach(this._supportingWidgets,b);this.domNode&&k.forEach(v.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);v.remove(this.id);this._destroyed=!0},destroyRendering:function(d){this.bgIframe&&(this.bgIframe.destroy(d),delete this.bgIframe);this.domNode&&(d?b.remove(this.domNode,
"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(d||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){k.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;n.isObject(a)?l.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,d,c){c=3<=arguments.length?c:this.attributeMap[a];
k.forEach(n.isArray(c)?c:[c],function(c){var e=this[c.node||c||"domNode"];switch(c.type||"attribute"){case "attribute":n.isFunction(d)&&(d=n.hitch(this,d));c=c.attribute?c.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?b.set(e,c,d):e.set(c,d);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(d));break;case "innerHTML":e.innerHTML=d;break;case "class":f.replace(e,d,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var d in a)this.set(d,a[d]);return this}d=this._getAttrNames(a);var c=this[d.s];if(n.isFunction(c))var f=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!n.isFunction(this.focusNode)?"focusNode":"domNode",e=this[c].tagName,g;if(!(g=x[e])){g=this[c];var h={},l;for(l in g)h[l.toLowerCase()]=!0;g=x[e]=h}l=a in this.attributeMap?this.attributeMap[a]:d.s in this?this[d.s]:d.l in g&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?c:null;null!=l&&this._attrToDom(a,b,l);this._set(a,b)}return f||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var d=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+d+"Attr",g:"_get"+d+"Attr",l:d.toLowerCase()}},_set:function(a,b){var d=this[a];this[a]=b;this._created&&b!==d&&(this._watchCallbacks&&this._watchCallbacks(a,d,b),this.emit("attrmodified-"+
a,{detail:{prevValue:d,newValue:b}}))},emit:function(a,b,d){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var c,f=this["on"+a];f&&(c=f.apply(this,d?d:[b]));this._started&&!this._beingDestroyed&&m.emit(this.domNode,a.toLowerCase(),b);return c},on:function(a,b){var d=this._onMap(a);return d?j.after(this,d,b,!0):this.own(m(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,d=b._onMap;if(!d){var d=b._onMap=
{},c;for(c in b.prototype)/^on/.test(c)&&(d[c.replace(/^on/,"").toLowerCase()]=c)}return d["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?v.findWidgets(this.containerNode):[]},getParent:function(){return v.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,d){return this.own(c.connect(a,b,this,d))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(t.subscribe(a,
n.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:d.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=l.get(this.domNode,"display")},placeAt:function(b,d){var c=!b.tagName&&v.byId(b);c&&c.addChild&&(!d||"number"===typeof d)?c.addChild(this,d):(c=c?c.containerNode&&!/after|before|replace/.test(d||"")?c.containerNode:c.domNode:g.byId(b,this.ownerDocument),a.place(this.domNode,c,d),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var d=setTimeout(n.hitch(this,function(){d=null;this._destroyed||n.hitch(this,a)()}),b||0);return{remove:function(){d&&(clearTimeout(d),d=null);return null}}}})})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(i,k,j,h){return i("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(c){var e=this._attrPairNames;
return e[c]?e[c]:e[c]={s:"_"+c+"Setter",g:"_"+c+"Getter"}},postscript:function(c){c&&this.set(c)},_get:function(c,e){return"function"===typeof this[e.g]?this[e.g]():this[c]},get:function(c){return this._get(c,this._getAttrNames(c))},set:function(c,e){if("object"===typeof c){for(var g in c)c.hasOwnProperty(g)&&"_watchCallbacks"!=g&&this.set(g,c[g]);return this}g=this._getAttrNames(c);var b=this._get(c,g);g=this[g.s];var f;"function"===typeof g?f=g.apply(this,Array.prototype.slice.call(arguments,1)):
this[c]=e;if(this._watchCallbacks){var a=this;h(f,function(){a._watchCallbacks(c,b,e)})}return this},_changeAttrValue:function(c,e){var g=this.get(c);this[c]=e;this._watchCallbacks&&this._watchCallbacks(c,g,e);return this},watch:function(c,e){var g=this._watchCallbacks;if(!g)var b=this,g=this._watchCallbacks=function(a,c,f,e){var h=function(e){if(e)for(var e=e.slice(),g=0,h=e.length;g<h;g++)e[g].call(b,a,c,f)};h(g["_"+a]);e||h(g["*"])};!e&&"function"===typeof c?(e=c,c="*"):c="_"+c;var f=g[c];"object"!==
typeof f&&(f=g[c]=[]);f.push(e);var a={};a.unwatch=a.remove=function(){var a=j.indexOf(f,e);-1<a&&f.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(i,k,j){return j("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){i.forEach(arguments,function(h){var c="destroyRecursive"in h?"destroyRecursive":"destroy"in h?"destroy":"remove",e=k.before(this,"destroy",function(e){h[c](e)});k.after(h,c,function(){e.remove()},
!0)},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(i,k,j,h,c,e,g,b){i=h("dijit._OnDijitClickMixin",null,{connect:function(c,a,d){return this.inherited(arguments,[c,"ondijitclick"==a?b:a,d])}});i.a11yclick=b;return i})},"dijit/a11yclick":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),
function(i,k,j,h,c,e,g){function b(a){return(a.keyCode===j.ENTER||a.keyCode===j.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var f=null;c("dom-addeventlistener")?g.doc.addEventListener("keydown",function(a){f=a.target},!0):function(){var a=function(a){f=a.srcElement};g.doc.attachEvent("onkeydown",a);e.addOnWindowUnload(function(){g.doc.detachEvent("onkeydown",a)})}();return function(a,d){if(/input|button/i.test(a.nodeName))return i(a,"click",d);var e=[i(a,"keydown",function(a){if(b(a))f=
a.target,a.preventDefault()}),i(a,"keyup",function(a){b(a)&&a.target==f&&(f=null,i.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),i(a,"click",function(a){d.call(this,a)})];if(c("touch")){var g;e.push(i(a,"touchend",function(a){var b=a.target;g=setTimeout(function(){g=null;i.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),i(a,"click",function(){g&&clearTimeout(g)}))}return{remove:function(){k.forEach(e,function(a){a.remove()});g&&(clearTimeout(g),g=null)}}}})},"dijit/_FocusMixin":function(){define(["./focus",
"./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(i,k,j,h){h.extend(k,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return j("dijit._FocusMixin",null,{_focusManager:i})})},"dijit/focus":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o){var s=new (k([d,e],{curNode:null,activeStack:[],constructor:function(){var a=g.hitch(this,function(a){j.isDescendant(this.curNode,a)&&this.set("curNode",null);j.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});i.before(c,"empty",a);i.before(c,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,d){var c=this,f=function(b){c._justMouseDowned=!0;setTimeout(function(){c._justMouseDowned=!1},0);
if(!a("ie")||!b||!(b.srcElement&&null==b.srcElement.parentNode))c._onTouchNode(d||b.target||b.srcElement,"mouse")},e=a("ie")?b.document.documentElement:b.document;if(e){if(a("ie")){b.document.body.attachEvent("onmousedown",f);var g=function(a){var b=a.srcElement.tagName.toLowerCase();"#document"==b||"body"==b||(n.isTabNavigable(a.srcElement)?c._onFocusNode(d||a.srcElement):c._onTouchNode(d||a.srcElement))};e.attachEvent("onfocusin",g);var h=function(a){c._onBlurNode(d||a.srcElement)};e.attachEvent("onfocusout",
h);return{remove:function(){b.document.detachEvent("onmousedown",f);e.detachEvent("onfocusin",g);e.detachEvent("onfocusout",h);e=null}}}e.body.addEventListener("mousedown",f,!0);e.body.addEventListener("touchstart",f,!0);var l=function(a){c._onFocusNode(d||a.target)};e.addEventListener("focus",l,!0);var i=function(a){c._onBlurNode(d||a.target)};e.addEventListener("blur",i,!0);return{remove:function(){e.body.removeEventListener("mousedown",f,!0);e.body.removeEventListener("touchstart",f,!0);e.removeEventListener("focus",
l,!0);e.removeEventListener("blur",i,!0);e=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(g.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(g.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,
b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var d=[];try{for(;a;){var c=h.get(a,"dijitPopupParent");if(c)a=m.byId(c).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===p.body())break;a=r.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),e=f&&m.byId(f);e&&!("mouse"==b&&e.get("disabled"))&&d.unshift(f);a=a.parentNode}}}catch(g){}this._setStack(d,b)},_onFocusNode:function(a){a&&
9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var d=this.activeStack;this.set("activeStack",a);for(var c=0;c<Math.min(d.length,a.length)&&!(d[c]!=a[c]);c++);for(var f,e=d.length-1;e>=c;e--)if(f=m.byId(d[e]))f._hasBeenBlurred=!0,f.set("focused",!1),f._focusManager==this&&f._onBlur(b),this.emit("widget-blur",f,b);for(e=
c;e<a.length;e++)if(f=m.byId(a[e]))f.set("focused",!0),f._focusManager==this&&f._onFocus(b),this.emit("widget-focus",f,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));f(function(){var b=s.registerWin(r.get(p.doc));a("ie")&&l.addOnWindowUnload(function(){b&&(b.remove(),b=null)})});o.focus=function(a){s.focus(a)};for(var t in s)/^_/.test(t)||(o.focus[t]="function"==typeof s[t]?g.hitch(s,t):s[t]);s.watch(function(a,b,d){o.focus[a]=d});return s})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),
function(i,k,j,h,c,e){var g={getBox:function(b){var b=b||j.doc,f="BackCompat"==b.compatMode?j.body(b):b.documentElement,a=c.docScroll(b);if(k("touch"))var d=g.get(b),b=d.innerWidth||f.clientWidth,f=d.innerHeight||f.clientHeight;else b=f.clientWidth,f=f.clientHeight;return{l:a.x,t:a.y,w:b,h:f}},get:function(b){if(k("ie")&&g!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var c=b._parentWindow;b._parentWindow=null;return c}return b.parentWindow||b.defaultView},
scrollIntoView:function(b,f){try{var b=h.byId(b),a=b.ownerDocument||j.doc,d=j.body(a),g=a.documentElement||d.parentNode,i=k("ie"),r=k("webkit");if((!k("mozilla")&&!i&&!r&&!k("opera")||b==d||b==g)&&"undefined"!=typeof b.scrollIntoView)b.scrollIntoView(!1);else{var n="BackCompat"==a.compatMode,m=9<=i&&"frameElement"in b.ownerDocument.parentWindow?0<g.clientHeight&&0<g.clientWidth&&(0==d.clientHeight||0==d.clientWidth||d.clientHeight>g.clientHeight||d.clientWidth>g.clientWidth)?g:d:n?d:g,r=r?d:m,o=m.clientWidth,
s=m.clientHeight,t=!c.isBodyLtr(a),q=f||c.position(b),u=b.parentNode,a=function(a){return 6>=i||i&&n?!1:"fixed"==e.get(a,"position").toLowerCase()};if(!a(b))for(;u;){u==d&&(u=r);var v=c.position(u),y=a(u);if(u==r){v.w=o;v.h=s;r==g&&i&&t&&(v.x+=r.offsetWidth-v.w);if(0>v.x||!i)v.x=0;if(0>v.y||!i)v.y=0}else{var x=c.getPadBorderExtents(u);v.w-=x.w;v.h-=x.h;v.x+=x.l;v.y+=x.t;var L=u.clientWidth,z=v.w-L;if(0<L&&0<z)v.w=L,v.x+=t&&(i||u.clientLeft>x.l)?z:0;L=u.clientHeight;z=v.h-L;if(0<L&&0<z)v.h=L}if(y){if(0>
v.y)v.h+=v.y,v.y=0;if(0>v.x)v.w+=v.x,v.x=0;if(v.y+v.h>s)v.h=s-v.y;if(v.x+v.w>o)v.w=o-v.x}var U=q.x-v.x,S=q.y-Math.max(v.y,0),V=U+q.w-v.w,ka=S+q.h-v.h;if(0<V*U){var D=Math[0>U?"max":"min"](U,V);if(t&&(8==i&&!n||9<=i))D=-D;q.x+=u.scrollLeft;u.scrollLeft+=D;q.x-=u.scrollLeft}0<ka*S&&(q.y+=u.scrollTop,u.scrollTop+=Math[0>S?"max":"min"](S,ka),q.y-=u.scrollTop);u=u!=r&&!y&&u.parentNode}}}catch(E){console.error("scrollIntoView: "+E),b.scrollIntoView(!1)}}};i.setObject("dojo.window",g);return g})},"dijit/a11y":function(){define("dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),
function(i,k,j,h,c,e,g,b){var f=b._isElementShown=function(a){var b=e.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=c.get(a,"type")};b.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return c.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var f=a.contentDocument;if("designMode"in f&&"on"==f.designMode)return!0;b=f.body}catch(e){try{b=a.contentWindow.document.body}catch(g){return!1}}return b&&
("true"==b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var a=b.isTabNavigable=function(a){return c.get(a,"disabled")?!1:c.has(a,"tabIndex")?0<=c.get(a,"tabIndex"):b.hasDefaultTabStop(a)};b._getTabNavigable=function(b){function e(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var h,i,n,m,o,s,j={},k=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||
g("ie")&&"HTML"!==b.scopeName||!f(b))){if(a(b)){var d=+c.get(b,"tabIndex");if(!c.has(b,"tabIndex")||0==d)h||(h=b),i=b;else if(0<d){if(!n||d<m)m=d,n=b;if(!o||d>=s)s=d,o=b}d=e(b);c.get(b,"checked")&&d&&(j[d]=b)}"SELECT"!=b.nodeName.toUpperCase()&&k(b)}};f(b)&&k(b);return{first:j[e(h)]||h,last:j[e(i)]||i,lowest:j[e(n)]||n,highest:j[e(o)]||o}};b.getFirstInTabbingOrder=function(a,c){var f=b._getTabNavigable(h.byId(a,c));return f.lowest?f.lowest:f.first};b.getLastInTabbingOrder=function(a,c){var f=b._getTabNavigable(h.byId(a,
c));return f.last?f.last:f.highest};return{hasDefaultTabStop:b.hasDefaultTabStop,isTabNavigable:b.isTabNavigable,_getTabNavigable:b._getTabNavigable,getFirstInTabbingOrder:b.getFirstInTabbingOrder,getLastInTabbingOrder:b.getLastInTabbingOrder}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(i,k,j,h,c){var e=c.doc.documentElement,g=h("ie"),b=h("opera"),f=Math.floor,a=h("ff"),c=i.boxModel.replace(/-/,""),g={dj_ie:g,dj_ie6:6==f(g),dj_ie7:7==
f(g),dj_ie8:8==f(g),dj_ie9:9==f(g),dj_quirks:h("quirks"),dj_iequirks:g&&h("quirks"),dj_opera:b,dj_khtml:h("khtml"),dj_webkit:h("webkit"),dj_safari:h("safari"),dj_chrome:h("chrome"),dj_gecko:h("mozilla"),dj_ff3:3==f(a)};g["dj_"+c]=!0;var d="",l;for(l in g)g[l]&&(d+=l+" ");e.className=k.trim(e.className+" "+d);j(90,function(){if(!i.isBodyLtr()){var a="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");e.className=k.trim(e.className+" "+a+"dj_rtl dijitRtl "+d.replace(/ /g,"-rtl "))}});return h})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/ready","dojo/_base/window"],function(i,k,j,h){j(90,function(){k("highcontrast")&&i.add(h.body(),"dijit_a11y")});return k})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-construct,./dom-style,./has,./ready,./_base/window".split(","),function(i,k,j,h,c,e,g,b){e.add("highcontrast",function(){var f=b.doc.createElement("div");f.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(k.blankGif||
i.toUrl("./resources/blank.gif"))+");";b.body().appendChild(f);var a=c.getComputedStyle(f),d=a.backgroundImage,a=a.borderTopColor==a.borderRightColor||d&&("none"==d||"url(invalid-url:)"==d);h.destroy(f);return a});g(90,function(){e("highcontrast")&&j.add(b.body(),"dj_a11y")});return e})},"dijit/_TemplatedMixin":function(){define("dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(i,
k,j,h,c,e,g,b,f,a){var d=g("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,d=this;return h.substitute(a,this,function(a,c){"!"==c.charAt(0)&&(a=i.getObject(c.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=
c(this.templatePath,{sanitize:!0});var a=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),f;if(i.isString(a)){if(f=b.toDom(this._stringRepl(a),this.ownerDocument),1!=f.nodeType)throw Error("Invalid template: "+a);}else f=a.cloneNode(!0);this.domNode=f;this.inherited(arguments);this._attachTemplateNodes(f,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=
this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},_attachTemplateNodes:function(a,b){for(var d=i.isArray(a)?a:a.all||a.getElementsByTagName("*"),c=i.isArray(a)?0:-1;0>c||d[c];c++){var f=-1==c?a:d[c];if(!this.widgetsInTemplate||!b(f,"dojoType")&&!b(f,"data-dojo-type")){var e=b(f,"dojoAttachPoint")||b(f,"data-dojo-attach-point");if(e)for(var g=e.split(/\s*,\s*/);e=g.shift();)i.isArray(this[e])?this[e].push(f):this[e]=f,this._attachPoints.push(e);if(e=b(f,"dojoAttachEvent")||
b(f,"data-dojo-attach-event"))for(var g=e.split(/\s*,\s*/),h=i.trim;e=g.shift();)if(e){var j=null;-1!=e.indexOf(":")?(j=e.split(":"),e=h(j[0]),j=h(j[1])):e=h(e);j||(j=e);this._attachEvents.push(this.connect(f,k[e]||e,j))}}}},destroyRendering:function(){e.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});d._templateCache={};d.getCachedTemplate=function(a,c,f){var e=
d._templateCache,g=a,i=e[g];if(i){try{if(!i.ownerDocument||i.ownerDocument==(f||document))return i}catch(s){}b.destroy(i)}a=h.trim(a);if(c||a.match(/\$\{([^\}]+)\}/g))return e[g]=a;c=b.toDom(a,f);if(1!=c.nodeType)throw Error("Invalid template: "+a);return e[g]=c};f("ie")&&a.addOnWindowUnload(function(){var a=d._templateCache,c;for(c in a){var f=a[c];"object"==typeof f&&b.destroy(f);delete a[c]}});i.extend(j,{dojoAttachEvent:"",dojoAttachPoint:""});return d})},"dojo/touch":function(){define("./_base/kernel,./_base/lang,./aspect,./dom,./on,./has,./mouse,./ready,./_base/window".split(","),
function(i,k,j,h,c,e,g,b,f){function a(a){return function(b,d){return c(b,a,d)}}var j=e("touch"),d=!1;e("ios")&&(e=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",d=5>parseFloat(e.replace(/_/,".").replace(/_/g,"")));var l,p;j&&(b(function(){p=f.body();f.doc.addEventListener("touchstart",function(a){var b=p;p=a.target;c.emit(b,"dojotouchout",{target:b,relatedTarget:p,bubbles:!0});c.emit(p,"dojotouchover",{target:p,relatedTarget:b,bubbles:!0})},!0);c(f.doc,"touchmove",function(a){if((a=f.doc.elementFromPoint(a.pageX-
(d?0:f.global.pageXOffset),a.pageY-(d?0:f.global.pageYOffset)))&&p!==a)c.emit(p,"dojotouchout",{target:p,relatedTarget:a,bubbles:!0}),c.emit(a,"dojotouchover",{target:a,relatedTarget:p,bubbles:!0}),p=a})}),l=function(a,b){return c(f.doc,"touchmove",function(d){(a===f.doc||h.isDescendant(p,a))&&b.call(this,k.mixin({},d,{target:p,touches:d.touches,preventDefault:function(){d.preventDefault()},stopPropagation:function(){d.stopPropagation()}}))})});g={press:a(j?"touchstart":"mousedown"),move:j?l:a("mousemove"),
release:a(j?"touchend":"mouseup"),cancel:j?a("touchcancel"):g.leave,over:a(j?"dojotouchover":"mouseover"),out:a(j?"dojotouchout":"mouseout"),enter:g._eventHandler(j?"dojotouchover":"mouseover"),leave:g._eventHandler(j?"dojotouchout":"mouseout")};return i.touch=g})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(i,k){var j={};k.setObject("dojo.string",j);j.rep=function(h,c){if(0>=c||!h)return"";for(var e=[];;){c&1&&e.push(h);if(!(c>>=1))break;h+=h}return e.join("")};j.pad=
function(h,c,e,g){e||(e="0");h=""+h;c=j.rep(e,Math.ceil((c-h.length)/e.length));return g?h+c:c+h};j.substitute=function(h,c,e,g){g=g||i.global;e=e?k.hitch(g,e):function(b){return b};return h.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(b,f,a){b=k.getObject(f,!1,c);a&&(b=k.getObject(a,!1,g).call(g,b,f));return e(b,f).toString()})};j.trim=String.prototype.trim?k.trim:function(h){for(var h=h.replace(/^\s+/,""),c=h.length-1;0<=c;c--)if(/\S/.test(h.charAt(c))){h=h.substring(0,c+1);break}return h};
return j})},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(i){return i.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(i,k,j,h){var c;c=function(a,b,c){h("GET",{url:a,sync:!!b,load:c,headers:i.config.textPluginHeaders||{}})};var e={},g=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},b=
{},f={};i.cache=function(a,b,f){var h;"string"==typeof a?/\//.test(a)?(h=a,f=b):h=k.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(h=a+"",f=b);a=void 0!=f&&"string"!=typeof f?f.value:f;f=f&&f.sanitize;if("string"==typeof a)return e[h]=a,f?g(a):a;if(null===a)return delete e[h],null;h in e||c(h,!0,function(a){e[h]=a});return f?g(e[h]):e[h]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),f=c[0];return(/^\./.test(f)?b(f):f)+(c[1]?"!"+c[1]:"")},load:function(a,d,h){var a=a.split("!"),i=1<a.length,
j=a[0],n=d.toUrl(a[0]),a="url:"+n,m=b,o=function(a){h(i?g(a):a)};j in e?m=e[j]:a in d.cache?m=d.cache[a]:n in e&&(m=e[n]);if(m===b)if(f[n])f[n].push(o);else{var s=f[n]=[o];c(n,!d.async,function(a){e[j]=e[n]=a;for(var b=0;b<s.length;)s[b++](a);delete f[n]})}else o(m)}}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(i,k,j){return k("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var h=
this._startupWidgets=j.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"});if(!h.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");this._attachTemplateNodes(h,function(c,e){return c[e]})}},startup:function(){i.forEach(this._startupWidgets,
function(h){h&&!h._started&&h.startup&&h.startup()});this.inherited(arguments)}})})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m){function o(a){var b=a._nameCaseMap,d=a.prototype;if(!b||b._extendCnt<t){var b=a._nameCaseMap={},c;for(c in d)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);
b._extendCnt=t}return b}function s(a){var b=a.join();if(!q[b]){for(var d=[],c=0,f=a.length;c<f;c++){var e=a[c];d[d.length]=q[e]=q[e]||j.getObject(e)||~e.indexOf("/")&&i(e)}a=d.shift();q[b]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return q[b]}var t=0;a.after(j,"extend",function(){t++},!0);var q={},u={_clearCache:function(){t++;q={}},_functionFromScript:function(a,b){var d="",c="",f=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),f=(f||"").split(/\s*,\s*/);
e&&e.length&&h.forEach(e.split(/\s*,\s*/),function(a){d+="with("+a+"){";c+="}"});return new Function(f,d+a.innerHTML+c)},instantiate:function(a,b,d){var b=b||{},d=d||{},c=(d.scope||k._scopeName)+"Type",f="data-"+(d.scope||k._scopeName)+"-",e=f+"type",g=f+"mixins",l=[];h.forEach(a,function(a){var d=c in b?b[c]:a.getAttribute(e)||a.getAttribute(c);if(d){var f=a.getAttribute(g),d=f?[d].concat(f.split(/\s*,\s*/)):[d];l.push({node:a,types:d})}});return this._instantiate(l,b,d)},_instantiate:function(a,
b,d){a=h.map(a,function(a){var c=a.ctor||s(a.types);if(!c)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(c,a.node,b,d,a.scripts,a.inherited)},this);!b._started&&!d.noStart&&h.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a},construct:function(c,e,g,l,i,s){var v;var m=c&&c.prototype,l=l||{},q={};l.defaults&&j.mixin(q,l.defaults);s&&j.mixin(q,s);var t;p("dom-attributes-explicit")?t=e.attributes:p("dom-attributes-specified-flag")?
t=h.filter(e.attributes,function(a){return a.specified}):(s=(/^input$|^img$/i.test(e.nodeName)?e:e.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),t=h.map(s.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==e.nodeName&&"value"==a||"enctype"==b?e.getAttribute(b):e.getAttributeNode(b).value}}));var u=l.scope||k._scopeName,s="data-"+u+"-",E={};"dojo"!==u&&(E[s+"props"]="data-dojo-props",E[s+"type"]="data-dojo-type",
E[s+"mixins"]="data-dojo-mixins",E[u+"type"]="dojoType",E[s+"id"]="data-dojo-id");for(var u=0,B,F=[],P,N;B=t[u++];){var K=B.name,G=K.toLowerCase();B=B.value;switch(E[G]||G){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":N=B;break;case "data-dojo-id":case "jsid":P=B;break;case "data-dojo-attach-point":case "dojoattachpoint":q.dojoAttachPoint=B;break;case "data-dojo-attach-event":case "dojoattachevent":q.dojoAttachEvent=B;break;case "class":q["class"]=e.className;
break;case "style":q.style=e.style&&e.style.cssText;break;default:if(K in m||(K=o(c)[G]||K),K in m)switch(typeof m[K]){case "string":q[K]=B;break;case "number":q[K]=B.length?Number(B):NaN;break;case "boolean":q[K]="false"!=B.toLowerCase();break;case "function":q[K]=""===B||-1!=B.search(/[^\w\.]+/i)?new Function(B):j.getObject(B,!1)||new Function(B);F.push(K);break;default:G=m[K],q[K]=G&&"length"in G?B?B.split(/\s*,\s*/):[]:G instanceof Date?""==B?new Date(""):"now"==B?new Date:d.fromISOString(B):
G instanceof b?k.baseUrl+B:f.fromJson(B)}else q[K]=B}}for(u=0;u<F.length;u++)t=F[u].toLowerCase(),e.removeAttribute(t),e[t]=null;if(N)try{N=f.fromJson.call(l.propsThis,"{"+N+"}"),j.mixin(q,N)}catch(Y){throw Error(Y.toString()+" in data-dojo-props='"+N+"'");}j.mixin(q,g);i||(i=c&&(c._noScript||m._noScript)?[]:r("> script[type^='dojo/']",e));g=[];l=[];N=[];F=[];if(i)for(u=0;u<i.length;u++){var H=i[u];e.removeChild(H);t=H.getAttribute(s+"event")||H.getAttribute("event");E=H.getAttribute(s+"prop");K=
H.getAttribute(s+"method");G=H.getAttribute(s+"advice");B=H.getAttribute("type");H=this._functionFromScript(H,s);t?"dojo/connect"==B?g.push({method:t,func:H}):"dojo/on"==B?F.push({event:t,func:H}):q[t]=H:"dojo/aspect"==B?g.push({method:K,advice:G,func:H}):"dojo/watch"==B?N.push({prop:E,func:H}):l.push(H)}v=(i=c.markupFactory||m.markupFactory)?i(q,e,c):new c(q,e),c=v;P&&j.setObject(P,c);for(u=0;u<g.length;u++)a[g[u].advice||"after"](c,g[u].method,j.hitch(c,g[u].func),!0);for(u=0;u<l.length;u++)l[u].call(c);
for(u=0;u<N.length;u++)c.watch(N[u].prop,N[u].func);for(u=0;u<F.length;u++)n(c,F[u].event,F[u].func);return c},scan:function(a,b){function d(a){if(!a.inherited){a.inherited={};var b=a.node,c=d(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(j)||c.textDir},f;for(f in b)b[f]&&(a.inherited[f]=b[f])}return a.inherited}var c=[],f=[],e={},g=(b.scope||k._scopeName)+"Type",o="data-"+(b.scope||k._scopeName)+"-",n=o+"type",j=o+"textdir",o=o+"mixins",
m=a.firstChild,q=b.inherited;if(!q){var p=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&p(a.parentNode,b)},q={dir:p(a,"dir"),lang:p(a,"lang"),textDir:p(a,j)},t;for(t in q)q[t]||delete q[t]}for(var q={inherited:q},u,r;;)if(m)if(1!=m.nodeType)m=m.nextSibling;else if(u&&"script"==m.nodeName.toLowerCase())(G=m.getAttribute("type"))&&/^dojo\/\w/i.test(G)&&u.push(m),m=m.nextSibling;else if(r)m=m.nextSibling;else{var G=m.getAttribute(n)||m.getAttribute(g);t=m.firstChild;if(!G&&(!t||
3==t.nodeType&&!t.nextSibling))m=m.nextSibling;else{r=null;if(G){var Y=m.getAttribute(o);u=Y?[G].concat(Y.split(/\s*,\s*/)):[G];try{r=s(u)}catch(H){}r||h.forEach(u,function(a){~a.indexOf("/")&&!e[a]&&(e[a]=!0,f[f.length]=a)});Y=r&&!r.prototype._noScript?[]:null;q={types:u,ctor:r,parent:q,node:m,scripts:Y};q.inherited=d(q);c.push(q)}else q={node:m,scripts:u,parent:q};m=t;u=Y;r=r&&r.prototype.stopParser&&!b.template}}else{if(!q||!q.node)break;m=q.node.nextSibling;r=!1;q=q.parent;u=q.scripts}var Q=new l;
f.length?i(f,function(){Q.resolve(h.filter(c,function(a){if(!a.ctor)try{a.ctor=s(a.types)}catch(d){}for(var c=a.parent;c&&!c.types;)c=c.parent;var f=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(f&&f.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))}):Q.resolve(c);return Q.promise},_require:function(a){var a=f.fromJson("{"+a.innerHTML+"}"),b=[],d=[],c=new l,e;for(e in a)b.push(e),d.push(a[e]);i(d,function(){for(var a=0;a<b.length;a++)j.setObject(b[a],
arguments[a]);c.resolve(arguments)});return c.promise},_scanAmd:function(a){var b=new l,d=b.promise;b.resolve(!0);var c=this;r("script[type='dojo/require']",a).forEach(function(a){d=d.then(function(){return c._require(a)});a.parentNode.removeChild(a)});return d},parse:function(a,b){var d;!b&&a&&a.rootNode?(b=a,d=b.rootNode):a&&j.isObject(a)&&!("nodeType"in a)?b=a:d=a;d=d?e.byId(d):g.body();var b=b||{},c=b.template?{template:!0}:{},f=[],h=this,l=this._scanAmd(d,b).then(function(){return h.scan(d,b)}).then(function(a){return f=
f.concat(h._instantiate(a,c,b))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});j.mixin(f,l);return f}};k.parser=u;c.parseOnLoad&&m(100,u,"parse");return u})},"dojo/_base/url":function(){define(["./kernel"],function(i){var k=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,j=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,h=function(){for(var c=arguments,e=[c[0]],g=1;g<c.length;g++)if(c[g]){var b=new h(c[g]+""),e=new h(e[0]+"");if(""==
b.path&&!b.scheme&&!b.authority&&!b.query){if(null!=b.fragment)e.fragment=b.fragment;b=e}else if(!b.scheme&&(b.scheme=e.scheme,!b.authority&&(b.authority=e.authority,"/"!=b.path.charAt(0)))){for(var e=(e.path.substring(0,e.path.lastIndexOf("/")+1)+b.path).split("/"),f=0;f<e.length;f++)"."==e[f]?f==e.length-1?e[f]="":(e.splice(f,1),f--):0<f&&!(1==f&&""==e[0])&&".."==e[f]&&".."!=e[f-1]&&(f==e.length-1?(e.splice(f,1),e[f-1]=""):(e.splice(f-1,2),f-=2));b.path=e.join("/")}e=[];b.scheme&&e.push(b.scheme,
":");b.authority&&e.push("//",b.authority);e.push(b.path);b.query&&e.push("?",b.query);b.fragment&&e.push("#",b.fragment)}this.uri=e.join("");c=this.uri.match(k);this.scheme=c[2]||(c[1]?"":null);this.authority=c[4]||(c[3]?"":null);this.path=c[5];this.query=c[7]||(c[6]?"":null);this.fragment=c[9]||(c[8]?"":null);if(null!=this.authority)c=this.authority.match(j),this.user=c[3]||null,this.password=c[4]||null,this.host=c[6]||c[7],this.port=c[9]||null};h.prototype.toString=function(){return this.uri};
return i._Url=h})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(i,k){var j={};i.setObject("dojo.date.stamp",j);j.fromISOString=function(h,c){if(!j._isoRegExp)j._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;var e=j._isoRegExp.exec(h),g=null;if(e){e.shift();e[1]&&e[1]--;e[6]&&(e[6]*=1E3);c&&(c=new Date(c),k.forEach(k.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),
function(a){return c["get"+a]()}),function(a,b){e[b]=e[b]||a}));g=new Date(e[0]||1970,e[1]||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0);100>e[0]&&g.setFullYear(e[0]||1970);var b=0,f=e[7]&&e[7].charAt(0);"Z"!=f&&(b=60*(e[8]||0)+(Number(e[9])||0),"-"!=f&&(b*=-1));f&&(b-=g.getTimezoneOffset());b&&g.setTime(g.getTime()+6E4*b)}return g};j.toISOString=function(h,c){var e=function(a){return 10>a?"0"+a:a},c=c||{},g=[],b=c.zulu?"getUTC":"get",f="";"time"!=c.selector&&(f=h[b+"FullYear"](),f=["0000".substr((f+
"").length)+f,e(h[b+"Month"]()+1),e(h[b+"Date"]())].join("-"));g.push(f);if("date"!=c.selector){f=[e(h[b+"Hours"]()),e(h[b+"Minutes"]()),e(h[b+"Seconds"]())].join(":");b=h[b+"Milliseconds"]();c.milliseconds&&(f+="."+(100>b?"0":"")+e(b));if(c.zulu)f+="Z";else if("time"!=c.selector)var b=h.getTimezoneOffset(),a=Math.abs(b),f=f+((0<b?"-":"+")+e(Math.floor(a/60))+":"+e(a%60));g.push(f)}return g.join("T")};return j})},"url:phpr/template/baseLayout.html":'<div class="baseLayout">\n    <div data-dojo-type="phpr/Menubar" data-dojo-attach-point="menubar"></div>\n    <div class="mainContent" data-dojo-type="dijit/layout/ContentPane" data-dojo-attach-point="mainContent">\n    </div>\n</div>\n',
"dijit/layout/ContentPane":function(){define("dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m){return a("dijit.layout.ContentPane",[j,h,c],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:i._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,
loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var b=l.byId(b),d=b.ownerDocument.createDocumentFragment();b.firstChild;)d.appendChild(b.firstChild);
a=k.delegate(a,{content:d})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=n.getLocalization("dijit","loading",this.lang);this.loadingMessage=e.substitute(this.loadingMessage,a);this.errorMessage=e.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.title="";p.get(this.domNode,"role")||this.domNode.setAttribute("role","group")},startup:function(){this.inherited(arguments);
this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&k.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){f.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&k.isFunction(a.startup))a.startup(),a._started=!0});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&k.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){i.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new d(k.hitch(this,"cancel"));this.onLoadDeferred.then(k.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){i.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new d(k.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(k.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new d(k.hitch(this,"cancel"));this.onLoadDeferred.then(k.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
k.isObject(this.ioArgs)&&k.mixin(b,this.ioArgs);var d=this._xhrDfd=(this.ioMethod||r.get)(b),c;d.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(d){a._onError("Content",d)}},function(b){d.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;f.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(f.forEach(b.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete b.parseResults);a||g._emptyNode(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var d=this._contentSetter;if(!(d&&d instanceof g._ContentSetter))d=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:k.hitch(this,this._onError),onContentError:k.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+
this.id+" could not change content due to "+b.message,b)}})});var c=k.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=d.set(k.isObject(a)&&a.domNode?a.domNode:a,c),f=this;return m(c&&c.then?c:d.parseDeferred,function(){delete f._contentSetterParams;b||(f._started&&(f._startChildren(),f._scheduleLayout()),f._onLoadHandler(a))})},
_onError:function(a,b,d){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(i,k,j){return k("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);
if(!this.containerNode)this.containerNode=this.domNode},addChild:function(h,c){var e=this.containerNode;if(c&&"number"==typeof c){var g=this.getChildren();if(g&&g.length>=c)e=g[c-1].domNode,c="after"}j.place(h.domNode,e,c);this._started&&!h._started&&h.startup()},removeChild:function(h){"number"==typeof h&&(h=this.getChildren()[h]);if(h)(h=h.domNode)&&h.parentNode&&h.parentNode.removeChild(h)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(h,c){var e=this.getChildren(),
g=i.indexOf(this.getChildren(),h);return e[g+c]},getIndexOfChild:function(h){return i.indexOf(this.getChildren(),h)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),function(i,k,j,h,c,e,g,b,f,a,d){return k("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=
this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",e.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],b=!1;g("> *",this.containerNode).some(function(d){var c=f.byNode(d);c&&c.resize?a.push(c):d.offsetHeight&&(b=!0)});this._singleChild=1==a.length&&!b?a[0]:null;j.toggle(this.containerNode,this.baseClass+"SingleChild",
!!this._singleChild)},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&h.setMarginBox(this.domNode,a);var c=this.containerNode;if(c===this.domNode){var f=b||{};e.mixin(f,a||{});if(!("h"in f)||!("w"in f))f=e.mixin(h.getMarginBox(c),f);this._contentBox=d.marginBox2contentBox(c,
f)}else this._contentBox=h.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||h.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else i.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;
var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!j.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),function(i,k,j,h,c,e){var g=new i;j(200,function(){var b=e.getBox();g._rlh=
k(c.global,"resize",function(){var a=e.getBox();b.h==a.h&&b.w==a.w||(b=a,g.emit("resize"))});if(8==h("ie")){var f=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=f)f=screen.deviceXDPI,g.emit("resize")},500)}});return g})},"dijit/layout/utils":function(){define("dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(i,k,j,h,c,e){function g(b,f){var a=b.resize?b.resize(f):j.setMarginBox(b.domNode,f);a?c.mixin(b,a):(c.mixin(b,j.getMarginBox(b.domNode)),
c.mixin(b,f))}e=c.getObject("layout",!0,e);e.marginBox2contentBox=function(b,c){var a=h.getComputedStyle(b),d=j.getMarginExtents(b,a),e=j.getPadBorderExtents(b,a);return{l:h.toPixelValue(b,a.paddingLeft),t:h.toPixelValue(b,a.paddingTop),w:c.w-(d.w+e.w),h:c.h-(d.h+e.h)}};e.layoutChildren=function(b,f,a,d,e){f=c.mixin({},f);k.add(b,"dijitLayoutContainer");a=i.filter(a,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(i.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));
i.forEach(a,function(a){var b=a.domNode,c=a.region||a.layoutAlign;if(!c)throw Error("No region setting for "+a.id);var h=b.style;h.left=f.l+"px";h.top=f.t+"px";h.position="absolute";k.add(b,"dijitAlign"+(c.substring(0,1).toUpperCase()+c.substring(1)));b={};d&&d==a.id&&(b["top"==a.region||"bottom"==a.region?"h":"w"]=e);"top"==c||"bottom"==c?(b.w=f.w,g(a,b),f.h-=a.h,"top"==c?f.t+=a.h:h.top=f.t+f.h+"px"):"left"==c||"right"==c?(b.h=f.h,g(a,b),f.w-=a.w,"left"==c?f.l+=a.w:h.left=f.l+f.w+"px"):("client"==
c||"center"==c)&&g(a,f)})};return{marginBox2contentBox:e.marginBox2contentBox,layoutChildren:e.layoutChildren}})},"dojo/html":function(){define("./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),function(i,k,j,h,c,e,g){var b={};k.setObject("dojo.html",b);var f=0;b._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")};b._emptyNode=e.empty;b._setNodeContent=function(a,b){e.empty(a);if(b)if("string"==
typeof b&&(b=e.toDom(b,a.ownerDocument)),!b.nodeType&&k.isArrayLike(b))for(var c=b.length,f=0;f<b.length;f=c==b.length?f+1:0)e.place(b[f],a,"last");else e.place(b,a,"last");return a};b._ContentSetter=h("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:i._scopeName,startup:!0,constructor:function(a,b){k.mixin(this,a||{});b=this.node=c.byId(this.node||b);if(!this.id)this.id=["Setter",b?b.id||b.tagName:"",f++].join("_")},set:function(a,
b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=b._setNodeContent(a,this.content)}catch(d){var c=this.onContentError(d);try{a.innerHTML=c}catch(f){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+f.message,f)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||
this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(j.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);b._emptyNode(this.node)},onBegin:function(){var a=this.content;if(k.isString(a)&&(this.cleanContent&&(a=b._secureForInnerHtml(a)),this.extractContent)){var d=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);d&&(a=d[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();
return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};j.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var c=this;this.parseDeferred=g.parse({rootNode:a,
noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return c.parseResults=a})}catch(f){this._onError("Content",f,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,d,c){a=this["on"+a+"Error"].call(this,d);c?console.error(c,d):a&&b._setNodeContent(this.node,a,!0)}});b.set=function(a,d,c){void 0==d&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),d="");return c?(new b._ContentSetter(k.mixin(c,{content:d,node:a}))).set():b._setNodeContent(a,
d,!0)};return b})},"dojo/i18n":function(){define("./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),function(i,k,j,h,c,e,g,b,f){j.add("dojo-preload-i18n-Api",1);var g=i.i18n={},a=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,d=function(a,b,d,c){for(var f=[d+c],b=b.split("-"),e="",g=0;g<b.length;g++)e+=(e?"-":"")+b[g],(!a||a[e])&&f.push(d+e+"/"+c);return f},l={},p=function(a,b,d){d=d?d.toLowerCase():i.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,
"/");return/root/i.test(d)?a+"/nls/"+b:a+"/nls/"+d+"/"+b};i.getL10nName=function(a,b,d){return f.id+"!"+p(a,b,d)};var r=function(a,b,c,f,g,h){a([b],function(i){var n=e.clone(i.root),o=d(!i._v1x&&i,g,c,f);a(o,function(){for(var a=1;a<o.length;a++)n=e.mixin(e.clone(n),arguments[a]);l[b+"/"+g]=n;h()})})},n=function(a){var b=c.extraLocale||[],b=e.isArray(b)?b:[b];b.push(a);return b},m=function(d,c,f){if(j("dojo-preload-i18n-Api")){var g=d.split("*"),o="preload"==g[1];o&&(l[d]||(l[d]=1,u(g[2],b.parse(g[3]),
1,c)),f(1));if(!(g=o))t&&q.push([d,c,f]),g=t;if(g)return}var d=a.exec(d),m=d[1]+"/",s=d[5]||d[4],k=m+s,g=(d=d[5]&&d[4])||i.locale,p=k+"/"+g,d=d?[g]:n(g),y=d.length,x=function(){--y||f(e.delegate(l[p]))};h.forEach(d,function(a){var b=k+"/"+a;j("dojo-preload-i18n-Api")&&v(b);l[b]?x():r(c,k,m,s,a,x)})};if(j("dojo-unit-tests"))var o=g.unitTests=[];j("dojo-preload-i18n-Api");var s=g.normalizeLocale=function(a){a=a?a.toLowerCase():i.locale;return"root"==a?"ROOT":a},t=0,q=[],u=g._preloadLocalizations=function(a,
b,d,c){function f(a,b){c([a],b)}function e(a,b){for(var d=a.split("-");d.length;){if(b(d.join("-")))return;d.pop()}b("ROOT")}function g(d){d=s(d);e(d,function(d){if(0<=h.indexOf(b,d)){var c=a.replace(/\./g,"/")+"_"+d;t++;f(c,function(a){for(var b in a)l[k.toAbsMid(b)+"/"+d]=a[b];for(--t;!t&&q.length;)m.apply(null,q.shift())});return!0}return!1})}c=c||k;g();h.forEach(i.config.extraLocale,g)},v=function(){},y={},x=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
v=function(a){for(var b,d=a.split("/"),c=i.global[d[0]],f=1;c&&f<d.length-1;c=c[d[f++]]);c&&((b=c[d[f]])||(b=c[d[f].replace(/-/g,"_")]),b&&(l[a]=b));return b};g.getLocalization=function(a,b,d){var c,a=p(a,b,d);m(a,k,function(a){c=a});return c};j("dojo-unit-tests")&&o.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=x("{prop:1}",v,"nonsense",y);a.is({prop:1},b);a.is(void 0,b[1]);b=x("({prop:1})",v,"nonsense",y);a.is({prop:1},b);a.is(void 0,b[1]);b=x("{'prop-x':1}",v,"nonsense",y);
a.is({"prop-x":1},b);a.is(void 0,b[1]);b=x("({'prop-x':1})",v,"nonsense",y);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=x("define({'prop-x':1})",v,"nonsense",y);a.is(y,b);a.is({"prop-x":1},y.result);b=x("define('some/module', {'prop-x':1})",v,"nonsense",y);a.is(y,b);a.is({"prop-x":1},y.result);b=x("this is total nonsense and should throw an error",v,"nonsense",y);a.is(b instanceof Error,!0)})});return e.mixin(g,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:m,cache:l})})},"phpr/Menubar":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/dom-class,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/_CssStateMixin,dijit/Tooltip,dojo/topic,dojo/text!phpr/template/menubar.html,phpr/Menubar/WarningIcon".split(","),
function(i,k,j,h,c,e,g,b,f,a,d){return i([c,e,g,b],{templateString:d,baseClass:"menuBar",cssStateNodes:{logoutButton:"dijit"},buildRendering:function(){this.inherited(arguments);this.own(j(this.bookingsButton,"click",k.hitch(this,"onBookingsClick")),j(this.statisticsButton,"click",k.hitch(this,"onStatisticsClick")),j(this.teamStatisticsButton,"click",k.hitch(this,"onTeamStatisticsClick")),j(this.logoutButton,"click",k.hitch(this,"_logout")));this.own(new f({connectId:this.logoutButton,label:"Log out"}));
this.own(a.subscribe("phpr/changedPage",k.hitch(this,"onChangedPage")))},onChangedPage:function(a){switch(a){case "statistics":h.replace(this.domNode,"menubarOuter statistics");break;case "teamStatistics":h.replace(this.domNode,"menubarOuter teamStatistics");break;case "bookings":h.replace(this.domNode,"menubarOuter bookings")}},onBookingsClick:function(){a.publish("phpr/changePage","bookings")},onStatisticsClick:function(){a.publish("phpr/changePage","statistics")},onTeamStatisticsClick:function(){a.publish("phpr/changePage",
"teamStatistics")},_logout:function(){window.location="index.php/Login/logout"}})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),function(i,k,j,h,c,e,g,b,f,a){k=k("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);i.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),
function(a){this.watch(a,e.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;
case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(d){b=b.concat(i.map(b,function(a){return a+d}),"dijit"+d)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");
var c=this.stateNode||this.domNode,f={};i.forEach(c.className.split(" "),function(a){f[a]=!0});"_stateClasses"in this&&i.forEach(this._stateClasses,function(a){delete f[a]});i.forEach(b,function(a){f[a]=!0});var e=[],g;for(g in f)e.push(g);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,c){function f(c){h.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":h.toggle(a,b+"Hover",!0);break;case "mouseout":h.toggle(a,b+"Hover",!1);
f(!1);break;case "mousedown":case "touchstart":f(!0);break;case "mouseup":case "touchend":f(!1);break;case "focus":case "focusin":h.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":h.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});b(function(){function b(d){if(!j.isDescendant(d.relatedTarget,d.target))for(var c=d.target;c&&c!=d.relatedTarget;c=c.parentNode)if(c._cssState){var f=a.getEnclosingWidget(c);f&&(c==f.domNode?f._cssMouseEvent(d):f._subnodeCssMouseEvent(c,
c._cssState,d))}}function e(a){a.target=a.srcElement;b(a)}var h=f.body(),k=(c("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);i.forEach(k,function(a){h.addEventListener?h.addEventListener(a,b,!0):h.attachEvent("on"+a,e)});g(h,"focusin, focusout",function(b){var d=b.target;d._cssState&&!d.getAttribute("widgetId")&&a.getEnclosingWidget(d)._subnodeCssMouseEvent(d,d._cssState,b)})});return k})},"dijit/Tooltip":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/on,dojo/sniff,./_base/manager,./place,./_Widget,./_TemplatedMixin,./BackgroundIframe,dojo/text!./templates/Tooltip.html,./main".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s){var t=k("dijit._MasterTooltip",[r,n],{duration:l.defaultDuration,templateString:o,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new m(this.domNode);this.fadeIn=j.fadeIn({node:this.domNode,duration:this.duration,onEnd:b.hitch(this,"_onShow")});this.fadeOut=j.fadeOut({node:this.domNode,duration:this.duration,onEnd:b.hitch(this,"_onHide")})},show:function(a,d,c,f,e){if(!this.aroundNode||!(this.aroundNode===d&&this.containerNode.innerHTML==
a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;e&&this.set("textDir",e);this.containerNode.align=f?"right":"left";var h=p.around(this.domNode,d,c&&c.length?c:q.defaultPosition,!f,b.hitch(this,"orient")),i=h.aroundNodePos;"M"==h.corner.charAt(0)&&"M"==h.aroundCorner.charAt(0)?(this.connectorNode.style.top=i.y+(i.h-this.connectorNode.offsetHeight>>1)-h.y+"px",this.connectorNode.style.left=""):"M"==h.corner.charAt(1)&&"M"==h.aroundCorner.charAt(1)?this.connectorNode.style.left=
i.x+(i.w-this.connectorNode.offsetWidth>>1)-h.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");g.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=d}},orient:function(a,b,c,f,g){this.connectorNode.style.top="";var h=f.h,f=f.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft",
"BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";var i=e.position(this.domNode);9==d("ie")&&(i.w+=2);var l=Math.min(Math.max(f,1),i.w);e.setMarginBox(this.domNode,{w:l});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=e.position(a),b=this.connectorNode.offsetHeight,a.h>h?(this.connectorNode.style.top=h-(g.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=
Math.min(Math.max(g.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,i.w-f)},_onShow:function(){if(d("ie"))this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,
this._onDeck),this._onDeck=null},_setAutoTextDir:function(a){this.applyTextDir(a,d("ie")?a.outerText:a.textContent);i.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});s.showTooltip=function(a,b,d,c,f){d&&(d=i.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));if(!q._masterTT)s._masterTT=q._masterTT=new t;return q._masterTT.show(a,
b,d,c,f)};s.hideTooltip=function(a){return q._masterTT&&q._masterTT.hide(a)};var q=k("dijit.Tooltip",r,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(d){i.forEach(this._connections||[],function(a){i.forEach(a,function(a){a.remove()})},this);this._connectIds=i.filter(b.isArrayLike(d)?d:d?[d]:[],function(a){return h.byId(a,this.ownerDocument)},this);this._connections=i.map(this._connectIds,function(d){var d=h.byId(d,this.ownerDocument),c=this.selector,e=c?function(b){return a.selector(c,
b)}:function(a){return a},g=this;return[a(d,e(f.enter),function(){g._onHover(this)}),a(d,e("focusin"),function(){g._onHover(this)}),a(d,e(f.leave),b.hitch(g,"_onUnHover")),a(d,e("focusout"),b.hitch(g,"_onUnHover"))]},this);this._set("connectId",d)},addTarget:function(a){a=a.id||a;-1==i.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=i.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},
buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;i.forEach(b.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(a){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(a)},this.showDelay)},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&
(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);if(b)q.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position)},close:function(){this._connectNode&&(q.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();i.forEach(this._connections||[],function(a){i.forEach(a,function(a){a.remove()})},
this);this.inherited(arguments)}});q._MasterTooltip=t;q.show=s.showTooltip;q.hide=s.hideTooltip;q.defaultPosition=["after-centered","before-centered"];return q})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(i,k,j,h,c){var e={};i.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(c){e[c]=h[c]});j.mixin(e,{defaultDuration:k.defaultDuration||200});j.mixin(c,e);return c})},
"dijit/place":function(){define("dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(i,k,j,h,c,e,g){function b(b,a,d,g){var h=e.getBox(b.ownerDocument);(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&c.body(b.ownerDocument).appendChild(b);var j=null;i.some(a,function(a){var c=a.corner,e=a.pos,i=0,n={w:{L:h.l+h.w-e.x,R:e.x-h.l,M:h.w}[c.charAt(1)],h:{T:h.t+h.h-e.y,B:e.y-h.t,M:h.h}[c.charAt(0)]},u=b.style;u.left=
u.right="auto";d&&(i=d(b,a.aroundCorner,c,n,g),i="undefined"==typeof i?0:i);var v=b.style,y=v.display,x=v.visibility;if("none"==v.display)v.visibility="hidden",v.display="";u=k.position(b);v.display=y;v.visibility=x;y={L:e.x,R:e.x-u.w,M:Math.max(h.l,Math.min(h.l+h.w,e.x+(u.w>>1))-u.w)}[c.charAt(1)];x={T:e.y,B:e.y-u.h,M:Math.max(h.t,Math.min(h.t+h.h,e.y+(u.h>>1))-u.h)}[c.charAt(0)];e=Math.max(h.l,y);v=Math.max(h.t,x);y=Math.min(h.l+h.w,y+u.w);x=Math.min(h.t+h.h,x+u.h);y-=e;x-=v;i+=u.w-y+(u.h-x);if(null==
j||i<j.overflow)j={corner:c,aroundCorner:a.aroundCorner,x:e,y:v,w:y,h:x,overflow:i,spaceAvailable:n};return!i});j.overflow&&d&&d(b,j.aroundCorner,j.corner,j.spaceAvailable,g);var a=k.isBodyLtr(b.ownerDocument),n=b.style;n.top=j.y+"px";n[a?"left":"right"]=(a?j.x:h.w-j.x-j.w)+"px";n[a?"right":"left"]="auto";return j}return g.place={at:function(c,a,d,e){d=i.map(d,function(b){var d={corner:b,pos:{x:a.x,y:a.y}};e&&(d.pos.x+="L"==b.charAt(1)?e.x:-e.x,d.pos.y+="T"==b.charAt(0)?e.y:-e.y);return d});return b(c,
d)},around:function(c,a,d,e,g){function r(a,b){L.push({aroundCorner:a,corner:b,pos:{x:{L:u,R:u+y,M:u+(y>>1)}[a.charAt(1)],y:{T:v,B:v+x,M:v+(x>>1)}[a.charAt(0)]}})}var n="string"==typeof a||"offsetWidth"in a?k.position(a,!0):a;if(a.parentNode)for(var m="absolute"==j.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){var o=k.position(a,!0),s=j.getComputedStyle(a);/relative|absolute/.test(s.position)&&(m=!1);if(!m&&/hidden|auto|scroll/.test(s.overflow)){var t=Math.min(n.y+
n.h,o.y+o.h),q=Math.min(n.x+n.w,o.x+o.w);n.x=Math.max(n.x,o.x);n.y=Math.max(n.y,o.y);n.h=t-n.y;n.w=q-n.x}"absolute"==s.position&&(m=!0);a=a.parentNode}var u=n.x,v=n.y,y="w"in n?n.w:n.w=n.width,x="h"in n?n.h:(h.deprecated("place.around: dijit/place.__Rectangle: { x:"+u+", y:"+v+", height:"+n.height+", width:"+y+" } has been deprecated.  Please use { x:"+u+", y:"+v+", h:"+n.height+", w:"+y+" }","","2.0"),n.h=n.height),L=[];i.forEach(d,function(a){var b=e;switch(a){case "above-centered":r("TM","BM");
break;case "below-centered":r("BM","TM");break;case "after-centered":b=!b;case "before-centered":r(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":r(b?"TL":"TR",b?"TR":"TL");r(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":r(b?"BL":"BR",b?"TL":"TR");r(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":r(b?"TL":"TR",b?"BL":"BR");r(b?"TR":"TL",b?"BR":"BL");break;default:r(a.aroundCorner,a.corner)}});c=b(c,L,g,{w:y,h:x});c.aroundNodePos=n;return c}}})},
"dijit/BackgroundIframe":function(){define("require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),function(i,k,j,h,c,e,g,b,f){var a=new function(){var a=[];this.pop=function(){var e;a.length?(e=a.pop(),e.style.display=""):(9>b("ie")?(e="<iframe src='"+(j.dojoBlankHtmlUrl||i.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",
e=f.doc.createElement(e)):(e=h.create("iframe"),e.src='javascript:""',e.className="dijitBackgroundIframe",e.setAttribute("role","presentation"),c.set(e,"opacity",0.1)),e.tabIndex=-1);return e};this.push=function(b){b.style.display="none";a.push(b)}};k.BackgroundIframe=function(d){if(!d.id)throw Error("no id");if(b("ie")||b("mozilla")){var f=this.iframe=a.pop();d.appendChild(f);7>b("ie")||b("quirks")?(this.resize(d),this._conn=g(d,"resize",e.hitch(this,function(){this.resize(d)}))):c.set(f,{width:"100%",
height:"100%"})}};e.extend(k.BackgroundIframe,{resize:function(a){this.iframe&&c.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(a.push(this.iframe),delete this.iframe)}});return k.BackgroundIframe})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n></div>\n',
"url:phpr/template/menubar.html":'<div class="menubarOuter">\n    <div class="menubarMiddle">\n        <table class="menubar"><tr>\n            <td class="bookingsButton button left" data-dojo-attach-point="bookingsButton"\n                ><div class="menuItem">Booking</div></td>\n            <td class="statisticsButton button left" data-dojo-attach-point="statisticsButton"\n                ><div class="menuItem">Statistics</div></td>\n            <td\n                class="teamStatisticsButton button left"\n                data-dojo-attach-point="teamStatisticsButton"\n                ><div class="menuItem">Team Statistics</div></td>\n            <td style="width: auto;"><div><b></b></div></td>\n            <td class="button right" data-dojo-type="phpr/Menubar/WarningIcon"><div><b></b></div></td>\n            <td class="logo button right">\n                <img src="../../../img/timecard/logo.png" border="0" /></td>\n            <td class="logoutButton button right" data-dojo-attach-point="logoutButton"\n                ><div class="logoutIcon menuItem"></div></td>\n            </tr></table>\n    </div>\n</div>\n',
"phpr/Menubar/WarningIcon":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/on,dojo/topic,dojo/window,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/dom-class,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/_CssStateMixin,dijit/MenuItem,phpr/Api,dojo/text!phpr/template/menubar/warningIcon.html,dijit/DropDownMenu".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s){return i([l,p,r,n],{baseClass:"warningIconButton",templateString:s,
state:"closed",itemCount:0,byTag:null,constructor:function(){this.byTag={};c.subscribe("notification",dojo.hitch(this,this._addNotification));c.subscribe("notification/clear",dojo.hitch(this,this._clearNotifications))},postCreate:function(){this.inherited(arguments);this.own(h(this.domNode,"click",k.hitch(this,"onClick")));e.get(this.domNode.ownerDocument).onerror=function(a){o.defaultErrorHandler(a)}},onClick:function(){this.toggleState()},toggleState:function(){this.isOpen()?this.closeMenu():this.openMenu()},
openMenu:function(){g.add(this.domNode,"open");this.state="open"},closeMenu:function(){g.remove(this.domNode,"open");this.state="closed"},isOpen:function(){return"open"===this.state},_remove:function(a){this.menu.removeChild(a);delete this.menu.focusedChild;a.destroyRecursive();this.itemCount-=1;0===this.itemCount&&(this._markEmpty(),this.closeMenu())},_addNotification:function(a,b){this._markNotEmpty();var d=new m({iconClass:"warningIcon",label:a.message});d.own(d.on("click",dojo.hitch(this,this._remove,
d)));this.menu.addChild(d,0);this.itemCount+=1;0<this.itemCount&&this.openMenu();this.byTag[b]=this.byTag[b]||[];this.byTag[b].push(d)},_clearNotifications:function(a){if(void 0===a){for(var b in this.byTag)j.forEach(this.byTag[b],k.hitch(this,this._remove));this.byTag={}}else j.forEach(this.byTag[a],k.hitch(this,this._remove)),delete this.byTag[a]},dummyItem:new m,_markEmpty:function(){this.menu.addChild(this.dummyItem);d.add(this.domNode,"empty")},_markNotEmpty:function(){this.menu.removeChild(this.dummyItem);
d.remove(this.domNode,"empty")}})})},"dijit/MenuItem":function(){define("dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(i,k,j,h,c,e,g,b,f,a,d){return i("dijit.MenuItem",[g,b,f,a],{templateString:d,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,
this.label)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";j.set(this.containerNode,"id",a);this.accelKeyNode&&(j.set(this.accelKeyNode,"id",this.id+"_accel"),a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);k.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==
e("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){h.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){c.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},setDisabled:function(a){c.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.",
"","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;j.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare",
"./registry"],function(i,k){return i("dijit._Contained",null,{_getSibling:function(i){var h=this.domNode;do h=h[i+"Sibling"];while(h&&1!=h.nodeType);return h&&k.byNode(h)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var i=this.getParent();return!i||!i.getIndexOfChild?-1:i.getIndexOfChild(this)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"url:phpr/template/menubar/warningIcon.html":'<td class="empty">\n    <div class="menuItem"></div>\n    <div class="menuContainer">\n        <div class="menu" data-dojo-type="dijit/DropDownMenu" data-dojo-attach-point="menu"></div>\n    </div>\n</td>\n',"dijit/DropDownMenu":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),function(i,k,j,h,c,e){return i("dijit.DropDownMenu",[e,c],{templateString:h,baseClass:"dijitMenu",
postCreate:function(){this.inherited(arguments);var c=this.isLeftToRight();this._openSubMenuKey=c?j.RIGHT_ARROW:j.LEFT_ARROW;this._closeSubMenuKey=c?j.LEFT_ARROW:j.RIGHT_ARROW;this.connectKeyNavHandlers([j.UP_ARROW],[j.DOWN_ARROW])},_onKeyPress:function(c){if(!c.ctrlKey&&!c.altKey)switch(c.charOrCode){case this._openSubMenuKey:this._moveToPopup(c);k.stop(c);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else k.stop(c)}}})})},
"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',"dijit/_MenuBase":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n){return k("dijit._MenuBase",[p,n,r],{parentMenu:null,popupDelay:500,autoFocus:!1,postCreate:function(){var d=this,f=function(a){return c.contains(a,"dijitMenuItem")};this.own(b(this.containerNode,b.selector(f,g.enter),function(){d.onItemHover(l.byNode(this))}),b(this.containerNode,b.selector(f,g.leave),function(){d.onItemUnhover(l.byNode(this))}),b(this.containerNode,b.selector(f,a),function(a){d.onItemClick(l.byNode(this),a);a.stopPropagation();a.preventDefault()}));
this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);
this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=
null;if(b.parentMenu)b.parentMenu.currentPopup=null;d.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},
_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a){this._stopPopupTimer();var b=this.focusedChild;if(b){var c=b.popup;if(!c.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),d.close(this.currentPopup));
c.parentMenu=this;c.from_item=b;var f=this;d.open({parent:this,popup:c,around:b.domNode,orient:this._orient||["after","before"],onCancel:function(){f.focusChild(b);f._cleanUp();b._setSelected(!0);f.focusedChild=b},onExecute:e.hitch(this,"_cleanUp")});this.currentPopup=c;c.connect(c.domNode,"onmouseenter",e.hitch(f,"_onPopupHover"))}if(a&&c.focus)c._focus_timer=this.defer(e.hitch(c,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;c.replace(this.domNode,"dijitMenuActive",
"dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},_markInactive:function(){this.isActive=!1;c.replace(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=i.indexOf(this._focusManager.activeStack,this.id)&&(h.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),
d.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),this.onItemUnhover(this.focusedChild),this.focusedChild=null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/popup":function(){define("dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,./place,./BackgroundIframe,./main".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o){function s(){this._popupWrapper&&(g.destroy(this._popupWrapper),delete this._popupWrapper)}h=h(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var b=a._popupWrapper,d=a.domNode;if(!b)b=g.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.ownerDocumentBody),b.appendChild(d),d=d.style,d.display="",d.visibility="",d.position="",d.top="0px",a._popupWrapper=b,k.after(a,"destroy",s,!0);return b},moveOffScreen:function(a){a=
this._createWrapper(a);f.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);f.set(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(f){for(var g=this._stack,h=f.popup,i=f.orient||["below","below-alt","above","above-alt"],o=f.parent?f.parent.isLeftToRight():b.isBodyLtr(h.ownerDocument),s=f.around,k=f.around&&f.around.id?f.around.id+"_dropdown":"popup_"+this._idGen++;g.length&&
(!f.parent||!c.isDescendant(f.parent.domNode,g[g.length-1].widget.domNode));)this.close(g[g.length-1].widget);var z=this._createWrapper(h);e.set(z,{id:k,style:{zIndex:this._beginZIndex+g.length},"class":"dijitPopup "+(h.baseClass||h["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:f.parent?f.parent.id:""});if((r("ie")||r("mozilla"))&&!h.bgIframe)h.bgIframe=new m(z);i=s?n.around(z,s,i,o,h.orient?l.hitch(h,"orient"):null):n.at(z,f,"R"==i?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],f.padding);z.style.display=
"";z.style.visibility="visible";h.domNode.style.visibility="visible";o=[];o.push(p(z,j._keypress,l.hitch(this,function(b){if(b.charOrCode==d.ESCAPE&&f.onCancel)a.stop(b),f.onCancel();else if(b.charOrCode===d.TAB&&(a.stop(b),(b=this.getTopPopup())&&b.onCancel))b.onCancel()})));h.onCancel&&f.onCancel&&o.push(h.on("cancel",f.onCancel));o.push(h.on(h.onExecute?"execute":"change",l.hitch(this,function(){var a=this.getTopPopup();if(a&&a.onExecute)a.onExecute()})));g.push({widget:h,parent:f.parent,onExecute:f.onExecute,
onCancel:f.onCancel,onClose:f.onClose,handlers:o});if(h.onOpen)h.onOpen(i);return i},close:function(a){for(var b=this._stack;a&&i.some(b,function(b){return b.widget==a})||!a&&b.length;){var d=b.pop(),c=d.widget,f=d.onClose;if(c.onClose)c.onClose();for(var e;e=d.handlers.pop();)e.remove();c&&c.domNode&&this.hide(c);f&&f()}}});return o.popup=new h})},"dijit/_KeyNavContainer":function(){define("dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),
function(i,k,j,h,c,e,g,b,f){return e("dijit._KeyNavContainer",[j,k],{tabIndex:"0",connectKeyNavHandlers:function(a,b){var e=this._keyNavCodes={},g=f.hitch(this,"focusPrev"),i=f.hitch(this,"focusNext");h.forEach(a,function(a){e[a]=g});h.forEach(b,function(a){e[a]=i});e[c.HOME]=f.hitch(this,"focusFirstChild");e[c.END]=f.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){i.deprecated("startupKeyNavChildren() call no longer needed",
"","2.0")},startup:function(){this.inherited(arguments);h.forEach(this.getChildren(),f.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),b.set(this.domNode,
"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&b.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var b=this._keyNavCodes[a.charOrCode];b&&(b(),g.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,
b));for(var c=this.getChildren(),f=0;f<c.length;f++){a||(a=c[0<b?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"phpr/BookingList":function(){define("dojo/_base/array,dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/date/locale,dojo/html,dojo/json,dojo/when,dojo/store/JsonRest,dojo/store/Memory,dojo/store/Observable,dojo/store/Cache,dojo/date,dojo/dom-construct,phpr/BookingList/DayBlock,phpr/JsonRestQueryEngine,dojo/_base/lang,phpr/Timehelper,dojo/text!phpr/template/bookingList.html,phpr/BookingList/BookingCreator,dijit/form/FilteringSelect,dijit/form/Textarea,dijit/form/Button,dijit/form/DateTextBox,dijit/form/Form,phpr/DateTextBox".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t,q){return k([j,h,c],{store:null,date:new Date,templateString:q,observer:null,data:null,day2dayBlock:null,constructor:function(){this._setStoreAttr(new a({target:"index.php/Timecard/Timecard/",queryEngine:o}));this.data=[];this.day2dayBlock={}},startup:function(){this.inherited(arguments);this._update()},_setStoreAttr:function(a){this.store=new l(new p(a,new d));this._update()},_setDateAttr:function(a){var b=!this._started||a.getFullYear()!==this.date.getFullYear()||
a.getMonth()!==this.date.getMonth();this.date=a;this.bookingCreator.set("date",a);b&&this._update()},_updating:!1,_update:function(){if(this._started&&!this._destoyed){var a=this._getQueryString();if(this._updating)this._updating=a;this._updating=a;this.bookingCreator.set("store",this.store);n.place("<span>Loading...</span>",this.content,"only");if(this.observer)this.observer.cancel(),this.observer=null;var b=this.store.query({filter:this._getQueryString()},{sort:[{attribute:"start_datetime",descending:!0}]});
f(b,s.hitch(this,function(b){var d=this._updating;this._updating=null;if(d!==a)return this._update();n.empty(this.content);d=this._partitionBookingsByDay(b);this.data=s.clone(b);this.day2dayBlock={};this._addBookingsPartitionedByDay(d)}));this.observer=b.observe(s.hitch(this,"_storeChanged"),!0)}},_storeChanged:function(a,b,d){var a=s.clone(a),c=t.datetimeToJsDate(a.startDatetime);if(-1<b){var f=t.datetimeToJsDate(this.data[b].startDatetime);this.data.splice(b,1);0!==r.compare(c,f,"date")&&this._reloadDay(f)}-1<
d&&this.data.splice(d,0,a);this._reloadDay(c,c)},_reloadDay:function(a,b){var d=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=this.store.query({filter:this._getQueryString(d,r.add(d,"day",1))});f(c,s.hitch(this,function(a){var c=this.day2dayBlock[d.getTime()];c&&c.widget&&(c.widget.destroyRecursive(),delete this.day2dayBlock[d.getTime()]);a=this._partitionBookingsByDay(a);b&&i.some(a,function(a){return i.some(a.bookings,function(a){var d=0===r.compare(t.datetimeToJsDate(a.startDatetime),b);
if(d)a.highlight=!0;return d})});this._addBookingsPartitionedByDay(a)}))},_addBookingsPartitionedByDay:function(a){i.forEach(a,this._addDayBlock,this);this._reorderDayWidgets()},_addDayBlock:function(a){var b=this.day2dayBlock[a.day.getTime()];b&&b.widget&&(b.widget.destroyRecursive(),delete this.day2dayBlock[a.day.getTime()]);a.store=this.store;widget=new m(a);widget.placeAt(this.content);this.own(widget);this.day2dayBlock[a.day.getTime()]={widget:widget,placed:!1}},_getQueryString:function(a,d){a||
(a=this.date||new Date,a=new Date(a.getFullYear(),a.getMonth(),1));d=d||r.add(a,"month",1);return b.stringify({startDatetime:{"!ge":t.jsDateToIsoDatetime(a),"!lt":t.jsDateToIsoDatetime(d)}})},_partitionBookingsByDay:function(a){var b={};i.forEach(a,function(a){var d=t.datetimeToJsDate(a.startDatetime),d=new Date(d.getFullYear(),d.getMonth(),d.getDate());b[d]=b[d]||[];b[d].push(a)});var a=[],d;for(d in b)a.push({day:new Date(d),bookings:b[d]});return a},_reorderDayWidgets:function(){var a=[],b;for(b in this.day2dayBlock)a.push({ts:parseInt(b,
10),entry:this.day2dayBlock[b]});a.sort(function(a,b){return b.ts-a.ts});i.forEach(a,function(a,b,d){if(!1===a.entry.placed){var c=a.entry.widget;0===b?c.placeAt(this.content,"first"):b===d.length-1?c.placeAt(this.content,"last"):c.placeAt(d[b-1].entry.widget,"after");a.entry.placed=!0;2>b&&c.set("open",!0)}},this)}})})},"dojo/date/locale":function(){define("../_base/lang,../_base/array,../date,../cldr/supplemental,../i18n,../regexp,../string,../i18n!../cldr/nls/gregorian,module".split(","),function(i,
k,j,h,c,e,g,b,f){function a(a,b,d,c){return c.replace(/([a-z])\1*/ig,function(f){var e,i,l=f.charAt(0),f=f.length,j=["abbr","wide","narrow"];switch(l){case "G":e=b[4>f?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":e=a.getFullYear();switch(f){case 1:break;case 2:if(!d.fullYear){e=""+e;e=e.substr(e.length-2);break}default:i=!0}break;case "Q":case "q":e=Math.ceil((a.getMonth()+1)/3);i=!0;break;case "M":case "L":e=a.getMonth();3>f?(e+=1,i=!0):(l=["months","L"==l?"standAlone":"format",j[f-
3]].join("-"),e=b[l][e]);break;case "w":e=p._getWeekOfYear(a,0);i=!0;break;case "d":e=a.getDate();i=!0;break;case "D":e=p._getDayOfYear(a);i=!0;break;case "e":case "c":if(e=a.getDay(),2>f){e=(e-h.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":e=a.getDay();3>f?(e+=1,i=!0):(l=["days","c"==l?"standAlone":"format",j[f-3]].join("-"),e=b[l][e]);break;case "a":l=12>a.getHours()?"am":"pm";e=d[l]||b["dayPeriods-format-wide-"+l];break;case "h":case "H":case "K":case "k":i=a.getHours();switch(l){case "h":e=
i%12||12;break;case "H":e=i;break;case "K":e=i%12;break;case "k":e=i||24}i=!0;break;case "m":e=a.getMinutes();i=!0;break;case "s":e=a.getSeconds();i=!0;break;case "S":e=Math.round(a.getMilliseconds()*Math.pow(10,f-3));i=!0;break;case "v":case "z":if(e=p._getZone(a,!0,d))break;f=4;case "Z":l=p._getZone(a,!1,d);l=[0>=l?"+":"-",g.pad(Math.floor(Math.abs(l)/60),2),g.pad(Math.abs(l)%60,2)];4==f&&(l.splice(0,0,"GMT"),l.splice(3,0,":"));e=l.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+
c);}i&&(e=g.pad(e,f));return e})}function d(a,b,d,c){var f=function(a){return a},b=b||f,d=d||f,c=c||f,e=a.match(/(''|[^'])+/g),g="'"==a.charAt(0);k.forEach(e,function(a,c){a?(e[c]=(g?d:b)(a.replace(/''/g,"'")),g=!g):e[c]=""});return c(e.join(""))}function l(a,b,d,c){c=e.escapeString(c);d.strict||(c=c.replace(" a"," ?a"));return c.replace(/([a-z])\1*/ig,function(c){var f;f=c.charAt(0);var e=c.length,g="",h="";d.strict?(1<e&&(g="0{"+(e-1)+"}"),2<e&&(h="0{"+(e-2)+"}")):(g="0?",h="0{0,2}");switch(f){case "y":f=
"\\d{2,4}";break;case "M":case "L":f=2<e?"\\S+?":"1[0-2]|"+g+"[1-9]";break;case "D":f="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+g+"[1-9][0-9]|"+h+"[1-9]";break;case "d":f="3[01]|[12]\\d|"+g+"[1-9]";break;case "w":f="[1-4][0-9]|5[0-3]|"+g+"[1-9]";break;case "E":case "e":case "c":f="\\S+";break;case "h":f="1[0-2]|"+g+"[1-9]";break;case "k":f="1[01]|"+g+"\\d";break;case "H":f="1\\d|2[0-3]|"+g+"\\d";break;case "K":f="1\\d|2[0-4]|"+g+"[1-9]";break;case "m":case "s":f="[0-5]\\d";break;case "S":f="\\d{"+e+"}";
break;case "a":e=d.am||b["dayPeriods-format-wide-am"];g=d.pm||b["dayPeriods-format-wide-pm"];f=e+"|"+g;d.strict||(e!=e.toLowerCase()&&(f+="|"+e.toLowerCase()),g!=g.toLowerCase()&&(f+="|"+g.toLowerCase()),-1!=f.indexOf(".")&&(f+="|"+f.replace(/\./g,"")));f=f.replace(/\./g,"\\.");break;default:f=".*"}a&&a.push(c);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var p={};i.setObject(f.id.replace(/\//g,"."),p);p._getZone=function(a,b){return b?j.getTimezoneName(a):a.getTimezoneOffset()};p.format=function(b,
f){var f=f||{},e=c.normalizeLocale(f.locale),g=f.formatLength||"short",e=p._getGregorianBundle(e),h=[],l=i.hitch(this,a,b,e,f);if("year"==f.selector)return d(e["dateFormatItem-yyyy"]||"yyyy",l);var j;"date"!=f.selector&&(j=f.timePattern||e["timeFormat-"+g])&&h.push(d(j,l));"time"!=f.selector&&(j=f.datePattern||e["dateFormat-"+g])&&h.push(d(j,l));return 1==h.length?h[0]:e["dateTimeFormat-"+g].replace(/\{(\d+)\}/g,function(a,b){return h[b]})};p.regexp=function(a){return p._parseInfo(a).regexp};p._parseInfo=
function(a){var a=a||{},b=c.normalizeLocale(a.locale),b=p._getGregorianBundle(b),f=a.formatLength||"short",e=a.datePattern||b["dateFormat-"+f],g=a.timePattern||b["timeFormat-"+f],f="date"==a.selector?e:"time"==a.selector?g:b["dateTimeFormat-"+f].replace(/\{(\d+)\}/g,function(a,b){return[g,e][b]}),h=[];return{regexp:d(f,i.hitch(this,l,h,b,a)),tokens:h,bundle:b}};p.parse=function(a,b){var d=/[\u200E\u200F\u202A\u202E]/g,c=p._parseInfo(b),f=c.tokens,e=c.bundle,d=RegExp("^"+c.regexp.replace(d,"")+"$",
c.strict?"":"i").exec(a&&a.replace(d,""));if(!d)return null;var g=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],i="",d=k.every(d,function(a,d){if(!d)return!0;var c=f[d-1],l=c.length,c=c.charAt(0);switch(c){case "y":if(2!=l&&b.strict)h[0]=a;else if(100>a)a=Number(a),c=""+(new Date).getFullYear(),l=100*c.substring(0,2),c=Math.min(Number(c.substring(2,4))+20,99),h[0]=a<c?l+a:l-100+a;else{if(b.strict)return!1;h[0]=a}break;case "M":case "L":if(2<l){if(l=e["months-"+("L"==c?"standAlone":"format")+"-"+g[l-
3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),l=k.map(l,function(a){return a.replace(".","").toLowerCase()})),a=k.indexOf(l,a),-1==a)return!1}else a--;h[1]=a;break;case "E":case "e":case "c":l=e["days-"+("c"==c?"standAlone":"format")+"-"+g[l-3]].concat();b.strict||(a=a.toLowerCase(),l=k.map(l,function(a){return a.toLowerCase()}));a=k.indexOf(l,a);if(-1==a)return!1;break;case "D":h[1]=0;case "d":h[2]=a;break;case "a":l=b.am||e["dayPeriods-format-wide-am"];c=b.pm||e["dayPeriods-format-wide-pm"];
if(!b.strict)var j=/\./g,a=a.replace(j,"").toLowerCase(),l=l.replace(j,"").toLowerCase(),c=c.replace(j,"").toLowerCase();if(b.strict&&a!=l&&a!=c)return!1;i=a==c?"p":a==l?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;h[3]=a;break;case "m":h[4]=a;break;case "s":h[5]=a;break;case "S":h[6]=a}return!0}),c=+h[3];"p"===i&&12>c?h[3]=c+12:"a"===i&&12==c&&(h[3]=0);c=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);b.strict&&c.setFullYear(h[0]);var l=f.join(""),r=-1!=l.indexOf("d"),
l=-1!=l.indexOf("M");if(!d||l&&c.getMonth()>h[1]||r&&c.getDate()>h[2])return null;if(l&&c.getMonth()<h[1]||r&&c.getDate()<h[2])c=j.add(c,"hour",1);return c};var r=[];p.addCustomFormats=function(a,b){r.push({pkg:a,name:b})};p._getGregorianBundle=function(a){var b={};k.forEach(r,function(d){d=c.getLocalization(d.pkg,d.name,a);b=i.mixin(b,d)},this);return b};p.addCustomFormats(f.id.replace(/\/date\/locale$/,".cldr"),"gregorian");p.getNames=function(a,b,d,c){var f,c=p._getGregorianBundle(c),a=[a,d,b];
"standAlone"==d&&(d=a.join("-"),f=c[d],1==f[0]&&(f=void 0));a[1]="format";return(f||c[a.join("-")]).concat()};p.isWeekend=function(a,b){var d=h.getWeekend(b),c=(a||new Date).getDay();d.end<d.start&&(d.end+=7,c<d.start&&(c+=7));return c>=d.start&&c<=d.end};p._getDayOfYear=function(a){return j.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};p._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var d=(new Date(a.getFullYear(),0,1)).getDay(),c=Math.floor((p._getDayOfYear(a)+(d-b+7)%7-
1)/7);d==b&&c++;return c};return p})},"dojo/date":function(){define("dojo/date",["./has","./_base/lang"],function(i,k){var j={};j.getDaysInMonth=function(h){var c=h.getMonth(),e=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==c&&j.isLeapYear(h)?29:e[c]};j.isLeapYear=function(h){h=h.getFullYear();return!(h%400)||!(h%4)&&!!(h%100)};j.getTimezoneName=function(h){var c=h.toString(),e="",g=c.indexOf("(");if(-1<g)e=c.substring(++g,c.indexOf(")"));else if(g=/([A-Z\/]+) \d{4}$/,c=c.match(g))e=c[1];else if(c=
h.toLocaleString(),g=/ ([A-Z\/]+)$/,c=c.match(g))e=c[1];return"AM"==e||"PM"==e?"":e};j.compare=function(h,c,e){h=new Date(+h);c=new Date(+(c||new Date));"date"==e?(h.setHours(0,0,0,0),c.setHours(0,0,0,0)):"time"==e&&(h.setFullYear(0,0,0),c.setFullYear(0,0,0));return h>c?1:h<c?-1:0};j.add=function(h,c,e){var g=new Date(+h),b=!1,f="Date";switch(c){case "day":break;case "weekday":var a;(c=e%5)?a=parseInt(e/5):(c=0<e?5:-5,a=0<e?(e-5)/5:(e+5)/5);var d=h.getDay(),i=0;6==d&&0<e?i=1:0==d&&0>e&&(i=-1);d+=
c;if(0==d||6==d)i=0<e?2:-2;e=7*a+c+i;break;case "year":f="FullYear";b=!0;break;case "week":e*=7;break;case "quarter":e*=3;case "month":b=!0;f="Month";break;default:f="UTC"+c.charAt(0).toUpperCase()+c.substring(1)+"s"}if(f)g["set"+f](g["get"+f]()+e);b&&g.getDate()<h.getDate()&&g.setDate(0);return g};j.difference=function(h,c,e){var c=c||new Date,e=e||"day",g=c.getFullYear()-h.getFullYear(),b=1;switch(e){case "quarter":h=h.getMonth();c=c.getMonth();h=Math.floor(h/3)+1;c=Math.floor(c/3)+1;b=c+4*g-h;
break;case "weekday":g=Math.round(j.difference(h,c,"day"));e=parseInt(j.difference(h,c,"week"));if(0==g%7)g=5*e;else{var b=0,f=h.getDay(),a=c.getDay(),e=parseInt(g/7),c=g%7,h=new Date(h);h.setDate(h.getDate()+7*e);h=h.getDay();if(0<g)switch(!0){case 6==f:b=-1;break;case 0==f:b=0;break;case 6==a:b=-1;break;case 0==a:b=-2;break;case 5<h+c:b=-2}else if(0>g)switch(!0){case 6==f:b=0;break;case 0==f:b=1;break;case 6==a:b=2;break;case 0==a:b=1;break;case 0>h+c:b=2}g=g+b-2*e}b=g;break;case "year":b=g;break;
case "month":b=c.getMonth()-h.getMonth()+12*g;break;case "week":b=parseInt(j.difference(h,c,"day")/7);break;case "day":b/=24;case "hour":b/=60;case "minute":b/=60;case "second":b/=1E3;case "millisecond":b*=c.getTime()-h.getTime()}return Math.round(b)};k.mixin(k.getObject("dojo.date",!0),j);return j})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(i,k){var j={};i.setObject("dojo.cldr.supplemental",j);j.getFirstDayOfWeek=function(h){h={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,
dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[j._region(h)];return void 0===h?1:h};j._region=function(h){var h=k.normalizeLocale(h),h=h.split("-"),c=h[1];c?4==c.length&&(c=h[2]):c={de:"de",
en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[h[0]];return c};j.getWeekend=function(h){var c=j._region(h),h={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[c],c={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[c];void 0===h&&(h=6);void 0===c&&(c=0);return{start:h,end:c}};return j})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],
function(i,k){var j={};k.setObject("dojo.regexp",j);j.escapeString=function(h,c){return h.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return c&&-1!=c.indexOf(e)?e:"\\"+e})};j.buildGroupRE=function(h,c,e){if(!(h instanceof Array))return c(h);for(var g=[],b=0;b<h.length;b++)g.push(c(h[b]));return j.group(g.join("|"),e)};j.group=function(h,c){return"("+(c?"?:":"")+h+")"};return j})},"dojo/store/JsonRest":function(){define(["../_base/xhr","../_base/lang","../json","../_base/declare","./util/QueryResults"],
function(i,k,j,h,c){return h("dojo.store.JsonRest",null,{constructor:function(c){this.headers={};h.safeMixin(this,c)},headers:{},target:"",idProperty:"id",get:function(c,g){var g=g||{},b=k.mixin({Accept:this.accepts},this.headers,g.headers||g);return i("GET",{url:this.target+c,handleAs:"json",headers:b})},accepts:"application/javascript, application/json",getIdentity:function(c){return c[this.idProperty]},put:function(c,g){var g=g||{},b="id"in g?g.id:this.getIdentity(c),f="undefined"!=typeof b;return i(f&&
!g.incremental?"PUT":"POST",{url:f?this.target+b:this.target,postData:j.stringify(c),handleAs:"json",headers:k.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===g.overwrite?"*":null,"If-None-Match":!1===g.overwrite?"*":null},this.headers,g.headers)})},add:function(c,g){g=g||{};g.overwrite=!1;return this.put(c,g)},remove:function(c,g){g=g||{};return i("DELETE",{url:this.target+c,headers:k.mixin({},this.headers,g.headers)})},query:function(e,g){var g=g||{},b=k.mixin({Accept:this.accepts},
this.headers,g.headers);if(0<=g.start||0<=g.count)b.Range=b["X-Range"]="items="+(g.start||"0")+"-"+("count"in g&&Infinity!=g.count?g.count+(g.start||0)-1:"");var f=-1<this.target.indexOf("?");e&&"object"==typeof e&&(e=(e=i.objectToQuery(e))?(f?"&":"?")+e:"");if(g&&g.sort){for(var a=this.sortParam,e=e+((e||f?"&":"?")+(a?a+"=":"sort(")),f=0;f<g.sort.length;f++)var d=g.sort[f],e=e+((0<f?",":"")+(d.descending?"-":"+")+encodeURIComponent(d.attribute));a||(e+=")")}var h=i("GET",{url:this.target+(e||""),
handleAs:"json",headers:b});h.total=h.then(function(){var a=h.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return c(h)}})})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(i,k,j){var h=function(c){function e(e){c[e]||(c[e]=function(){var b=arguments;return j.when(c,function(c){Array.prototype.unshift.call(b,c);return h(i[e].apply(i,b))})})}if(!c)return c;c.then&&(c=k.delegate(c));e("forEach");
e("filter");e("map");if(!c.total)c.total=j.when(c,function(c){return c.length});return c};k.setObject("dojo.store.util.QueryResults",h);return h})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(i,k,j){return i("dojo.store.Memory",null,{constructor:function(h){for(var c in h)this[c]=h[c];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:j,get:function(h){return this.data[this.index[h]]},getIdentity:function(h){return h[this.idProperty]},
put:function(h,c){var e=this.data,g=this.index,b=this.idProperty,b=h[b]=c&&"id"in c?c.id:b in h?h[b]:Math.random();if(b in g){if(c&&!1===c.overwrite)throw Error("Object already exists");e[g[b]]=h}else g[b]=e.push(h)-1;return b},add:function(h,c){(c=c||{}).overwrite=!1;return this.put(h,c)},remove:function(h){var c=this.index,e=this.data;if(h in c)return e.splice(c[h],1),this.setData(e),!0},query:function(h,c){return k(this.queryEngine(h,c)(this.data))},setData:function(h){var a;h.items?(this.idProperty=
h.identifier,a=this.data=h.items,h=a):this.data=h;this.index={};for(var c=0,e=h.length;c<e;c++)this.index[h[c][this.idProperty]]=c}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(i){return function(k,j){function h(c){var c=i.filter(c,k),g=j&&j.sort;g&&c.sort("function"==typeof g?g:function(b,a){for(var d,c=0;d=g[c];c++){var e=b[d.attribute],h=a[d.attribute];if(e!=h)return!!d.descending==(null==e||e>h)?-1:1}return 0});if(j&&(j.start||j.count)){var b=c.length,
c=c.slice(j.start||0,(j.start||0)+(j.count||Infinity));c.total=b}return c}switch(typeof k){default:throw Error("Can not query with a "+typeof k);case "object":case "undefined":var c=k,k=function(e){for(var g in c){var b=c[g];if(b&&b.test){if(!b.test(e[g],e))return!1}else if(b!=e[g])return!1}return!0};break;case "string":if(!this[k])throw Error("No filter function "+k+" was found in store");k=this[k];case "function":}h.matches=k;return h}})},"dojo/store/Observable":function(){define(["../_base/kernel",
"../_base/lang","../_base/Deferred","../_base/array"],function(i,k,j,h){i=function(c){function e(b,f){var e=c[b];e&&(c[b]=function(b){if(a)return e.apply(this,arguments);a=!0;try{var d=e.apply(this,arguments);j.when(d,function(a){f("object"==typeof a&&a||b)});return d}finally{a=!1}})}var g=[],b=0,c=k.delegate(c);c.notify=function(a,c){b++;for(var f=g.slice(),e=0,h=f.length;e<h;e++)f[e](a,c)};var f=c.query;c.query=function(a,e){var e=e||{},i=f.apply(this,arguments);if(i&&i.forEach){var r=k.mixin({},
e);delete r.start;delete r.count;var n=c.queryEngine&&c.queryEngine(a,r),m=b,o=[],s;i.observe=function(a,d){1==o.push(a)&&g.push(s=function(a,f){j.when(i,function(g){var i=g.length!=e.count,j,k;if(++m!=b)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var s,p=-1,r=-1;if(void 0!==f)for(j=0,k=g.length;j<k;j++){var t=g[j];if(c.getIdentity(t)==f){s=t;p=j;(n||!a)&&g.splice(j,1);break}}if(n){if(a&&(n.matches?n.matches(a):n([a]).length))j=-1<p?p:g.length,
g.splice(j,0,a),r=h.indexOf(n(g),a),g.splice(j,1),e.start&&0==r||!i&&r==g.length?r=-1:g.splice(r,0,a)}else a&&(void 0!==f?r=p:e.start||(r=c.defaultIndex||0,g.splice(r,0,a)));if((-1<p||-1<r)&&(d||!n||p!=r)){i=o.slice();for(j=0;g=i[j];j++)g(a||s,p,r)}})});var f={};f.remove=f.cancel=function(){var b=h.indexOf(o,a);-1<b&&(o.splice(b,1),o.length||g.splice(h.indexOf(g,s),1))};return f}}return i};var a;e("put",function(a){c.notify(a,c.getIdentity(a))});e("add",function(a){c.notify(a)});e("remove",function(a){c.notify(void 0,
a)});return c};k.setObject("dojo.store.Observable",i);return i})},"dojo/store/Cache":function(){define(["../_base/lang","../_base/Deferred"],function(i,k){var j=function(h,c,e){e=e||{};return i.delegate(h,{query:function(g,b){var f=h.query(g,b);f.forEach(function(a){(!e.isLoaded||e.isLoaded(a))&&c.put(a)});return f},queryEngine:h.queryEngine||c.queryEngine,get:function(e,b){return k.when(c.get(e),function(f){return f||k.when(h.get(e,b),function(a){a&&c.put(a,{id:e});return a})})},add:function(e,b){return k.when(h.add(e,
b),function(f){c.add("object"==typeof f?f:e,b);return f})},put:function(e,b){c.remove(b&&b.id||this.getIdentity(e));return k.when(h.put(e,b),function(f){c.put("object"==typeof f?f:e,b);return f})},remove:function(e,b){return k.when(h.remove(e,b),function(){return c.remove(e,b)})},evict:function(e){return c.remove(e)}})};i.setObject("dojo.store.Cache",j);return j})},"phpr/BookingList/DayBlock":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-class,dojo/dom-style,dojo/on,dojo/date,dojo/date/locale,dojo/html,phpr/Timehelper,dijit/_WidgetBase,dijit/_TemplatedMixin,phpr/BookingList/BookingBlockWrapper,dojo/text!phpr/template/bookingList/dayBlock.html".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r){return i([d,l],{day:null,bookings:null,open:!1,store:null,templateString:r,constructor:function(){this.day=new Date;this.bookings=[]},buildRendering:function(){this.inherited(arguments);this.bookings.sort(function(b,d){var c=a.datetimeToJsDate(b.startDatetime).getTime(),f=a.datetimeToJsDate(d.startDatetime).getTime();return c>f});var d=this.open||!1;j.forEach(this.bookings,function(a){d=a.highlight||d;a=new p({booking:a,store:this.store});a.placeAt(this.body);
this.own(a)},this);this._checkEmpty();f.set(this.headerText,b.format(this.day,{selector:"date",datePattern:"d EEEE"}));this._updateTotalTime();0===g.compare(new Date,this.day,"date")&&(h.add(this.header,"today"),d=!0);this.set("open",d);e(this.header,"click",k.hitch(this,function(){h.toggle(this.domNode,"open")}))},_setOpenAttr:function(a){(this.open=a)?h.add(this.domNode,"open"):h.remove(this.domNode,"open")},_checkEmpty:function(){0===this.body.children.length?0===g.compare(new Date,this.day,"date")&&
h.add(this.body,"empty"):h.remove(this.body,"empty")},_updateTotalTime:function(){var b=0,d=!1;j.forEach(this.bookings,function(a){a=parseInt(a.minutes,10);isNaN(a)?d=!0:b+=a});f.set(this.total,"Sum: "+a.minutesToHMString(b));c.set(this.total,"color",d?"red":"")}})})},"phpr/Timehelper":function(){define(["exports","dojo/number"],function(i,k){var j=function(h){return"0"===h.substr(0,1)?h.substr(1):h};i.datetimeToJsDate=function(h){return new Date(h.substr(0,4),j(h.substr(5,2))-1,j(h.substr(8,2)),
j(h.substr(11,2)),j(h.substr(14,2)),j(h.substr(17,2)))};i.timeToJsDate=function(h){return new Date(0,0,0,j(h.substr(0,2)),j(h.substr(3,2)),j(h.substr(6,2)))};i.timeToJsDateWithReferenceDate=function(h,c){return new Date(c.getFullYear(),c.getMonth(),c.getDate(),j(h.substr(0,2)),j(h.substr(3,2)),j(h.substr(6,2)))};i.dateToJsDate=function(h){return new Date(parseInt(h.substr(0,4),10),parseInt(h.substr(5,2),10)-1,parseInt(h.substr(8,2),10))};i.jsDateToIsoDate=function(h){var c=k.format(h.getDate(),{pattern:"00"}),
e=k.format(h.getMonth()+1,{pattern:"00"});return h.getFullYear()+"-"+e+"-"+c};i.jsDateToIsoTime=function(h){var c;c=h.getHours();h=h.getMinutes();if(isNaN(c)||24<c||0>c)hour="00";if(isNaN(h)||60<h||0>h)h="00";return k.format(c,{pattern:"00"})+":"+k.format(h,{pattern:"00"})};i.jsDateToIsoDatetime=function(h){null===h&&(h=new Date);return i.jsDateToIsoDate(h)+" "+i.jsDateToIsoTime(h)};i.minutesToHMString=function(h){var c="";0>h&&(c+="-",h=Math.abs(h));60<=h&&(c+=Math.floor(h/60)+"h");if(60>h||0!==
h%60)c+=h%60+"m";return c};i.timeRegexpString="(([01]?\\d|2[0123])[:\\. ]?([01-5]\\d))";i.parseTime=function(h){if(0===h.length)return null;h=h.match("^"+i.timeRegexpString+"$");if(h[2]&&h[3]){var c=new Date;c.setHours(parseInt(h[2],10));c.setMinutes(parseInt(h[3],10));return c}};i.exclude=function(h){h=new Date(h);h.setDate(h.getDate()-1);return h}})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(i,k,j,h,c){var e={};i.setObject("dojo.number",
e);e.format=function(b,c){var c=i.mixin({},c||{}),a=k.normalizeLocale(c.locale),a=k.getLocalization("dojo.cldr","number",a);c.customs=a;a=c.pattern||a[(c.type||"decimal")+"Format"];return isNaN(b)||Infinity==Math.abs(b)?null:e._applyPattern(b,a,c)};e._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;e._applyPattern=function(b,c,a){var a=a||{},d=a.customs.group,g=a.customs.decimal,c=c.split(";"),h=c[0],c=c[0>b?1:0]||"-"+h;if(-1!=c.indexOf("%"))b*=100;else if(-1!=c.indexOf("\u2030"))b*=1E3;else if(-1!=c.indexOf("\u00a4"))d=
a.customs.currencyGroup||d,g=a.customs.currencyDecimal||g,c=c.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=c.indexOf("E"))throw Error("exponential notation not supported");var i=e._numberPatternRE,h=h.match(i);if(!h)throw Error("unable to find a number expression in pattern: "+c);if(!1===a.fractional)a.places=0;return c.replace(i,e._formatAbsolute(b,h[0],{decimal:g,group:d,places:a.places,round:a.round}))};e.round=function(b,
c,a){a=10/(a||10);return(a*+b).toFixed(c)/a};if(0==(0.9).toFixed()){var g=e.round;e.round=function(b,c,a){var d=Math.pow(10,-c||0),e=Math.abs(b);if(!b||e>=d||5>e*Math.pow(10,c+1))d=0;return g(b,c,a)+(0<b?d:-d)}}e._formatAbsolute=function(b,c,a){a=a||{};if(!0===a.places)a.places=0;if(Infinity===a.places)a.places=6;var c=c.split("."),d="string"==typeof a.places&&a.places.indexOf(","),g=a.places;if(d)g=a.places.substring(d+1);else if(!(0<=g))g=(c[1]||[]).length;0>a.round||(b=e.round(b,g,a.round));var b=
(""+Math.abs(b)).split("."),i=b[1]||"";if(c[1]||a.places){if(d)a.places=a.places.substring(0,d);d=void 0!==a.places?a.places:c[1]&&c[1].lastIndexOf("0")+1;d>i.length&&(b[1]=h.pad(i,d,"0",!0));g<i.length&&(b[1]=i.substr(0,g))}else b[1]&&b.pop();g=c[0].replace(",","");d=g.indexOf("0");-1!=d&&(d=g.length-d,d>b[0].length&&(b[0]=h.pad(b[0],d)),-1==g.indexOf("#")&&(b[0]=b[0].substr(b[0].length-d)));var g=c[0].lastIndexOf(","),j,n;-1!=g&&(j=c[0].length-g-1,c=c[0].substr(0,g),g=c.lastIndexOf(","),-1!=g&&
(n=c.length-g-1));c=[];for(g=b[0];g;)d=g.length-j,c.push(0<d?g.substr(d):g),g=0<d?g.slice(0,d):"",n&&(j=n,delete n);b[0]=c.reverse().join(a.group||",");return b.join(a.decimal||".")};e.regexp=function(b){return e._parseInfo(b).regexp};e._parseInfo=function(b){var b=b||{},f=k.normalizeLocale(b.locale),f=k.getLocalization("dojo.cldr","number",f),a=b.pattern||f[(b.type||"decimal")+"Format"],d=f.group,g=f.decimal,h=1;if(-1!=a.indexOf("%"))h/=100;else if(-1!=a.indexOf("\u2030"))h/=1E3;else{var i=-1!=a.indexOf("\u00a4");
i&&(d=f.currencyGroup||d,g=f.currencyDecimal||g)}f=a.split(";");1==f.length&&f.push("-"+f[0]);f=c.buildGroupRE(f,function(a){a="(?:"+c.escapeString(a,".")+")";return a.replace(e._numberPatternRE,function(a){var c={signed:!1,separator:b.strict?d:[d,""],fractional:b.fractional,decimal:g,exponent:!1},a=a.split("."),f=b.places;1==a.length&&1!=h&&(a[1]="###");if(1==a.length||0===f)c.fractional=!1;else{void 0===f&&(f=b.pattern?a[1].lastIndexOf("0")+1:Infinity);if(f&&void 0==b.fractional)c.fractional=!0;
!b.places&&f<a[1].length&&(f+=","+a[1].length);c.places=f}a=a[0].split(",");if(1<a.length&&(c.groupSize=a.pop().length,1<a.length))c.groupSize2=a.pop().length;return"("+e._realNumberRegexp(c)+")"})},!0);i&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,d,f,e){a=c.escapeString(b[["symbol","currency","displayName"][f.length-1]]||b.currency||"");d=d?"[\\s\\xa0]":"";e=e?"[\\s\\xa0]":"";return!b.strict?(d&&(d+="*"),e&&(e+="*"),"(?:"+d+a+e+")?"):d+a+e}));return{regexp:f.replace(/[\xa0 ]/g,
"[\\s\\xa0]"),group:d,decimal:g,factor:h}};e.parse=function(b,c){var a=e._parseInfo(c),d=RegExp("^"+a.regexp+"$").exec(b);if(!d)return NaN;var g=d[1];if(!d[1]){if(!d[2])return NaN;g=d[2];a.factor*=-1}g=g.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return g*a.factor};e._realNumberRegexp=function(b){b=b||{};if(!("places"in b))b.places=Infinity;if("string"!=typeof b.decimal)b.decimal=".";if(!("fractional"in b)||/^0/.test(b.places))b.fractional=[!0,!1];if(!("exponent"in b))b.exponent=
[!0,!1];if(!("eSigned"in b))b.eSigned=[!0,!1];var f=e._integerRegexp(b),a=c.buildGroupRE(b.fractional,function(a){var c="";a&&0!==b.places&&(c="\\"+b.decimal,c=Infinity==b.places?"(?:"+c+"\\d+)?":c+("\\d{"+b.places+"}"));return c},!0),d=c.buildGroupRE(b.exponent,function(a){return a?"([eE]"+e._integerRegexp({signed:b.eSigned})+")":""}),f=f+a;a&&(f="(?:(?:"+f+")|(?:"+a+"))");return f+d};e._integerRegexp=function(b){b=b||{};if(!("signed"in b))b.signed=[!0,!1];if("separator"in b){if(!("groupSize"in b))b.groupSize=
3}else b.separator="";var f=c.buildGroupRE(b.signed,function(a){return a?"[-+]":""},!0),a=c.buildGroupRE(b.separator,function(a){if(!a)return"(?:\\d+)";a=c.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var f=b.groupSize,e=b.groupSize2;return e?(a="(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+a+"]\\d{"+e+"})*["+a+"]\\d{"+f+"})",0<f-e?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(f-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+a+"]\\d{"+f+"})*)"},!0);return f+a};return e})},"phpr/BookingList/BookingBlockWrapper":function(){define("dojo/_base/declare,dojo/_base/lang,dijit/_WidgetBase,dojo/dom-style,phpr/BookingList/BookingBlock,phpr/BookingList/BookingEditor".split(","),
function(i,k,j,h,c,e){return i([j],{bookingBlock:null,editBlock:null,store:null,postCreate:function(){this.inherited(arguments);this.bookingBlock=new c(this.params);this.bookingBlock.placeAt(this.domNode);this.bookingBlock.on("editClick",k.hitch(this,"_editClick"));this.own(this.bookingBlock);this.bookingBlock.startup()},_editClick:function(){var c=this.bookingBlock.get("booking");h.set(this.bookingBlock.domNode,"display","none");this.editBlock&&this.editBlock.destroyRecursive();this.editBlock=new e({booking:c,
store:this.store});this.editBlock.placeAt(this.domNode);this.editBlock.on("editCancel",k.hitch(this,"_editCancel"));this.editBlock.startup();this.own(this.editBlock)},_editCancel:function(){if(this.editBlock)this.editBlock.destroyRecursive(),this.editBlock=null;h.set(this.bookingBlock.domNode,"display","")}})})},"phpr/BookingList/BookingBlock":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/html,dojo/on,dojo/dom-class,dojo/date,dojo/date/locale,dojo/topic,dojo/query,dojo/json,dojo/NodeList-dom,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/Evented,phpr/Timehelper,phpr/Api,dojo/text!phpr/template/bookingList/bookingBlock.html".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t){var q=function(){a(".bookingEntry.selected, .bookingEntry.confirmDeletion").removeClass("selected confirmDeletion")};c(j.doc,"click",q);return i([p,r,n,m],{store:null,booking:null,_actionTimeouts:null,templateString:t,constructor:function(){this._actionTimeouts={}},_setBookingAttr:function(a){s.projectTitleForId(a.projectId).then(k.hitch(this,function(a){this._destroyed||h.set(this.project,a)}));var c=o.datetimeToJsDate(a.startDatetime),d=a.endTime||
"",d=""!==d,f=b.format(c,{selector:"time"})+" - ";if(d){d=o.timeToJsDate(a.endTime);d.setDate(c.getDate());d.setMonth(c.getMonth());d.setFullYear(c.getFullYear());var c=g.difference(c,d,"minute"),e=Math.floor(c/60);h.set(this.time,f+b.format(d,{selector:"time"})+" ("+e+"h "+c%60+"m)")}else h.set(this.time,f);h.set(this.notes,a.notes)},_delete:function(){this._doClickAction("delete",function(){q();e.add(this.domNode,"confirmDeletion")})},_confirmDeletion:function(){this._doClickAction("confirm",function(){this.store.remove(this.booking.id).then(void 0,
function(a){f.publish("notification",d.parse(a.responseText))}).always(function(){f.publish("timecard/bookingDeleted",this.booking)})})},startup:function(){this.inherited(arguments);this.booking&&!0===this.booking.highlight&&e.add(this.domNode,"highlight");this.own(c(this.domNode,"click",k.hitch(this,this._markSelected)))},_markSelected:function(){this._doClickAction("select",function(){e.contains(this.domNode,"confirmDeletion")||(q(),e.add(this.domNode,"selected"))})},_edit:function(){this.emit("editClick")},
_doClickAction:function(a,b){clearTimeout(this._actionTimeouts[a]);this._actionTimeouts[a]=setTimeout(k.hitch(this,b),300)}})})},"url:phpr/template/bookingList/bookingBlock.html":'<div class="bookingEntry">\n    <span data-dojo-attach-point="project" class="project"></span>\n    <span data-dojo-attach-point="time"    class="time"></span>\n    <button data-dojo-type="dijit/form/Button" type="button" data-dojo-attach-point="deleteButton"\n        data-dojo-props="showLabel: false, iconClass: \'deleteIcon\', baseClass: \'deleteButton\'"\n        data-dojo-attach-event="onClick:_delete" class="deleteButton"></button>\n    <button data-dojo-type="dijit/form/Button" type="button" data-dojo-attach-point="confirmDeleteButton"\n        data-dojo-props="iconClass: \'deleteIcon\'"\n        data-dojo-attach-event="onClick:_confirmDeletion" class="confirmDeleteButton">Delete?</button>\n    <button data-dojo-type="dijit/form/Button" type="button" data-dojo-attach-point="editButton"\n        data-dojo-props="showLabel: false, iconClass: \'editIcon\', baseClass: \'editButton\'"\n        data-dojo-attach-event="onClick:_edit" class="editButton"></button>\n    <span data-dojo-attach-point="notes" class="notes"></span>\n</div>\n',
"phpr/BookingList/BookingEditor":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/html,dojo/Evented,dojo/date,dojo/date/locale,dojo/dom-style,dojo/topic,dijit/_FocusMixin,phpr/BookingList/BookingCreator,phpr/Api,phpr/Timehelper,dojo/text!phpr/template/bookingList/bookingEditor.html".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r){return i([d,c,a],{booking:null,baseClass:"bookingEditor",templateString:r,constructor:function(){this.booking={}},startup:function(){this.inherited(arguments);
this.start.focus()},_cancel:function(){this.emit("editCancel")},_showErrorInWarningIcon:l.errorHandlerForTag("bookingEditor"),_submit:function(){if(this.form.validate()){var a=this.form.get("value"),b=this._prepareDataForSend(k.mixin({},this.booking,a));b&&this.store.put(b).then(function(){f.publish("notification/clear","bookingEditor");f.publish("timecard/bookingEdited",b)},k.hitch(this,function(a){try{var b=json.parse(a.responseText,!0);b.message&&b.message.match(/entry.*overlaps.*existing/)?this._markOverlapError():
this._showErrorInWarningIcon(a)}catch(c){this._showErrorInWarningIcon(a)}}))}return!1},_onBlur:function(){this._cancel()}})})},"phpr/BookingList/BookingCreator":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/on,dojo/number,dojo/promise/all,dojo/topic,dojo/json,dojo/store/JsonRest,dojo/store/Memory,dijit/Tooltip,phpr/BookingList/BookingBlock,phpr/Api,phpr/Timehelper,dojo/text!phpr/template/bookingList/bookingCreator.html,phpr/TimeBox".split(","),function(i,k,j,h,c,e,g,
b,f,a,d,l,p,r,n){return i([l],{templateString:n,store:null,projectDeferred:null,buildRendering:function(){this.inherited(arguments);this.date.set("value",new Date);this.own(this.form.on("submit",k.hitch(this,this._submit)))},_setBookingAttr:function(a){var b=function(a){return c.format(a.getHours(),{pattern:"00"})+":"+c.format(a.getMinutes(),{pattern:"00"})};this.project.set("value",""+a.projectId);var d=r.datetimeToJsDate(a.startDatetime);this.start.set("value",b(d));this.date.set("value",d);a.endTime&&
(d=r.timeToJsDate(a.endTime),this.end.set("value",b(d)));a.notes&&this.notes.set("value",a.notes);this.booking=a},postCreate:function(){if(!this.store)this.store=new f({target:"index.php/Timecard/Timecard/"});this.own(h(this.notes,"keydown",k.hitch(this,function(a){"Enter"===a.keyIdentifier&&(a.shiftKey?this.notes.set("value",this.notes.get("value")+"\n"):this.form.submit(),a.preventDefault())})));this.end.validate=this._endValidateFunction(this.end.validate,this.start)},_showErrorInWarningIcon:p.errorHandlerForTag("bookingCreator"),
_submit:function(a){a&&a.stopPropagation();if(this.form.validate()){var a=this.form.get("value"),c=this._prepareDataForSend(a);this.emit("create",a);c&&this.store.put(c).then(function(){g.publish("notification/clear","bookingCreator");g.publish("timecard/bookingCreated",c)},k.hitch(this,function(a){try{var c=b.parse(a.responseText,!0);c.error&&"overlappingEntry"===c.error?this._markOverlapError():this._showErrorInWarningIcon(a)}catch(d){this._showErrorInWarningIcon(a)}}))}return!1},_markOverlapError:function(){this.start.set("state",
"Error");this.end.focus();this.end.set("state","Error");this.end.set("message","The entry overlaps with an existing one")},_prepareDataForSend:function(a){var b={},c=r.parseTime(a.start),d=r.parseTime(a.end);if(!c)return!1;d&&(d=r.jsDateToIsoTime(d)+":00");b.endTime=d;if(a.id)b.id=a.id;d=new Date(a.date.getTime());d.setHours(c.getHours());d.setMinutes(c.getMinutes());b.startDatetime=r.jsDateToIsoDatetime(d)+":00";b.notes=a.notes||"";b.projectId=a.project||"1";return b},_setDateAttr:function(a){this.date.set("value",
a)},_endValidateFunction:function(a,b){return function(c){var f=a.apply(this,arguments);if(!f)return f;var e=this.get("value"),g=!1;if(e.match(/^\d{3}$/)){if(c)return f;g=!0}f=parseInt(b.get("value").replace(/D/g,""));e=parseInt(e.replace(/\D/g,""),10);return f>=e?(this._maskValidSubsetError=!1,this.focusNode.setAttribute("aria-invalid","true"),this.set("state","Error"),this.set("message","End time must be after start time"),g&&d.show("End time must be after start time",this.domNode,this.tooltipPosition,
!this.isLeftToRight()),!1):!0}}})})},"url:phpr/template/bookingList/bookingCreator.html":'<div class="bookingCreator">\n    <div class="bookingForm" data-dojo-attach-point="form" data-dojo-type="dijit/form/Form">\n        <select data-dojo-attach-point="project"\n                name="project"\n                data-dojo-type="phpr/ProjectChooser">\n        </select>\n        <input type="text"\n               name="start"\n               required="true"\n               data-dojo-type="phpr/TimeBox"\n               data-dojo-attach-point="start"\n               data-dojo-props="placeholder: \'Start\'"\n               class="time"/>\n        -\n        <input type="text"\n               name="end"\n               data-dojo-type="phpr/TimeBox"\n               data-dojo-attach-point="end"\n               data-dojo-props="allowEmpty: true, placeholder: \'End\'"\n               class="time"/>\n        <input type="text"\n               name="date"\n               data-dojo-type="phpr/DateTextBox"\n               value="today"\n               data-dojo-attach-point="date"\n               class="date"/>\n        <textarea name="notes"\n                  class="notes"\n                  data-dojo-type="dijit/form/Textarea"\n                  data-dojo-props="placeholder: \'Notes\'"\n                  data-dojo-attach-point="notes"></textarea>\n        <button data-dojo-type="dijit/form/Button"\n                type="submit"\n                data-dojo-props="baseClass: \'submitButton\'">Book it!</button>\n    </div>\n</div>\n',
"phpr/TimeBox":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","phpr/Timehelper"],function(i,k,j){return i([k],{allowEmpty:!1,invalidMessage:"Invalid time format",pattern:j.timeRegexpString,_setAllowEmptyAttr:function(h){this._set("allowEmpty",h);var c=j.timeRegexpString;h&&(c+="?");this.set("pattern",c)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/i18n,./TextBox,../Tooltip,dojo/text!./templates/ValidationTextBox.html,dojo/i18n!./nls/validate".split(","),
function(i,k,j,h,c,e){var g;return g=i("dijit.form.ValidationTextBox",h,{templateString:e,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,c){c!=g.prototype[b]&&(k.deprecated("ValidationTextBox id="+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",
b);this.regExpGen=this._getPatternAttr},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused)},validator:function(b,c){return RegExp("^(?:"+this._getPatternAttr(c)+")"+(this.required?"":"?")+"$").test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.constraints)},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?b:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?c:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var c=
"",a=this.disabled||this.isValid(b);if(a)this._maskValidSubsetError=!0;var d=this._isEmpty(this.textbox.value),e=!a&&b&&this._isValidSubset();this._set("state",a?"":((!this._hasBeenBlurred||b)&&d||e)&&this._maskValidSubsetError?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",a?"false":"true");"Error"==this.state?(this._maskValidSubsetError=b&&e,c=this.getErrorMessage(b)):"Incomplete"==this.state?(c=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):d&&(c=
this.getPromptMessage(b));this.set("message",c);return a},displayMessage:function(b){b&&this.focused?c.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):c.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){if(!b.locale&&this.lang)b.locale=
this.lang;this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b)},_getPatternAttr:function(b){var c=this.pattern;"function"==(typeof c).toLowerCase()&&(c=this.pattern(b||this.constraints));if(c!=this._lastRegExp){var a="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";break;default:a+=
"(?:"+b+"|$)"}});try{"".search(a)}catch(d){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+a+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=j.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",
b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/_base/kernel,dojo/_base/lang,dojo/sniff,./_FormValueWidget,./_TextBoxMixin,dojo/text!./templates/TextBox.html,../main".split(","),function(i,k,j,h,c,e,g,b,
f,a){i=i("dijit.form.TextBox",[g,b],{templateString:f,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:e("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>e("ie")&&this.defer(function(){try{var a=j.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(f){}})},_onInput:function(a){this.inherited(arguments);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_setPlaceHolderAttr:function(a){this._set("placeHolder",
a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=k.create("span",{onmousedown:function(a){a.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.focused&&!this.textbox.value?"":"none"},_setValueAttr:function(a,b,c){this.inherited(arguments);
this._updatePlaceHolder()},getDisplayedValue:function(){h.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){h.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){if(!this.disabled&&(this.inherited(arguments),this._updatePlaceHolder(),e("mozilla")&&this.selectOnClick))this.textbox.selectionStart=
this.textbox.selectionEnd=void 0},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});if(e("ie"))i.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},a._setSelectionRange=b._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),
a.select())};return i})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(i,k,j,h){return i("dijit.form._FormValueWidget",[j,h],{_layoutHackIE7:function(){if(7==k("ie"))for(var c=this.domNode,e=c.parentNode,g=c.firstChild||c,b=g.style.filter,f=this;e&&0==e.clientHeight;)(function(){var a=f.connect(e,"onscroll",function(){f.disconnect(a);g.style.filter=(new Date).getMilliseconds();f.defer(function(){g.style.filter=b})})})(),
e=e.parentNode}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),function(i,k,j,h,c,e,g,b){k("dijit-legacy-requires")&&h(0,function(){require(["dijit/form/_FormValueWidget"])});return i("dijit.form._FormWidget",[c,g,e,b],{setDisabled:function(b){j.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){j.deprecated("dijit.form._FormWidget:setValue("+
b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){j.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),
function(i,k,j,h,c,e,g,b,f){return k("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);j.set(this.focusNode,"disabled",a);this.valueNode&&j.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?
this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",i.forEach(c.isArray(a)?a:[a],function(a){a=this[a];g("webkit")||f.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.connect(this.focusNode,"onfocus",function(){this.disconnect(f);this.disconnect(c)}),f=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(f);
this.disconnect(c);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){b.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=h.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,
b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=
null;this.onChange(a)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(i,k,j,h,c){return i("dijit.form._FormValueMixin",c,{readOnly:!1,_setReadOnlyAttr:function(c){k.set(this.focusNode,"readOnly",
c);this.focusNode.setAttribute("aria-readonly",c);this._set("readOnly",c)},postCreate:function(){this.inherited(arguments);h("ie")&&this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(void 0===this._resetValue)this._lastValueReported=this._resetValue=this.value},_setValueAttr:function(c,g){this._handleOnChange(c,g)},_handleOnChange:function(c,g){this._set("value",c);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=
!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(c){if(c.keyCode==j.ESCAPE&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&(9>h("ie")||h("ie")&&h("quirks"))){c.preventDefault();var g=c.srcElement,b=g.ownerDocument.createEventObject();b.keyCode=j.ESCAPE;b.shiftKey=c.shiftKey;g.fireEvent("onkeypress",b)}}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,../main".split(","),function(i,k,j,h,c,e,g,b){var f=
k("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var f;void 0!==a&&(f=this.filter(a),"string"!=typeof c&&(c=null!==f&&("number"!=typeof f||!isNaN(f))?this.filter(this.format(f,this.constraints)):""));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",
this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,c);this.inherited(arguments,[f,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=typeof a&&(a=""+a);this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,a)},format:function(a){return null==a?
"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){"auto"==this.textDir&&this.applyTextDir(this.focusNode,this.focusNode.value);this._processInput(a)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(g(this.textbox,"keydown, keypress, paste, cut, input, compositionend",
e.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;switch(b){case c.SHIFT:case c.ALT:case c.CTRL:case c.META:case c.CAPS_LOCK:case c.NUM_LOCK:case c.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case c.NUMPAD_0:case c.NUMPAD_1:case c.NUMPAD_2:case c.NUMPAD_3:case c.NUMPAD_4:case c.NUMPAD_5:case c.NUMPAD_6:case c.NUMPAD_7:case c.NUMPAD_8:case c.NUMPAD_9:case c.NUMPAD_MULTIPLY:case c.NUMPAD_PLUS:case c.NUMPAD_ENTER:case c.NUMPAD_MINUS:case c.NUMPAD_PERIOD:case c.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==c.SPACE)return;b=!1;for(var f in c)if(c[f]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==c.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var g={faux:!0},h;for(h in a)"layerX"!=h&&"layerY"!=h&&(f=a[h],"function"!=typeof f&&"undefined"!=typeof f&&(g[h]=f));e.mixin(g,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){g._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(g)&&(g.preventDefault(),g.stopPropagation());g._wasConsumed||this.defer(function(){this._onInput(g)})})))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;
if("string"!=typeof a)return a;this.trim&&(a=e.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){if(!this.disabled&&
!this.readOnly){if(this.selectOnClick&&"mouse"==a)this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;this._isTextSelected()||f.selectInputText(this.textbox)}),this.defer(function(){if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle),this._selectOnClickHandle=null},500);this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},
_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.focusNode.value)}});f._setSelectionRange=b._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};f.selectInputText=b.selectInputText=function(a,b,c){a=j.byId(a);isNaN(b)&&(b=0);isNaN(c)&&(c=a.value?a.value.length:0);try{a.focus(),f._setSelectionRange(a,b,c)}catch(e){}};return f})},"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:phpr/template/bookingList/bookingEditor.html":'<div class="bookingCreator">\n    <div data-dojo-attach-point="form" data-dojo-type="dijit/form/Form">\n        <table><tr><td class="bookingForm">\n            <select data-dojo-attach-point="project"\n                    name="project"\n                    data-dojo-type="phpr/ProjectChooser">\n            </select>\n            <input type="text"\n                   name="start"\n                   required="true"\n                   data-dojo-type="phpr/TimeBox"\n                   data-dojo-attach-point="start"\n                   data-dojo-props="placeholder: \'Start\'"\n                   class="time"/>\n            -\n            <input type="text"\n                   name="end"\n                   data-dojo-type="phpr/TimeBox"\n                   data-dojo-attach-point="end"\n                   data-dojo-props="placeholder: \'End\'"\n                   class="time"/>\n            <input type="text"\n                   name="date"\n                   data-dojo-type="phpr/DateTextBox"\n                   value="today"\n                   data-dojo-attach-point="date"\n                   class="date"/>\n            <button data-dojo-type="dijit/form/Button"\n                    type="submit"\n                    data-dojo-attach-point="button"\n                    class="button"></button>\n            <textarea name="notes"\n                      class="notes"\n                      data-dojo-type="dijit/form/Textarea"\n                      data-dojo-props="placeholder: \'Notes\'"\n                      data-dojo-attach-point="notes"></textarea>\n        </td><td class="editButtonCell">\n            <button data-dojo-type="dijit/form/Button" type="button" data-dojo-attach-point="confirmEditButton"\n                data-dojo-props="iconClass: \'editIcon\'"\n                data-dojo-attach-event="onClick:_submit" class="confirmEditButton">Save</button>\n        </td></tr></table>\n    </div>\n</div>\n',
"url:phpr/template/bookingList/dayBlock.html":'<div class="dayBlock">\n    <div class="bookingBlockHeader" data-dojo-attach-point="header"\n        ><span data-dojo-attach-point="headerText" class="headerText"></span\n        ><span data-dojo-attach-point="total"></span\n        ><span class="helpTextClose">open</span\n        ><span class="helpTextOpen">closed</span\n        ></div>\n    <div data-dojo-attach-point="body, containerNode" class="bookingBlockBody"></div>\n</div>\n',"phpr/JsonRestQueryEngine":function(){define(["dojo/_base/array",
"dojo/_base/lang","dojo/json","phpr/Timehelper"],function(i,k,j,h){var c=/^\d{4}-\d{2}-\d{2}$/,e=/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}(:\d{2})?$/;return function(g){return function(b){return!g||!g.hasOwnProperty("filter")?b:i.filter(b,function(b){var a=j.parse(g.filter),d;for(d in a){if(!b.hasOwnProperty(d))return!1;var i=k.trim(b[d]),p;p=i;p=""+new Date(p)==p?"Date":c.test(""+p)?"IsoDate":e.test(""+p)?"IsoDatetime":void 0;var r=a[d],n;for(n in r){var m;a:{m=n;var o=p,s=i,t=r[n];switch(o){case "IsoDate":case "IsoDatetime":s=
h.datetimeToJsDate(s),t=h.datetimeToJsDate(t),o="Date"}switch(o){case "Date":switch(m){case "!ge":m=(new Date(s)).getTime()>=(new Date(t)).getTime();break a;case "!lt":m=(new Date(s)).getTime()<(new Date(t)).getTime();break a}}m=!1}if(!m)return!1}}return!0})}}})},"url:phpr/template/bookingList.html":'<div>\n    <div data-dojo-attach-point="bookingCreator" data-dojo-type="phpr/BookingList/BookingCreator"></div>\n    <div data-dojo-attach-point="content, containerNode"></div>\n</div>\n',"dijit/form/FilteringSelect":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/lang,dojo/when,./MappedTextBox,./ComboBoxMixin".split(","),
function(i,k,j,h,c,e){return k("dijit.form.FilteringSelect",[c,e],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(c,b,f,a){b&&b[this.searchAttr]!==this._lastQuery||!b&&c.length&&this.store.getIdentity(c[0])!=this._lastQuery||(c.length?this.set("item",c[0],a):this.set("value","",a||void 0===
a&&!this.focused,this.textbox.value,null))},_openResultList:function(c,b,f){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(c,b,f,a){this._onChangeActive||(b=null);if(void 0===a){if(null===c||""===c)if(c="",!j.isString(f)){this._setDisplayedValueAttr(f||"",b);return}var d=this;this._lastQuery=c;h(this.store.get(c),function(a){d._callbackSetLabel(a?
[a]:[],void 0,void 0,b)})}else this.valueNode.value=c,this.inherited(arguments)},_setItemAttr:function(c,b,f){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(c){return c.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(c,b){null==c&&(c="");if(!this._created){if(!("displayedValue"in this.params))return;b=!1}if(this.store){this.closeDropDown();var f=j.clone(this.query),a=this._getDisplayQueryString(c),d;this.store._oldAPI?d=a:(d=i.patternToRegExp(a,
this.ignoreCase),d.toString=function(){return a});this._lastQuery=f[this.searchAttr]=d;this._lastDisplayedValue=this.textbox.value=c;this._set("displayedValue",c);var e=this,k={ignoreCase:this.ignoreCase,deep:!0};j.mixin(k,this.fetchProperties);this._fetchHandle=this.store.query(f,k);h(this._fetchHandle,function(a){e._fetchHandle=null;e._callbackSetLabel(a||[],f,k,b)},function(a){e._fetchHandle=null;e._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",
this._lastDisplayedValue)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(i){var k={};i.setObject("dojo.data.util.filter",k);k.patternToRegExp=function(i,h){for(var c="^",e=null,g=0;g<i.length;g++)switch(e=i.charAt(g),e){case "\\":c+=e;g++;c+=i.charAt(g);break;case "*":c+=".*";break;case "?":c+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":c+="\\";default:c+=e}c+="$";return h?RegExp(c,"mi"):RegExp(c,
"m")};return k})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(i,k,j){return i("dijit.form.MappedTextBox",j,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:null,serialize:function(h){return h.toString?h.toString():""},toString:function(){var h=this.filter(this.get("value"));return null!=h?"string"==typeof h?h:this.serialize(h,this.constraints):""},validate:function(){this.valueNode.value=
this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=k.place("<input type='hidden'"+(this.name?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/store/util/QueryResults,./_AutoCompleterMixin,./_ComboBoxMenu,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),
function(i,k,j,h,c,e,g,b,f){return i("dijit.form.ComboBoxMixin",[b,e],{dropDownClass:g,hasDownArrow:!0,templateString:f,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||h.mixin(a,{_oldAPI:!0,get:function(a){var b=new k;this.fetchItemByIdentity({identity:a,
onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,b){var f=new k(function(){e.abort&&e.abort()});f.total=new k;var e=this.fetch(h.mixin({query:a,onBegin:function(a){f.total.resolve(a)},onComplete:function(a){f.resolve(a)},onError:function(a){f.reject(a)}},b));return c(f)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var b=
this.declaredClass;h.mixin(this.store,{getValue:function(a,c){j.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){j.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(a){j.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],h.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}}})})},
"dijit/form/_AutoCompleterMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/regexp,dojo/sniff,dojo/string,./DataList,../registry,./_TextBoxMixin,./_SearchMixin".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r){return k("dijit.form._AutoCompleterMixin",r,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var b=0;if("number"==
typeof a.selectionStart)b=a.selectionStart;else if(f("ie")){var c=a.ownerDocument.selection.createRange().duplicate(),a=a.createTextRange();c.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",c),b=(""+a.text).replace(/\r/g,"").length}catch(d){}}return b},_setCaretPos:function(a,b){b=parseInt(b);p.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=
a.charCode||a.keyCode;if(!(b==c.ALT||b==c.CTRL||b==c.META||b==c.SHIFT)){var d=this.dropDown,f=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(f=d.getHighlightedOption()),b){case c.PAGE_DOWN:case c.DOWN_ARROW:case c.PAGE_UP:case c.UP_ARROW:this._opened&&this._announceOption(f);h.stop(a);break;case c.ENTER:if(f){if(f==d.nextButton){this._nextSearch(1);h.stop(a);break}else if(f==d.previousButton){this._nextSearch(-1);h.stop(a);break}h.stop(a)}else this._setBlurValue(),
this._setCaretPos(this.focusNode,this.focusNode.value.length);case c.TAB:b=this.get("displayedValue");if(d&&(b==d._messages.previousMessage||b==d._messages.nextMessage))break;f&&this._selectOption(f);case c.ESCAPE:if(this._opened)this._lastQuery=null,this.closeDropDown()}}}},_autoCompleteText:function(a){var b=this.focusNode;p.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){if(c=this.autoComplete?this._getCaretPos(b):
b.value.length,c+1>b.value.length)b.value=a,p.selectInputText(b,c)}else b.value=a,p.selectInputText(b)},_openResultList:function(a,b,c){var d=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=e.hitch(this,function(b){a.nextPage(-1!==b);this.focus()}),this.dropDown.createOptions(a,c,e.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():
c.direction||this.dropDown.highlightLastOption(),d&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString())&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();
this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"),this.focusNode.removeAttribute("aria-activedescendant"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState())},
_setItemAttr:function(a,b,c){var d="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),d=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",d,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();
this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",j.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,!0)},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=
this.id+"_popup";this.dropDown=new (e.isString(this.dropDownClass)?e.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:e.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",b)}this._lastInput=a;this.inherited(arguments)},_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new d({},this.srcNodeRef),
!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=g('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",a[0].id)}this.inherited(arguments);this.connect(this,"onSearch","_openResultList")},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;"none"!=
this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,c){var d=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),f=this.queryExpr.indexOf("${0}"),c=b.escapeString(c);return this._escapeHtml(a.replace(RegExp((0==f?"^":"")+"("+c+")"+(f==this.queryExpr.length-4?"$":""),d),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},
_escapeHtml:function(a){return a=(""+a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,d){this._set("item",d||null);null==a&&(a="");this.inherited(arguments)},_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",
a)}})})},"dijit/form/DataList":function(){define("dojo/_base/declare,dojo/dom,dojo/_base/lang,dojo/query,dojo/store/Memory,../registry".split(","),function(i,k,j,h,c,e){function g(b){return{id:b.value,value:b.value,name:j.trim(b.innerText||b.textContent||"")}}return i("dijit.form.DataList",c,{constructor:function(b,c){this.domNode=k.byId(c);j.mixin(this,b);this.id&&e.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:h("option",this.domNode).map(g)}])},destroy:function(){e.remove(this.id)},
fetchSelectedItem:function(){var b=h("> option[selected]",this.domNode)[0]||h("> option",this.domNode)[0];return b&&g(b)}})})},"dijit/form/_SearchMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/sniff,dojo/string,dojo/when,../registry".split(","),function(i,k,j,h,c,e,g,b,f,a){return k("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",
ignoreCase:!0,_abortQuery:function(){if(this.searchTimer)this.searchTimer=this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort)this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1;if(this._fetchHandle.cancel)this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1;this._fetchHandle=null}},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;
if(!a.altKey&&!((a.ctrlKey||a.metaKey)&&"x"!=b&&"v"!=b||b==h.SHIFT)){this._prev_key_backspace=a=!1;switch(b){case h.DELETE:case h.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();
var e=this,g=c.clone(this.query),h={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},j=b.substitute(this.queryExpr,[a]),k,o=function(){var a=e._fetchHandle=e.store.query(g,h);!e.disabled&&!(e.readOnly||k!==e._lastQuery)&&f(a,function(b){e._fetchHandle=null;!e.disabled&&!e.readOnly&&k===e._lastQuery&&f(a.total,function(a){b.total=a;var c=e.pageSize;if(isNaN(c)||c>b.total)c=b.total;b.nextPage=function(a){h.direction=a=!1!==a;h.count=c;if(a){if(h.start+=b.length,h.start>=
b.total)h.count=0}else if(h.start-=c,0>h.start)h.count=Math.max(c+h.start,0),h.start=0;0>=h.count?(b.length=0,e.onSearch(b,g,h)):o()};e.onSearch(b,g,h)})},function(a){e._fetchHandle=null;e._cancelingQuery||console.error(e.declaredClass+" "+a.toString())})};c.mixin(h,this.fetchProperties);this.store._oldAPI?k=j:(k=i.patternToRegExp(j,this.ignoreCase),k.toString=function(){return j});this._lastQuery=g[this.searchAttr]=k;this._queryDeferHandle=this.defer(o,this.searchDelay)},constructor:function(){this.query=
{};this.fetchProperties={}},postMixInProperties:function(){if(!this.store){var b=this.list;if(b)this.store=a.byId(b)}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/keys,../_WidgetBase,../_TemplatedMixin,./_ComboBoxMenuMixin,./_ListMouseMixin".split(","),function(i,k,j,h,c,e,g,b){return i("dijit.form._ComboBoxMenu",[c,e,b,g],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(k.add(this.previousButton,"dijitMenuItemRtl"),k.add(this.nextButton,"dijitMenuItemRtl"))},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){k.add(b,"dijitMenuItemHover")},onUnhover:function(b){k.remove(b,"dijitMenuItemHover")},onSelect:function(b){k.add(b,
"dijitMenuItemSelected")},onDeselect:function(b){k.remove(b,"dijitMenuItemSelected")},_page:function(b){var a=0,c=this.domNode.scrollTop,e=j.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<e;){var g=this.getHighlightedOption();if(b){if(!g.previousSibling||"none"==g.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!g.nextSibling||"none"==g.nextSibling.style.display)break;this.selectNextNode()}g=this.domNode.scrollTop;a+=(g-c)*(b?-1:1);c=g}},
handleKey:function(b){switch(b.keyCode){case h.DOWN_ARROW:return this.selectNextNode(),!1;case h.PAGE_DOWN:return this._page(!1),!1;case h.UP_ARROW:return this.selectPreviousNode(),!1;case h.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(i,k,j,h){return k("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);
this._messages=h.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(c){this.value=c;this.onChange(c)},onClick:function(c){if(c==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(c==this.nextButton)this._setSelectedAttr(null),this.onPage(1);else this.onChange(c)},onChange:function(){},onPage:function(){},
onClose:function(){this._setSelectedAttr(null)},_createOption:function(c,e){var g=this._createMenuItem(),b=e(c);b.html?g.innerHTML=b.label:g.appendChild(g.ownerDocument.createTextNode(b.label));if(""==g.innerHTML)g.innerHTML="&#160;";this.applyTextDir(g,g.innerText||g.textContent||"");return g},createOptions:function(c,e,g){this.items=c;this.previousButton.style.display=0==e.start?"none":"";j.set(this.previousButton,"id",this.id+"_prev");i.forEach(c,function(b,a){var c=this._createOption(b,g);c.setAttribute("item",
a);j.set(c,"id",this.id+a);this.nextButton.parentNode.insertBefore(c,this.nextButton)},this);var b=!1;c.total&&!c.total.then&&-1!=c.total?e.start+e.count<c.total?b=!0:e.start+e.count>c.total&&e.count==c.length&&(b=!0):e.count==c.length&&(b=!0);this.nextButton.style.display=b?"":"none";j.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var c=this.containerNode;2<c.childNodes.length;)c.removeChild(c.childNodes[c.childNodes.length-2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},
highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(i,k,j,h,
c){return i("dijit.form._ListMouseMixin",c,{postCreate:function(){this.inherited(arguments);this.own(j(this.domNode,h.press,function(c){c.preventDefault()}));this._listConnect(h.press,"_onMouseDown");this._listConnect(h.release,"_onMouseUp");this._listConnect(k.enter,"_onMouseOver");this._listConnect(k.leave,"_onMouseOut")},_onMouseDown:function(c,g){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;this._isDragging=!0;this._setSelectedAttr(g)},_onMouseUp:function(c,g){this._isDragging=
!1;var b=this.selected,f=this._hoveredNode;if(b&&g==b)this.onClick(b);else f&&g==f&&(this._setSelectedAttr(f),this.onClick(f))},_onMouseOut:function(){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;if(this._isDragging)this._cancelDrag=(new Date).getTime()+1E3},_onMouseOver:function(c,g){if(this._cancelDrag){if((new Date).getTime()>this._cancelDrag)this._isDragging=!1;this._cancelDrag=null}this._hoveredNode=g;this.onHover(g);this._isDragging&&this._setSelectedAttr(g)}})})},
"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(i,k,j){return i("dijit.form._ListBase",null,{selected:null,_listConnect:function(h,c){var e=this;return e.own(k(e.containerNode,k.selector(function(c,b,f){return c.parentNode==f},h),function(g){g.preventDefault();e[c](g,this)}))},selectFirstNode:function(){for(var h=this.containerNode.firstChild;h&&"none"==h.style.display;)h=h.nextSibling;this._setSelectedAttr(h)},selectLastNode:function(){for(var h=this.containerNode.lastChild;h&&
"none"==h.style.display;)h=h.previousSibling;this._setSelectedAttr(h)},selectNextNode:function(){var h=this.selected;if(h){for(h=h.nextSibling;h&&"none"==h.style.display;)h=h.nextSibling;h?this._setSelectedAttr(h):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var h=this.selected;if(h){for(h=h.previousSibling;h&&"none"==h.style.display;)h=h.previousSibling;h?this._setSelectedAttr(h):this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(h){if(this.selected!=
h){var c=this.selected;if(c)this.onDeselect(c),this.selected=null;if(h)this.selected=h,j.scrollIntoView(h),this.onSelect(h)}else if(h)this.onSelect(h)}})})},"dijit/_HasDropDown":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,dojo/window,./registry,./focus,./popup,./_FocusMixin".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o){return i("dijit._HasDropDown",
o,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)a.preventDefault(),this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp"),this.toggleDropDown()},_onDropDownMouseUp:function(a){a&&this._docHandler&&this.disconnect(this._docHandler);var b=this.dropDown,c=!1;if(a&&this._opened){var d=
g.position(this._buttonNode,!0);if(!(a.pageX>=d.x&&a.pageX<=d.x+d.w)||!(a.pageY>=d.y&&a.pageY<=d.y+d.h)){for(d=a.target;d&&!c;)e.contains(d,"dijitPopup")?c=!0:d=d.parentNode;if(c){d=a.target;if(b.onItemClick){for(var h;d&&!(h=r.byNode(d));)d=d.parentNode;if(h&&h.onClick&&h.getParent)h.getParent().onItemClick(h,a)}return}}}if(this._opened){if(b.focus&&!1!==b.autoFocus)this._focusDropDownTimer=this.defer(function(){b.focus();delete this._focusDropDownTimer})}else this.defer("focus");if(f("ios"))this._justGotMouseUp=
!0,this.defer(function(){this._justGotMouseUp=!1})},_onDropDownClick:function(a){f("touch")&&!this._justGotMouseUp&&(this._onDropDownMouseDown(a),this._onDropDownMouseUp(a));this._stopClickEvents&&j.stop(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",
below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";e.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);this.own(l(this._buttonNode,"mousedown",d.hitch(this,"_onDropDownMouseDown")),l(this._buttonNode,"click",d.hitch(this,"_onDropDownClick")),l(this.focusNode,"keydown",d.hitch(this,"_onKey")),l(this.focusNode,"keyup",d.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||
this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,d=b.target;if(c&&this._opened&&c.handleKey&&!1===c.handleKey(b))j.stop(b);else if(c&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),j.stop(b);else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==a.ENTER||b.keyCode==a.SPACE)&&("input"!==(d.tagName||"").toLowerCase()||d.type&&"text"!==d.type.toLowerCase())))this._toggleOnKeyUp=!0,
j.stop(b)}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(d.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(n.curNode&&this.dropDown&&h.isDescendant(n.curNode,this.dropDown.domNode));this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},loadAndOpenDropDown:function(){var a=new k,b=d.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?
b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown():this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,f=a.domNode,h=this._aroundNode||this.domNode,i=this;if(!this._preparedNode){this._preparedNode=!0;if(f.style.width)this._explicitDDWidth=!0;if(f.style.height)this._explicitDDHeight=!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var j={display:"",visibility:"hidden"};if(!this._explicitDDWidth)j.width=
"";if(!this._explicitDDHeight)j.height="";b.set(f,j);j=this.maxHeight;if(-1==j)var j=p.getBox(this.ownerDocument),l=g.position(h,!1),j=Math.floor(Math.max(l.y,j.h-(l.y+l.h)));m.moveOffScreen(a);a.startup&&!a._started&&a.startup();var l=g.getMarginSize(f),k=j&&l.h>j;b.set(f,{overflowX:"visible",overflowY:k?"auto":"visible"});k?(l.h=j,"w"in l&&(l.w+=16)):delete l.h;this.forceWidth?l.w=h.offsetWidth:this.autoWidth?l.w=Math.max(l.w,h.offsetWidth):delete l.w;d.isFunction(a.resize)?a.resize(l):g.setMarginBox(f,
l)}a=m.open({parent:this,popup:a,around:h,orient:this.dropDownPosition,onExecute:function(){i.closeDropDown(!0)},onCancel:function(){i.closeDropDown(!0)},onClose:function(){c.set(i._popupStateNode,"popupActive",!1);e.remove(i._popupStateNode,"dijitHasDropDownOpen");i._set("_opened",!1)}});c.set(this._popupStateNode,"popupActive","true");e.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",!0);this.domNode.setAttribute("aria-expanded","true");return a},closeDropDown:function(a){this._focusDropDownTimer&&
(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);if(this._opened)this.domNode.setAttribute("aria-expanded","false"),a&&this.focus(),m.close(this.dropDown),this._opened=!1}})})},"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode, _popupStateNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox" aria-haspopup="true"\n\t/></div\n></div>\n',
"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(i,k,j,h){return i("dijit.form.Textarea",[h,j],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);k.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/has,dojo/_base/lang,dojo/on,dojo/_base/window,../Viewport".split(","),
function(i,k,j,h,c,e,g){j.add("textarea-needs-help-shrinking",function(){var b=e.body(),c=k.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,overflow:"hidden",visibility:"hidden",position:"absolute",border:"0px solid black",padding:"0px"}},b,"last"),a=c.scrollHeight>=c.clientHeight;b.removeChild(c);return a});return i("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var b=this.textbox;
this.own(c(b,"scroll, focus",h.hitch(this,"_resizeLater")));b.style.overflowY="hidden";this._estimateHeight()},startup:function(){this.inherited(arguments);this.own(g.on("resize",h.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(b){this.inherited(arguments);this.resize()},_estimateHeight:function(){var b=this.textbox;b.style.height="auto";b.rows=(b.value.match(/\n/g)||[]).length+2},_resizeLater:function(){this.defer("resize")},resize:function(){function b(){var a=!1;if(""===c.value)c.value=
" ",a=!0;var b=c.scrollHeight;if(a)c.value="";return b}var c=this.textbox;if("hidden"==c.style.overflowY)c.scrollTop=0;if(!this.busyResizing){this.busyResizing=!0;if(b()||c.offsetHeight){var a=c.style.height;if(!/px/.test(a))a=b(),c.rows=1,c.style.height=a+"px";var a=Math.max(Math.max(c.offsetHeight,parseInt(a))-c.clientHeight,0)+b(),d=a+"px";if(d!=c.style.height)c.rows=1,c.style.height=d;if(j("textarea-needs-help-shrinking")){var e=b(),g=c.style.minHeight,h=4;c.style.minHeight=d;for(c.style.height=
"auto";0<a;){c.style.minHeight=Math.max(a-h,4)+"px";d=b();e-=d;a-=e;if(e<h)break;e=d;h<<=1}c.style.height=a+"px";c.style.minHeight=g}c.style.overflowY=b()>c.clientHeight?"auto":"hidden"}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(i,k,j,h){return i("dijit.form.SimpleTextarea",h,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){if(!this.value&&this.srcNodeRef)this.value=this.srcNodeRef.value;this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);j("ie")&&this.cols&&k.add(this.textbox,"dijitTextAreaCols")},filter:function(c){c&&(c=c.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(c){if(this.maxLength){var e=parseInt(this.maxLength),g=this.textbox.value.replace(/\r/g,""),e=g.length-e;if(0<e){var b=this.textbox;if(b.selectionStart){var f=b.selectionStart,
a=0;if(j("opera"))a=(this.textbox.value.substring(0,f).match(/\r/g)||[]).length;this.textbox.value=g.substring(0,f-e-a)+g.substring(f-a);b.setSelectionRange(f-e,f-e)}else if(this.ownerDocument.selection)b.focus(),g=this.ownerDocument.selection.createRange(),g.moveStart("character",-e),g.text="",g.select()}}this.inherited(arguments)}})})},"dijit/form/Button":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),
function(i,k,j,h,c,e,g,b,f,a){h("dijit-legacy-requires")&&g(0,function(){i(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return k("dijit.form.Button",[b,f],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(a){if(a&&
(!this.params||!("label"in this.params)))if(a=e.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&j.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){c.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=e.trim(this.containerNode.innerText||
this.containerNode.textContent||"")}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(i,k,j,h){return i("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(c){if(this.disabled)return j.stop(c),!1;var e=!1===this.onClick(c);if(!e&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var g=this.domNode;g.parentNode;g=g.parentNode){var b=h.byNode(g);if(b&&"function"==typeof b._onSubmit){b._onSubmit(c);
e=!0;break}}e&&c.preventDefault();return!e},postCreate:function(){this.inherited(arguments);k.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(c){this._set("label",c);(this.containerNode||this.focusNode).innerHTML=c}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(i,k,j){return i("dijit.form.DateTextBox",j,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:k,_selector:"date",value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array,dojo/date,dojo/date/locale,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/sniff,./CalendarLite,./_Widget,./_CssStateMixin,./_TemplatedMixin,./form/DropDownButton".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m){var o=h("dijit.Calendar",[l,p,r],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){b.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new o._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,
"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp")},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);b.setMonth(a);var a=this.dateModule.getDaysInMonth(b),c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=e.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))e.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){if(this._currentNode&&!(a.relatedTarget&&
a.relatedTarget.parentNode==this._currentNode))a="dijitCalendarHoveredDate",e.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),e.remove(this._currentNode,a),this._currentNode=null},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!e.contains(a,"dijitCalendarDisabledDate"))e.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&e.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var b=
-1,c,d=this.currentFocus;switch(a.keyCode){case f.RIGHT_ARROW:b=1;case f.LEFT_ARROW:c="day";this.isLeftToRight()||(b*=-1);break;case f.DOWN_ARROW:b=1;case f.UP_ARROW:c="week";break;case f.PAGE_DOWN:b=1;case f.PAGE_UP:c=a.ctrlKey||a.altKey?"year":"month";break;case f.END:d=this.dateModule.add(d,"month",1),c="day";case f.HOME:d=new this.dateClassObj(d);d.setDate(1);break;case f.ENTER:case f.SPACE:this.set("value",this.currentFocus);break;default:return!0}c&&(d=this.dateModule.add(d,c,b));this._setCurrentFocusAttr(d);
return!1},_onKeyDown:function(a){this.handleKey(a)||g.stop(a)},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});o._MonthDropDownButton=h("dijit.Calendar._MonthDropDownButton",m,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new o._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==d("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});o._MonthDropDown=h("dijit.Calendar._MonthDropDown",[p,n],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=i.map(a,
function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(c.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){e.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return o})},"dijit/CalendarLite":function(){define("dojo/_base/array,dojo/_base/declare,dojo/cldr/supplemental,dojo/date,dojo/date/locale,dojo/date/stamp,dojo/dom,dojo/dom-class,dojo/_base/event,dojo/_base/lang,dojo/sniff,dojo/string,./_WidgetBase,./_TemplatedMixin,dojo/text!./templates/Calendar.html,./hccss".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n){var m=k("dijit.CalendarLite",[p,r],{templateString:n,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var a=new this.dateClassObj(this.value);a.setHours(0,0,0,0);a.getDate()<this.value.getDate()&&(a=this.dateModule.add(a,"hour",1));return a}return null},_setValueAttr:function(a,b){"string"==typeof a&&(a=
e.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),d=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),f=new this.dateClassObj,e=j.getFirstDayOfWeek(this.lang);e>b&&(e-=7);this._date2cell={};i.forEach(this.dateCells,function(g,h){var i=h+e,j=new this.dateClassObj(a),l="dijitCalendar",k=0;i<b?(i=d-b+i+1,k=-1,l+="Previous"):i>=b+c?(i=i-b-c+1,k=1,l+="Next"):(i=i-b+1,l+="Current");k&&(j=this.dateModule.add(j,
"month",k));j.setDate(i);this.dateModule.compare(j,f,"date")||(l="dijitCalendarCurrentDate "+l);this.isDisabledDate(j,this.lang)?(l="dijitCalendarDisabledDate "+l,g.setAttribute("aria-disabled","true")):(l="dijitCalendarEnabledDate "+l,g.removeAttribute("aria-disabled"),g.setAttribute("aria-selected","false"));(k=this.getClassForDate(j,this.lang))&&(l=k+" "+l);g.className=l+"Month dijitCalendarDateTemplate";l=j.valueOf();this._date2cell[l]=g;g.dijitDateValue=l;this._setText(this.dateLabels[h],j.getDateLocalized?
j.getDateLocalized(this.lang):j.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;i.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=
b.datePackage?a.getObject(b.datePackage,!1):h;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?a.getObject(b.datePackage+".locale",!1):c},_createMonthWidget:function(){return m._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=j.getFirstDayOfWeek(this.lang);this.dayCellsHtml=l.substitute([a,
a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=l.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);g.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var b=a.hitch(this,function(a,
b,c){this.connect(this[a],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))})});b("incrementMonth","month",1);b("decrementMonth","month",-1);b("nextYearLabelNode","year",1);b("previousYearLabelNode","year",-1)},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,f=this._getNodeByDate(c),a=this._patchDate(a);this._set("currentFocus",a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);
c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();f&&f!=c&&(d("webkit")?f.setAttribute("tabIndex","-1"):f.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){f.stop(a);for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!b.contains(a,"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:
null},_markSelectedDates:function(c){function d(a,c){b.toggle(c,"dijitCalendarSelectedDate",a);c.setAttribute("aria-selected",a?"true":"false")}i.forEach(this._selectedCells||[],a.partial(d,!1));this._selectedCells=i.filter(i.map(c,this._getNodeByDate,this),function(a){return a});i.forEach(this._selectedCells,a.partial(d,!0))},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});m._MonthWidget=k("dijit.CalendarLite._MonthWidget",p,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months",
"wide","standAlone",this.lang,a);this.domNode.innerHTML=(6==d("ie")?"":"<div class='dijitSpacer'>"+i.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});return m})},"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"dijit/form/DropDownButton":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/query,../registry,../popup,./Button,../_Container,../_HasDropDown,dojo/text!./templates/DropDownButton.html".split(","),function(i,k,j,h,c,e,g,b,f){return i("dijit.form.DropDownButton",[e,g,b],{baseClass:"dijitDropDownButton",templateString:f,_fillContent:function(){if(this.srcNodeRef){var a=j("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&
this.dropDownContainer){var a=j("[widgetId]",this.dropDownContainer)[0];this.dropDown=h.byNode(a);delete this.dropDownContainer}this.dropDown&&c.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",k.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode,_popupStateNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/_DateTimeTextBox":function(){define("dojo/date,dojo/date/locale,dojo/date/stamp,dojo/_base/declare,dojo/_base/lang,./RangeBoundTextBox,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(i,k,j,h,c,e,g,b){return h("dijit.form._DateTimeTextBox",[e,g],{templateString:b,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:k.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,
a){var c=this._isInvalidDate(b),e=this._isInvalidDate(a);return c?e?0:-1:e?1:i.compare(b,a,this._selector)},forceWidth:!0,format:function(b,a){return!b?"":this.dateLocaleModule.format(b,a)},parse:function(b,a){return this.dateLocaleModule.parse(b,a)||(this._isEmpty(b)?null:void 0)},serialize:function(b,a){b.toGregorian&&(b=b.toGregorian());return j.toISOString(b,a)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){this.dateModule=
b.datePackage?c.getObject(b.datePackage,!1):i;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?c.getObject(b.datePackage+".locale",!1):k;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow)this._buttonNode.style.display="none";if(!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},_setConstraintsAttr:function(b){b.selector=
this._selector;b.fullYear=!0;var a=j.fromISOString;if("string"==typeof b.min)b.min=a(b.min);if("string"==typeof b.max)b.max=a(b.max);this.inherited(arguments)},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,a,c){void 0!==b&&("string"==typeof b&&(b=j.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);if(this.value instanceof
Date)this.filterString="";this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,a){"value"==b&&this.value instanceof Date&&0==this.compare(a,this.value)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this.dropDownDefaultValue=b},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var a=c.isString(this.popupClass)?c.getObject(this.popupClass,!1):this.popupClass,d=this,e=this.get("value");this.dropDown=new a({onChange:function(a){d.set("value",
a,!0)},id:this.id+"_popup",dir:d.dir,lang:d.lang,value:e,currentFocus:!this._isInvalidDate(e)?e:this.dropDownDefaultValue,constraints:d.constraints,filterString:d.filterString,datePackage:d.params.datePackage,isDisabledDate:function(a){return!d.rangeCheck(a,d.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,a){this._setValueAttr(this.parse(b,this.constraints),a,b)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare",
"dojo/i18n","./MappedTextBox"],function(i,k,j){return i("dijit.form.RangeBoundTextBox",j,{rangeMessage:"",rangeCheck:function(h,c){return("min"in c?0<=this.compare(h,c.min):!0)&&("max"in c?0>=this.compare(h,c.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var h=this.get("value");if(null==h)return!1;var c=!1;if("min"in this.constraints)c=this.constraints.min,c=0>this.compare(h,"number"==typeof c&&0<=c&&0!=h?0:c);if(!c&&
"max"in this.constraints)c=this.constraints.max,c=0<this.compare(h,"number"!=typeof c||0<c?c:0);return c},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(h){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(h))},getErrorMessage:function(h){var c=this.get("value");return null!=c&&""!==c&&("number"!=typeof c||!isNaN(c))&&!this.isInRange(h)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
if(!this.rangeMessage)this.messages=k.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage},_setConstraintsAttr:function(h){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(h,
c){this.focusNode.setAttribute("aria-valuenow",h);this.inherited(arguments)},applyTextDir:function(){}})})},"dijit/form/Form":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/_base/kernel,dojo/sniff,../_Widget,../_TemplatedMixin,./_FormMixin,../layout/_ContentPaneResizeMixin".split(","),function(i,k,j,h,c,e,g,b,f){return i("dijit.form.Form",[e,g,b,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name='"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){this.encType=a;k.set(this.domNode,"encType",a);if(c("ie"))this.domNode.encoding=a},reset:function(a){var b={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(b)&&b.returnValue&&this.inherited(arguments,
[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);j.stop(a);return!1},_onSubmit:function(a){var b=this.constructor.prototype;if(this.execute!=b.execute||this.onExecute!=b.onExecute)h.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&j.stop(a)},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},
"dijit/form/_FormMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),function(i,k,j,h,c,e){return k("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(c){var b=[];i.forEach(c||this.getChildren(),function(c){"value"in c?b.push(c):b=b.concat(this._getDescendantFormWidgets(c.getChildren()))},this);return b},reset:function(){i.forEach(this._getDescendantFormWidgets(),function(c){c.reset&&c.reset()})},validate:function(){var c=
!1;return i.every(i.map(this._getDescendantFormWidgets(),function(b){b._hasBeenBlurred=!0;var f=b.disabled||!b.validate||b.validate();!f&&!c&&(e.scrollIntoView(b.containerNode||b.domNode),b.focus(),c=!0);return f}),function(b){return b})},setValues:function(c){j.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",c)},_setValueAttr:function(c){var b={};i.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(b[a.name]||
(b[a.name]=[])).push(a)});for(var f in b)if(b.hasOwnProperty(f)){var a=b[f],d=h.getObject(f,!1,c);void 0!==d&&(h.isArray(d)||(d=[d]),"boolean"==typeof a[0].checked?i.forEach(a,function(a){a.set("value",-1!=i.indexOf(d,a.value))}):a[0].multiple?a[0].set("value",d):i.forEach(a,function(a,b){a.set("value",d[b])}))}},getValues:function(){j.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var c={};i.forEach(this._getDescendantFormWidgets(),
function(b){var f=b.name;if(f&&!b.disabled){var a=b.get("value");"boolean"==typeof b.checked?/Radio/.test(b.declaredClass)?!1!==a?h.setObject(f,a,c):(a=h.getObject(f,!1,c),void 0===a&&h.setObject(f,null,c)):(b=h.getObject(f,!1,c),b||(b=[],h.setObject(f,b,c)),!1!==a&&b.push(a)):(b=h.getObject(f,!1,c),"undefined"!=typeof b?h.isArray(b)?b.push(a):h.setObject(f,[b,a],c):h.setObject(f,a,c))}});return c},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var c=
i.map(this._descendants,function(b){return b.get("state")||""});return 0<=i.indexOf(c,"Error")?"Error":0<=i.indexOf(c,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(c){this._descendants=this._getDescendantFormWidgets();i.forEach(this._descendants,function(b){b._started||b.startup()});c||this._onChildChange()},_onChildChange:function(c){(!c||"state"==c||"disabled"==c)&&this._set("state",this._getState());if(!c||"value"==c||"disabled"==c||"checked"==c)this._onChangeDelayTimer&&
this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var e=this;this.own(c(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(b){b.target!=e.domNode&&e._onChildChange(b.type.replace("attrmodified-",
""))}));this.watch("state",function(b,c,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"phpr/DateTextBox":function(){define(["dojo/_base/declare","phpr/Calendar","dijit/form/DateTextBox"],function(i,k,j){return i([j],{popupClass:k,_setValueAttr:function(h){if("firstOfMonth"===h){var c=new Date;c.setDate(1);Array.prototype.shift.call(arguments);Array.prototype.unshift.call(arguments,c)}else"lastOfMonth"===h&&(c=new Date,c.setMonth(c.getMonth()+1),c.setDate(0),
Array.prototype.shift.call(arguments),Array.prototype.unshift.call(arguments,c));this.inherited(arguments)}})})},"phpr/Calendar":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-class,dojo/date,dojo/date/locale,dojo/when,dojo/date/stamp,dijit/Calendar,phpr/Api,phpr/Timehelper,dojo/text!phpr/template/Calendar.html".split(","),function(i,k,j,h,c,e,g,b,f,a,d){function l(a,b){var c=g.toISOString(a,{selector:"date"});p.hasOwnProperty(c)?e(p[c],b):p[c]=f.getData("index.php/Calendar2/index/jsonHolidays",
{query:{start:g.toISOString(a,{selector:"date"}),end:g.toISOString(h.add(a,"month",1),{selector:"date"})}}).then(function(a){a=k.filter(a,function(a){return"holiday"==a.type});p[c]=a;b(a)},function(a){r||(r=!0,f.defaultErrorHandler(a))})}var p={},r=!1;return i([b],{templateString:d,_populateGrid:function(){this.inherited(arguments);var a,b=this._currentMonth(),d;for(d in this._date2cell)if(this._date2cell.hasOwnProperty(d)){a=this._date2cell[d];var f=new this.dateClassObj(a.dijitDateValue);c.isWeekend(f)&&
f.getMonth()===b.getMonth()&&j.add(a,"weekend");0===h.compare(new Date,f,"date")&&j.add(a,"today")}this._highlightSpecialDays()},_highlightSpecialDays:function(){l(this._currentMonth(),dojo.hitch(this,function(b){var c={};k.forEach(b,function(b){var d=a.datetimeToJsDate(b.date);c[g.toISOString(d,{selector:"date"})]=b});for(var d in this._date2cell)this._date2cell.hasOwnProperty(d)&&(b=new Date(parseInt(d,10)),c.hasOwnProperty(g.toISOString(b,{selector:"date"}))&&j.add(this._date2cell[d],"specialDay"))}))},
_currentMonth:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);return a}})})},"url:phpr/template/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year">\n    <thead>\n        <tr class="dijitReset dijitCalendarYearContainer">\n            <th class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n                <div class="dijitCalendarYearLabel">\n                    <span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n                    <span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n                    <span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n                </div>\n            </th>\n        </tr>\n        <tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n            <th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth">\n                <img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n                <span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n            </th>\n            <th class=\'dijitReset\' colspan="5">\n                <div data-dojo-attach-point="monthNode">\n                </div>\n            </th>\n            <th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="incrementMonth">\n                <img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n                <span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n            </th>\n        </tr>\n        <tr role="row">\n            ${!dayCellsHtml}\n        </tr>\n    </thead>\n    <tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n            ${!dateRowsHtml}\n    </tbody>\n</table>\n',
"phpr/ViewManager":function(){define("dojo/_base/declare,dijit/Destroyable,dojo/_base/lang,dojo/_base/array,dojo/topic,phpr/BookingView,phpr/StatisticsView,phpr/TeamStatisticsView".split(","),function(i,k,j,h,c,e,g,b){return i(k,{baseLayout:null,setterTimeout:null,constructor:function(b){this.baseLayout=b;this.own(c.subscribe("phpr/changePage",j.hitch(this,"onPageChange")))},startup:function(){this.inherited(arguments);var b=["statistics","teamStatistics","bookings"];if(window.location.hash){var a=
window.location.hash.substring(1);if(-1!==b.indexOf(a))return this.onPageChange(a)}this.onPageChange("bookings")},onPageChange:function(f){if(!this._destroyed){var a=f;switch(f){case "statistics":this._setContent(new g,a);break;case "teamStatistics":this._setContent(new b,a);break;default:case "bookings":a="bookings",this._setContent(new e,a)}c.publish("phpr/changedPage",a)}},_setContent:function(b,a){clearTimeout(this.setterTimeout);this.setterTimeout=setTimeout(j.hitch(this,function(){if(!this._destroyed)this.baseLayout.mainContent.set("content",
b),window.location.hash="#"+a}),0)}})})},"phpr/BookingView":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-style,dojo/dom-geometry,dojo/window,dojo/on,dojo/topic,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/text!phpr/template/bookingView.html,phpr/BookingsDateChooser,phpr/BookingList,phpr/BookingList/SummaryBlock,phpr/BookingList/BookingCreator".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l){return i([f,a,d],{templateString:l,startup:function(){this.inherited(arguments);
var a=e.get(this.domNode.ownerDocument);this.own(g(a,"resize",j.hitch(this,"resize")),g(this.domNode,"resize",j.hitch(this,"resize")),b.subscribe("timecard/selectedDateChanged",j.hitch(this.bookingListContainer,"set","date")),this.bookingListContainer.bookingCreator.on("create",j.hitch(this,function(a){this.bookingListContainer.set("date",a.date);this.dateChooserContainer.setDate(a.date)})))},resize:function(){var a=e.getBox().h;k.forEach([this.bookingListContainer.domNode,this.sidebar],function(b){var d=
c.position(b).y;h.set(b,"minHeight",a-d+"px")})}})})},"url:phpr/template/bookingView.html":'<div class="bookingView">\n    <table style="width: 100%;" data-dojo-attach-point="tableNode" class="table"><tr>\n        <td class="bookingList">\n            <div data-dojo-attach-point="bookingListContainer" class="bookingListContainer" data-dojo-type="phpr/BookingList"></div>\n        </td><td data-dojo-attach-point="sidebar" class="dateChooser">\n            <div data-dojo-attach-point="dateChooserContainer" class="dateChooserContainer" data-dojo-type="phpr/BookingsDateChooser"></div>\n            <div class="summaryRow" data-dojo-type="phpr/BookingList/SummaryBlock"></div>\n        </td>\n    </tr></table>\n</div>\n',
"phpr/BookingsDateChooser":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/on,dojo/Evented,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/text!phpr/template/bookingsDateChooser.html,phpr/DateChooserCalendar".split(","),function(i,k,j,h,c,e,g,b,f){return i([e,g,b,c],{templateString:f,setDate:function(a){this.calendarNode.set("value",a)}})})},"url:phpr/template/bookingsDateChooser.html":'<div class="bookingsDateChooser claro">\n    <div data-dojo-attach-point="calendarNode" data-dojo-type="phpr/DateChooserCalendar"></div>\n</div>\n',
"phpr/DateChooserCalendar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","phpr/Calendar","dojo/Evented"],function(i,k,j,h,c){return i([h,c],{_startedUp:!1,_onMonthSelect:function(c){this.inherited(arguments);this._publishDateChange()},_setCurrentFocusAttr:function(c,g){this.inherited(arguments);!0===this._startedUp&&this._publishDateChange()},_publishDateChange:function(){var c=new this.dateClassObj(this.get("currentFocus").getTime());j.publish("timecard/selectedDateChanged",
c)},postCreate:function(){this.inherited(arguments);this._startedUp=!0;this.own(this.on("change",k.hitch(this,this._publishDateChange)))}})})},"phpr/BookingList/SummaryBlock":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/topic,dojo/dom-style,dojo/dom-class,dojo/promise/all,dojo/date/locale,dojo/DeferredList,dijit/_WidgetBase,dijit/_TemplatedMixin,phpr/Api,phpr/Timehelper,phpr/models/Timecard,dojo/text!phpr/template/bookingList/summaryBlock.html".split(","),function(i,k,j,h,c,e,g,b,f,
a,d,l,p,r){return i([f,a],{date:new Date,constructor:function(){this.own(j.subscribe("timecard/bookingCreated",k.hitch(this,this._scheduleUpdate)));this.own(j.subscribe("timecard/bookingEdited",k.hitch(this,this._scheduleUpdate)));this.own(j.subscribe("timecard/bookingDeleted",k.hitch(this,this._scheduleUpdate)));this.own(j.subscribe("timecard/selectedDateChanged",k.hitch(this,function(a){this._set("date",a)})))},templateString:r,_setStoreAttr:function(a){this.store=a;this._scheduleUpdate()},_setDateAttr:function(a){this._set("date",
a);this._scheduleUpdate()},updateScheduled:!1,_scheduleUpdate:function(){this.updateScheduled||(updateScheduled=!0,setTimeout(k.hitch(this,this._update),0))},_update:function(){if(!this._destroyed){var a=l.exclude(new Date),b=p.getMinutesBookedTotal({end:a}),f=p.getMinutesToWorkTotal({end:a}),h=p.getMinutesBooked({end:a}),a=p.getMinutesToWork({end:a});e({bookedTotal:b,toWorkTotal:f,bookedMonth:h,toWorkMonth:a}).then(k.hitch(this,function(a){if(!this._destroyed){var b=a.bookedTotal.minutesBooked-a.toWorkTotal.minutesToWork,
a=a.bookedMonth.minutesBooked-a.toWorkMonth.minutesToWork;this.monthName.innerHTML=g.format(new Date,{selector:"date",datePattern:"MMMM y"});this.totalDiff.innerHTML=l.minutesToHMString(b);this.thisMonthDiff.innerHTML=l.minutesToHMString(a);0>b?c.add(this.totalDiff,"negative"):c.remove(this.totalDiff,"negative");0>a?c.add(this.thisMonthDiff,"negative"):c.remove(this.thisMonthDiff,"negative");this.updateScheduled=!1}}),d.defaultErrorHandler)}}})})},"dojo/DeferredList":function(){define("dojo/DeferredList",
["./_base/kernel","./_base/Deferred","./_base/array"],function(i,k,j){i.DeferredList=function(h,c,e,g){var b=[];k.call(this);var f=this;0===h.length&&!c&&this.resolve([0,[]]);var a=0;j.forEach(h,function(d,i){function j(c,d){b[i]=[c,d];a++;a===h.length&&f.resolve(b)}d.then(function(a){c?f.resolve([i,a]):j(!0,a)},function(a){e?f.reject(a):j(!1,a);if(g)return null;throw a;})})};i.DeferredList.prototype=new k;i.DeferredList.prototype.gatherResults=function(h){h=new i.DeferredList(h,!1,!0,!1);h.addCallback(function(c){var e=
[];j.forEach(c,function(c){e.push(c[1])});return e});return h};return i.DeferredList})},"phpr/models/Timecard":function(){define("exports,dojo/_base/lang,dojo/promise/all,dojo/date/locale,dojo/io-query,phpr/Api,phpr/Timehelper".split(","),function(i,k,j,h,c,e,g){function b(a){if(a.end){var b=new Date(a.end);b.setDate(b.getDate()+1);a.end=b}if(a.start)a.start=g.jsDateToIsoDate(a.start);if(a.end)a.end=g.jsDateToIsoDate(a.end);return a}function f(a){var a=a||{},b=new Date;b.setDate(1);var c=new Date,
a=k.clone(a),a=k.mixin({start:b,end:c},a);if(a.projects)0<a.projects.length?a.projects=a.projects.join(","):delete a.projects;return a}i.getMinutesBookedTotal=function(a){return e.getData("index.php/Timecard/index/minutesBooked",{query:b(a)})};i.getMinutesBooked=function(a){a=f(a);return e.getData("index.php/Timecard/index/minutesBooked",{query:b(a)})};i.getMinutesToWorkTotal=function(a){return e.getData("index.php/Timecard/index/minutesToWork",{query:b(a)})};i.getMinutesToWork=function(a){a=f(a);
return e.getData("index.php/Timecard/index/minutesToWork",{query:b(a)})};i.getMonthStatistics=function(a){f(a);return j({booked:this.getMinutesBooked(a),towork:this.getMinutesToWork(a)})};i.getWorkedMinutesPerDay=function(a){a=f(a);return e.getData("index.php/Timecard/index/workedMinutesPerDay",{query:b(a)})};i.getWorkBalanceByDay=function(a){a=f(a);return e.getData("index.php/Timecard/index/workBalanceByDay",{query:b(a)})};i.getProjectUserMinutes=function(a){a=f(a);return e.getData("index.php/Timecard/index/projectUserMinutes",
{query:b(a)})};i.getMemberBookings=function(a){a=f(a);return e.getData("index.php/Timecard/index/projectMemberBookings",{query:b(a)})};i.getMemberBookingsCSVUrl=function(a){a=f(a);a.format="csv";a.csrfToken=e.config.get("csrfToken");return"index.php/Timecard/index/projectMemberBookings?"+c.objectToQuery(b(a))}})},"url:phpr/template/bookingList/summaryBlock.html":'<div class="summary">\n    <table>\n        <thead>\n            <th colspan="2">Overtime</th>\n        </thead>\n        <tbody>\n        <tr>\n            <td><span data-dojo-attach-point="monthName"></span></td>\n            <td>\n                <span data-dojo-attach-point="thisMonthDiff"></span>\n            </td>\n        </tr>\n        <tr>\n            <td>Total</td>\n            <td>\n                <span data-dojo-attach-point="totalDiff"></span>\n            </td>\n        </tr>\n        </tbody>\n    </table>\n</div>\n',
"phpr/StatisticsView":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/promise/all,dojo/json,dojo/io-query,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/text!phpr/template/statisticsView.html,dojo/on,dojo/Deferred,phpr/Statistics/WorktimeMonthGraph,phpr/Statistics/WorktimeMonthTable,phpr/ProjectChooser,phpr/models/Project,phpr/Timehelper,phpr/Statistics/ProjectUserTimeTable,dijit/layout/ContentPane".split(","),function(i,
k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t,q){var u=i([o],{createOptions:function(a){var b=new r,c=[],d=function(a){a&&c.push({id:""+a.id,name:""+a.id+" "+a.title,label:'<span class="projectId">'+a.id+"</span> "+a.title})};j.forEach(a.recent,d);0<a.recent.length&&c.push({label:"<hr/>"});c.push({id:"-1",name:"All",label:"All"});for(var f in a.projects)d(a.projects[f]);b.resolve(c);return b},getData:function(){return e({recent:s.getRecentProjects(),projects:s.getBookedProjects()})},postStoreSet:function(){this.set("value",
"-1")}});return i([f,a,d],{templateString:l,activeMonthWidget:null,monthState:"graph",projectChooser:null,_monthUpdateTimer:null,buildRendering:function(){this.inherited(arguments);this.projectChooser=new u({},c.create("select"));this.projectChooserContainer.set("content",this.projectChooser);this.own(p(this.monthViewGraphBtn,"click",k.hitch(this,"_onMonthViewGraph")));this.own(p(this.monthViewTableBtn,"click",k.hitch(this,"_onMonthViewTable")));this.own(p(this.filterBtn,"click",k.hitch(this,"_onFilter")));
this.own(p(this.projectChooser,"change",k.hitch(this,"_updateMonthWidget")));this.own(p(this.startDate,"change",k.hitch(this,"_updateMonthWidget")));this.own(p(this.endDate,"change",k.hitch(this,"_updateMonthWidget")));this.own(this.exportButton.on("click",k.hitch(this,this._openExport)))},_onMonthViewGraph:function(){h.remove(this.monthViewTableBtn,"active");h.add(this.monthViewGraphBtn,"active");this._setMonthGraph()},_onMonthViewTable:function(){h.add(this.monthViewTableBtn,"active");h.remove(this.monthViewGraphBtn,
"active");this._setMonthTable()},_setMonthTable:function(){this._destoyed||this._setMonthWidget(new m(this._getMonthWidgetOptions()),"table")},_setMonthGraph:function(){this._destoyed||this._setMonthWidget(new n(this._getMonthWidgetOptions()),"graph")},_setMonthWidget:function(a,b){if(null!==this.activeMonthWidget)this.activeMonthWidget.destroyRecursive(),this.activeMonthWidget=null;this.activeMonthWidget=a;this.monthContainer.set("content",this.activeMonthWidget);this.monthState=b},_setProjectTable:function(){var a=
this._getMonthWidgetOptions();this.projectContainer.set("content",new q({startDate:a.startDate,endDate:a.endDate}))},_getMonthWidgetOptions:function(){return{projects:this._getSelectedProjects(),startDate:this.startDate.get("value"),endDate:this.endDate.get("value")}},_getSelectedProjects:function(){var a=this.projectChooser.get("value");return"-1"===a||""===a?[]:[a]},_updateMonthWidget:function(){this._scheduleMonthWidgetUpdate()},_scheduleMonthWidgetUpdate:function(){clearTimeout(this._monthUpdateTimer);
this._monthUpdateTimer=setTimeout(k.hitch(this,function(){switch(this.monthState){case "table":this._setMonthTable();break;case "graph":this._setMonthGraph()}this._setProjectTable()}),250)},_openExport:function(a){a&&a.stopPropagation();if(this.exportForm.validate()){var a=this.exportForm.get("value"),c={format:"csv"};c.filter=g.stringify({startDatetime:{"!ge":t.jsDateToIsoDatetime(a.start),"!lt":t.jsDateToIsoDatetime(a.end)}});window.open("index.php/Timecard/Timecard/index?"+b.objectToQuery(c))}return!1},
_onFilter:function(){h.toggle(this.filters,"open")}})})},"url:phpr/template/statisticsView.html":'<div class="statisticsView">\n    <ul class="buttons-outer">\n        <li data-dojo-attach-point="filterBtn" class="buttons-inner">\n            <img class="button" src="../../../img/timecard/icon-filter.png">\n        </li>\n        <li data-dojo-attach-point="monthViewGraphBtn" class="buttons-inner active">\n            <img src="../../../img/timecard/icon-graphics.png">\n        </li>\n        <li data-dojo-attach-point="monthViewTableBtn" class="buttons-inner">\n            <img src="../../../img/timecard/table-icon.png">\n        </li>\n    </ul>\n    <h2>Gearbeitete Zeit</h2>\n    <p>Die Anzahl der Stunden pro Tag und die erwartete Stundenanzahl</p>\n    <div class="filters" data-dojo-attach-point="filters">\n        <div class="filters-inner">\n            <h3>Filter</h3>\n            <div class="exportForm" data-dojo-attach-point="exportForm" data-dojo-type="dijit/form/Form">\n                <table><tbody>\n                    <tr>\n                        <td>Projekt:</td>\n                        <td>\n                            <div data-dojo-attach-point="projectChooserContainer"\n                                 data-dojo-type="dijit/layout/ContentPane"></div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>Zeitraum:</td>\n                        <td>\n                            <input type="text"\n                                name="start"\n                                class="date"\n                                data-dojo-type="phpr/DateTextBox"\n                                data-dojo-attach-point="startDate"\n                                data-dojo-props="placeholder:\'Start date\', value: \'firstOfMonth\'" />\n                            -\n                            <input type="text"\n                                name="end"\n                                class="date"\n                                data-dojo-type="phpr/DateTextBox"\n                                data-dojo-attach-point="endDate"\n                                data-dojo-props="placeholder:\'End date\', value: \'lastOfMonth\'" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <button data-dojo-type="dijit/form/Button"\n                                type="submit"\n                                data-dojo-attach-point="exportButton"\n                                data-dojo-props="baseClass:\'submitButton\'">Export to CSV</button>\n                        </td>\n                    </tr>\n                </tbody></table>\n            </div>\n        </div>\n    </div>\n    <div data-dojo-type="dijit/layout/ContentPane" data-dojo-attach-point="monthContainer">\n    </div>\n    <h2>Gearbeitete Zeit pro Projekt</h2>\n    <p>Die Anzahl der Stunden pro Projekt</p>\n    <div data-dojo-type="dijit/layout/ContentPane" data-dojo-attach-point="projectContainer">\n    </div>\n</div>\n',
"phpr/Statistics/WorktimeMonthGraph":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/array,dojo/dom-attr,dojo/dom-construct,dojo/date,dojo/date/locale,dojo/promise/all,dijit/_Widget,dijit/_TemplatedMixin,phpr/Api,phpr/Timehelper,phpr/models/Timecard,dojo/text!phpr/template/statistics/WorktimeMonthGraph.html,d3/d3.v3".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r){var n=2,m=k(null,{_svgNode:null,_dayEntries:null,constructor:function(a,b){this._dayEntries=b;this._svgNode=a},todayX:function(a){a=
((new Date).getTime()-a.getTime())/864E5;return Math.min(Math.max(a*(this.barWidth()+n)-n/2,0),this.displayWidth())},barWidth:function(){return this.displayWidth()/this._dayEntries.length-n},displayWidth:function(){return h.get(this._svgNode,"width")},heightPerMinute:function(){return this.heightForTimebars()/900},heightForTimebars:function(){return h.get(this._svgNode,"height")}}),o=function(){function a(b,c){return c*(n+e.barWidth())}function b(a){return Math.max(2,e.heightPerMinute()*a.minutesBooked)}
function c(a){return Math.min(e.heightForTimebars()-2,e.heightForTimebars()-e.heightPerMinute()*a.minutesBooked)}function d(a){return!a.hasOwnProperty("minutesToWork")?"white":a.minutesBooked<a.minutesToWork?"#b5b5b5":"white"}function f(a){var b=g.format(l.dateToJsDate(a.date),{selector:"date"});0!==a.minutesBooked&&(b+=" ("+l.minutesToHMString(a.minutesBooked)+")");return b}var e;return function(g,h){e=new m(g,h);d3.select(g).selectAll().data(h).enter().append("svg:rect").attr("fill",d).attr("x",
a).attr("y",c).attr("width",i.hitch(e,e.barWidth)).attr("height",b).append("svg:title").text(f)}}(),s=function(){function a(b,c){return c*(n+h.barWidth())}function b(a,c){return(c+1)*(n+h.barWidth())}function c(a){return h.heightForTimebars()-h.heightPerMinute()*a.minutesToWork}function d(a,b){return b*(n+h.barWidth())}function f(a,b){return b*(n+h.barWidth())}function e(a,b){return 0===b?c(a,b):c(g[b-1],b-1)}var g,h;return function(i,j){g=j;h=new m(i,g);var l=d3.select(i).selectAll().data(g);l.enter().append("svg:line").attr("x1",
a).attr("x2",b).attr("y1",c).attr("y2",c).attr("stroke","#6aa700");l.enter().append("svg:line").attr("x1",d).attr("x2",f).attr("y1",e).attr("y2",c).attr("stroke","#6aa700")}}();return k([f,a],{templateString:r,baseClass:"thisMonthDiagram",projects:null,constructor:function(){this.projects=[]},buildRendering:function(){this.inherited(arguments);this._destroyed||(this._updateLabels(),p.getWorkBalanceByDay(this._getModelParams()).then(i.hitch(this,this._renderUsingWorkBalance),i.hitch(this,function(a){d.defaultErrorHandler(a);
p.getWorkedMinutesPerDay(this._getModelParams()).then(i.hitch(this,this._renderUsingMonthList),d.defaultErrorHandler)})))},_renderUsingWorkBalance:function(a){if(!0!==this._destroyed){var b=[],c;for(c in a.workBalancePerDay)b.push({date:c,minutesBooked:a.workBalancePerDay[c].minutesBooked,minutesToWork:a.workBalancePerDay[c].minutesToWork});o(this.bookedTimePerDayGraph,b);s(this.bookedTimePerDayGraph,b);this._fillOvertimeLabel();this._renderTodayMarker(this.bookedTimePerDayGraph,b);this._renderFutureDayMarker(this.bookedTimePerDayGraph,
b)}},_renderUsingDayList:function(a){if(!0!==this._destroyed){var b=[];j.forEach(a.days||[],function(a){b.push({date:a.date,minutesBooked:a.sumInMinutes})});0<b.length&&o(this.bookedTimePerDayGraph,b);this._renderTodayMarker(this.bookedTimePerDayGraph,b);this._renderFutureDayMarker(this.bookedTimePerDayGraph,b)}},_fillOvertimeLabel:function(){var a=this._getModelParams(),b=l.exclude(new Date);if(a.end.getTime()>b.getTime())a.end=b;p.getMonthStatistics(a).then(i.hitch(this,function(a){if(!0!==this._destroyed)this.overtimeLabel.innerHTML=
l.minutesToHMString(a.booked.minutesBooked-a.towork.minutesToWork)+" Overtime"}),function(a){d.defaultErrorHandler(a)})},_renderTodayMarker:function(a,b){var c=new Date;if(!(0<e.compare(c,this.endDate,"date")||0>e.compare(c,this.startDate,"date"))){var c=d3.select(this.bookedTimePerDayGraph),d=new m(a,b);c.append("rect").attr("x",d.todayX(this.startDate)-1).attr("width",2).attr("y",0).attr("height",d.heightForTimebars()).attr("fill","#0d639b")}},_renderFutureDayMarker:function(a,b){var c=d3.select(this.bookedTimePerDayGraph),
d=new m(a,b);c.append("rect").attr("fill","rgba(0,0,0,0.2)").attr("x",d.todayX(this.startDate)).attr("y",0).attr("width",d.displayWidth()-d.todayX(this.startDate)).attr("height",d.heightForTimebars())},_updateLabels:function(){this.firstDayLabel.innerHTML=g.format(this.startDate,{selector:"date",datePattern:"EEE MMM d"});this.lastDayLabel.innerHTML=g.format(this.endDate,{selector:"date",datePattern:"EEE MMM d"})},_getModelParams:function(){return{projects:this.projects,start:this.startDate,end:this.endDate}}})})},
"url:phpr/template/statistics/WorktimeMonthGraph.html":'<div>\n        <svg height="72" width="834" data-dojo-attach-point="bookedTimePerDayGraph">\n            <rect class="background" height="72" width="834"/>\n            <rect class="upperLeftRect" data-dojo-attach-point="upperLeftRect"/>\n        </svg>\n        <span class="firstDayLabel" data-dojo-attach-point="firstDayLabel"></span>\n        <span class="lastDayLabel" data-dojo-attach-point="lastDayLabel"></span>\n        <div class="overtimeLabel" data-dojo-attach-point="overtimeLabel"></div>\n</div>\n',
"d3/d3.v3":function(){define(["dojo","dijit","dojox"],function(){(function(){function i(a){return a.target}function k(a){return a.source}function j(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function h(){}function c(a){return a}function e(){return!0}function g(a){return"function"===typeof a?a:function(){return a}}function b(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function f(a){return null!=a&&!isNaN(a)}function a(a){return a.length}function d(a){return 1===
a.length?function(b,c){a(null==b?c:null)}:a}function l(a){return a.responseText}function p(a){return JSON.parse(a.responseText)}function r(a){var b=document.createRange();b.selectNode(document.body);return b.createContextualFragment(a.responseText)}function n(a){return a.responseXML}function m(){}function o(a){function b(){for(var d=c,f=-1,e=d.length,J;++f<e;)(J=d[f].on)&&J.apply(this,arguments);return a}var c=[],d=new h;b.on=function(b,f){var w;var e=d.get(b),J;if(2>arguments.length)return e&&e.on;
if(e)e.on=null,w=c.slice(0,J=c.indexOf(e)).concat(c.slice(J+1)),c=w,d.remove(b);f&&c.push(d.set(b,{on:f}));return a};return b}function s(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function t(a){return a+""}function q(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function u(a){return function(b){return 1-a(1-b)}}function v(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function y(a){return a*a}function x(a){return a*a*
a}function L(a){return 1-Math.cos(a*A/2)}function z(a){return Math.pow(2,10*(a-1))}function U(a){return 1-Math.sqrt(1-a*a)}function S(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function V(){d3.event.stopPropagation();d3.event.preventDefault()}function ka(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function D(a){for(var b=new m,c=0,d=arguments.length;++c<d;)b[arguments[c]]=o(b);b.of=function(c,
d){return function(f){try{var e=f.sourceEvent=d3.event;f.target=a;d3.event=f;b[f.type].apply(c,d)}finally{d3.event=e}}};return b}function E(a){var b=[a.a,a.b],c=[a.c,a.d],d=B(b),f=b[0]*c[0]+b[1]*c[1],e=-f;c[0]+=e*b[0];c[1]+=e*b[1];e=B(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,f*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*ea;this.translate=[a.e,a.f];this.scale=[d,e];this.skew=e?Math.atan2(f,e)*ea:0}function B(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=
b);return b}function F(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function P(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function N(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function K(){}function G(a,b,c){return new Y(a,b,c)}function Y(a,b,c){this.r=a;this.g=b;this.b=c}function H(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Q(a,b,c){var d=0,f=0,e=0,g,h;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(h=
g[2].split(","),g[1]){case "hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case "rgb":return b(Z(h[0]),Z(h[1]),Z(h[2]))}if(c=Kb.get(a))return b(c.r,c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,f=a.charAt(2),f+=f,e=a.charAt(3),e+=e):7===a.length&&(d=a.substring(1,3),f=a.substring(3,5),e=a.substring(5,7)),d=parseInt(d,16),f=parseInt(f,16),e=parseInt(e,16));return b(d,f,e)}function ia(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),f=Math.max(a,b,c),e=
f-d,g=(f+d)/2;e?(d=0.5>g?e/(f+d):e/(2-f-d),a=60*(a==f?(b-c)/e+(b<c?6:0):b==f?(c-a)/e+2:(a-b)/e+4)):d=a=0;return aa(a,d,g)}function R(a,b,c){var a=O(a),b=O(b),c=O(c),d=Oa((0.4124564*a+0.3575761*b+0.1804375*c)/ed),f=Oa((0.2126729*a+0.7151522*b+0.072175*c)/fd),a=Oa((0.0193339*a+0.119192*b+0.9503041*c)/gd);return ra(116*f-16,500*(d-f),200*(f-a))}function O(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function Z(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function aa(a,b,c){return new qa(a,b,c)}function qa(a,b,c){this.h=a;this.s=b;this.l=c}function ma(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?f+(e-f)*a/60:180>a?e:240>a?f+(e-f)*(240-a)/60:f}var f,e,a=a%360;0>a&&(a+=360);b=0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;e=0.5>=c?c*(1+b):c+b-c*b;f=2*c-e;return G(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function Ba(a,b,c){return new Ca(a,b,c)}function Ca(a,b,c){this.h=a;this.c=b;this.l=c}function na(a,b,c){return ra(c,
Math.cos(a*=C)*b,Math.sin(a)*b)}function ra(a,b,c){return new fa(a,b,c)}function fa(a,b,c){this.l=a;this.a=b;this.b=c}function Db(a,b,c){a=(a+16)/116;c=a-c/200;b=jb(a+b/500)*ed;a=jb(a)*fd;c=jb(c)*gd;return G(Va(3.2404542*b-1.5371385*a-0.4985314*c),Va(-0.969266*b+1.8760108*a+0.041556*c),Va(0.0556434*b-0.2040259*a+1.0572252*c))}function Na(a,b,c){return Ba(180*(Math.atan2(c,b)/A),Math.sqrt(b*b+c*c),a)}function jb(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function Oa(a){return 0.008856<a?Math.pow(a,
1/3):7.787037*a+4/29}function Va(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function la(a){jc(a,M);return a}function kb(a){return function(){return Lb(a,this)}}function La(a){return function(){return hd(a,this)}}function lb(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function f(){this.setAttribute(a,b)}function e(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):
this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=d3.ns.qualify(a);return null==b?a.local?d:c:"function"===typeof b?a.local?h:g:a.local?e:f}function mb(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function va(a,b){function c(){for(var d=-1;++d<f;)a[d](this,b)}function d(){for(var c=-1,e=b.apply(this,arguments);++c<f;)a[c](this,e)}var a=a.trim().split(/\s+/).map(hb),f=a.length;
return"function"===typeof b?d:c}function hb(a){var b=mb(a);return function(c,d){if(f=c.classList)return d?f.add(a):f.remove(a);var f=c.className,e=null!=f.baseVal,g=e?f.baseVal:f;if(d){if(b.lastIndex=0,!b.test(g))g=(g+" "+a).trim().replace(/\s+/g," "),e?f.baseVal=g:c.className=g}else if(g)g=g.replace(b," ").trim().replace(/\s+/g," "),e?f.baseVal=g:c.className=g}}function fb(a,b,c){function d(){this.style.removeProperty(a)}function f(){this.style.setProperty(a,b,c)}function e(){var d=b.apply(this,
arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?e:f}function nb(a,b){function c(){delete this[a]}function d(){this[a]=b}function f(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?f:d}function Eb(a){return function(){return id(this,a)}}function ic(a){if(!arguments.length)a=d3.ascending;return function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function Fb(a,b,c){function d(){var b=
this[e];b&&(this.removeEventListener(a,b,b.$),delete this[e])}function f(){function g(a){var c=d3.event;d3.event=a;i[0]=h.__data__;try{b.apply(h,i)}finally{d3.event=c}}var h=this,i=Ga(arguments);d.call(this);this.addEventListener(a,this[e]=g,g.$=c);g._=b}var e="__on"+a,g=a.indexOf(".");0<g&&(a=a.substring(0,g));return b?f:d}function pa(a,b){for(var c=0,d=a.length;c<d;c++)for(var f=a[c],e=0,g=f.length,h;e<g;e++)(h=f[e])&&b(h,e,c);return a}function Wa(a){jc(a,Qa);return a}function xa(a,b){jc(a,$);a.id=
b;return a}function Xa(a,b,c,d){var f=a.__transition__||(a.__transition__={active:0,count:0}),e=f[c];if(!e){var g=d.time,e=f[c]={tween:new h,event:d3.dispatch("start","end"),time:g,ease:d.ease,delay:d.delay,duration:d.duration};++f.count;d3.timer(function(d){function h(d){if(f.active>c)return Fa();f.active=c;k.start.call(a,j,b);e.tween.forEach(function(c,d){(d=d.call(a,j,b))&&q.push(d)});i(d)||d3.timer(i,0,g);return 1}function i(d){if(f.active!==c)return Fa();for(var d=(d-n)/o,e=l(d),g=q.length;0<
g;)q[--g].call(a,e);if(1<=d)return Fa(),k.end.call(a,j,b),1}function Fa(){--f.count?delete f[c]:delete a.__transition__;return 1}var j=a.__data__,l=e.ease,k=e.event,n=e.delay,o=e.duration,q=[];return n<=d?h(d):d3.timer(h,n,g),1},0,g);return e}}function ob(a){null==a&&(a="");return function(){this.textContent=a}}function pb(a,b,c,d){var f=a.id;return pa(a,"function"===typeof c?function(a,e,w){a.__transition__[f].tween.set(b,d(c.call(a,a.__data__,e,w)))}:(c=d(c),function(a){a.__transition__[f].tween.set(b,
c)}))}function Ma(){for(var a,b=Date.now(),c=bb;c;){a=b-c.then;if(a>=c.delay)c.flush=c.callback(a);c=c.next}a=Da()-b;24<a?(isFinite(a)&&(clearTimeout(Mb),Mb=setTimeout(Ma,a)),Nb=0):(Nb=1,jd(Ma))}function Da(){var w;for(var a=null,b=bb,c=Infinity;b;)b.flush?(delete kc[b.callback.id],w=a?a.next=b.next:bb=b.next,b=w):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function Ua(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>lc&&(window.scrollX||window.scrollY)){var c=
d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),f=c[0][0].getScreenCTM();lc=!(f.f||f.e);c.remove()}lc?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function ba(){}function Ea(a){var b=a[0],a=a[a.length-1];return b<a?[b,a]:[a,b]}function Pa(a){return a.rangeExtent?a.rangeExtent():Ea(a.range())}
function ya(a,b){var c=0,d=a.length-1,f=a[c],e=a[d],g;e<f&&(g=c,c=d,d=g,g=f,f=e,e=g);if(b=b(e-f))a[c]=b.floor(f),a[d]=b.ceil(e);return a}function qb(){return Math}function Ya(a,b,c,d){function f(){var i=2<Math.min(a.length,b.length)?sb:gc,da=d?N:P;g=i(a,b,da,c);h=i(b,a,da,d3.interpolate);return e}function e(a){return g(a)}var g,h;e.invert=function(a){return h(a)};e.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return f()};e.range=function(a){if(!arguments.length)return b;b=a;return f()};
e.rangeRound=function(a){return e.range(a).interpolate(d3.interpolateRound)};e.clamp=function(a){if(!arguments.length)return d;d=a;return f()};e.interpolate=function(a){if(!arguments.length)return c;c=a;return f()};e.ticks=function(b){return rb(a,b)};e.tickFormat=function(b){return ib(a,b)};e.nice=function(){ya(a,gb);return f()};e.copy=function(){return Ya(a,b,c,d)};return f()}function Gb(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function gb(a){return(a=Math.pow(10,Math.round(Math.log(a)/
Math.LN10)-1))&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Za(a,b){var c=Ea(a),d=c[1]-c[0],f=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*f;0.15>=d?f*=10:0.35>=d?f*=5:0.75>=d&&(f*=2);c[0]=Math.ceil(c[0]/f)*f;c[1]=Math.floor(c[1]/f)*f+0.5*f;c[2]=f;return c}function rb(a,b){return d3.range.apply(d3,Za(a,b))}function ib(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Za(a,b)[2])/Math.LN10+0.01))+"f")}function gc(a,b,c,d){var f=
c(a[0],a[1]),e=d(b[0],b[1]);return function(a){return e(f(a))}}function sb(a,b,c,d){var f=[],e=[],g=0,h=Math.min(a.length,b.length)-1;a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=h;)f.push(c(a[g-1],a[g])),e.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,h)-1;return e[c](f[c](b))}}function Hb(a,b){function c(d){return a(b(d))}var d=b.pow;c.invert=function(b){return d(a.invert(b))};c.domain=function(f){if(!arguments.length)return a.domain().map(d);b=0>f[0]?ab:$a;
d=b.pow;a.domain(f.map(b));return c};c.nice=function(){a.domain(ya(a.domain(),qb));return c};c.ticks=function(){var c=Ea(a.domain()),f=[];if(c.every(isFinite)){var e=Math.floor(c[0]),g=Math.ceil(c[1]),h=d(c[0]),c=d(c[1]);if(b===ab)for(f.push(d(e));e++<g;)for(var i=9;0<i;i--)f.push(d(e)*i);else{for(;e<g;e++)for(i=1;10>i;i++)f.push(d(e)*i);f.push(d(e))}for(e=0;f[e]<h;e++);for(g=f.length;f[g-1]>c;g--);f=f.slice(e,g)}return f};c.tickFormat=function(a,f){2>arguments.length&&(f=He);if(!arguments.length)return f;
var e=Math.max(0.1,a/c.ticks().length),w=b===ab?(g=-1.0E-12,Math.floor):(g=1.0E-12,Math.ceil),g;return function(a){return a/d(w(b(a)+g))<=e?f(a):""}};c.copy=function(){return Hb(a.copy(),b)};return Gb(c,a)}function $a(a){return Math.log(0>a?0:a)/Math.LN10}function ab(a){return-Math.log(0<a?0:-a)/Math.LN10}function Vc(a,b){function c(b){return a(d(b))}var d=Cb(b),f=Cb(1/b);c.invert=function(b){return f(a.invert(b))};c.domain=function(b){if(!arguments.length)return a.domain().map(f);a.domain(b.map(d));
return c};c.ticks=function(a){return rb(c.domain(),a)};c.tickFormat=function(a){return ib(c.domain(),a)};c.nice=function(){return c.domain(ya(c.domain(),gb))};c.exponent=function(a){if(!arguments.length)return b;var e=c.domain();d=Cb(b=a);f=Cb(1/b);return c.domain(e)};c.copy=function(){return Vc(a.copy(),b)};return Gb(c,a)}function Cb(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Wc(a,b){function c(b){return e[((f.get(b)||f.set(b,a.push(b)))-1)%e.length]}function d(b,c){return d3.range(a.length).map(function(a){return b+
c*a})}var f,e,g;c.domain=function(d){if(!arguments.length)return a;a=[];f=new h;for(var e=-1,g=d.length,i;++e<g;)f.has(i=d[e])||f.set(i,a.push(i));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return e;e=a;g=0;b={t:"range",a:arguments};return c};c.rangePoints=function(f,h){2>arguments.length&&(h=0);var i=f[0],j=f[1],da=(j-i)/(Math.max(1,a.length-1)+h);e=d(2>a.length?(i+j)/2:i+da*h/2,da);g=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(f,h,i){2>arguments.length&&
(h=0);3>arguments.length&&(i=h);var j=f[1]<f[0],da=f[j-0],l=(f[1-j]-da)/(a.length-h+2*i);e=d(da+l*i,l);j&&e.reverse();g=l*(1-h);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(f,h,i){2>arguments.length&&(h=0);3>arguments.length&&(i=h);var j=f[1]<f[0],da=f[j-0],l=f[1-j],k=Math.floor((l-da)/(a.length-h+2*i));e=d(da+Math.round((l-da-(a.length-h)*k)/2),k);j&&e.reverse();g=Math.round(k*(1-h));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return g};c.rangeExtent=
function(){return Ea(b.a[0])};c.copy=function(){return Wc(a,b)};return c.domain(a)}function Xc(a,b){function c(){var e=0,g=b.length;for(f=[];++e<g;)f[e-1]=d3.quantile(a,e/g);return d}function d(a){return isNaN(a=+a)?NaN:b[d3.bisect(f,a)]}var f;d.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return f};d.copy=function(){return Xc(a,b)};return c()}
function Yc(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(e*(b-a))))]}function f(){e=c.length/(b-a);g=c.length-1;return d}var e,g;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return f()};d.range=function(a){if(!arguments.length)return c;c=a;return f()};d.copy=function(){return Yc(a,b,c)};return f()}function Zc(a,b){function c(d){return b[d3.bisect(a,d)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;
b=a;return c};c.copy=function(){return Zc(a,b)};return c}function $c(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return rb(a,b)};b.tickFormat=function(b){return ib(a,b)};b.copy=function(){return $c(a)};return b}function Ee(a){return a.innerRadius}function Fe(a){return a.outerRadius}function ad(a){return a.startAngle}function bd(a){return a.endAngle}function cd(a){function b(e){function J(){i.push("M",h(a(l),
j))}for(var i=[],l=[],k=-1,Jb=e.length,n,o=g(c),q=g(d);++k<Jb;)f.call(this,n=e[k],k)?l.push([+o.call(this,n,k),+q.call(this,n,k)]):l.length&&(J(),l=[]);l.length&&J();return i.length?i.join(""):null}var c=hc,d=dd,f=e,h=oa,i=h.key,j=0.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return f;f=a;return b};b.interpolate=function(a){if(!arguments.length)return i;i="function"===typeof a?
h=a:(h=mc.get(a)||oa).key;return b};b.tension=function(a){if(!arguments.length)return j;j=a;return b};return b}function hc(a){return a[0]}function dd(a){return a[1]}function oa(a){return a.join("L")}function nc(a){for(var b=0,c=a.length,d=a[0],f=[d[0],",",d[1]];++b<c;)f.push("V",(d=a[b])[1],"H",d[0]);return f.join("")}function oc(a){for(var b=0,c=a.length,d=a[0],f=[d[0],",",d[1]];++b<c;)f.push("H",(d=a[b])[0],"V",d[1]);return f.join("")}function Ob(a,b){if(1>b.length||a.length!=b.length&&a.length!=
b.length+2)return oa(a);var c=a.length!=b.length,d="",f=a[0],e=a[1],g=b[0],h=g,i=1;c&&(d+="Q"+(e[0]-2*g[0]/3)+","+(e[1]-2*g[1]/3)+","+e[0]+","+e[1],f=a[1],i=2);if(1<b.length){h=b[1];e=a[i];i++;d+="C"+(f[0]+g[0])+","+(f[1]+g[1])+","+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1];for(f=2;f<b.length;f++,i++)e=a[i],h=b[f],d+="S"+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1]}c&&(c=a[i],d+="Q"+(e[0]+2*h[0]/3)+","+(e[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function pc(a,b){for(var c=[],d=(1-b)/2,f,e=a[0],
g=a[1],h=1,i=a.length;++h<i;)f=e,e=g,g=a[h],c.push([d*(g[0]-f[0]),d*(g[1]-f[1])]);return c}function kd(a){if(3>a.length)return oa(a);var b=1,c=a.length,d=a[0],f=d[0],e=d[1],g=[f,f,f,(d=a[1])[0]],h=[e,e,e,d[1]],f=[f,",",e];for(ub(f,g,h);++b<c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),ub(f,g,h);for(b=-1;2>++b;)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),ub(f,g,h);return f.join("")}function wa(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function ub(a,b,c){a.push("C",wa(ld,b),",",
wa(ld,c),",",wa(md,b),",",wa(md,c),",",wa(cb,b),",",wa(cb,c))}function qc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function nd(a){for(var b,c=-1,d=a.length,f,e;++c<d;)b=a[c],f=b[0],e=b[1]+Ra,b[0]=f*Math.cos(e),b[1]=f*Math.sin(e);return a}function od(a){function b(e){function J(){l.push("M",j(a(m),o),n,k(a(q.reverse()),o),"Z")}for(var l=[],q=[],m=[],p=-1,s=e.length,tb,r=g(c),t=g(f),u=c===d?function(){return y}:g(d),z=f===h?function(){return v}:g(h),y,v;++p<s;)i.call(this,tb=e[p],p)?(q.push([y=+r.call(this,
tb,p),v=+t.call(this,tb,p)]),m.push([+u.call(this,tb,p),+z.call(this,tb,p)])):q.length&&(J(),q=[],m=[]);q.length&&J();return l.length?l.join(""):null}var c=hc,d=hc,f=0,h=dd,i=e,j=oa,l=j.key,k=j,n="L",o=0.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return h;f=h=a;return b};b.y0=function(a){if(!arguments.length)return f;f=
a;return b};b.y1=function(a){if(!arguments.length)return h;h=a;return b};b.defined=function(a){if(!arguments.length)return i;i=a;return b};b.interpolate=function(a){if(!arguments.length)return l;l="function"===typeof a?j=a:(j=mc.get(a)||oa).key;k=j.reverse||j;n=j.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return o;o=a;return b};return b}function Ie(a){return a.radius}function pd(a){return[a.x,a.y]}function Je(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+
Ra;return[c*Math.cos(b),c*Math.sin(b)]}}function Ke(){return 64}function Le(){return"circle"}function qd(a){a=Math.sqrt(a/A);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function rd(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function sd(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Me(a,b,c){d=[];if(c&&1<b.length){for(var a=Ea(a.domain()),d,f=-1,e=b.length,g=(b[1]-b[0])/++c,h,i;++f<e;)for(h=c;0<--h;)(i=+b[f]-h*g)>=a[0]&&
d.push(i);for(--f,h=0;++h<c&&(i=+b[f]+h*g)<a[1];)d.push(i)}return d}function Ne(){if(!vb)vb=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode;var a=d3.event,b;try{vb.scrollTop=1E3,vb.dispatchEvent(a),b=1E3-vb.scrollTop}catch(c){b=a.wheelDelta||5*-a.detail}return b}function Oe(a){var b=a.source,a=a.target,c;var d=a;if(b===d)c=b;else{c=td(b);for(var d=td(d),
f=c.pop(),e=d.pop(),g=null;f===e;)g=f,f=c.pop(),e=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function td(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function Pe(a){a.fixed|=2}function Qe(a){a.fixed&=1}function Re(a){a.fixed|=4;a.px=a.x;a.py=a.y}function Se(a){a.fixed&=3}function ud(a,b,c){var d=0,f=0;a.charge=0;if(!a.leaf)for(var e=a.nodes,g=e.length,h=-1,i;++h<g;)i=e[h],null!=i&&(ud(i,b,c),a.charge+=
i.charge,d+=i.charge*i.cx,f+=i.charge*i.cy);if(a.point)a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,f+=b*a.point.y;a.cx=d/a.charge;a.cy=f/a.charge}function Te(){return 20}function Ue(){return 1}function Ve(a){return a.x}function We(a){return a.y}function Xe(a,b,c){a.y0=b;a.y=c}function rc(a){return d3.range(a.length)}function sc(a){for(var b=-1,a=a[0].length,c=[];++b<a;)c[b]=0;return c}function Ye(a){for(var b=1,c=
0,d=a[0][1],f,e=a.length;b<e;++b)if((f=a[b][1])>d)c=b,d=f;return c}function Ze(a){return a.reduce($e,0)}function $e(a,b){return a+b[1]}function af(a,b){return vd(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function vd(a,b){for(var c=-1,d=+a[0],f=(a[1]-d)/b,e=[];++c<=b;)e[c]=f*c+d;return e}function bf(a){return[d3.min(a),d3.max(a)]}function wb(a,b){d3.rebind(a,b,"sort","children","value");a.nodes=a;a.links=cf;return a}function df(a){return a.children}function ef(a){return a.value}function ff(a,b){return b.value-
a.value}function cf(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function gf(a,b){return a.value-b.value}function tc(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function wd(a,b){a._pack_next=b;b._pack_prev=a}function xd(a,b){var c=b.x-a.x,d=b.y-a.y,f=a.r+b.r;return 0.001<f*f-c*c-d*d}function yd(a){function b(a){d=Math.min(a.x-a.r,d);f=Math.max(a.x+a.r,f);e=Math.min(a.y-a.r,e);g=Math.max(a.y+a.r,g)}
if((c=a.children)&&(o=c.length)){var c,d=Infinity,f=-Infinity,e=Infinity,g=-Infinity,h,i,j,l,k,n,o;c.forEach(hf);h=c[0];h.x=-h.r;h.y=0;b(h);if(1<o&&(i=c[1],i.x=i.r,i.y=0,b(i),2<o)){j=c[2];zd(h,i,j);b(j);tc(h,j);h._pack_prev=j;tc(j,i);i=h._pack_next;for(l=3;l<o;l++){zd(h,i,j=c[l]);var q=0,m=1,p=1;for(k=i._pack_next;k!==i;k=k._pack_next,m++)if(xd(k,j)){q=1;break}if(1==q)for(n=h._pack_prev;n!==k._pack_prev&&!xd(n,j);n=n._pack_prev,p++);q?(m<p||m==p&&i.r<h.r?wd(h,i=k):wd(h=n,i),l--):(tc(h,j),i=j,b(j))}}h=
(d+f)/2;i=(e+g)/2;for(l=k=0;l<o;l++)j=c[l],j.x-=h,j.y-=i,k=Math.max(k,j.r+Math.sqrt(j.x*j.x+j.y*j.y));a.r=k;c.forEach(jf)}}function hf(a){a._pack_next=a._pack_prev=a}function jf(a){delete a._pack_next;delete a._pack_prev}function Ad(a,b,c,d){var f=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(f)for(var a=-1,e=f.length;++a<e;)Ad(f[a],b,c,d)}function zd(a,b,c){var d=a.r+c.r,f=b.x-a.x,e=b.y-a.y;if(d&&(f||e)){var g=b.r+c.r,h=f*f+e*e,g=g*g,d=d*d,b=0.5+(d-g)/(2*h),g=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=
h)*d-g*g))/(2*h);c.x=a.x+b*f+g*e;c.y=a.y+b*e-g*f}else c.x=a.x+d,c.y=a.y}function kf(a){return 1+d3.max(a,function(a){return a.y})}function lf(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Bd(a){var b=a.children;return b&&b.length?Bd(b[0]):a}function Cd(a){var b=a.children,c;return b&&(c=b.length)?Cd(b[c-1]):a}function Dd(a,b){return a.parent==b.parent?1:2}function uc(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function vc(a){var b=a.children,c;return b&&(c=b.length)?
b[c-1]:a._tree.thread}function Pb(a,b){var c=a.children;if(c&&(f=c.length))for(var d,f,e=-1;++e<f;)if(0<b(d=Pb(c[e],b),a))a=d;return a}function mf(a,b){return a.x-b.x}function nf(a,b){return b.x-a.x}function of(a,b){return a.depth-b.depth}function za(a,b){function c(a,d){var f=a.children;if(f&&(h=f.length))for(var e,g=null,w=-1,h;++w<h;)e=f[w],c(e,g),g=e;b(a,d)}c(a,null)}function wc(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ed(a,b){var c=a.x+b[3],d=a.y+b[0],f=a.dx-b[1]-b[3],e=a.dy-b[0]-b[2];
0>f&&(c+=f/2,f=0);0>e&&(d+=e/2,e=0);return{x:c,y:d,dx:f,dy:e}}function Fd(a,b){function c(a,f){return d3.xhr(a,b,f).response(d)}function d(a){return c.parse(a.responseText)}function f(b){return b.map(e).join(a)}function e(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=RegExp('["'+a+"\n]"),h=a.charCodeAt(0);c.parse=function(a){var b;return c.parseRows(a,function(a){if(b)return b(a);b=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")})};
c.parseRows=function(a,b){function c(){if(w>=g)return f;if(j)return j=!1,d;var b=w;if(34===a.charCodeAt(b)){for(var e=b;e++<g;)if(34===a.charCodeAt(e)){if(34!==a.charCodeAt(e+1))break;++e}w=e+2;var i=a.charCodeAt(e+1);13===i?(j=!0,10===a.charCodeAt(e+2)&&++w):10===i&&(j=!0);return a.substring(b+1,e).replace(/""/g,'"')}for(;w<g;){i=a.charCodeAt(w++);e=1;if(10===i)j=!0;else if(13===i)j=!0,10===a.charCodeAt(w)&&(++w,++e);else if(i!==h)continue;return a.substring(b,w-e)}return a.substring(b)}for(var d=
{},f={},e=[],g=a.length,w=0,i=0,J,j;(J=c())!==f;){for(var Ib=[];J!==d&&J!==f;)Ib.push(J),J=c();(!b||(Ib=b(Ib,i++)))&&e.push(Ib)}return e};c.format=function(a){return a.map(f).join("\n")};return c}function Qb(a,b){if(Gd.hasOwnProperty(a.type))Gd[a.type](a,b)}function xc(a,b,c){var d=-1,c=a.length-c,f;for(b.lineStart();++d<c;)f=a[d],b.point(f[0],f[1]);b.lineEnd()}function Hd(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)xc(a[c],b,1);b.polygonEnd()}function Id(a){return[Math.atan2(a[1],a[0]),
Math.asin(Math.max(-1,Math.min(1,a[2])))]}function yc(a,b){return Math.abs(a[0]-b[0])<I&&Math.abs(a[1]-b[1])<I}function Rb(a){var b=a[0],a=a[1],c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function Sb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Jd(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Kd(a,b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function Ld(a){function b(d){function e(b,c){b=a(b,c);d.point(b[0],b[1])}function g(){l=NaN;q.point=h;d.lineStart()}
function h(b,e){var g=Rb([b,e]),i=a(b,e);c(l,k,j,Fa,n,o,l=i[0],k=i[1],j=b,Fa=g[0],n=g[1],o=g[2],f,d);d.point(l,k)}function i(){q.point=e;d.lineEnd()}function J(){var a,b,e,w,Jb,m;g();q.point=function(c,d){h(a=c,d);b=l;e=k;w=Fa;Jb=n;m=o;q.point=h};q.lineEnd=function(){c(l,k,j,Fa,n,o,b,e,a,w,Jb,m,f,d);q.lineEnd=i;i()}}var j,l,k,Fa,n,o,q={point:e,lineStart:g,lineEnd:i,polygonStart:function(){d.polygonStart();q.lineStart=J},polygonEnd:function(){d.polygonEnd();q.lineStart=g}};return q}function c(b,f,
e,g,h,i,J,j,l,k,da,n,o,q){var m=J-b,p=j-f,s=m*m+p*p;if(s>4*d&&o--){var r=g+k,t=h+da,u=i+n,z=Math.sqrt(r*r+t*t+u*u),y=Math.asin(u/=z),v=Math.abs(Math.abs(u)-1)<I?(e+l)/2:Math.atan2(t,r),x=a(v,y),y=x[0],x=x[1],U=y-b,S=x-f,L=p*U-m*S;if(L*L/s>d||0.3<Math.abs((m*U+p*S)/s-0.5))c(b,f,e,g,h,i,y,x,v,r/=z,t/=z,u,o,q),q.point(y,x),c(y,x,v,r,t,u,J,j,l,k,da,n,o,q)}}var d=0.5,f=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(d);f=0<(d=a*a)&&16;return b};return b}function Md(a,b){function c(a,b){var d=
Math.sqrt(e-2*f*Math.sin(b))/f;return[d*Math.sin(a*=f),g-d*Math.cos(a)]}var d=Math.sin(a),f=(d+Math.sin(b))/2,e=1+d*(2*f-d),g=Math.sqrt(e)/f;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/f,Math.asin((e-(a*a+c*c)*f*f)/(2*f))]};return c}function Nd(a){function b(a,c){a<d&&(d=a);a>e&&(e=a);c<f&&(f=c);c>g&&(g=c)}function c(){h.point=h.lineEnd=ba}var d,f,e,g,h={point:b,lineStart:ba,lineEnd:ba,polygonStart:function(){h.lineEnd=c},polygonEnd:function(){h.point=b}};return function(b){g=e=-(d=f=
Infinity);d3.geo.stream(b,a(h));return[[d,f],[e,g]]}}function Od(a,b){if(!ca){++sa;var a=a*C,c=Math.cos(b*=C);W+=(c*Math.cos(a)-W)/sa;X+=(c*Math.sin(a)-X)/sa;T+=(Math.sin(b)-T)/sa}}function pf(){var a,b;ca=1;zc();ca=2;var c=ta.point;ta.point=function(d,f){c(a=d,b=f)};ta.lineEnd=function(){ta.point(a,b);Ac();ta.lineEnd=Ac}}function zc(){function a(f,e){var f=f*C,g=Math.cos(e*=C),h=g*Math.cos(f),g=g*Math.sin(f),w=Math.sin(e),i=Math.atan2(Math.sqrt((i=c*w-d*g)*i+(i=d*h-b*w)*i+(i=b*g-c*h)*i),b*h+c*g+
d*w);sa+=i;W+=i*(b+(b=h));X+=i*(c+(c=g));T+=i*(d+(d=w))}var b,c,d;if(!(1<ca))1>ca&&(ca=1,sa=W=X=T=0),ta.point=function(f,e){var f=f*C,g=Math.cos(e*=C);b=g*Math.cos(f);c=g*Math.sin(f);d=Math.sin(e);ta.point=a}}function Ac(){ta.point=Od}function Bc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(f,e,g,h){if(null!=f){if(f=Pd(c,f),e=Pd(c,e),0<g?f<e:f>e)f+=2*g*A}else f=a+2*g*A,e=a;for(var i,j=g*b;0<g?f>e:f<e;f-=j)h.point((i=Id([c,-d*Math.cos(f),-d*Math.sin(f)]))[0],i[1])}}function Pd(a,b){var c=Rb(b);
c[0]-=a;var d=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=d;c[1]/=d;c[2]/=d;d=Math.acos(Math.max(-1,Math.min(1,-c[1])));return((0>-c[2]?-d:d)+2*Math.PI-I)%(2*Math.PI)}function Qd(a,b,c){return function(d){function f(b,c){a(b,c)&&d.point(b,c)}function e(a,b){k.point(a,b)}function g(){n.point=e;k.lineStart()}function h(){n.point=f;k.lineEnd()}function i(a,b){r.point(a,b);t.push([a,b])}function j(){r.lineStart();t=[]}function l(){i(t[0][0],t[0][1]);r.lineEnd();var a=r.clean(),b=s.buffer(),c=b.length;
if(c)if(t=null,a&1){a=b[0];q+=Rd(a,1);var c=a.length-1,b=-1,f;for(d.lineStart();++b<c;)d.point((f=a[b])[0],f[1]);d.lineEnd()}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),o.push(b.filter(qf));else p=!0,m+=Rd(t,-1),t=null}var k=b(d),n={point:f,lineStart:g,lineEnd:h,polygonStart:function(){n.point=i;n.lineStart=j;n.lineEnd=l;p=!1;m=q=0;o=[];d.polygonStart()},polygonEnd:function(){n.point=f;n.lineStart=g;n.lineEnd=h;o=d3.merge(o);if(o.length)rf(o,c,d);else if(q<-I||p&&m<-I)d.lineStart(),c(null,null,
1,d),d.lineEnd();d.polygonEnd();o=null},sphere:function(){d.polygonStart();d.lineStart();c(null,null,1,d);d.lineEnd();d.polygonEnd()}},o,q,m,p,s=sf(),r=b(s),t;return n}}function rf(a,b,c){var d=[],f=[];a.forEach(function(a){var b=a.length;if(!(1>=b)){var c=a[0],b=a[b-1],a={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},c={point:c,points:[c],other:a,visited:!1,entry:!1,subject:!1};a.other=c;d.push(a);f.push(c);a={point:b,points:[b],other:null,visited:!1,entry:!1,subject:!0};c={point:b,
points:[b],other:a,visited:!1,entry:!0,subject:!1};a.other=c;d.push(a);f.push(c)}});f.sort(tf);Sd(d);Sd(f);if(d.length)for(var a=d[0],e,g,h;;){for(e=a;e.visited;)if((e=e.next)===a)return;g=e.points;c.lineStart();do{e.visited=e.other.visited=!0;if(e.entry){if(e.subject)for(var i=0;i<g.length;i++)c.point((h=g[i])[0],h[1]);else b(e.point,e.next.point,1,c);e=e.next}else{if(e.subject){g=e.prev.points;for(i=g.length;0<=--i;)c.point((h=g[i])[0],h[1])}else b(e.point,e.prev.point,-1,c);e=e.prev}e=e.other;
g=e.points}while(!e.visited);c.lineEnd()}}function Sd(a){if(b=a.length){for(var b,c=0,d=a[0],f;++c<b;)d.next=f=a[c],f.prev=d,d=f;d.next=f=a[0];f.prev=d}}function tf(a,b){return(0>(a=a.point)[0]?a[1]-A/2-I:A/2-a[1])-(0>(b=b.point)[0]?b[1]-A/2-I:A/2-b[1])}function qf(a){return 1<a.length}function sf(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:ba,buffer:function(){var c=a;a=[];b=null;return c}}}function Rd(a,b){var w;if(!(c=a.length))return 0;for(var c,
d=0,f=0,e=a[0],g=e[0],h=e[1],i=Math.cos(h),j=Math.atan2(b*Math.sin(g)*i,Math.sin(h)),l=1-b*Math.cos(g)*i,k=j;++d<c;)e=a[d],i=Math.cos(h=e[1]),w=Math.atan2(b*Math.sin(g=e[0])*i,Math.sin(h)),e=w,g=1-b*Math.cos(g)*i,Math.abs(l-2)<I&&Math.abs(g-2)<I||(Math.abs(g)<I||Math.abs(l)<I||(Math.abs(Math.abs(e-j)-A)<I?2<g+l&&(f+=4*(e-j)):f=Math.abs(l-2)<I?f+4*(e-k):f+((3*A+e-j)%(2*A)-A)*(l+g)),k=j,j=e,l=g);return f}function uf(a){function b(a,c){return Math.cos(a)*Math.cos(c)>d}function c(a,b){var f=Rb(a,0),e=
Rb(b,0),g=[1,0,0],f=Jd(f,e),h=Sb(f,f),e=f[0],w=h-e*e;if(!w)return a;h=d*h/w;w=-d*e/w;e=Jd(g,f);g=[g[0]*h,g[1]*h,g[2]*h];Kd(g,[f[0]*w,f[1]*w,f[2]*w]);f=Sb(g,e);h=Sb(e,e);w=Math.sqrt(f*f-h*(Sb(g,g)-1));f=[e[0]*((-f-w)/h),e[1]*((-f-w)/h),e[2]*((-f-w)/h)];Kd(f,g);return Id(f)}var a=a*C,d=Math.cos(a),a=Bc(a,6*C);return Qd(b,function(a){var d,f,e,g;return{lineStart:function(){e=f=!1;g=1},point:function(h,w){var i=[h,w],j,l=b(h,w);!d&&(e=f=l)&&a.lineStart();if(l!==f&&(j=c(d,i),yc(d,j)||yc(i,j)))i[0]+=I,
i[1]+=I,l=b(i[0],i[1]);l!==f&&(g=0,(f=l)?(a.lineStart(),j=c(i,d),a.point(j[0],j[1])):(j=c(d,i),a.point(j[0],j[1]),a.lineEnd()),d=j);l&&(!d||!yc(d,i))&&a.point(i[0],i[1]);d=i},lineEnd:function(){f&&a.lineEnd();d=null},clean:function(){return g|(e&&f)<<1}}},a)}function Td(a,b){function c(d,f){return d=a(d,f),b(d[0],d[1])}if(a.invert&&b.invert)c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])};return c}function Tb(a,b){return[a,b]}function vf(a,b,c){var d=d3.range(a,b-I,c).concat(b);
return function(a){return d.map(function(b){return[a,b]})}}function wf(a,b,c){var d=d3.range(a,b-I,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function xf(a,b,c,d){function f(a){var b=Math.sin(a*=n)*o,c=Math.sin(n-a)*o,a=c*i+b*l,d=c*j+b*k,b=c*g+b*h;return[Math.atan2(d,a)/C,Math.atan2(b,Math.sqrt(a*a+d*d))/C]}var e=Math.cos(b),g=Math.sin(b),b=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),l=b*Math.cos(c),k=b*Math.sin(c),n=Math.acos(Math.max(-1,Math.min(1,g*h+
e*b*Math.cos(c-a)))),o=1/Math.sin(n);f.distance=n;return f}function Cc(a,b){return[a/(2*A),Math.max(-0.5,Math.min(0.5,Math.log(Math.tan(A/4+b/2))/(2*A)))]}function Ud(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function yf(a){var b=Ld(function(b,c){return a([b*ea,c*ea])});return function(a){a=b(a);return{point:function(b,c){a.point(b*C,c*C)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},
polygonEnd:function(){a.polygonEnd()}}}}function zf(){function a(b,c){g.push("M",b,",",c,e)}function b(a,d){g.push("M",a,",",d);h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function f(){g.push("Z")}var e=Ud(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){e=Ud(a);return h},result:function(){if(g.length){var a=g.join("");g=[];return a}}};return h}function Af(a){function b(c,
d){a.moveTo(c,d);a.arc(c,d,g,0,2*A)}function c(b,f){a.moveTo(b,f);h.point=d}function d(b,c){a.lineTo(b,c)}function f(){h.point=b}function e(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:f,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=f;h.point=b},pointRadius:function(a){g=a;return h},result:ba};return h}function Bf(){function a(b,c){Ub+=f*b-d*c;d=b;f=c}var b,c,d,f;Ha.point=function(e,g){Ha.point=a;b=d=e;c=f=g};Ha.lineEnd=function(){a(b,c)}}function Dc(a,
b){ca||(W+=a,X+=b,++T)}function Vd(){function a(d,f){var e=d-b,g=f-c,e=Math.sqrt(e*e+g*g);W+=e*(b+d)/2;X+=e*(c+f)/2;T+=e;b=d;c=f}var b,c;if(1!==ca)if(1>ca)ca=1,W=X=T=0;else return;ua.point=function(d,f){ua.point=a;b=d;c=f}}function Wd(){ua.point=Dc}function Cf(){function a(b,c){var e=f*b-d*c;W+=e*(d+b);X+=e*(f+c);T+=3*e;d=b;f=c}var b,c,d,f;2>ca&&(ca=2,W=X=T=0);ua.point=function(e,g){ua.point=a;b=d=e;c=f=g};ua.lineEnd=function(){a(b,c)}}function Df(){function a(b,c){b*=C;c*=C;if(!(Math.abs(Math.abs(e)-
A/2)<I&&Math.abs(Math.abs(c)-A/2)<I)){var w=Math.cos(c),i=Math.sin(c);if(Math.abs(e-A/2)<I)Ia+=2*(b-d);else{var j=b-f,J=Math.cos(j),l=Math.atan2(Math.sqrt((l=w*Math.sin(j))*l+(l=g*i-h*w*J)*l),h*i+g*w*J),J=(l+A+e+c)/4;Ia+=(0>j&&j>-A||j>A?-4:4)*Math.atan(Math.sqrt(Math.abs(Math.tan(J)*Math.tan(J-l/2)*Math.tan(J-A/4-e/2)*Math.tan(J-A/4-c/2))))}d=f;f=b;e=c;g=w;h=i}}var b,c,d,f,e,g,h;Ja.point=function(i,j){Ja.point=a;d=f=(b=i)*C;e=(c=j)*C;g=Math.cos(e);h=Math.sin(e)};Ja.lineEnd=function(){a(b,c)}}function Ka(a){return Ec(function(){return a})()}
function Ec(a){function b(a){a=g(a[0]*C,a[1]*C);return[a[0]*i+p,s-a[1]*i]}function c(a){return(a=g.invert((a[0]-p)/i,(s-a[1])/i))&&[a[0]*ea,a[1]*ea]}function d(){g=Td(e=Xd(o,q,m),f);var a=f(k,n);p=j-a[0]*i;s=l+a[1]*i;return b}var f,e,g,h=Ld(function(a,b){a=f(a,b);return[a[0]*i+p,s-a[1]*i]}),i=150,j=480,l=250,k=0,n=0,o=0,q=0,m=0,p,s,r=Yd,t=null;b.stream=function(a){return Ef(e,r(h(a)))};b.clipAngle=function(a){if(!arguments.length)return t;r=null==a?(t=a,Yd):uf(t=+a);return b};b.scale=function(a){if(!arguments.length)return i;
i=+a;return d()};b.translate=function(a){if(!arguments.length)return[j,l];j=+a[0];l=+a[1];return d()};b.center=function(a){if(!arguments.length)return[k*ea,n*ea];k=a[0]%360*C;n=a[1]%360*C;return d()};b.rotate=function(a){if(!arguments.length)return[o*ea,q*ea,m*ea];o=a[0]%360*C;q=a[1]%360*C;m=2<a.length?a[2]%360*C:0;return d()};d3.rebind(b,h,"precision");return function(){f=a.apply(this,arguments);b.invert=f.invert&&c;return d()}}function Ef(a,b){return{point:function(c,d){d=a(c*C,d*C);c=d[0];b.point(c>
A?c-2*A:c<-A?c+2*A:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Xd(a,b,c){return a?b||c?Td(Zd(a),$d(b,c)):Zd(a):b||c?$d(b,c):Tb}function ae(a){return function(b,c){return b+=a,[b>A?b-2*A:b<-A?b+2*A:b,c]}}function Zd(a){var b=ae(a);b.invert=ae(-a);return b}function $d(a,b){function c(a,b){var h=Math.cos(b),w=Math.cos(a)*h,h=Math.sin(a)*h,i=Math.sin(b),
j=i*d+w*f;return[Math.atan2(h*e-j*g,w*d-i*f),Math.asin(Math.max(-1,Math.min(1,j*e+h*g)))]}var d=Math.cos(a),f=Math.sin(a),e=Math.cos(b),g=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,c=Math.sin(a)*c,w=Math.sin(b),i=w*e-c*g;return[Math.atan2(c*e+w*g,h*d+i*f),Math.asin(Math.max(-1,Math.min(1,i*d-h*f)))]};return c}function xb(a,b){function c(b,d){var f=Math.cos(b),e=Math.cos(d),f=a(f*e);return[f*e*Math.sin(b),f*Math.sin(d)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),f=b(d),
e=Math.sin(f),f=Math.cos(f);return[Math.atan2(a*e,d*f),Math.asin(d&&c*e/d)]};return c}function Ff(a,b,c,d){var f,e,g,a=d[a];f=a[0];e=a[1];a=d[b];b=a[0];g=a[1];a=d[c];return 0<(a[1]-e)*(b-f)-(g-e)*(a[0]-f)}function Fc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function be(a,b,c,d){var f=a[0],e=c[0],g=b[0]-f,h=d[0]-e,a=a[1],c=c[1],b=b[1]-a,d=d[1]-c,e=(h*(a-c)-d*(f-e))/(d*g-h*b);return[f+e*g,a+e*b]}function ce(a,b){var c=a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,
b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,f={list:[],leftEnd:null,rightEnd:null,init:function(){f.leftEnd=f.createHalfEdge(null,"l");f.rightEnd=f.createHalfEdge(null,"l");f.leftEnd.r=f.rightEnd;f.rightEnd.l=f.leftEnd;f.list.unshift(f.leftEnd,f.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=f.leftEnd;do b=b.r;while(b!=f.rightEnd&&e.rightOf(b,a));return b=b.l},
del:function(a){a.l.r=a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[Gc[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,f=b.y-a.y;c.c=a.x*d+a.y*f+0.5*(d*d+f*f);(0<d?d:-d)>(0<f?f:-f)?(c.a=1,c.b=f/d,c.c/=d):(c.b=1,c.a=d/f,c.c/=f);return c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||
c.region.r==d.region.r)return null;var f=c.a*d.b-c.b*d.a;if(1.0E-10>Math.abs(f))return null;var e=(c.c*d.b-d.c*c.b)/f,f=(d.c*c.a-c.c*d.a)/f,g=c.region.r,h=d.region.r;g.y<h.y||g.y==h.y&&g.x<h.x?g=a:(g=b,c=d);return(c=e>=c.region.r.x)&&"l"===g.side||!c&&"r"===g.side?null:{x:e,y:f}},rightOf:function(a,b){var c=a.edge,d=c.region.r,f=b.x>d.x;if(f&&"l"===a.side)return 1;if(!f&&"r"===a.side)return 0;if(1===c.a){var e=b.y-d.y,g=b.x-d.x,h=0,w=0;!f&&0>c.b||f&&0<=c.b?w=h=e>=c.b*g:(w=b.x+b.y*c.b>c.c,0>c.b&&(w=
!w),w||(h=1));h||(d=d.x-c.region.l.x,w=c.b*(g*g-e*e)<d*e*(1+2*g/d+c.b*c.b),0>c.b&&(w=!w))}else g=c.c-c.a*b.x,c=b.y-g,e=b.x-d.x,d=g-d.y,w=c*c>e*e+d*d;return"l"===a.side?w:!w},endPoint:function(a,c,d){a.ep[c]=d;a.ep[Gc[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},g={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;for(var c=0,d=g.list,f=d.length;c<f;c++){var e=d[c];if(!(a.ystar>e.ystar||a.ystar==e.ystar&&b.x>e.vertex.x))break}d.splice(c,0,a)},del:function(a){for(var b=
0,c=g.list,d=c.length;b<d&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===g.list.length},nextEvent:function(a){for(var b=0,c=g.list,d=c.length;b<d;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=g.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return g.list.shift()}};f.init();for(var d=c.shift(),h=c.shift(),i,j,l,k,n,o,q,m,p;;)if(g.empty()||(i=g.min()),h&&(g.empty()||h.y<i.y||h.y==i.y&&h.x<i.x)){j=f.leftBound(h);l=f.right(j);q=f.rightRegion(j);p=e.bisect(q,h);
o=f.createHalfEdge(p,"l");f.insert(j,o);if(m=e.intersect(j,o))g.del(j),g.insert(j,m,e.distance(m,h));j=o;o=f.createHalfEdge(p,"r");f.insert(j,o);(m=e.intersect(o,l))&&g.insert(o,m,e.distance(m,h));h=c.shift()}else if(g.empty())break;else{j=g.extractMin();k=f.left(j);l=f.right(j);n=f.right(l);q=f.leftRegion(j);o=f.rightRegion(l);m=j.vertex;e.endPoint(j.edge,j.side,m);e.endPoint(l.edge,l.side,m);f.del(j);g.del(l);f.del(l);j="l";q.y>o.y&&(j=q,q=o,o=j,j="r");p=e.bisect(q,o);o=f.createHalfEdge(p,j);f.insert(k,
o);e.endPoint(p,Gc[j],m);if(m=e.intersect(k,o))g.del(k),g.insert(k,m,e.distance(m,q));(m=e.intersect(o,n))&&g.insert(o,m,e.distance(m,q))}for(j=f.right(f.leftEnd);j!=f.rightEnd;j=f.right(j))b(j.edge)}function yb(a,b,c,d,f,e){if(!a(b,c,d,f,e)){var g=0.5*(c+f),h=0.5*(d+e),b=b.nodes;b[0]&&yb(a,b[0],c,d,g,h);b[1]&&yb(a,b[1],g,d,f,h);b[2]&&yb(a,b[2],c,h,g,e);b[3]&&yb(a,b[3],g,h,f,e)}}function Sa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Vb(a,b,c,d){for(var f,
e=0,g=b.length,h=c.length;e<g;){if(d>=h)return-1;f=b.charCodeAt(e++);if(37===f){if(f=Gf[b.charAt(e++)],!f||0>(d=f(a,c,d)))return-1}else if(f!=c.charCodeAt(d++))return-1}return d}function Wb(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function de(a){for(var b=new h,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function ja(a,b,c){var a=a+"",d=a.length;return d<c?Array(c-d+1).join(b)+a:a}function ee(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+2)))?(a.d=+b[0],
c+b[0].length):-1}function fe(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Hc(a){return a.toISOString()}function Ta(a,b,c){function d(b){var c=a(b),f=e(c,1);return b-c<f-b?c:f}function f(c){b(c=a(new ha(c-1)),1);return c}function e(a,c){b(a=new ha(+a),c);return a}function g(a,d,e){var a=f(a),h=[];if(1<e)for(;a<d;)c(a)%e||h.push(new Date(+a)),b(a,1);else for(;a<d;)h.push(new Date(+a)),b(a,1);return h}a.floor=a;a.round=d;a.ceil=f;a.offset=e;a.range=
g;var h=a.utc=Xb(a);h.floor=h;h.round=Xb(d);h.ceil=Xb(f);h.offset=Xb(e);h.range=function(a,b,c){try{ha=Sa;var d=new Sa;d._=a;return g(d,b,c)}finally{ha=Date}};return a}function Xb(a){return function(b,c){try{ha=Sa;var d=new Sa;d._=b;return a(d,c)._}finally{ha=Date}}}function Ic(a,b,c){function d(b){return a(b)}d.invert=function(b){return Jc(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(Jc);a.domain(b);return d};d.nice=function(a){return d.domain(ya(d.domain(),function(){return a}))};
d.ticks=function(c,f){var e,g=d.domain();e=g[0];g=g[g.length-1];e=e<g?[e,g]:[g,e];if("function"!==typeof c){var g=(e[1]-e[0])/c,h=d3.bisect(Yb,g);if(h==Yb.length)return b.year(e,c);if(!h)return a.ticks(c).map(Jc);Math.log(g/Yb[h-1])<Math.log(Yb[h]/g)&&--h;c=b[h];f=c[1];c=c[0].range}return c(e[0],new Date(+e[1]+1),f)};d.tickFormat=function(){return c};d.copy=function(){return Ic(a.copy(),b,c)};return d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function Jc(a){return new Date(a)}function ge(a){return function(b){for(var c=
a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Kc(a){var b=new Date(a,0,1);b.setFullYear(a);return b}function Hf(a){var b=a.getFullYear(),c=Kc(b),d=Kc(b+1);return b+(a-c)/(d-c)}function Lc(a){var b=new Date(Date.UTC(a,0,1));b.setUTCFullYear(a);return b}function If(a){var b=a.getUTCFullYear(),c=Lc(b),d=Lc(b+1);return b+(a-c)/(d-c)}var Zb=[3,3];if(!Date.now)Date.now=function(){return+new Date};try{document.createElement("div").style.setProperty("opacity",0,"")}catch(kg){var he=CSSStyleDeclaration.prototype,
Jf=he.setProperty;he.setProperty=function(a,b,c){Jf.call(this,a,b+"",c)}}d3={version:"3.0.3"};var A=Math.PI,I=1.0E-6,C=A/180,ea=180/A,Ga=function(a){return Array.prototype.slice.call(a)};try{Ga(document.documentElement.childNodes)}catch(lg){Ga=j}var jc=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var b=new h,c;for(c in a)b.set(c,a[c]);return b};(function(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=
b}})(h,{has:function(a){return zb+a in this},get:function(a){return this[zb+a]},set:function(a,b){return this[zb+a]=b},remove:function(a){a=zb+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(b){a.push(b)});return a},values:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===Kf&&a.call(this,b.substring(1),
this[b])}});var zb="\x00",Kf=zb.charCodeAt(0);d3.functor=g;d3.rebind=function(a,c){for(var d=1,f=arguments.length,e;++d<f;)a[e=arguments[d]]=b(a,c,c[e]);return a};d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.mean=function(a,b){var c=a.length,d,e=0,g=-1,h=0;if(1===arguments.length)for(;++g<c;){if(f(d=a[g]))e+=(d-e)/++h}else for(;++g<c;)if(f(d=b.call(a,a[g],g)))e+=(d-e)/++h;return h?e:void 0};d3.median=function(a,b){1<arguments.length&&
(a=a.map(b));a=a.filter(f);return a.length?d3.quantile(a.sort(d3.ascending),0.5):void 0};d3.min=function(a,b){var c=-1,d=a.length,f,e;if(1===arguments.length){for(;++c<d&&(null==(f=a[c])||f!=f);)f=void 0;for(;++c<d;)if(null!=(e=a[c])&&f>e)f=e}else{for(;++c<d&&(null==(f=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(e=b.call(a,a[c],c))&&f>e)f=e}return f};d3.max=function(a,b){var c=-1,d=a.length,f,e;if(1===arguments.length){for(;++c<d&&(null==(f=a[c])||f!=f);)f=void 0;for(;++c<d;)if(null!=
(e=a[c])&&e>f)f=e}else{for(;++c<d&&(null==(f=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(e=b.call(a,a[c],c))&&e>f)f=e}return f};d3.extent=function(a,b){var c=-1,d=a.length,f,e,g;if(1===arguments.length){for(;++c<d&&(null==(f=g=a[c])||f!=f);)f=g=void 0;for(;++c<d;)if(null!=(e=a[c]))f>e&&(f=e),g<e&&(g=e)}else{for(;++c<d&&(null==(f=g=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(e=b.call(a,a[c],c)))f>e&&(f=e),g<e&&(g=e)}return[f,g]};d3.random={normal:function(a,b){var c=arguments.length;
2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*Math.log(d)/d)}},logNormal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);var d=d3.random.normal();return function(){return Math.exp(a+b*d())}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b/a}}};d3.sum=function(a,b){var c=0,d=a.length,f,e=-1;if(1===arguments.length)for(;++e<d;){if(!isNaN(f=+a[e]))c+=f}else for(;++e<
d;)if(!isNaN(f=+b.call(a,a[e],e)))c+=f;return c};d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),f=+a[d-1];return(c-=d)?f+c*(a[d]-f):f};d3.shuffle=function(a){for(var b=a.length,c,d;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a};d3.transpose=function(a){return d3.zip.apply(d3,a)};d3.zip=function(){if(!(e=arguments.length))return[];for(var b=-1,c=d3.min(arguments,a),d=Array(c);++b<c;)for(var f=-1,e,g=d[b]=Array(e);++f<e;)g[f]=arguments[f][b];return d};d3.bisector=function(a){return{left:function(b,
c,d,f){3>arguments.length&&(d=0);if(4>arguments.length)f=b.length;for(;d<f;){var e=d+f>>>1;a.call(b,b[e],e)<c?d=e+1:f=e}return d},right:function(b,c,d,f){3>arguments.length&&(d=0);if(4>arguments.length)f=b.length;for(;d<f;){var e=d+f>>>1;c<a.call(b,b[e],e)?f=e:d=e+1}return d}}};var ie=d3.bisector(function(a){return a});d3.bisectLeft=ie.left;d3.bisect=d3.bisectRight=ie.right;d3.nest=function(){function a(b,f){if(f>=d.length)return g?g.call(c,b):e?b.sort(e):b;for(var i=-1,j=b.length,l=d[f++],k,J,n=
new h,o,q={};++i<j;)(o=n.get(k=l(J=b[i])))?o.push(J):n.set(k,[J]);n.forEach(function(b,c){q[b]=a(c,f)});return q}function b(a,c){if(c>=d.length)return a;var e=[],g=f[c++],h;for(h in a)e.push({key:h,values:b(a[h],c)});g&&e.sort(function(a,b){return g(a.key,b.key)});return e}var c={},d=[],f=[],e,g;c.map=function(b){return a(b,0)};c.entries=function(c){return b(a(c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){f[d.length-1]=a;return c};c.sortValues=function(a){e=a;return c};c.rollup=
function(a){g=a;return c};return c};d3.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};d3.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};d3.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};d3.permute=function(a,b){for(var c=[],d=-1,f=b.length;++d<f;)c[d]=a[b[d]];return c};d3.merge=function(a){return Array.prototype.concat.apply([],a)};d3.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");
var d=[],f;f=Math.abs(c);for(var e=1;f*e%1;)e*=10;f=e;var e=-1,g;a*=f;b*=f;c*=f;if(0>c)for(;(g=a+c*++e)>b;)d.push(g/f);else for(;(g=a+c*++e)<b;)d.push(g/f);return d};d3.requote=function(a){return a.replace(Lf,"\\$&")};var Lf=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};d3.xhr=function(a,b,f){function e(){var a=l.status;!a&&l.responseText||200<=a&&300>a||304===a?h.load.call(g,j.call(g,l)):h.error.call(g,l)}var g={},h=d3.dispatch("progress",
"load","error"),i={},j=c,l=new (window.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()};l.onprogress=function(a){var b=d3.event;d3.event=a;try{h.progress.call(g,l)}finally{d3.event=b}};g.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return i[a];null==b?delete i[a]:i[a]=b+"";return g};g.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return g};
g.response=function(a){j=a;return g};["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(Ga(arguments)))}});g.send=function(c,d,f){2===arguments.length&&"function"===typeof d&&(f=d,d=null);l.open(c,a,!0);null!=b&&!("accept"in i)&&(i.accept=b+",*/*");if(l.setRequestHeader)for(var e in i)l.setRequestHeader(e,i[e]);null!=b&&l.overrideMimeType&&l.overrideMimeType(b);if(null!=f)g.on("error",f).on("load",function(a){f(null,a)});l.send(null==d?null:d);return g};g.abort=function(){l.abort();
return g};d3.rebind(g,h,"on");2===arguments.length&&"function"===typeof b&&(f=b,b=null);return null==f?g:g.get(d(f))};d3.text=function(){return d3.xhr.apply(d3,arguments).response(l)};d3.json=function(a,b){return d3.xhr(a,"application/json",b).response(p)};d3.html=function(a,b){return d3.xhr(a,"text/html",b).response(r)};d3.xml=function(){return d3.xhr.apply(d3,arguments).response(n)};var Mc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Mc,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return Mc.hasOwnProperty(c)?{space:Mc[c],local:a}:a}};d3.dispatch=function(){for(var a=new m,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=o(a);return a};m.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<c&&(d=a.substring(c+1),a=a.substring(0,c));return 2>arguments.length?this[a].on(d):this[a].on(d,b)};
d3.format=function(a){var a=Mf.exec(a),b=a[1]||" ",c=a[2]||">",d=a[3]||"",f=a[4]||"",e=a[5],g=+a[6],h=a[7],i=a[8],j=a[9],l=1,k="",n=!1;i&&(i=+i.substring(1));if(e||"0"===b&&"="===c)e=b="0",c="=",h&&(g-=Math.floor((g-1)/4));switch(j){case "n":h=!0;j="g";break;case "%":l=100;k="%";j="f";break;case "p":l=100;k="%";j="r";break;case "b":case "o":case "x":case "X":f&&(f="0"+j.toLowerCase());case "c":case "d":n=!0;i=0;break;case "s":l=-1,j="r"}"#"===f&&(f="");"r"==j&&!i&&(j="g");var j=Nf.get(j)||t,o=e&&
h;return function(a){if(n&&a%1)return"";var w=0>a||0===a&&0>1/a?(a=-a,"-"):d;if(0>l){var q=d3.formatPrefix(a,i),a=q.scale(a);k=q.symbol}else a*=l;a=j(a,i);!e&&h&&(a=Nc(a));var q=f.length+a.length+(o?0:w.length),m=q<g?Array(q=g-q+1).join(b):"";o&&(a=Nc(m+a));a.replace(".",".");w+=f;return("<"===c?w+a+m:">"===c?m+w+a:"^"===c?m.substring(0,q>>=1)+w+a+m.substring(q):w+(o?a:m+a))+k}};var Mf=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Nf=d3.map({b:function(a){return a.toString(2)},
c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=s(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),Nc=c;if(Zb)var Of=Zb.length,Nc=function(a){for(var b=a.lastIndexOf("."),c=0<=b?"."+a.substring(b+1):(b=a.length,""),d=[],f=0,e=Zb[0];0<
b&&0<e;)d.push(a.substring(b-=e,b+e)),e=Zb[f=(f+1)%Of];return d.reverse().join(",")+c};var Pf="y,z,a,f,p,n,\u03bc,m,,k,M,G,T,P,E,Z,Y".split(",").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});d3.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=d3.round(a,s(a,b))),c=1+Math.floor(1.0E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return Pf[8+c/3]};var je=function(){return c},
Qf=d3.map({linear:je,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return y},cubic:function(){return x},sin:function(){return L},exp:function(){return z},circle:function(){return U},elastic:function(a,b){var c;2>arguments.length&&(b=0.45);arguments.length?c=b/(2*A)*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*A/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return S}}),Rf=
d3.map({"in":c,out:u,"in-out":v,"out-in":function(a){return v(u(a))}});d3.ease=function(a){var b=a.indexOf("-"),d=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",d=Qf.get(d)||je,b=Rf.get(b)||c;return q(b(d.apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(a){b.setAttribute("transform",a);a=b.transform.baseVal.consolidate();return new E(a?a.matrix:Sf)})(a)};E.prototype.toString=
function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Sf={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,b){for(var c=d3.interpolators.length,d;0<=--c&&!(d=d3.interpolators[c](a,b)););return d};d3.interpolateNumber=function(a,b){b-=a;return function(c){return a+b*c}};d3.interpolateRound=function(a,b){b-=a;return function(c){return Math.round(a+b*c)}};d3.interpolateString=function(a,b){var c,d,f=0,e=[],g=[],h,i;for(d=$b.lastIndex=
0;c=$b.exec(b);++d)c.index&&e.push(b.substring(f,c.index)),g.push({i:e.length,x:c[0]}),e.push(null),f=$b.lastIndex;f<b.length&&e.push(b.substring(f));for(d=0,h=g.length;(c=$b.exec(a))&&d<h;++d)if(i=g[d],i.x==c[0]){if(i.i)if(null==e[i.i+1]){e[i.i-1]+=i.x;e.splice(i.i,1);for(c=d+1;c<h;++c)g[c].i--}else{e[i.i-1]+=i.x+e[i.i+1];e.splice(i.i,2);for(c=d+1;c<h;++c)g[c].i-=2}else if(null==e[i.i+1])e[i.i]=i.x;else{e[i.i]=i.x+e[i.i+1];e.splice(i.i+1,1);for(c=d+1;c<h;++c)g[c].i--}g.splice(d,1);h--;d--}else i.x=
d3.interpolateNumber(parseFloat(c[0]),parseFloat(i.x));for(;d<h;)i=g.pop(),null==e[i.i+1]?e[i.i]=i.x:(e[i.i]=i.x+e[i.i+1],e.splice(i.i+1,1)),h--;return 1===e.length?null==e[0]?g[0].x:function(){return b}:function(a){for(d=0;d<h;++d)e[(i=g[d]).i]=i.x(a);return e.join("")}};d3.interpolateTransform=function(a,b){var c=[],d=[],f,e=d3.transform(a),g=d3.transform(b),h=e.translate,i=g.translate,j=e.rotate,l=g.rotate,k=e.skew,n=g.skew,e=e.scale,g=g.scale;h[0]!=i[0]||h[1]!=i[1]?(c.push("translate(",null,",",
null,")"),d.push({i:1,x:d3.interpolateNumber(h[0],i[0])},{i:3,x:d3.interpolateNumber(h[1],i[1])})):i[0]||i[1]?c.push("translate("+i+")"):c.push("");j!=l?(180<j-l?l+=360:180<l-j&&(j+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(j,l)})):l&&c.push(c.pop()+"rotate("+l+")");k!=n?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(k,n)}):n&&c.push(c.pop()+"skewX("+n+")");e[0]!=g[0]||e[1]!=g[1]?(f=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:f-4,x:d3.interpolateNumber(e[0],
g[0])},{i:f-2,x:d3.interpolateNumber(e[1],g[1])})):(1!=g[0]||1!=g[1])&&c.push(c.pop()+"scale("+g+")");f=d.length;return function(a){for(var b=-1,e;++b<f;)c[(e=d[b]).i]=e.x(a);return c.join("")}};d3.interpolateRgb=function(a,b){var a=d3.rgb(a),b=d3.rgb(b),c=a.r,d=a.g,f=a.b,e=b.r-c,g=b.g-d,h=b.b-f;return function(a){return"#"+H(Math.round(c+e*a))+H(Math.round(d+g*a))+H(Math.round(f+h*a))}};d3.interpolateHsl=function(a,b){var a=d3.hsl(a),b=d3.hsl(b),c=a.h,d=a.s,f=a.l,e=b.h-c,g=b.s-d,h=b.l-f;180<e?e-=
360:-180>e&&(e+=360);return function(a){return ma(c+e*a,d+g*a,f+h*a)+""}};d3.interpolateLab=function(a,b){var a=d3.lab(a),b=d3.lab(b),c=a.l,d=a.a,f=a.b,e=b.l-c,g=b.a-d,h=b.b-f;return function(a){return Db(c+e*a,d+g*a,f+h*a)+""}};d3.interpolateHcl=function(a,b){var a=d3.hcl(a),b=d3.hcl(b),c=a.h,d=a.c,f=a.l,e=b.h-c,g=b.c-d,h=b.l-f;180<e?e-=360:-180>e&&(e+=360);return function(a){return na(c+e*a,d+g*a,f+h*a)+""}};d3.interpolateArray=function(a,b){var c=[],d=[],f=a.length,e=b.length,g=Math.min(a.length,
b.length),h;for(h=0;h<g;++h)c.push(d3.interpolate(a[h],b[h]));for(;h<f;++h)d[h]=a[h];for(;h<e;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}};d3.interpolateObject=function(a,b){var c={},d={},f;for(f in a)f in b?c[f]=F(f)(a[f],b[f]):d[f]=a[f];for(f in b)f in a||(d[f]=b[f]);return function(a){for(f in c)d[f]=c[f](a);return d}};var $b=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,
b)},function(a,b){return("string"===typeof a||"string"===typeof b)&&d3.interpolateString(a+"",b+"")},function(a,b){return("string"===typeof b?Kb.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof K)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}];K.prototype.toString=function(){return this.rgb()+""};d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof Y?G(a.r,a.g,a.b):Q(""+a,G,ma):G(~~a,~~b,~~c)};var ac=Y.prototype=new K;ac.brighter=function(a){var a=
Math.pow(0.7,arguments.length?a:1),b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return G(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return G(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))};ac.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return G(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};ac.hsl=function(){return ia(this.r,this.g,this.b)};ac.toString=function(){return"#"+H(this.r)+H(this.g)+H(this.b)};var Kb=d3.map({aliceblue:"#f0f8ff",
antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",
darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",
goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",
lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",
navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",
silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Kb.forEach(function(a,b){Kb.set(a,Q(b,G,ma))});d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof qa?aa(a.h,a.s,a.l):Q(""+a,ia,aa):aa(+a,+b,+c)};
var Oc=qa.prototype=new K;Oc.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);return aa(this.h,this.s,this.l/a)};Oc.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return aa(this.h,this.s,a*this.l)};Oc.rgb=function(){return ma(this.h,this.s,this.l)};d3.hcl=function(a,b,c){return 1===arguments.length?a instanceof Ca?Ba(a.h,a.c,a.l):a instanceof fa?Na(a.l,a.a,a.b):Na((a=R((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):Ba(+a,+b,+c)};var Pc=Ca.prototype=new K;Pc.brighter=function(a){return Ba(this.h,
this.c,Math.min(100,this.l+bc*(arguments.length?a:1)))};Pc.darker=function(a){return Ba(this.h,this.c,Math.max(0,this.l-bc*(arguments.length?a:1)))};Pc.rgb=function(){return na(this.h,this.c,this.l).rgb()};d3.lab=function(a,b,c){return 1===arguments.length?a instanceof fa?ra(a.l,a.a,a.b):a instanceof Ca?na(a.l,a.c,a.h):R((a=d3.rgb(a)).r,a.g,a.b):ra(+a,+b,+c)};var bc=18,ed=0.95047,fd=1,gd=1.08883,Qc=fa.prototype=new K;Qc.brighter=function(a){return ra(Math.min(100,this.l+bc*(arguments.length?a:1)),
this.a,this.b)};Qc.darker=function(a){return ra(Math.max(0,this.l-bc*(arguments.length?a:1)),this.a,this.b)};Qc.rgb=function(){return Db(this.l,this.a,this.b)};var Lb=function(a,b){return b.querySelector(a)},hd=function(a,b){return b.querySelectorAll(a)},db=document.documentElement,Tf=db.matchesSelector||db.webkitMatchesSelector||db.mozMatchesSelector||db.msMatchesSelector||db.oMatchesSelector,id=function(a,b){return Tf.call(a,b)};if("function"===typeof Sizzle)Lb=function(a,b){return Sizzle(a,b)[0]||
null},hd=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},id=Sizzle.matchesSelector;var M=[];d3.selection=function(){return Ab};d3.selection.prototype=M;M.select=function(a){var b=[],c,d,f,e;"function"!==typeof a&&(a=kb(a));for(var g=-1,h=this.length;++g<h;){b.push(c=[]);c.parentNode=(f=this[g]).parentNode;for(var i=-1,j=f.length;++i<j;)if(e=f[i]){if(c.push(d=a.call(e,e.__data__,i)),d&&"__data__"in e)d.__data__=e.__data__}else c.push(null)}return la(b)};M.selectAll=function(a){var b=[],c,d;"function"!==
typeof a&&(a=La(a));for(var f=-1,e=this.length;++f<e;)for(var g=this[f],h=-1,i=g.length;++h<i;)if(d=g[h])b.push(c=Ga(a.call(d,d.__data__,h))),c.parentNode=d;return la(b)};M.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),a=d3.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(lb(b,a[b]));return this}return this.each(lb(a,b))};M.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),
d=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(b=c.classList)for(;++f<d;){if(!b.contains(a[f]))return!1}else{b=c.className;if(null!=b.baseVal)b=b.baseVal;for(;++f<d;)if(!mb(a[f]).test(b))return!1}return!0}for(b in a)this.each(va(b,a[b]));return this}return this.each(va(a,b))};M.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(fb(c,a[c],b));return this}if(2>d)return getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(fb(a,
b,c))};M.property=function(a,b){if(2>arguments.length){if("string"===typeof a)return this.node()[a];for(b in a)this.each(nb(b,a[b]));return this}return this.each(nb(a,b))};M.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};M.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=
a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML};M.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}a=d3.ns.qualify(a);return this.select(a.local?c:b)};M.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Lb(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,
a.local),Lb(b,this))}a=d3.ns.qualify(a);return this.select(a.local?d:c)};M.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};M.data=function(a,b){function c(a,d){var f,e=a.length,g=d.length,w=Math.min(e,g),k=Array(g),n=Array(g),o=Array(e),q,m;if(b){var w=new h,p=new h,s=[],r;for(f=-1;++f<e;)r=b.call(q=a[f],q.__data__,f),w.has(r)?o[f]=q:w.set(r,q),s.push(r);for(f=-1;++f<g;)r=b.call(d,m=d[f],f),(q=w.get(r))?(k[f]=q,q.__data__=m):p.has(r)||(n[f]={__data__:m}),
p.set(r,m),w.remove(r);for(f=-1;++f<e;)w.has(s[f])&&(o[f]=a[f])}else{for(f=-1;++f<w;)q=a[f],m=d[f],q?(q.__data__=m,k[f]=q):n[f]={__data__:m};for(;f<g;++f)n[f]={__data__:d[f]};for(;f<e;++f)o[f]=a[f]}n.update=k;n.parentNode=k.parentNode=o.parentNode=a.parentNode;i.push(n);j.push(k);l.push(o)}var d=-1,f=this.length,e,g;if(!arguments.length){for(a=Array(f=(e=this[0]).length);++d<f;)if(g=e[d])a[d]=g.__data__;return a}var i=Wa([]),j=la([]),l=la([]);if("function"===typeof a)for(;++d<f;)c(e=this[d],a.call(e,
e.parentNode.__data__,d));else for(;++d<f;)c(e=this[d],a);j.enter=function(){return i};j.exit=function(){return l};return j};M.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};M.filter=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=Eb(a));for(var e=0,g=this.length;e<g;e++){b.push(c=[]);c.parentNode=(d=this[e]).parentNode;for(var h=0,i=d.length;h<i;h++)(f=d[h])&&a.call(f,f.__data__,h)&&c.push(f)}return la(b)};M.order=function(){for(var a=-1,b=this.length;++a<
b;)for(var c=this[a],d=c.length-1,f=c[d],e;0<=--d;)if(e=c[d])f&&f!==e.nextSibling&&f.parentNode.insertBefore(e,f),f=e;return this};M.sort=function(a){for(var a=ic.apply(this,arguments),b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};M.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(Fb(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(Fb(a,b,c))};M.each=function(a){return pa(this,function(b,
c,d){a.call(b,b.__data__,c,d)})};M.call=function(a){var b=Ga(arguments);a.apply(b[0]=this,b);return this};M.empty=function(){return!this.node()};M.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,f=c.length;d<f;d++){var e=c[d];if(e)return e}return null};M.transition=function(){var a=Bb||++ke,b=[],c,d,f=Object.create(cc);f.time=Date.now();for(var e=-1,g=this.length;++e<g;){b.push(c=[]);for(var h=this[e],i=-1,j=h.length;++i<j;)(d=h[i])&&Xa(d,i,a,f),c.push(d)}return xa(b,a)};var Ab=
la([[document]]);Ab[0].parentNode=db;d3.select=function(a){return"string"===typeof a?Ab.select(a):la([[a]])};d3.selectAll=function(a){return"string"===typeof a?Ab.selectAll(a):la([Ga(a)])};var Qa=[];d3.selection.enter=Wa;d3.selection.enter.prototype=Qa;Qa.append=M.append;Qa.insert=M.insert;Qa.empty=M.empty;Qa.node=M.node;Qa.select=function(a){for(var b=[],c,d,f,e,g,h=-1,i=this.length;++h<i;){f=(e=this[h]).update;b.push(c=[]);c.parentNode=e.parentNode;for(var j=-1,l=e.length;++j<l;)(g=e[j])?(c.push(f[j]=
d=a.call(e.parentNode,g.__data__,j)),d.__data__=g.__data__):c.push(null)}return la(b)};var $=[],ke=0,Bb,cc={ease:function(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(0.5>a?c:3*(a-b)+c-0.75)},delay:0,duration:250};$.call=M.call;$.empty=M.empty;$.node=M.node;d3.transition=function(a){return arguments.length?Bb?a.transition():a:Ab.transition()};d3.transition.prototype=$;$.select=function(a){var b=this.id,c=[],d,f,e;"function"!==typeof a&&(a=kb(a));for(var g=-1,h=this.length;++g<h;){c.push(d=
[]);for(var i=this[g],j=-1,l=i.length;++j<l;)if((e=i[j])&&(f=a.call(e,e.__data__,j))){if("__data__"in e)f.__data__=e.__data__;Xa(f,j,b,e.__transition__[b]);d.push(f)}else d.push(null)}return xa(c,b)};$.selectAll=function(a){var b=this.id,c=[],d,f,e,g;"function"!==typeof a&&(a=La(a));for(var h=-1,i=this.length;++h<i;)for(var j=this[h],l=-1,k=j.length;++l<k;)if(d=j[l]){g=d.__transition__[b];f=a.call(d,d.__data__,l);c.push(d=[]);for(var n=-1,o=f.length;++n<o;)Xa(e=f[n],n,b,g),d.push(e)}return xa(c,b)};
$.filter=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=Eb(a));for(var e=0,g=this.length;e<g;e++){b.push(c=[]);d=this[e];for(var h=0,i=d.length;h<i;h++)(f=d[h])&&a.call(f,f.__data__,h)&&c.push(f)}return xa(b,this.id,this.time).ease(this.ease())};$.attr=function(a,b){function c(){this.removeAttribute(e)}function d(){this.removeAttributeNS(e.space,e.local)}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var f=F(a),e=d3.ns.qualify(a);return pb(this,"attr."+a,b,function(a){function b(){var c=
this.getAttribute(e),d;return c!==a&&(d=f(c,a),function(a){this.setAttribute(e,d(a))})}function g(){var b=this.getAttributeNS(e.space,e.local),c;return b!==a&&(c=f(b,a),function(a){this.setAttributeNS(e.space,e.local,c(a))})}return null==a?e.local?d:c:(a+="",e.local?g:b)})};$.attrTween=function(a,b){function c(a,d){var e=b.call(this,a,d,this.getAttribute(f));return e&&function(a){this.setAttribute(f,e(a))}}function d(a,c){var e=b.call(this,a,c,this.getAttributeNS(f.space,f.local));return e&&function(a){this.setAttributeNS(f.space,
f.local,e(a))}}var f=d3.ns.qualify(a);return this.tween("attr."+a,f.local?d:c)};$.style=function(a,b,c){function d(){this.style.removeProperty(a)}var f=arguments.length;if(3>f){if("string"!==typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}var e=F(a);return pb(this,"style."+a,b,function(b){function f(){var d=getComputedStyle(this,null).getPropertyValue(a),g;return d!==b&&(g=e(d,b),function(b){this.style.setProperty(a,g(b),c)})}return null==b?d:(b+="",f)})};$.styleTween=function(a,
b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,f){var e=b.call(this,d,f,getComputedStyle(this,null).getPropertyValue(a));return e&&function(b){this.style.setProperty(a,e(b),c)}})};$.text=function(a){return pb(this,"text",a,ob)};$.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};$.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&
(a=d3.ease.apply(d3,arguments));return pa(this,function(c){c.__transition__[b].ease=a})};$.delay=function(a){var b=this.id;return pa(this,"function"===typeof a?function(c,d,f){c.__transition__[b].delay=a.call(c,c.__data__,d,f)|0}:(a|=0,function(c){c.__transition__[b].delay=a}))};$.duration=function(a){var b=this.id;return pa(this,"function"===typeof a?function(c,d,f){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,f)|0)}:(a=Math.max(1,a|0),function(c){c.__transition__[b].duration=a}))};
$.each=function(a,b){var c=this.id;if(2>arguments.length){var d=cc,f=Bb;Bb=c;pa(this,function(b,d,f){cc=b.__transition__[c];a.call(b,b.__data__,d,f)});cc=d;Bb=f}else pa(this,function(d){d.__transition__[c].event.on(a,b)});return this};$.transition=function(){for(var a=this.id,b=++ke,c=[],d,f,e,g,h=0,i=this.length;h<i;h++){c.push(d=[]);f=this[h];for(var j=0,l=f.length;j<l;j++){if(e=f[j])g=Object.create(e.__transition__[a]),g.delay+=g.duration,Xa(e,j,b,g);d.push(e)}}return xa(c,b)};$.tween=function(a,
b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):pa(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};var Uf=0,kc={},bb=null,Nb,Mb;d3.timer=function(a,b,c){if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}var d=kc[a.id];d&&d.callback===a?(d.then=c,d.delay=b):kc[a.id=++Uf]=bb={callback:a,then:c,delay:b,next:bb};Nb||(Mb=clearTimeout(Mb),Nb=1,jd(Ma))};d3.timer.flush=
function(){for(var a,b=Date.now(),c=bb;c;){a=b-c.then;if(!c.delay)c.flush=c.callback(a);c=c.next}Da()};var jd=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return Ua(a,ka())};var lc=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){if(2>arguments.length)b=ka().touches;return b?Ga(b).map(function(b){var c=Ua(a,b);c.identifier=
b.identifier;return c}):[]};d3.scale={};d3.scale.linear=function(){return Ya([0,1],[0,1],d3.interpolate,!1)};d3.scale.log=function(){return Hb(d3.scale.linear(),$a)};var He=d3.format(".0e");$a.pow=function(a){return Math.pow(10,a)};ab.pow=function(a){return-Math.pow(10,-a)};d3.scale.pow=function(){return Vc(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(0.5)};d3.scale.ordinal=function(){return Wc([],{t:"range",a:[[]]})};d3.scale.category10=function(){return d3.scale.ordinal().range(Vf)};
d3.scale.category20=function(){return d3.scale.ordinal().range(Wf)};d3.scale.category20b=function(){return d3.scale.ordinal().range(Xf)};d3.scale.category20c=function(){return d3.scale.ordinal().range(Yf)};var Vf="#1f77b4,#ff7f0e,#2ca02c,#d62728,#9467bd,#8c564b,#e377c2,#7f7f7f,#bcbd22,#17becf".split(","),Wf="#1f77b4,#aec7e8,#ff7f0e,#ffbb78,#2ca02c,#98df8a,#d62728,#ff9896,#9467bd,#c5b0d5,#8c564b,#c49c94,#e377c2,#f7b6d2,#7f7f7f,#c7c7c7,#bcbd22,#dbdb8d,#17becf,#9edae5".split(","),Xf="#393b79,#5254a3,#6b6ecf,#9c9ede,#637939,#8ca252,#b5cf6b,#cedb9c,#8c6d31,#bd9e39,#e7ba52,#e7cb94,#843c39,#ad494a,#d6616b,#e7969c,#7b4173,#a55194,#ce6dbd,#de9ed6".split(","),
Yf="#3182bd,#6baed6,#9ecae1,#c6dbef,#e6550d,#fd8d3c,#fdae6b,#fdd0a2,#31a354,#74c476,#a1d99b,#c7e9c0,#756bb1,#9e9ac8,#bcbddc,#dadaeb,#636363,#969696,#bdbdbd,#d9d9d9".split(",");d3.scale.quantile=function(){return Xc([],[])};d3.scale.quantize=function(){return Yc(0,1,[0,1])};d3.scale.threshold=function(){return Zc([0.5],[0,1])};d3.scale.identity=function(){return $c([0,1])};d3.svg={};d3.svg.arc=function(){function a(){var e=b.apply(this,arguments),g=c.apply(this,arguments),h=d.apply(this,arguments)+
Ra,i=f.apply(this,arguments)+Ra,j=(i<h&&(j=h,h=i,i=j),i-h),l=j<A?"0":"1",k=Math.cos(h),h=Math.sin(h),w=Math.cos(i),i=Math.sin(i);return j>=Zf?e?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+-e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":e?"M"+g*k+","+g*h+"A"+g+","+g+" 0 "+l+",1 "+g*w+","+g*i+"L"+e*w+","+e*i+"A"+e+","+e+" 0 "+l+",0 "+e*k+","+e*h+"Z":"M"+g*k+","+g*h+"A"+g+","+g+" 0 "+l+",1 "+g*w+","+g*
i+"L0,0Z"}var b=Ee,c=Fe,d=ad,f=bd;a.innerRadius=function(c){if(!arguments.length)return b;b=g(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=g(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=g(b);return a};a.endAngle=function(b){if(!arguments.length)return f;f=g(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,e=(d.apply(this,arguments)+f.apply(this,arguments))/2+Ra;return[Math.cos(e)*a,Math.sin(e)*a]};return a};
var Ra=-A/2,Zf=2*A-1.0E-6;d3.svg.line=function(){return cd(c)};var mc=d3.map({linear:oa,"linear-closed":function(a){return oa(a)+"Z"},"step-before":nc,"step-after":oc,basis:kd,"basis-open":function(a){if(4>a.length)return oa(a);for(var b=[],c=-1,d=a.length,f,e=[0],g=[0];3>++c;)f=a[c],e.push(f[0]),g.push(f[1]);b.push(wa(cb,e)+","+wa(cb,g));for(--c;++c<d;)f=a[c],e.shift(),e.push(f[0]),g.shift(),g.push(f[1]),ub(b,e,g);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,f=d+4,e,g=
[],h=[];4>++c;)e=a[c%d],g.push(e[0]),h.push(e[1]);b=[wa(cb,g),",",wa(cb,h)];for(--c;++c<f;)e=a[c%d],g.shift(),g.push(e[0]),h.shift(),h.push(e[1]),ub(b,g,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],f=a[0][1],e=a[c][0]-d,g=a[c][1]-f,h=-1,i,j;++h<=c;)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*e),i[1]=b*i[1]+(1-b)*(f+j*g);return kd(a)},cardinal:function(a,b){return 3>a.length?oa(a):a[0]+Ob(a,pc(a,b))},"cardinal-open":function(a,b){return 4>a.length?oa(a):a[1]+Ob(a.slice(1,
a.length-1),pc(a,b))},"cardinal-closed":function(a,b){return 3>a.length?oa(a):a[0]+Ob((a.push(a[0]),a),pc([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=oa(a);else{var b=a[0],c=[],d,f,e,g;d=0;f=a.length-1;var h=[];e=a[1];for(g=h[0]=qc(a[0],e);++d<f;)h[d]=(g+(g=qc(e,e=a[d+1])))/2;h[d]=g;for(var i=-1,j=a.length-1;++i<j;)d=qc(a[i],a[i+1]),1.0E-6>Math.abs(d)?h[i]=h[i+1]=0:(f=h[i]/d,e=h[i+1]/d,g=f*f+e*e,9<g&&(g=3*d/Math.sqrt(g),h[i]=g*f,h[i+1]=g*e));for(i=-1;++i<=j;)g=(a[Math.min(j,
i+1)][0]-a[Math.max(0,i-1)][0])/(6*(1+h[i]*h[i])),c.push([g||0,h[i]*g||0]);a=b+Ob(a,c)}return a}});mc.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var ld=[0,2/3,1/3,0],md=[0,1/3,2/3,0],cb=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=cd(nd);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};nc.reverse=oc;oc.reverse=nc;d3.svg.area=function(){return od(c)};d3.svg.area.radial=function(){var a=od(nd);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;
delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};d3.svg.chord=function(){function a(f,e){var g=b(this,c,f,e),h=b(this,d,f,e);return"M"+g.p0+("A"+g.r+","+g.r+" 0 "+ +(g.a1-g.a0>A)+",1 "+g.p1)+(g.a0==h.a0&&g.a1==h.a1?"Q 0,0 "+g.p0:"Q 0,0 "+h.p0+("A"+h.r+","+h.r+" 0 "+ +(h.a1-h.a0>A)+",1 "+h.p1)+("Q 0,0 "+g.p0))+"Z"}function b(a,c,d,g){var i=c.call(a,d,g),c=f.call(a,i,g),d=e.call(a,i,g)+Ra,a=h.call(a,i,g)+Ra;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),
c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}var c=k,d=i,f=Ie,e=ad,h=bd;a.radius=function(b){if(!arguments.length)return f;f=g(b);return a};a.source=function(b){if(!arguments.length)return c;c=g(b);return a};a.target=function(b){if(!arguments.length)return d;d=g(b);return a};a.startAngle=function(b){if(!arguments.length)return e;e=g(b);return a};a.endAngle=function(b){if(!arguments.length)return h;h=g(b);return a};return a};d3.svg.diagonal=function(){function a(f,e){var g=b.call(this,f,e),h=c.call(this,
f,e),i=(g.y+h.y)/2,g=[g,{x:g.x,y:i},{x:h.x,y:i},h],g=g.map(d);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=k,c=i,d=pd;a.source=function(c){if(!arguments.length)return b;b=g(c);return a};a.target=function(b){if(!arguments.length)return c;c=g(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=pd,c=a.projection;a.projection=function(a){return arguments.length?c(Je(b=a)):b};return a};d3.svg.symbol=
function(){function a(d,f){return(le.get(b.call(this,d,f))||qd)(c.call(this,d,f))}var b=Le,c=Ke;a.type=function(c){if(!arguments.length)return b;b=g(c);return a};a.size=function(b){if(!arguments.length)return c;c=g(b);return a};return a};var le=d3.map({circle:qd,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){var a=Math.sqrt(a/(2*me)),b=a*me;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},
square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){var a=Math.sqrt(a/dc),b=a*dc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){var a=Math.sqrt(a/dc),b=a*dc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});d3.svg.symbolTypes=le.keys();var dc=Math.sqrt(3),me=Math.tan(30*C);d3.svg.axis=function(){function a(k){k.each(function(){var a=d3.select(this),k=null==i?b.ticks?b.ticks.apply(b,h):b.domain():i,
n=null==j?b.tickFormat?b.tickFormat.apply(b,h):String:j,o=Me(b,k,l),q=a.selectAll(".minor").data(o,String),o=q.enter().insert("line","g").attr("class","tick minor").style("opacity",1.0E-6),m=d3.transition(q.exit()).style("opacity",1.0E-6).remove(),q=d3.transition(q).style("opacity",1),p=a.selectAll("g").data(k,String),k=p.enter().insert("g","path").style("opacity",1.0E-6),w=d3.transition(p.exit()).style("opacity",1.0E-6).remove(),s=d3.transition(p).style("opacity",1),r,t=Pa(b),u=a.selectAll(".domain").data([0]),
a=d3.transition(u),z=b.copy(),y=this.__chart__||z;this.__chart__=z;u.enter().append("path").attr("class","domain");k.append("line").attr("class","tick");k.append("text");var u=k.select("line"),v=s.select("line"),n=p.select("text").text(n),p=k.select("text"),x=s.select("text");switch(c){case "bottom":r=rd;o.attr("y2",f);q.attr("x2",0).attr("y2",f);u.attr("y2",d);p.attr("y",Math.max(d,0)+g);v.attr("x2",0).attr("y2",d);x.attr("x",0).attr("y",Math.max(d,0)+g);n.attr("dy",".71em").style("text-anchor",
"middle");a.attr("d","M"+t[0]+","+e+"V0H"+t[1]+"V"+e);break;case "top":r=rd;o.attr("y2",-f);q.attr("x2",0).attr("y2",-f);u.attr("y2",-d);p.attr("y",-(Math.max(d,0)+g));v.attr("x2",0).attr("y2",-d);x.attr("x",0).attr("y",-(Math.max(d,0)+g));n.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+t[0]+","+-e+"V0H"+t[1]+"V"+-e);break;case "left":r=sd;o.attr("x2",-f);q.attr("x2",-f).attr("y2",0);u.attr("x2",-d);p.attr("x",-(Math.max(d,0)+g));v.attr("x2",-d).attr("y2",0);x.attr("x",-(Math.max(d,
0)+g)).attr("y",0);n.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-e+","+t[0]+"H0V"+t[1]+"H"+-e);break;case "right":r=sd,o.attr("x2",f),q.attr("x2",f).attr("y2",0),u.attr("x2",d),p.attr("x",Math.max(d,0)+g),v.attr("x2",d).attr("y2",0),x.attr("x",Math.max(d,0)+g).attr("y",0),n.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+e+","+t[0]+"H0V"+t[1]+"H"+e)}if(b.ticks)k.call(r,y),s.call(r,z),w.call(r,z),o.call(r,y),q.call(r,z),m.call(r,z);else{var Ge=z.rangeBand()/2,o=function(a){return z(a)+
Ge};k.call(r,o);s.call(r,o)}})}var b=d3.scale.linear(),c="bottom",d=6,f=6,e=6,g=3,h=[10],i=null,j,l=0;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b;return a};a.ticks=function(){if(!arguments.length)return h;h=arguments;return a};a.tickValues=function(b){if(!arguments.length)return i;i=b;return a};a.tickFormat=function(b){if(!arguments.length)return j;j=b;return a};a.tickSize=function(b,c){if(!arguments.length)return d;var g=
arguments.length-1;d=+b;f=1<g?+c:d;e=0<g?+arguments[g]:d;return a};a.tickPadding=function(b){if(!arguments.length)return g;g=+b;return a};a.tickSubdivide=function(b){if(!arguments.length)return l;l=+b;return a};return a};d3.svg.brush=function(){function a(e){e.each(function(){var e=d3.select(this),j=e.selectAll(".background").data([0]),l=e.selectAll(".extent").data([0]),k=e.selectAll(".resize").data(i,String);e.style("pointer-events","all").on("mousedown.brush",f).on("touchstart.brush",f);j.enter().append("rect").attr("class",
"background").style("visibility","hidden").style("cursor","crosshair");l.enter().append("rect").attr("class","extent").style("cursor","move");k.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return $f[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");k.style("display",a.empty()?"none":null);k.exit().remove();g&&(l=Pa(g),
j.attr("x",l[0]).attr("width",l[1]-l[0]),c(e));h&&(l=Pa(h),j.attr("y",l[0]).attr("height",l[1]-l[0]),d(e));b(e)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+j[+/e$/.test(a)][0]+","+j[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",j[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",j[1][0]-j[0][0])}function d(a){a.select(".extent").attr("y",j[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",j[1][1]-j[0][1])}function f(){function i(){var a=
d3.event.changedTouches;return a?d3.touches(q,a)[0]:d3.mouse(q)}function k(){var a=i(),f=!1;x&&(a[0]+=x[0],a[1]+=x[1]);z||(d3.event.altKey?(y||(y=[(j[0][0]+j[1][0])/2,(j[0][1]+j[1][1])/2]),v[0]=j[+(a[0]<y[0])][0],v[1]=j[+(a[1]<y[1])][1]):y=null);t&&n(a,g,0)&&(c(s),f=!0);u&&n(a,h,1)&&(d(s),f=!0);f&&(b(s),p({type:"brush",mode:z?"move":"resize"}))}function n(a,b,c){var d=Pa(b),b=d[0],f=d[1],d=v[c],e=j[1][c]-j[0][c];z&&(b-=d,f-=e+d);a=Math.max(b,Math.min(f,a[c]));z?b=(a+=d)+e:(y&&(d=Math.max(b,Math.min(f,
2*y[c]-a))),d<a?(b=a,a=d):b=d);if(j[0][c]!==a||j[1][c]!==b)return l=null,j[0][c]=a,j[1][c]=b,!0}function o(){k();s.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);d3.select("body").style("cursor",null);da.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);p({type:"brushend"});V()}var q=this,m=d3.select(d3.event.target),p=e.of(q,arguments),s=d3.select(q),r=
m.datum(),t=!/^(n|s)$/.test(r)&&g,u=!/^(e|w)$/.test(r)&&h,z=m.classed("extent"),y,v=i(),x,da=d3.select(window).on("mousemove.brush",k).on("mouseup.brush",o).on("touchmove.brush",k).on("touchend.brush",o).on("keydown.brush",function(){32==d3.event.keyCode&&(z||(y=null,v[0]-=j[1][0],v[1]-=j[1][1],z=2),V())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==z&&(v[0]+=j[1][0],v[1]+=j[1][1],z=0,V())});if(z)v[0]=j[0][0]-v[0],v[1]=j[0][1]-v[1];else if(r){var U=+/w$/.test(r),r=+/^n/.test(r);x=[j[1-U][0]-
v[0],j[1-r][1]-v[1]];v[0]=j[U][0];v[1]=j[r][1]}else d3.event.altKey&&(y=v.slice());s.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",m.style("cursor"));p({type:"brushstart"});k();V()}var e=D(a,"brushstart","brush","brushend"),g=null,h=null,i=Rc[0],j=[[0,0],[0,0]],l;a.x=function(b){if(!arguments.length)return g;g=b;i=Rc[!g<<1|!h];return a};a.y=function(b){if(!arguments.length)return h;h=b;i=Rc[!g<<1|!h];return a};a.extent=function(b){var c,
d,f,e,i;if(!arguments.length)return b=l||j,g&&(c=b[0][0],d=b[1][0],l||(c=j[0][0],d=j[1][0],g.invert&&(c=g.invert(c),d=g.invert(d)),d<c&&(i=c,c=d,d=i))),h&&(f=b[0][1],e=b[1][1],l||(f=j[0][1],e=j[1][1],h.invert&&(f=h.invert(f),e=h.invert(e)),e<f&&(i=f,f=e,e=i))),g&&h?[[c,f],[d,e]]:g?[c,d]:h&&[f,e];l=[[0,0],[0,0]];g&&(c=b[0],d=b[1],h&&(c=c[0],d=d[0]),l[0][0]=c,l[1][0]=d,g.invert&&(c=g(c),d=g(d)),d<c&&(i=c,c=d,d=i),j[0][0]=c|0,j[1][0]=d|0);h&&(f=b[0],e=b[1],g&&(f=f[1],e=e[1]),l[0][1]=f,l[1][1]=e,h.invert&&
(f=h(f),e=h(e)),e<f&&(i=f,f=e,e=i),j[0][1]=f|0,j[1][1]=e|0);return a};a.clear=function(){l=null;j[0][0]=j[0][1]=j[1][0]=j[1][1]=0;return a};a.empty=function(){return g&&j[0][0]===j[1][0]||h&&j[0][1]===j[1][1]};return d3.rebind(a,e,"on")};var $f={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Rc=["n,e,s,w,nw,ne,se,sw".split(","),["e","w"],["n","s"],[]];d3.behavior={};d3.behavior.drag=function(){function a(){this.on("mousedown.drag",
b).on("touchstart.drag",b)}function b(){function a(){var b=g.parentNode;return null!=j?d3.touches(b).filter(function(a){return a.identifier===j})[0]:d3.mouse(b)}function f(){h({type:"dragend"});if(n&&(V(),d3.event.target===i))o.on("click.drag",e,!0);o.on(null!=j?"touchmove.drag-"+j:"mousemove.drag",null).on(null!=j?"touchend.drag-"+j:"mouseup.drag",null)}function e(){V();o.on("click.drag",null)}var g=this,h=c.of(g,arguments),i=d3.event.target,j=d3.event.touches?d3.event.changedTouches[0].identifier:
null,l,k=a(),n=0,o=d3.select(window).on(null!=j?"touchmove.drag-"+j:"mousemove.drag",function(){if(!g.parentNode)return f();var b=a(),c=b[0]-k[0],d=b[1]-k[1];n|=c|d;k=b;V();h({type:"drag",x:b[0]+l[0],y:b[1]+l[1],dx:c,dy:d})}).on(null!=j?"touchend.drag-"+j:"mouseup.drag",f,!0);d?(l=d.apply(g,arguments),l=[l.x-k[0],l.y-k[1]]):l=[0,0];null==j&&V();h({type:"dragstart"})}var c=D(a,"drag","dragstart","dragend"),d=null;a.origin=function(b){if(!arguments.length)return d;d=b;return a};return d3.rebind(a,c,
"on")};d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",g).on("mousewheel.zoom",h).on("mousemove.zoom",i).on("DOMMouseScroll.zoom",h).on("dblclick.zoom",j).on("touchstart.zoom",l).on("touchmove.zoom",k).on("touchend.zoom",l)}function b(a){return[(a[0]-n[0])/q,(a[1]-n[1])/q]}function c(a){q=Math.max(p[0],Math.min(p[1],a))}function d(a,b){b=[b[0]*q+n[0],b[1]*q+n[1]];n[0]+=a[0]-b[0];n[1]+=a[1]-b[1]}function f(){t&&t.domain(r.range().map(function(a){return(a-n[0])/q}).map(r.invert));
z&&z.domain(u.range().map(function(a){return(a-n[1])/q}).map(u.invert))}function e(a){f();d3.event.preventDefault();a({type:"zoom",scale:q,translate:n})}function g(){function a(){V();j.on("click.zoom",null)}var c=this,f=s.of(c,arguments),h=d3.event.target,i=0,j=d3.select(window).on("mousemove.zoom",function(){i=1;d(d3.mouse(c),l);e(f)}).on("mouseup.zoom",function(){i&&V();j.on("mousemove.zoom",null).on("mouseup.zoom",null);if(i&&d3.event.target===h)j.on("click.zoom",a,!0)}),l=b(d3.mouse(c));window.focus();
V()}function h(){o||(o=b(d3.mouse(this)));c(Math.pow(2,0.002*Ne())*q);d(d3.mouse(this),o);e(s.of(this,arguments))}function i(){o=null}function j(){var a=d3.mouse(this),f=b(a),g=Math.log(q)/Math.LN2;c(Math.pow(2,d3.event.shiftKey?Math.ceil(g)-1:Math.floor(g)+1));d(a,f);e(s.of(this,arguments))}function l(){var a=d3.touches(this),f=Date.now();m=q;o={};a.forEach(function(a){o[a.identifier]=b(a)});V();if(1===a.length){if(500>f-y){var g=a[0],a=b(a[0]);c(2*q);d(g,a);e(s.of(this,arguments))}y=f}}function k(){var a=
d3.touches(this),b=a[0],f=o[b.identifier];if(a=a[1]){var g=o[a.identifier],b=[(b[0]+a[0])/2,(b[1]+a[1])/2],f=[(f[0]+g[0])/2,(f[1]+g[1])/2];c(d3.event.scale*m)}d(b,f);y=null;e(s.of(this,arguments))}var n=[0,0],o,q=1,m,p=ne,s=D(a,"zoom"),r,t,u,z,y;a.translate=function(b){if(!arguments.length)return n;n=b.map(Number);f();return a};a.scale=function(b){if(!arguments.length)return q;q=+b;f();return a};a.scaleExtent=function(b){if(!arguments.length)return p;p=null==b?ne:b.map(Number);return a};a.x=function(b){if(!arguments.length)return t;
t=b;r=b.copy();n=[0,0];q=1;return a};a.y=function(b){if(!arguments.length)return z;z=b;u=b.copy();n=[0,0];q=1;return a};return d3.rebind(a,s,"on")};var vb,ne=[0,Infinity];d3.layout={};d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Oe(a[c]));return b}};d3.layout.chord=function(){function a(){var c={},k=[],n=d3.range(g),o=[],q,m,p,s,w;d=[];f=[];for(q=0,s=-1;++s<g;){for(m=0,w=-1;++w<g;)m+=e[s][w];k.push(m);o.push(d3.range(g));q+=m}i&&n.sort(function(a,b){return i(k[a],
k[b])});j&&o.forEach(function(a,b){a.sort(function(a,c){return j(e[b][a],e[b][c])})});q=(2*A-h*g)/q;for(m=0,s=-1;++s<g;){for(p=m,w=-1;++w<g;){var r=n[s],t=o[r][w],u=e[r][t],z=m,y=m+=u*q;c[r+"-"+t]={index:r,subindex:t,startAngle:z,endAngle:y,value:u}}f[r]={index:r,startAngle:p,endAngle:m,value:(m-p)/q};m+=h}for(s=-1;++s<g;)for(w=s-1;++w<g;)if(n=c[s+"-"+w],o=c[w+"-"+s],n.value||o.value)d.push(n.value<o.value?{source:o,target:n}:{source:n,target:o});l&&b()}function b(){d.sort(function(a,b){return l((a.source.value+
a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,f,e,g,h=0,i,j,l;c.matrix=function(a){if(!arguments.length)return e;g=(e=a)&&e.length;d=f=null;return c};c.padding=function(a){if(!arguments.length)return h;h=a;d=f=null;return c};c.sortGroups=function(a){if(!arguments.length)return i;i=a;d=f=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return j;j=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return l;l=a;d&&b();return c};c.chords=function(){d||
a();return d};c.groups=function(){f||a();return f};return c};d3.layout.force=function(){function a(b){return function(a,c,d,f){if(a.point!==b){var d=a.cx-b.x,e=a.cy-b.y,g=1/Math.sqrt(d*d+e*e);if((f-c)*g<q)return c=a.charge*g*g,b.px-=d*c,b.py-=e*c,!0;a.point&&isFinite(g)&&(c=a.pointCharge*g*g,b.px-=d*c,b.py-=e*c)}return!a.charge}}function b(a){a.px=d3.event.x;a.py=d3.event.y;d.resume()}var d={},f=d3.dispatch("start","tick","end"),e=[1,1],h,i,j=0.9,l=Te,k=Ue,n=-30,o=0.1,q=0.8,m=[],p=[],s,r,t;d.tick=
function(){if(0.005>(i*=0.99))return f.end({type:"end",alpha:i=0}),!0;var b=m.length,c=p.length,d,g,h,l,k,q,u;for(d=0;d<c;++d)if(g=p[d],h=g.source,l=g.target,q=l.x-h.x,u=l.y-h.y,k=q*q+u*u)k=i*r[d]*((k=Math.sqrt(k))-s[d])/k,q*=k,u*=k,l.x-=q*(k=h.weight/(l.weight+h.weight)),l.y-=u*k,h.x+=q*(k=1-k),h.y+=u*k;if(k=i*o)if(q=e[0]/2,u=e[1]/2,d=-1,k)for(;++d<b;)g=m[d],g.x+=(q-g.x)*k,g.y+=(u-g.y)*k;if(n){ud(c=d3.geom.quadtree(m),i,t);for(d=-1;++d<b;)(g=m[d]).fixed||c.visit(a(g))}for(d=-1;++d<b;)g=m[d],g.fixed?
(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*j,g.y-=(g.py-(g.py=g.y))*j);f.tick({type:"tick",alpha:i})};d.nodes=function(a){if(!arguments.length)return m;m=a;return d};d.links=function(a){if(!arguments.length)return p;p=a;return d};d.size=function(a){if(!arguments.length)return e;e=a;return d};d.linkDistance=function(a){if(!arguments.length)return l;l=g(a);return d};d.distance=d.linkDistance;d.linkStrength=function(a){if(!arguments.length)return k;k=g(a);return d};d.friction=function(a){if(!arguments.length)return j;
j=a;return d};d.charge=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return d};d.gravity=function(a){if(!arguments.length)return o;o=a;return d};d.theta=function(a){if(!arguments.length)return q;q=a;return d};d.alpha=function(a){if(!arguments.length)return i;i?i=0<a?a:0:0<a&&(f.start({type:"start",alpha:i=a}),d3.timer(d.tick));return d};d.start=function(){function a(d,e){var h;if(!j){j=[];for(c=0;c<f;++c)j[c]=[];for(c=0;c<g;++c)h=p[c],j[h.source.index].push(h.target),j[h.target.index].push(h.source)}h=
j[b];for(var i=-1,l=h.length,k;++i<l;)if(!isNaN(k=h[i][d]))return k;return Math.random()*e}var b,c,f=m.length,g=p.length,h=e[0],i=e[1],j,o;for(b=0;b<f;++b)(o=m[b]).index=b,o.weight=0;s=[];r=[];for(b=0;b<g;++b){o=p[b];if("number"==typeof o.source)o.source=m[o.source];if("number"==typeof o.target)o.target=m[o.target];s[b]=l.call(this,o,b);r[b]=k.call(this,o,b);++o.source.weight;++o.target.weight}for(b=0;b<f;++b){o=m[b];if(isNaN(o.x))o.x=a("x",h);if(isNaN(o.y))o.y=a("y",i);if(isNaN(o.px))o.px=o.x;if(isNaN(o.py))o.py=
o.y}t=[];if("function"===typeof n)for(b=0;b<f;++b)t[b]=+n.call(this,m[b],b);else for(b=0;b<f;++b)t[b]=n;return d.resume()};d.resume=function(){return d.alpha(0.1)};d.stop=function(){return d.alpha(0)};d.drag=function(){h||(h=d3.behavior.drag().origin(c).on("dragstart",Pe).on("drag",b).on("dragend",Qe));this.on("mouseover.force",Re).on("mouseout.force",Se).call(h)};return d3.rebind(d,f,"on")};d3.layout.partition=function(){function a(b,c,d,f){var e=b.children;b.x=c;b.y=b.depth*f;b.dx=d;b.dy=f;if(e&&
(h=e.length))for(var g=-1,h,i,d=b.value?d/b.value:0;++g<h;)a(i=e[g],c,b=i.value*d,f),c+=b}function b(a){var a=a.children,c=0;if(a&&(f=a.length))for(var d=-1,f;++d<f;)c=Math.max(c,b(a[d]));return 1+c}function c(e,g){var h=d.call(this,e,g);a(h[0],0,f[0],f[1]/b(h[0]));return h}var d=d3.layout.hierarchy(),f=[1,1];c.size=function(a){if(!arguments.length)return f;f=a;return c};return wb(c,d)};d3.layout.pie=function(){function a(e){var g=e.map(function(c,d){return+b.call(a,c,d)}),h=+("function"===typeof d?
d.apply(this,arguments):d),i=(("function"===typeof f?f.apply(this,arguments):f)-d)/d3.sum(g),j=d3.range(e.length);null!=c&&j.sort(c===oe?function(a,b){return g[b]-g[a]}:function(a,b){return c(e[a],e[b])});var l=[];j.forEach(function(a){var b;l[a]={data:e[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}});return l}var b=Number,c=oe,d=0,f=2*A;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;
d=b;return a};a.endAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var oe={};d3.layout.stack=function(){function a(c,i){var j=c.map(function(c,d){return b.call(a,c,d)}),l=j.map(function(b){return b.map(function(b,c){return[g.call(a,b,c),h.call(a,b,c)]})}),k=d.call(a,l,i),j=d3.permute(j,k),l=d3.permute(l,k),k=f.call(a,l,i),n=j.length,o=j[0].length,q,m,p;for(m=0;m<o;++m){e.call(a,j[0][m],p=k[m],l[0][m][1]);for(q=1;q<n;++q)e.call(a,j[q][m],p+=l[q-1][m][1],l[q][m][1])}return c}
var b=c,d=rc,f=sc,e=Xe,g=Ve,h=We;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return d;d="function"===typeof b?b:ag.get(b)||rc;return a};a.offset=function(b){if(!arguments.length)return f;f="function"===typeof b?b:bg.get(b)||sc;return a};a.x=function(b){if(!arguments.length)return g;g=b;return a};a.y=function(b){if(!arguments.length)return h;h=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var ag=d3.map({"inside-out":function(a){for(var b=
a.length,c,d=a.map(Ye),f=a.map(Ze),e=d3.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,h=0,i=[],j=[],a=0;a<b;++a)c=e[a],g<h?(g+=f[c],i.push(c)):(h+=f[c],j.push(c));return j.reverse().concat(i)},reverse:function(a){return d3.range(a.length).reverse()},"default":rc}),bg=d3.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],f=0,e,g,h,i=[];for(g=0;g<c;++g){for(e=0,h=0;e<b;e++)h+=a[e][g][1];h>f&&(f=h);d.push(h)}for(g=0;g<c;++g)i[g]=(f-d[g])/2;return i},wiggle:function(a){var b=a.length,
c=a[0],d=c.length,f,e,g,h,i,j,l,k,n,o=[];o[0]=k=n=0;for(e=1;e<d;++e){for(f=0,h=0;f<b;++f)h+=a[f][e][1];for(f=0,i=0,l=c[e][0]-c[e-1][0];f<b;++f){for(g=0,j=(a[f][e][1]-a[f][e-1][1])/(2*l);g<f;++g)j+=(a[g][e][1]-a[g][e-1][1])/l;i+=j*a[f][e][1]}o[e]=k-=h?i/h*l:0;k<n&&(n=k)}for(e=0;e<d;++e)o[e]-=n;return o},expand:function(a){var b=a.length,c=a[0].length,d=1/b,f,e,g,h=[];for(e=0;e<c;++e){for(f=0,g=0;f<b;f++)g+=a[f][e][1];if(g)for(f=0;f<b;f++)a[f][e][1]/=g;else for(f=0;f<b;f++)a[f][e][1]=d}for(e=0;e<c;++e)h[e]=
0;return h},zero:sc});d3.layout.histogram=function(){function a(e,g){for(var h=[],i=e.map(c,this),j=d.call(this,i,g),l=f.call(this,j,i,g),k,g=-1,n=i.length,o=l.length-1,q=b?1:1/n;++g<o;)k=h[g]=[],k.dx=l[g+1]-(k.x=l[g]),k.y=0;if(0<o)for(g=-1;++g<n;)k=i[g],k>=j[0]&&k<=j[1]&&(k=h[d3.bisect(l,k,1,o)-1],k.y+=q,k.push(e[g]));return h}var b=!0,c=Number,d=bf,f=af;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=g(b);return a};a.bins=function(b){if(!arguments.length)return f;
f="number"===typeof b?function(a){return vd(a,b)}:g(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};d3.layout.hierarchy=function(){function a(b,g,h){var i=f.call(c,b,g);b.depth=g;h.push(b);if(i&&(l=i.length)){for(var j=-1,l,k=b.children=[],n=0,g=g+1,o;++j<l;)o=a(i[j],g,h),o.parent=b,k.push(o),n+=o.value;d&&k.sort(d);if(e)b.value=n}else if(e)b.value=+e.call(c,b,g)||0;return b}function b(a,d){var f=a.children,g=0;if(f&&(i=f.length))for(var h=-1,i,j=d+1;++h<
i;)g+=b(f[h],j);else e&&(g=+e.call(c,a,d)||0);if(e)a.value=g;return g}function c(b){var d=[];a(b,0,d);return d}var d=ff,f=df,e=ef;c.sort=function(a){if(!arguments.length)return d;d=a;return c};c.children=function(a){if(!arguments.length)return f;f=a;return c};c.value=function(a){if(!arguments.length)return e;e=a;return c};c.revalue=function(a){b(a,0);return a};return c};d3.layout.pack=function(){function a(f,e){var g=b.call(this,f,e),h=g[0];h.x=0;h.y=0;za(h,function(a){a.r=Math.sqrt(a.value)});za(h,
yd);var i=d[0],j=d[1],l=Math.max(2*h.r/i,2*h.r/j);if(0<c){var k=c*l/2;za(h,function(a){a.r+=k});za(h,yd);za(h,function(a){a.r-=k});l=Math.max(2*h.r/i,2*h.r/j)}Ad(h,i/2,j/2,1/l);return g}var b=d3.layout.hierarchy().sort(gf),c=0,d=[1,1];a.size=function(b){if(!arguments.length)return d;d=b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return wb(a,b)};d3.layout.cluster=function(){function a(f,e){var g=b.call(this,f,e),h=g[0],i,j=0;za(h,function(a){var b=a.children;b&&b.length?
(a.x=lf(b),a.y=kf(b)):(a.x=i?j+=c(a,i):0,a.y=0,i=a)});var l=Bd(h),k=Cd(h),n=l.x-c(l,k)/2,o=k.x+c(k,l)/2;za(h,function(a){a.x=(a.x-n)/(o-n)*d[0];a.y=(1-(h.y?a.y/h.y:1))*d[1]});return g}var b=d3.layout.hierarchy().sort(null).value(null),c=Dd,d=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return d;d=b;return a};return wb(a,b)};d3.layout.tree=function(){function a(f,e){function g(a,b){var d=a.children,f=a._tree;if(d&&(e=d.length)){for(var e,
h=d[0],i,j=h,l,k=-1;++k<e;){l=d[k];g(l,i);var n=l;if(i){for(var o=n,q=n,m=n.parent.children[0],p=o._tree.mod,s=q._tree.mod,r=i._tree.mod,w=m._tree.mod,t=void 0;i=vc(i),o=uc(o),i&&o;){m=uc(m);q=vc(q);q._tree.ancestor=n;t=i._tree.prelim+r-o._tree.prelim-p+c(i,o);if(0<t){var u=i._tree.ancestor.parent==n.parent?i._tree.ancestor:j,z=n,y=t,u=u._tree,z=z._tree,v=y/(z.number-u.number);u.change+=v;z.change-=v;z.shift+=y;z.prelim+=y;z.mod+=y;p+=t;s+=t}r+=i._tree.mod;p+=o._tree.mod;w+=m._tree.mod;s+=q._tree.mod}if(i&&
!vc(q))q._tree.thread=i,q._tree.mod+=r-s;if(o&&!uc(m))m._tree.thread=o,m._tree.mod+=p-w,j=n}i=l}e=d=0;k=a.children;for(n=k.length;0<=--n;)j=k[n]._tree,j.prelim+=d,j.mod+=d,d+=j.shift+(e+=j.change);h=0.5*(h._tree.prelim+l._tree.prelim);b?(f.prelim=b._tree.prelim+c(a,b),f.mod=f.prelim-h):f.prelim=h}else if(b)f.prelim=b._tree.prelim+c(a,b)}function h(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(f=c.length))for(var d=-1,f,b=b+a._tree.mod;++d<f;)h(c[d],b)}var i=b.call(this,f,e),j=i[0];za(j,function(a,
b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});g(j);h(j,-j._tree.prelim);var l=Pb(j,nf),k=Pb(j,mf),n=Pb(j,of),o=l.x-c(l,k)/2,q=k.x+c(k,l)/2,m=n.depth||1;za(j,function(a){a.x=(a.x-o)/(q-o)*d[0];a.y=a.depth/m*d[1];delete a._tree});return i}var b=d3.layout.hierarchy().sort(null).value(null),c=Dd,d=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return d;d=b;return a};return wb(a,b)};d3.layout.treemap=
function(){function a(b,c){for(var d=-1,f=b.length,e,g;++d<f;)g=(e=b[d]).value*(0>c?0:c),e.area=isNaN(g)||0>=g?0:g}function b(c){var f=c.children;if(f&&f.length){var e=j(c),g=[],h=f.slice(),i=Infinity,l,k="slice"===n?e.dx:"dice"===n?e.dy:"slice-dice"===n?c.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);a(h,e.dx*e.dy/c.value);for(g.area=0;0<(c=h.length);){g.push(c=h[c-1]);g.area+=c.area;if(!(c="squarify"!==n)){l=k;for(var c=g.area,q=void 0,m=0,p=Infinity,s=-1,r=g.length;++s<r;)if(q=g[s].area)q<p&&(p=q),q>m&&
(m=q);c*=c;l*=l;c=(l=c?Math.max(l*m*o/c,c/(l*p*o)):Infinity)<=i}c?(h.pop(),i=l):(g.area-=g.pop().area,d(g,k,e,!1),k=Math.min(e.dx,e.dy),g.length=g.area=0,i=Infinity)}if(g.length)d(g,k,e,!0),g.length=g.area=0;f.forEach(b)}}function c(b){var f=b.children;if(f&&f.length){var e=j(b),g=f.slice(),h=[];a(g,e.dx*e.dy/b.value);for(h.area=0;b=g.pop();)if(h.push(b),h.area+=b.area,null!=b.z)d(h,b.z?e.dx:e.dy,e,!g.length),h.length=h.area=0;f.forEach(c)}}function d(a,b,c,f){var e=-1,h=a.length,i=c.x,j=c.y,l=b?
g(a.area/b):0,k;if(b==c.dx){if(f||l>c.dy)l=c.dy;for(;++e<h;)k=a[e],k.x=i,k.y=j,k.dy=l,i+=k.dx=Math.min(c.x+c.dx-i,l?g(k.area/l):0);k.z=!0;k.dx+=c.x+c.dx-i;c.y+=l;c.dy-=l}else{if(f||l>c.dx)l=c.dx;for(;++e<h;)k=a[e],k.x=i,k.y=j,k.dx=l,j+=k.dy=Math.min(c.y+c.dy-j,l?g(k.area/l):0);k.z=!1;k.dy+=c.y+c.dy-j;c.x+=l;c.dx-=l}}function f(d){var d=k||e(d),g=d[0];g.x=0;g.y=0;g.dx=h[0];g.dy=h[1];k&&e.revalue(g);a([g],g.dx*g.dy/g.value);(k?c:b)(g);l&&(k=d);return d}var e=d3.layout.hierarchy(),g=Math.round,h=[1,
1],i=null,j=wc,l=!1,k,n="squarify",o=0.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return h;h=a;return f};f.padding=function(a){function b(c){var d=a.call(f,c,c.depth);return null==d?wc(c):Ed(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return Ed(b,a)}if(!arguments.length)return i;var d;j=null==(i=a)?wc:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return f};f.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return l;
l=a;k=null;return f};f.ratio=function(a){if(!arguments.length)return o;o=a;return f};f.mode=function(a){if(!arguments.length)return n;n=a+"";return f};return wb(f,e)};d3.csv=Fd(",","text/csv");d3.tsv=Fd("\t","text/tab-separated-values");d3.geo={};d3.geo.stream=function(a,b){if(pe.hasOwnProperty(a.type))pe[a.type](a,b);else Qb(a,b)};var pe={Feature:function(a,b){Qb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,f=c.length;++d<f;)Qb(c[d].geometry,b)}},Gd={Sphere:function(a,
b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,f=c.length,e;++d<f;)e=c[d],b.point(e[0],e[1])},LineString:function(a,b){xc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,f=c.length;++d<f;)xc(c[d],b,0)},Polygon:function(a,b){Hd(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,f=c.length;++d<f;)Hd(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=
-1,f=c.length;++d<f;)Qb(c[d],b)}};d3.geo.albersUsa=function(){function a(e){var g=e[0],h=e[1];return(50<h?c:-140>g?d:21>h?f:b)(e)}var b=d3.geo.albers(),c=d3.geo.albers().rotate([160,0]).center([0,60]).parallels([55,65]),d=d3.geo.albers().rotate([160,0]).center([0,20]).parallels([8,18]),f=d3.geo.albers().rotate([60,0]).center([0,10]).parallels([8,18]);a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(0.6*e);d.scale(e);f.scale(1.5*e);return a.translate(b.translate())};a.translate=
function(e){if(!arguments.length)return b.translate();var g=b.scale(),h=e[0],i=e[1];b.translate(e);c.translate([h-0.4*g,i+0.17*g]);d.translate([h-0.19*g,i+0.2*g]);f.translate([h+0.58*g,i+0.43*g]);return a};return a.scale(b.scale())};(d3.geo.albers=function(){var a=29.5*C,b=45.5*C,c=Ec(Md),d=c(a,b);d.parallels=function(d){return!arguments.length?[a*ea,b*ea]:c(a=d[0]*C,b=d[1]*C)};return d.rotate([98,0]).center([0,38]).scale(1E3)}).raw=Md;var qe=xb(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*
Math.asin(a/2)});(d3.geo.azimuthalEqualArea=function(){return Ka(qe)}).raw=qe;var re=xb(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},c);(d3.geo.azimuthalEquidistant=function(){return Ka(re)}).raw=re;d3.geo.bounds=Nd(c);d3.geo.centroid=function(a){ca=sa=W=X=T=0;d3.geo.stream(a,ta);var b;if(sa&&Math.abs(b=Math.sqrt(W*W+X*X+T*T))>I)return[Math.atan2(X,W)*ea,Math.asin(Math.max(-1,Math.min(1,T/b)))*ea]};var ca,sa,W,X,T,ta={sphere:function(){2>ca&&(ca=2,sa=W=X=T=0)},point:Od,lineStart:zc,lineEnd:Ac,
polygonStart:function(){2>ca&&(ca=2,sa=W=X=T=0);ta.lineStart=pf},polygonEnd:function(){ta.lineStart=zc}};d3.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,d=Xd(-c[0]*C,-c[1]*C,0).invert,e=[];f(null,null,1,{point:function(a,b){e.push(a=d(a,b));a[0]*=ea;a[1]*=ea}});return{type:"Polygon",coordinates:[e]}}var b=[0,0],c,d=6,f;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;f=Bc((c=+b)*C,d*C);return a};
a.precision=function(b){if(!arguments.length)return d;f=Bc(c*C,(d=+b)*C);return a};return a.angle(90)};var Yd=Qd(e,function(a){var b=NaN,c=NaN,d=NaN,f;return{lineStart:function(){a.lineStart();f=1},point:function(e,g){var h=0<e?A:-A,i=Math.abs(e-b);if(Math.abs(i-A)<I)a.point(b,c=0<(c+g)/2?A/2:-A/2),a.point(d,c),a.lineEnd(),a.lineStart(),a.point(h,c),a.point(e,c),f=0;else if(d!==h&&i>=A){Math.abs(b-d)<I&&(b-=d*I);Math.abs(e-h)<I&&(e-=h*I);var i=b,j=c,l=e,k,n,o=Math.sin(i-l);c=Math.abs(o)>I?Math.atan((Math.sin(j)*
(n=Math.cos(g))*Math.sin(l)-Math.sin(g)*(k=Math.cos(j))*Math.sin(i))/(k*n*o)):(j+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);f=0}a.point(b=e,c=g);d=h},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-f}}},function(a,b,c,d){null==a?(c=c*A/2,d.point(-A,c),d.point(0,c),d.point(A,c),d.point(A,0),d.point(A,-c),d.point(0,-c),d.point(-A,-c),d.point(-A,0),d.point(-A,c)):Math.abs(a[0]-b[0])>I?(a=(a[0]<b[0]?1:-1)*A,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],
b[1])});(d3.geo.equirectangular=function(){return Ka(Tb).scale(250/A)}).raw=Tb.invert=Tb;var se=xb(function(a){return 1/a},Math.atan);(d3.geo.gnomonic=function(){return Ka(se)}).raw=se;d3.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return d3.range(Math.ceil(d/g)*g,c,g).map(i).concat(d3.range(Math.ceil(e/h)*h,f,h).map(j))}var c,d,f,e,g=22.5,h=g,i,j,l=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=
function(){return{type:"Polygon",coordinates:[i(d).concat(j(f).slice(1),i(c).reverse().slice(1),j(e).reverse().slice(1))]}};a.extent=function(b){if(!arguments.length)return[[d,e],[c,f]];d=+b[0][0];c=+b[1][0];e=+b[0][1];f=+b[1][1];d>c&&(b=d,d=c,c=b);e>f&&(b=e,e=f,f=b);return a.precision(l)};a.step=function(b){if(!arguments.length)return[g,h];g=+b[0];h=+b[1];return a};a.precision=function(b){if(!arguments.length)return l;l=+b;i=vf(e,f,l);j=wf(d,c,l);return a};return a.extent([[-180+I,-90+I],[180-I,
90-I]])};d3.geo.interpolate=function(a,b){return xf(a[0]*C,a[1]*C,b[0]*C,b[1]*C)};d3.geo.greatArc=function(){function a(){for(var f=c||b.apply(this,arguments),h=j||d.apply(this,arguments),i=g||d3.geo.interpolate(f,h),j=0,l=e/i.distance,f=[f];1>(j+=l);)f.push(i(j));f.push(h);return{type:"LineString",coordinates:f}}var b=k,c,d=i,f,e=6*C,g;a.distance=function(){return(g||d3.geo.interpolate(c||b.apply(this,arguments),f||d.apply(this,arguments))).distance};a.source=function(d){if(!arguments.length)return b;
b=d;c="function"===typeof d?null:d;g=c&&f?d3.geo.interpolate(c,f):null;return a};a.target=function(b){if(!arguments.length)return d;d=b;f="function"===typeof b?null:b;g=c&&f?d3.geo.interpolate(c,f):null;return a};a.precision=function(b){if(!arguments.length)return e/C;e=b*C;return a};return a};Cc.invert=function(a,b){return[2*A*a,2*Math.atan(Math.exp(2*A*b))-A/2]};(d3.geo.mercator=function(){return Ka(Cc).scale(500)}).raw=Cc;var te=xb(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return Ka(te)}).raw=
te;d3.geo.path=function(){function a(c){c&&d3.geo.stream(c,e(g.pointRadius("function"===typeof b?+b.apply(this,arguments):b)));return g.result()}var b=4.5,d,f,e,g;a.area=function(a){ec=0;d3.geo.stream(a,e(Ha));return ec};a.centroid=function(a){ca=W=X=T=0;d3.geo.stream(a,e(ua));return T?[W/T,X/T]:void 0};a.bounds=function(a){return Nd(e)(a)};a.projection=function(b){if(!arguments.length)return d;e=(d=b)?b.stream||yf(b):c;return a};a.context=function(b){if(!arguments.length)return f;g=null==(f=b)?new zf:
new Af(b);return a};a.pointRadius=function(c){if(!arguments.length)return b;b="function"===typeof c?c:+c;return a};return a.projection(d3.geo.albersUsa()).context(null)};var ec,Ub,Ha={point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){Ub=0;Ha.lineStart=Bf},polygonEnd:function(){Ha.lineStart=Ha.lineEnd=Ha.point=ba;ec+=Math.abs(Ub/2)}},ua={point:Dc,lineStart:Vd,lineEnd:Wd,polygonStart:function(){ua.lineStart=Cf},polygonEnd:function(){ua.point=Dc;ua.lineStart=Vd;ua.lineEnd=Wd}};d3.geo.area=function(a){eb=
0;d3.geo.stream(a,Ja);return eb};var eb,Ia,Ja={sphere:function(){eb+=4*A},point:ba,lineStart:ba,lineEnd:ba,polygonStart:function(){Ia=0;Ja.lineStart=Df},polygonEnd:function(){eb+=0>Ia?4*A+Ia:Ia;Ja.lineStart=Ja.lineEnd=Ja.point=ba}};d3.geo.projection=Ka;d3.geo.projectionMutator=Ec;var ue=xb(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(d3.geo.stereographic=function(){return Ka(ue)}).raw=ue;d3.geom={};d3.geom.hull=function(a){if(3>a.length)return[];var b=a.length,c=b-1,d=[],f=[],
e,g=0,h,i,j,l,k,n,o;for(e=1;e<b;++e)a[e][1]<a[g][1]?g=e:a[e][1]==a[g][1]&&(g=a[e][0]<a[g][0]?e:g);for(e=0;e<b;++e)e!==g&&(i=a[e][1]-a[g][1],h=a[e][0]-a[g][0],d.push({angle:Math.atan2(i,h),index:e}));d.sort(function(a,b){return a.angle-b.angle});o=d[0].angle;n=d[0].index;k=0;for(e=1;e<c;++e)b=d[e].index,o==d[e].angle?(h=a[n][0]-a[g][0],i=a[n][1]-a[g][1],j=a[b][0]-a[g][0],l=a[b][1]-a[g][1],h*h+i*i>=j*j+l*l?d[e].index=-1:(d[k].index=-1,o=d[e].angle,k=e,n=b)):(o=d[e].angle,k=e,n=b);f.push(g);for(e=0,
b=0;2>e;++b)-1!==d[b].index&&(f.push(d[b].index),e++);for(g=f.length;b<c;++b)if(-1!==d[b].index){for(;!Ff(f[g-2],f[g-1],d[b].index,a);)--g;f[g++]=d[b].index}c=[];for(e=0;e<g;++e)c.push(a[f[e]]);return c};d3.geom.polygon=function(a){a.area=function(){for(var b=0,c=a.length,d=a[c-1][1]*a[0][0]-a[c-1][0]*a[0][1];++b<c;)d+=a[b-1][1]*a[b][0]-a[b-1][0]*a[b][1];return 0.5*d};a.centroid=function(b){var c=-1,d=a.length,f=0,e=0,g,h=a[d-1],i;for(arguments.length||(b=-1/(6*a.area()));++c<d;)g=h,h=a[c],i=g[0]*
h[1]-h[0]*g[1],f+=(g[0]+h[0])*i,e+=(g[1]+h[1])*i;return[f*b,e*b]};a.clip=function(b){for(var c,d=-1,f=a.length,e,g,h=a[f-1],i,j,l;++d<f;){c=b.slice();b.length=0;i=a[d];j=c[(g=c.length)-1];for(e=-1;++e<g;)l=c[e],Fc(l,h,i)?(Fc(j,h,i)||b.push(be(j,l,h,i)),b.push(l)):Fc(j,h,i)&&b.push(be(j,l,h,i)),j=l;h=i}return b};return a};d3.geom.voronoi=function(a){var b=a.map(function(){return[]});ce(a,function(a){var c,d,f,e;1===a.a&&0<=a.b?(c=a.ep.r,d=a.ep.l):(c=a.ep.l,d=a.ep.r);1===a.a?(f=c?c.y:-1E6,c=a.c-a.b*
f,e=d?d.y:1E6,d=a.c-a.b*e):(c=c?c.x:-1E6,f=a.c-a.a*c,d=d?d.x:1E6,e=a.c-a.a*d);c=[c,f];d=[d,e];b[a.region.l.index].push(c,d);b[a.region.r.index].push(c,d)});b=b.map(function(b,c){var d=a[c][0],f=a[c][1],e=b.map(function(a){return Math.atan2(a[0]-d,a[1]-f)});return d3.range(b.length).sort(function(a,b){return e[a]-e[b]}).filter(function(a,b,c){return!b||e[a]-e[c[b-1]]>I}).map(function(a){return b[a]})});b.forEach(function(b,c){var d=b.length;if(!d)return b.push([-1E6,-1E6],[-1E6,1E6],[1E6,1E6],[1E6,
-1E6]);if(!(2<d)){var f=a[c],e=b[0],g=b[1],d=f[0],f=f[1],h=e[0],e=e[1],i=g[0],j=g[1],l=Math.abs(i-h),g=j-e;Math.abs(g)<I?(d=f<e?-1E6:1E6,b.push([-1E6,d],[1E6,d])):l<I?(d=d<h?-1E6:1E6,b.push([d,-1E6],[d,1E6])):(d=(i-h)*(e-f)<(h-d)*(j-e)?1E6:-1E6,f=Math.abs(g)-l,Math.abs(f)<I?b.push([0>g?d:-d,d]):(0<f&&(d*=-1),b.push([-1E6,d],[1E6,d])))}});return b};var Gc={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];ce(a,function(c){b[c.region.l.index].push(a[c.region.r.index])});
b.forEach(function(b,d){var f=a[d],e=f[0],g=f[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-e,a[1]-g)});b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;h<i;h++)c.push([f,b[h],b[h+1]])});return c};d3.geom.quadtree=function(a,b,c,d,f){function e(a,b,c,d,f,h){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var i=a.point;if(i){if(!(0.01>Math.abs(i.x-b.x)+Math.abs(i.y-b.y)))a.point=null,g(a,i,c,d,f,h);g(a,b,c,d,f,h)}else a.point=b}else g(a,b,c,d,f,h)}function g(a,b,c,d,f,h){var i=0.5*
(c+f),j=0.5*(d+h),l=b.x>=i,k=b.y>=j,n=(k<<1)+l;a.leaf=!1;a=a.nodes[n]||(a.nodes[n]={leaf:!0,nodes:[],point:null});l?c=i:f=i;k?d=j:h=j;e(a,b,c,d,f,h)}var h,i=-1,j=a.length;if(5>arguments.length)if(3===arguments.length)f=c,d=b,c=b=0;else{b=c=Infinity;for(d=f=-Infinity;++i<j;){h=a[i];if(h.x<b)b=h.x;if(h.y<c)c=h.y;if(h.x>d)d=h.x;if(h.y>f)f=h.y}}h=d-b;i=f-c;h>i?f=c+h:d=b+i;var l={leaf:!0,nodes:[],point:null};l.add=function(a){e(l,a,b,c,d,f)};l.visit=function(a){yb(a,l,b,c,d,f)};a.forEach(l.add);return l};
d3.time={};var ha=Date;Sa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},
valueOf:function(){return this._.valueOf()},setDate:function(){Aa.setUTCDate.apply(this._,arguments)},setDay:function(){Aa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Aa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Aa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Aa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Aa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Aa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Aa.setUTCSeconds.apply(this._,
arguments)},setTime:function(){Aa.setTime.apply(this._,arguments)}};var Aa=Date.prototype,ve="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),we="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),Sc="January,February,March,April,May,June,July,August,September,October,November,December".split(","),Tc="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");d3.time.format=function(a){function b(d){for(var f=[],e=-1,g=0,h,i;++e<c;)if(37===a.charCodeAt(e)){f.push(a.substring(g,e));if(null!=
(h=cg[g=a.charAt(++e)]))g=a.charAt(++e);if(i=fc[g])g=i(d,null==h?"e"===g?" ":"0":h);f.push(g);g=e+1}f.push(a.substring(g,e));return f.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Vb(c,a,b,0)!=b.length)return null;if("p"in c)c.H=c.H%12+12*c.p;b=new ha;b.setFullYear(c.y,c.m,c.d);b.setHours(c.H,c.M,c.S,c.L);return b};b.toString=function(){return a};return b};var xe=Wb(ve),ye=Wb(we),ze=Wb(Sc),dg=de(Sc),Ae=Wb(Tc),eg=de(Tc),cg={"-":"",_:" ","0":"0"},fc={a:function(a){return we[a.getDay()]},
A:function(a){return ve[a.getDay()]},b:function(a){return Tc[a.getMonth()]},B:function(a){return Sc[a.getMonth()]},c:d3.time.format("%a %b %e %X %Y"),d:function(a,b){return ja(a.getDate(),b,2)},e:function(a,b){return ja(a.getDate(),b,2)},H:function(a,b){return ja(a.getHours(),b,2)},I:function(a,b){return ja(a.getHours()%12||12,b,2)},j:function(a,b){return ja(1+d3.time.dayOfYear(a),b,3)},L:function(a,b){return ja(a.getMilliseconds(),b,3)},m:function(a,b){return ja(a.getMonth()+1,b,2)},M:function(a,
b){return ja(a.getMinutes(),b,2)},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a,b){return ja(a.getSeconds(),b,2)},U:function(a,b){return ja(d3.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return ja(d3.time.mondayOfYear(a),b,2)},x:d3.time.format("%m/%d/%Y"),X:d3.time.format("%H:%M:%S"),y:function(a,b){return ja(a.getFullYear()%100,b,2)},Y:function(a,b){return ja(a.getFullYear()%1E4,b,4)},Z:function(a){var b=a.getTimezoneOffset(),a=0<b?"-":"+",c=~~(Math.abs(b)/
60),b=Math.abs(b)%60;return a+ja(c,"0",2)+ja(b,"0",2)},"%":function(){return"%"}},Gf={a:function(a,b,c){ye.lastIndex=0;return(a=ye.exec(b.substring(c)))?c+a[0].length:-1},A:function(a,b,c){xe.lastIndex=0;return(a=xe.exec(b.substring(c)))?c+a[0].length:-1},b:function(a,b,c){Ae.lastIndex=0;return(b=Ae.exec(b.substring(c)))?(a.m=eg.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){ze.lastIndex=0;return(b=ze.exec(b.substring(c)))?(a.m=dg.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,
b,c){return Vb(a,fc.c.toString(),b,c)},d:ee,e:ee,H:fe,I:fe,L:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1},M:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=fg.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,
c+2)))?(a.S=+b[0],c+b[0].length):-1},x:function(a,b,c){return Vb(a,fc.x.toString(),b,c)},X:function(a,b,c){return Vb(a,fc.X.toString(),b,c)},y:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+2)))?(a.y=+b[0]+(68<+b[0]?1900:2E3),c+b[0].length):-1},Y:function(a,b,c){ga.lastIndex=0;return(b=ga.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}},ga=/^\s*\d+/,fg=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{ha=Sa;var d=new ha;d._=a;return c(d)}finally{ha=Date}}
var c=d3.time.format(a);b.parse=function(a){try{ha=Sa;var b=c.parse(a);return b&&b._}finally{ha=Date}};b.toString=c.toString;return b};var Be=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Hc:Be;Hc.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Hc.toString=Be.toString;d3.time.second=Ta(function(a){return new ha(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});d3.time.seconds=d3.time.second.range;
d3.time.seconds.utc=d3.time.second.utc.range;d3.time.minute=Ta(function(a){return new ha(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});d3.time.minutes=d3.time.minute.range;d3.time.minutes.utc=d3.time.minute.utc.range;d3.time.hour=Ta(function(a){var b=a.getTimezoneOffset()/60;return new ha(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});d3.time.hours=d3.time.hour.range;
d3.time.hours.utc=d3.time.hour.utc.range;d3.time.day=Ta(function(a){var b=new ha(1970,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});d3.time.days=d3.time.day.range;d3.time.days.utc=d3.time.day.utc.range;d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(",").forEach(function(a,
b){var a=a.toLowerCase(),b=7-b,c=d3.time[a]=Ta(function(a){(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range;d3.time[a+"s"].utc=c.utc.range;d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}});d3.time.week=d3.time.sunday;d3.time.weeks=d3.time.sunday.range;
d3.time.weeks.utc=d3.time.sunday.utc.range;d3.time.weekOfYear=d3.time.sundayOfYear;d3.time.month=Ta(function(a){a=d3.time.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});d3.time.months=d3.time.month.range;d3.time.months.utc=d3.time.month.utc.range;d3.time.year=Ta(function(a){a=d3.time.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});d3.time.years=d3.time.year.range;d3.time.years.utc=
d3.time.year.utc.range;var Yb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Uc=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],gg=[[d3.time.format("%Y"),e],[d3.time.format("%B"),
function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],Ce=d3.scale.linear(),hg=ge(gg);Uc.year=function(a,b){return Ce.domain(a.map(Hf)).ticks(b).map(Kc)};
d3.time.scale=function(){return Ic(d3.scale.linear(),Uc,hg)};var De=Uc.map(function(a){return[a[0].utc,a[1]]}),ig=[[d3.time.format.utc("%Y"),e],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),
function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],jg=ge(ig);De.year=function(a,b){return Ce.domain(a.map(If)).ticks(b).map(Lc)};d3.time.scale.utc=function(){return Ic(d3.scale.linear(),De,jg)}})()})},"dojox/main":function(){define(["dojo/_base/kernel"],function(i){return i.dojox})},"phpr/Statistics/WorktimeMonthTable":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/date/locale,dijit/_Widget,phpr/models/Timecard,phpr/Timehelper,dojox/grid/DataGrid,dojo/data/ItemFileWriteStore".split(","),
function(i,k,j,h,c,e,g,b,f){return i([c],{baseClass:"statisticsMonthGrid",projects:null,constructor:function(){this.projects=[]},buildRendering:function(){this.inherited(arguments);this._destroyed||e.getWorkedMinutesPerDay({projects:this.projects,start:this.startDate,end:this.endDate}).then(k.hitch(this,"_renderData"))},_renderData:function(a){if(!this._destroyed){var c={identifier:"id",items:[]};j.forEach(a.days,function(a,b){if(0!==parseInt(a.sumInMinutes,10)){var f=g.dateToJsDate(a.date);c.items.push({id:b+
1,date:h.format(f,{selector:"date"}),sumInMinutes:a.sumInMinutes})}});a=new f({data:c});a=new b({store:a,structure:[{name:"Datum",field:"date"},{name:"Gearbeitete Zeit in Minuten",field:"sumInMinutes"}],autoHeight:15});this.own(a);a.placeAt(this.domNode);a.startup()}}})})},"dojox/grid/DataGrid":function(){define("../main,dojo/_base/array,dojo/_base/lang,dojo/_base/json,dojo/_base/sniff,dojo/_base/declare,./_Grid,./DataSelection,dojo/_base/html".split(","),function(i,k,j,h,c,e,g,b,f){var a=e("dojox.grid.DataGrid",
g,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:!1,_isLoading:!1,keepSelection:!1,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments)},destroy:function(){this.selection.destroy();
this.inherited(arguments)},createSelection:function(){this.selection=new b(this)},get:function(a,b){if(b&&"_item"==this.field&&!this.fields)return b;if(b&&this.fields){var c=[],f=this.grid.store;k.forEach(this.fields,function(a){c=c.concat(f.getValues(b,a))});return c}return!b&&"string"===typeof a?this.inherited(arguments):!b?this.defaultValue:!this.field?this.value:"_item"==this.field?b:this.grid.store.getValue(b,this.field)},_checkUpdateStatus:function(){if(0<this.updateDelay){var a=!1;this._endUpdateDelay&&
(clearTimeout(this._endUpdateDelay),delete this._endUpdateDelay,a=!0);this.updating||(this.beginUpdate(),a=!0);if(a){var b=this;this._endUpdateDelay=setTimeout(function(){delete b._endUpdateDelay;b.endUpdate()},this.updateDelay)}}},_onSet:function(a){this._checkUpdateStatus();a=this.getItemIndex(a);-1<a&&this.updateRow(a)},_createItem:function(a,b){var c=this._hasIdentity?this.store.getIdentity(a):h.toJson(this.query)+":idx:"+b+":sort:"+h.toJson(this.getSortProps());return this._by_idty[c]={idty:c,
item:a}},_addItem:function(a,b,c){this._by_idx[b]=this._createItem(a,b);c||this.updateRow(b)},_onNew:function(a){this._checkUpdateStatus();var b=this.get("rowCount");this._addingItem=!0;this.updateRowCount(b+1);this._addingItem=!1;this._addItem(a,b);this.showMessage()},_onDelete:function(a){this._checkUpdateStatus();a=this._getItemIndex(a,!0);if(0<=a){this._pages=[];this._eop=this._bop=-1;var b=this._by_idx[a];this._by_idx.splice(a,1);delete this._by_idty[b.idty];this.updateRowCount(this.get("rowCount")-
1);0===this.get("rowCount")&&this.showMessage(this.noDataMessage)}this.selection.isSelected(a)&&(this.selection.deselect(a),this.selection.selected.splice(a,1))},_onRevert:function(){this._refresh()},setStore:function(a,b,c){this._requestsPending(0)||(this._setQuery(b,c),this._setStore(a),this._refresh(!0))},setQuery:function(a,b){this._requestsPending(0)||(this._setQuery(a,b),this._refresh(!0))},setItems:function(a){this.items=a;this._setStore(this.store);this._refresh(!0)},_setQuery:function(a,
b){this.query=a;this.queryOptions=b||this.queryOptions},_setStore:function(a){this.store&&this._store_connects&&k.forEach(this._store_connects,this.disconnect,this);if(this.store=a){var a=this.store.getFeatures(),b=[];this._canEdit=!!a["dojo.data.api.Write"]&&!!a["dojo.data.api.Identity"];this._hasIdentity=!!a["dojo.data.api.Identity"];a["dojo.data.api.Notification"]&&!this.items&&(b.push(this.connect(this.store,"onSet","_onSet")),b.push(this.connect(this.store,"onNew","_onNew")),b.push(this.connect(this.store,
"onDelete","_onDelete")));this._canEdit&&b.push(this.connect(this.store,"revert","_onRevert"));this._store_connects=b}},_onFetchBegin:function(a,b){if(this.scroller){if(this.rowCount!=a)b.isRender?(this.scroller.init(a,this.keepRows,this.rowsPerPage),this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,!0),this._skipRowRenormalize=!0,this.prerender(),this._skipRowRenormalize=!1):this.updateRowCount(a);a?this.showMessage():(this.views.render(),this._resize(),this.showMessage(this.noDataMessage),
this.focus.initFocusView())}},_onFetchComplete:function(a,b){if(this.scroller){a&&0<a.length&&(k.forEach(a,function(a,c){this._addItem(a,b.start+c,!0)},this),this.updateRows(b.start,a.length),b.isRender?(this.setScrollTop(0),this.postrender()):this._lastScrollTop&&this.setScrollTop(this._lastScrollTop),c("ie")&&f.setSelectable(this.domNode,this.selectable));delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=!1,this._isLoaded=!0;this._pending_requests[b.start]=!1}},_onFetchError:function(a,
b){delete this._lastScrollTop;if(!this._isLoaded)this._isLoading=!1,this._isLoaded=!0,this.showMessage(this.errorMessage);this._pending_requests[b.start]=!1;this.onFetchError(a,b)},onFetchError:function(){},_fetch:function(a,b){a=a||0;if(this.store&&!this._pending_requests[a]){if(!this._isLoaded&&!this._isLoading)this._isLoading=!0,this.showMessage(this.loadingMessage);this._pending_requests[a]=!0;try{if(this.items){var c=this.items,f=this.store;this.rowsPerPage=c.length;var e={start:a,count:this.rowsPerPage,
isRender:b};this._onFetchBegin(c.length,e);var g=0;k.forEach(c,function(a){f.isItemLoaded(a)||g++});if(0===g)this._onFetchComplete(c,e);else{var h=function(){g--;0===g&&this._onFetchComplete(c,e)};k.forEach(c,function(a){f.isItemLoaded(a)||f.loadItem({item:a,onItem:h,scope:this})},this)}}else this.store.fetch({start:a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:b,onBegin:j.hitch(this,"_onFetchBegin"),onComplete:j.hitch(this,"_onFetchComplete"),
onError:j.hitch(this,"_onFetchError")})}catch(i){this._onFetchError(i,{start:a,count:this.rowsPerPage})}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoading=this._isLoaded=!1},getItem:function(a){var b=this._by_idx[a];return!b||b&&!b.item?(this._preparePage(a),null):b.item},getItemIndex:function(a){return this._getItemIndex(a,!1)},_getItemIndex:function(a,b){if(!b&&!this.store.isItem(a))return-1;for(var c=this._hasIdentity?
this.store.getIdentity(a):null,f=0,e=this._by_idx.length;f<e;f++){var g=this._by_idx[f];if(g&&(c&&g.idty==c||g.item===a))return f}return-1},filter:function(a,b){this.query=a;b&&this._clearData();this._fetch()},_getItemAttr:function(a,b){var c=this.getItem(a);return!c?this.fetchText:this.store.getValue(c,b)},_render:function(){this.domNode.parentNode&&(this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage),this.prerender(),this._fetch(0,!0))},_requestsPending:function(a){return this._pending_requests[a]},
_rowToPage:function(a){return this.rowsPerPage?Math.floor(a/this.rowsPerPage):a},_pageToRow:function(a){return this.rowsPerPage?this.rowsPerPage*a:a},_preparePage:function(a){if((a<this._bop||a>=this._eop)&&!this._addingItem)a=this._rowToPage(a),this._needPage(a),this._bop=a*this.rowsPerPage,this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"))},_needPage:function(a){this._pages[a]||(this._pages[a]=!0,this._requestPage(a))},_requestPage:function(a){a=this._pageToRow(a);0<Math.min(this.rowsPerPage,
this.get("rowCount")-a)&&(this._requests++,this._requestsPending(a)||setTimeout(j.hitch(this,"_fetch",a,!1),1))},getCellName:function(a){return a.field},_refresh:function(a){this._clearData();this._fetch(0,a)},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh()},canSort:function(){return!this._isLoading},getSortProps:function(){var a=this.getCell(this.getSortIndex());if(a){var b=a.sortDesc,c=!(0<this.sortInfo);return[{attribute:a.field,descending:"undefined"==typeof b?
c:c?!b:b}]}return this.sortFields?this.sortFields:null},styleRowState:function(a){if(this.store&&this.store.getState){for(var b=this.store.getState(a.index),c="",f=0,e=["inflight","error","inserting"],g;g=e[f];f++)if(b[g]){c=" dojoxGridRow-"+g;break}a.customClasses+=c}},onStyleRow:function(a){this.styleRowState(a);this.inherited(arguments)},canEdit:function(){return this._canEdit},_copyAttr:function(a,b){return this.store.getValue(this.getItem(a),b)},doStartEdit:function(a,b){this._cache[b]||(this._cache[b]=
this._copyAttr(b,a.field));this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.store.fetchItemByIdentity({identity:this._by_idx[b].idty,onItem:j.hitch(this,function(f){var e=this.store.getValue(f,c);"number"==typeof e?a=isNaN(a)?a:parseFloat(a):"boolean"==typeof e?a="true"==a?!0:"false"==a?!1:a:e instanceof Date&&(e=new Date(a),a=isNaN(e.getTime())?a:e);this.store.setValue(f,c,a);this.onApplyCellEdit(a,b,c)})})},doCancelEdit:function(a){this._cache[a]&&(this.updateRow(a),delete this._cache[a]);
this.onCancelEdit.apply(this,arguments)},doApplyEdit:function(a){this.onApplyEdit(a)},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var a=j.hitch(this,function(a){a.length&&(k.forEach(a,this.store.deleteItem,this.store),this.selection.clear())});this.allItemsSelected?this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:a}):a(this.selection.getSelected())}}});a.cell_markupFactory=function(a,b,c){var e=j.trim(f.attr(b,"field")||"");if(e)c.field=e;c.field=
c.field||c.name;if(e=j.trim(f.attr(b,"fields")||""))c.fields=e.split(",");a&&a(b,c)};a.markupFactory=function(b,c,f,e){return g.markupFactory(b,c,f,j.partial(a.cell_markupFactory,e))};return a})},"dojox/grid/_Grid":function(){define("dojo/_base/kernel,../main,dojo/_base/declare,./_Events,./_Scroller,./_Layout,./_View,./_ViewManager,./_RowManager,./_FocusManager,./_EditManager,./Selection,./_RowSelector,./util,dijit/_Widget,dijit/_TemplatedMixin,dijit/CheckedMenuItem,dojo/text!./resources/_Grid.html,dojo/string,dojo/_base/array,dojo/_base/lang,dojo/_base/sniff,dojox/html/metrics,dojo/_base/html,dojo/query,dojo/dnd/common,dojo/i18n!dijit/nls/loading".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t,q,u,v,y,x,L){if(!i.isCopyKey)i.isCopyKey=i.dnd.getCopyKeyState;j=j("dojox.grid._Grid",[n,m,h],{templateString:s,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:!1,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:!0,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:!1,selectionMode:"extended",rowSelector:"",columnReordering:!1,headerMenu:null,placeholderLabel:"GridColumns",selectable:!1,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",
errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:!0,formatterScope:null,editable:!1,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:e,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex"))this.domNode.tabIndex="0";this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,
"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");y.initOnFontResize();this.connect(y,"onFontResize","textSizeChanged");r.funnelEvents(this.domNode,this,"doKeyEvent",r.keyEvents);"none"!=this.selectionMode&&this.domNode.setAttribute("aria-multiselectable","single"==this.selectionMode?"false":"true");x.addClass(this.domNode,this.classTag);this.isLeftToRight()||x.addClass(this.domNode,this.classTag+"Rtl");0<this.rowHeight&&x.addClass(this.viewsNode,this.classTag+
"FixedRowHeight")},postMixInProperties:function(){this.inherited(arguments);var a=i.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=t.substitute(this.loadingMessage,a);this.errorMessage=t.substitute(this.errorMessage,a);if(this.srcNodeRef&&this.srcNodeRef.style.height)this.height=this.srcNodeRef.style.height;this._setAutoHeightAttr(this.autoHeight,!0);this.lastScrollTop=this.scrollTop=0},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);
this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth)this.domNode.style.width=this.initialWidth;this.domNode&&!this.editable&&x.attr(this.domNode,"aria-readonly","true")},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.scroller&&(this.scroller.destroy(),delete this.scroller);this.edit.destroy();delete this.edit;this.views.destroyViews();this.focus&&(this.focus.destroy(),delete this.focus);this.headerMenu&&
this._placeholders.length&&(q.forEach(this._placeholders,function(a){a.unReplace(!0)}),this.headerMenu.unBindDomNode(this.viewsHeaderNode));this.inherited(arguments)},_setAutoHeightAttr:function(a,b){"string"==typeof a&&(a=!a||"false"==a?!1:"true"==a?!0:window.parseInt(a,10));"number"==typeof a&&(isNaN(a)&&(a=!1),0>a?a=!0:0===a&&(a=!1));this.autoHeight=a;this._autoHeight="boolean"==typeof a?a:"number"==typeof a?a>=this.get("rowCount"):!1;this._started&&!b&&this.render()},_getRowCountAttr:function(){return this.updating&&
this.invalidated&&void 0!=this.invalidated.rowCount?this.invalidated.rowCount:this.rowCount},textSizeChanged:function(){this.render()},sizeChange:function(){this.update()},createManagers:function(){this.rows=new f(this);this.focus=new a(this);this.edit=new d(this)},createSelection:function(){this.selection=new l(this)},createScroller:function(){this.scroller=new c;this.scroller.grid=this;this.scroller.renderRow=u.hitch(this,"renderRow");this.scroller.removeRow=u.hitch(this,"rowRemoved")},createLayout:function(){this.layout=
new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn")},onMoveColumn:function(){this.update()},onResizeColumn:function(){},createViews:function(){this.views=new b(this);this.views.createView=u.hitch(this,"createView")},createView:function(a,b){var c=new (u.getObject(a))({grid:this,index:b});this.viewsNode.appendChild(c.domNode);this.viewsHeaderNode.appendChild(c.headerNode);this.views.addView(c);x.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return c},
buildViews:function(){for(var a=0,b;b=this.layout.structure[a];a++)this.createView(b.type||k._scopeName+".grid._View",a).setStructure(b);this.scroller.setContentNodes(this.views.getContentNodes())},_setStructureAttr:function(a){a&&u.isString(a)&&(i.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0"),a=u.getObject(a));this.structure=a;if(!a)if(this.layout.structure)a=this.layout.structure;else return;this.views.destroyViews();this.focus.focusView=
null;a!==this.layout.structure&&this.layout.setStructure(a);this._structureChanged()},setStructure:function(a){i.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(a)},getColumnTogglingItems:function(){var a,b=[];a=q.map(this.layout.cells,function(a){if(!a.menuItems)a.menuItems=[];var c=this,d=new o({label:a.name,checked:!a.hidden,_gridCell:a,onChange:function(a){if(c.layout.setColumnVisibility(this._gridCell.index,a)){var b=
this._gridCell.menuItems;1<b.length&&q.forEach(b,function(b){b!==this&&b.setAttribute("checked",a)},this);a=q.filter(c.layout.cells,function(a){1<a.menuItems.length?q.forEach(a.menuItems,"item.set('disabled', false);"):a.menuItems[0].set("disabled",!1);return!a.hidden});1==a.length&&q.forEach(a[0].menuItems,"item.set('disabled', true);")}},destroy:function(){this._gridCell.menuItems.splice(q.indexOf(this._gridCell.menuItems,this),1);delete this._gridCell;o.prototype.destroy.apply(this,arguments)}});
a.menuItems.push(d);a.hidden||b.push(d);return d},this);1==b.length&&b[0].set("disabled",!0);return a},_setHeaderMenuAttr:function(a){if(this._placeholders&&this._placeholders.length)q.forEach(this._placeholders,function(a){a.unReplace(!0)}),this._placeholders=[];this.headerMenu&&this.headerMenu.unBindDomNode(this.viewsHeaderNode);if(this.headerMenu=a)if(this.headerMenu.bindDomNode(this.viewsHeaderNode),this.headerMenu.getPlaceholders)this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel)},
setHeaderMenu:function(a){i.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(a)},setupHeaderMenu:function(){this._placeholders&&this._placeholders.length&&q.forEach(this._placeholders,function(a){a._replaced&&a.unReplace(!0);a.replace(this.getColumnTogglingItems())},this)},_fetch:function(){this.setScrollTop(0)},getItem:function(){return null},showMessage:function(a){a?(this.messagesNode.innerHTML=a,this.messagesNode.style.display=
""):(this.messagesNode.innerHTML="",this.messagesNode.style.display="none")},_structureChanged:function(){this.buildViews();this.autoRender&&this._started&&this.render()},hasLayout:function(){return this.layout.cells.length},resize:function(a,b){this._pendingChangeSize=a;this._pendingResultSize=b;this.sizeChange()},_getPadBorder:function(){return this._padBorder=this._padBorder||x._getPadBorderExtents(this.domNode)},_getHeaderHeight:function(){var a=this.viewsHeaderNode.style,b="none"==a.display?
0:this.views.measureHeader();a.height=b+"px";this.views.normalizeHeaderNodeHeight();return b},_resize:function(a,b){a=a||this._pendingChangeSize;b=b||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(this.domNode){var c=this.domNode.parentNode;if(c&&!(1!=c.nodeType||!this.hasLayout()||"hidden"==c.style.visibility||"none"==c.style.display)){var d=this._getPadBorder(),f=void 0,e;if(this._autoHeight)this.domNode.style.height="auto";else if("number"==typeof this.autoHeight)e=
f=this._getHeaderHeight(),e+=this.scroller.averageRowHeight*this.autoHeight,this.domNode.style.height=e+"px";else if(this.domNode.clientHeight<=d.h)c==document.body?this.domNode.style.height=this.defaultHeight:this.height?this.domNode.style.height=this.height:this.fitTo="parent";b&&(a=b);if(!this._autoHeight&&a)x.marginBox(this.domNode,a),this.height=this.domNode.style.height,delete this.fitTo;else if("parent"==this.fitTo)e=this._parentContentBoxHeight=0<this._parentContentBoxHeight?this._parentContentBoxHeight:
x._getContentBox(c).h,this.domNode.style.height=Math.max(0,e)+"px";c=q.some(this.views.views,function(a){return a.flexCells});!this._autoHeight&&0===(e||x._getContentBox(this.domNode).h)?this.viewsHeaderNode.style.display="none":(this.viewsHeaderNode.style.display="block",!c&&void 0===f&&(f=this._getHeaderHeight()));c&&(f=void 0);this.adaptWidth();this.adaptHeight(f);this.postresize()}}},adaptWidth:function(){var a=!this.initialWidth&&this.autoWidth,b=this.views.arrange(1,a?0:this.domNode.clientWidth||
this.domNode.offsetWidth-this._getPadBorder().w);this.views.onEach("adaptWidth");if(a)this.domNode.style.width=b+"px"},adaptHeight:function(a){var a=void 0===a?this._getHeaderHeight():a,b=this._autoHeight?-1:Math.max(this.domNode.clientHeight-a,0)||0;this.views.onEach("setSize",[0,b]);this.views.onEach("adaptHeight");if(!this._autoHeight){var c=0,d=0,f=q.filter(this.views.views,function(a){(a=a.hasHScrollbar())?c++:d++;return!a});0<c&&0<d&&q.forEach(f,function(a){a.adaptHeight(!0)})}this.scroller.windowHeight=
!0===this.autoHeight||-1!=b||"number"==typeof this.autoHeight&&this.autoHeight>=this.get("rowCount")?b:Math.max(this.domNode.clientHeight-a,0)},startup:function(){this._started||(this.inherited(arguments),this.autoRender&&this.render())},render:function(){if(this.domNode&&this._started)this.hasLayout()?(this.update=this.defaultUpdate,this._render()):this.scroller.init(0,this.keepRows,this.rowsPerPage)},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();
this.setScrollTop(0);this.postrender()},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize()},postrender:function(){this.postresize();this.focus.initFocusView();x.setSelectable(this.domNode,this.selectable)},postresize:function(){if(this._autoHeight)this.viewsNode.style.height=Math.max(this.views.measureContent())+"px"},renderRow:function(a,b){this.views.renderRow(a,b,this._skipRowRenormalize)},rowRemoved:function(a){this.views.rowRemoved(a)},
invalidated:null,updating:!1,beginUpdate:function(){this.invalidated=[];this.updating=!0},endUpdate:function(){this.updating=!1;var a=this.invalidated,b;if(a.all)this.update();else if(void 0!=a.rowCount)this.updateRowCount(a.rowCount);else for(b in a)this.updateRow(Number(b));this.invalidated=[]},defaultUpdate:function(){if(this.domNode)this.updating?this.invalidated.all=!0:(this.lastScrollTop=this.scrollTop,this.prerender(),this.scroller.invalidateNodes(),this.setScrollTop(this.lastScrollTop),this.postrender())},
update:function(){this.render()},updateRow:function(a){a=Number(a);this.updating?this.invalidated[a]=!0:(this.views.updateRow(a),this.scroller.rowHeightChanged(a))},updateRows:function(a,b){var a=Number(a),b=Number(b),c;if(this.updating)for(c=0;c<b;c++)this.invalidated[c+a]=!0;else{for(c=0;c<b;c++)this.views.updateRow(c+a,this._skipRowRenormalize);this.scroller.rowHeightChanged(a)}},updateRowCount:function(a){this.updating?this.invalidated.rowCount=a:(this.rowCount=a,this._setAutoHeightAttr(this.autoHeight,
!0),this.layout.cells.length&&this.scroller.updateRowCount(a),this._resize(),this.layout.cells.length&&this.setScrollTop(this.scrollTop))},updateRowStyles:function(a){this.views.updateRowStyles(a)},getRowNode:function(a){if(this.focus.focusView&&!(this.focus.focusView instanceof p))return this.focus.focusView.rowNodes[a];for(var b=0,c;c=this.views.views[b];b++)if(!(c instanceof p))return c.rowNodes[a];return null},rowHeightChanged:function(a){this.views.renormalizeRow(a);this.scroller.rowHeightChanged(a)},
fastScroll:!0,delayScroll:!1,scrollRedrawThreshold:v("ie")?100:50,scrollTo:function(a){if(this.fastScroll){var b=Math.abs(this.lastScrollTop-a);this.lastScrollTop=a;if(b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=!0;this.scrollTop=a;this.views.setScrollTop(a);this._pendingScroll&&window.clearTimeout(this._pendingScroll);var c=this;this._pendingScroll=window.setTimeout(function(){delete c._pendingScroll;c.finishScrollJob()},200)}else this.setScrollTop(a)}else this.setScrollTop(a)},
finishScrollJob:function(){this.delayScroll=!1;this.setScrollTop(this.scrollTop)},setScrollTop:function(a){this.scroller.scroll(this.views.setScrollTop(a))},scrollToRow:function(a){this.setScrollTop(this.scroller.findScrollTop(a)+1)},styleRowNode:function(a,b){b&&this.rows.styleRowNode(a,b)},_mouseOut:function(){this.rows.setOverRow(-2)},getCell:function(a){return this.layout.cells[a]},setCellWidth:function(a,b){this.getCell(a).unitWidth=b},getCellName:function(a){return"Cell "+a.index},canSort:function(){},
sort:function(){},getSortAsc:function(a){a=void 0==a?this.sortInfo:a;return Boolean(0<a)},getSortIndex:function(a){a=void 0==a?this.sortInfo:a;return Math.abs(a)-1},setSortIndex:function(a,b){var c=a+1;void 0!=b?c*=b?1:-1:this.getSortIndex()==a&&(c=-this.sortInfo);this.setSortInfo(c)},setSortInfo:function(a){if(this.canSort(a))this.sortInfo=a,this.sort(),this.update()},doKeyEvent:function(a){a.dispatch="do"+a.type;this.onKeyEvent(a)},_dispatch:function(a,b){return a in this?this[a](b):!1},dispatchKeyEvent:function(a){this._dispatch(a.dispatch,
a)},dispatchContentEvent:function(a){this.edit.dispatchEvent(a)||a.sourceView.dispatchContentEvent(a)||this._dispatch(a.dispatch,a)},dispatchHeaderEvent:function(a){a.sourceView.dispatchHeaderEvent(a)||this._dispatch("doheader"+a.type,a)},dokeydown:function(a){this.onKeyDown(a)},doclick:function(a){if(a.cellNode)this.onCellClick(a);else this.onRowClick(a)},dodblclick:function(a){if(a.cellNode)this.onCellDblClick(a);else this.onRowDblClick(a)},docontextmenu:function(a){if(a.cellNode)this.onCellContextMenu(a);
else this.onRowContextMenu(a)},doheaderclick:function(a){if(a.cellNode)this.onHeaderCellClick(a);else this.onHeaderClick(a)},doheaderdblclick:function(a){if(a.cellNode)this.onHeaderCellDblClick(a);else this.onHeaderDblClick(a)},doheadercontextmenu:function(a){if(a.cellNode)this.onHeaderCellContextMenu(a);else this.onHeaderContextMenu(a)},doStartEdit:function(a,b){this.onStartEdit(a,b)},doApplyCellEdit:function(a,b,c){this.onApplyCellEdit(a,b,c)},doCancelEdit:function(a){this.onCancelEdit(a)},doApplyEdit:function(a){this.onApplyEdit(a)},
addRow:function(){this.updateRowCount(this.get("rowCount")+1)},removeSelectedRows:function(){this.allItemsSelected?this.updateRowCount(0):this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));this.selection.clear()}});j.markupFactory=function(a,b,c,d){var f=function(a){a=x.attr(a,"width")||"auto";"auto"!=a&&"em"!=a.slice(-2)&&"%"!=a.slice(-1)&&(a=parseInt(a,10)+"px");return a};if(!a.structure&&"table"==b.nodeName.toLowerCase())a.structure=L("> colgroup",b).map(function(a){var b=
x.attr(a,"span"),b={noscroll:"true"==x.attr(a,"noscroll")?!0:!1,__span:b?parseInt(b,10):1,cells:[]};if(x.hasAttr(a,"width"))b.width=f(a);return b}),a.structure.length||a.structure.push({__span:Infinity,cells:[]}),L("thead > tr",b).forEach(function(b,c){var e=0,g=0,h,i=null;L("> th",b).map(function(b){i?e>=h+i.__span&&(g++,h+=i.__span,i=a.structure[g]):(h=0,i=a.structure[0]);var j={name:u.trim(x.attr(b,"name")||b.innerHTML),colSpan:parseInt(x.attr(b,"colspan")||1,10),type:u.trim(x.attr(b,"cellType")||
""),id:u.trim(x.attr(b,"id")||"")};e+=j.colSpan;var l=x.attr(b,"rowspan");if(l)j.rowSpan=l;if(x.hasAttr(b,"width"))j.width=f(b);if(x.hasAttr(b,"relWidth"))j.relWidth=window.parseInt(x.attr(b,"relWidth"),10);if(x.hasAttr(b,"hidden"))j.hidden="true"==x.attr(b,"hidden")||!0===x.attr(b,"hidden");d&&d(b,j);j.type=j.type?u.getObject(j.type):k.grid.cells.Cell;j.type&&j.type.markupFactory&&j.type.markupFactory(b,j);i.cells[c]||(i.cells[c]=[]);i.cells[c].push(j)})});return new c(a,b)};return j})},"dojox/grid/_Events":function(){define(["dojo/keys",
"dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(i,k,j,h,c){return j("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(c){this.dispatchKeyEvent(c)},onContentEvent:function(c){this.dispatchContentEvent(c)},onHeaderEvent:function(c){this.dispatchHeaderEvent(c)},onStyleRow:function(c){c.customClasses+=(c.odd?" dojoxGridRowOdd":"")+(c.selected?" dojoxGridRowSelected":"")+(c.over?" dojoxGridRowOver":"");this.focus.styleRow(c);this.edit.styleRow(c)},
onKeyDown:function(c){if(!c.altKey&&!c.metaKey){var g;switch(c.keyCode){case i.ESCAPE:this.edit.cancel();break;case i.ENTER:if(!this.edit.isEditing()){g=this.focus.getHeaderIndex();if(0<=g){this.setSortIndex(g);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(c),c.shiftKey);h.stop(c)}c.shiftKey||(g=this.edit.isEditing(),this.edit.apply(),g||this.edit.setEditCell(this.focus.cell,this.focus.rowIndex));this.edit.isEditing()||((this.focus.focusView||this.views.views[0]).content.decorateEvent(c),
this.onRowClick(c),h.stop(c));break;case i.SPACE:if(!this.edit.isEditing()){g=this.focus.getHeaderIndex();if(0<=g){this.setSortIndex(g);break}else this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(c),c.shiftKey);h.stop(c)}break;case i.TAB:this.focus[c.shiftKey?"previousKey":"nextKey"](c);break;case i.LEFT_ARROW:case i.RIGHT_ARROW:if(!this.edit.isEditing()){var b=c.keyCode;h.stop(c);g=this.focus.getHeaderIndex();0<=g&&c.shiftKey&&c.ctrlKey?this.focus.colSizeAdjust(c,g,5*(b==i.LEFT_ARROW?
-1:1)):(c=b==i.LEFT_ARROW?1:-1,this.isLeftToRight()&&(c*=-1),this.focus.move(0,c))}break;case i.UP_ARROW:!this.edit.isEditing()&&0!==this.focus.rowIndex&&(h.stop(c),this.focus.move(-1,0));break;case i.DOWN_ARROW:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(h.stop(c),this.focus.move(1,0));break;case i.PAGE_UP:!this.edit.isEditing()&&0!==this.focus.rowIndex&&(h.stop(c),this.focus.rowIndex!=this.scroller.firstVisibleRow+1?this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,
0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1)),this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0)));break;case i.PAGE_DOWN:!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount&&(h.stop(c),this.focus.rowIndex!=this.scroller.lastVisibleRow-1?this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0):(this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1)),this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-
1,0)))}}},onMouseOver:function(c){-1==c.rowIndex?this.onHeaderCellMouseOver(c):this.onCellMouseOver(c)},onMouseOut:function(c){-1==c.rowIndex?this.onHeaderCellMouseOut(c):this.onCellMouseOut(c)},onMouseDown:function(c){-1==c.rowIndex?this.onHeaderCellMouseDown(c):this.onCellMouseDown(c)},onMouseOverRow:function(c){this.rows.isOver(c.rowIndex)||(this.rows.setOverRow(c.rowIndex),-1==c.rowIndex?this.onHeaderMouseOver(c):this.onRowMouseOver(c))},onMouseOutRow:function(c){if(this.rows.isOver(-1))this.onHeaderMouseOut(c);
else this.rows.isOver(-2)||(this.rows.setOverRow(-2),this.onRowMouseOut(c))},onMouseDownRow:function(c){if(-1!=c.rowIndex)this.onRowMouseDown(c)},onCellMouseOver:function(c){c.cellNode&&k.add(c.cellNode,this.cellOverClass)},onCellMouseOut:function(c){c.cellNode&&k.remove(c.cellNode,this.cellOverClass)},onCellMouseDown:function(){},onCellClick:function(c){this._click[0]=this._click[1];this._click[1]=c;this.edit.isEditCell(c.rowIndex,c.cellIndex)||this.focus.setFocusCell(c.cell,c.rowIndex);1<this._click.length&&
null==this._click[0]&&this._click.shift();this.onRowClick(c)},onCellDblClick:function(e){var g;g=1<this._click.length&&c("ie")?this._click[1]:1<this._click.length&&this._click[0].rowIndex!=this._click[1].rowIndex?this._click[0]:e;this.focus.setFocusCell(g.cell,g.rowIndex);this.onRowClick(g);this.edit.setEditCell(g.cell,g.rowIndex);this.onRowDblClick(e)},onCellContextMenu:function(c){this.onRowContextMenu(c)},onCellFocus:function(c,g){this.edit.cellFocus(c,g)},onRowClick:function(c){this.edit.rowClick(c);
this.selection.clickSelectEvent(c)},onRowDblClick:function(){},onRowMouseOver:function(){},onRowMouseOut:function(){},onRowMouseDown:function(){},onRowContextMenu:function(c){h.stop(c)},onHeaderMouseOver:function(){},onHeaderMouseOut:function(){},onHeaderCellMouseOver:function(c){c.cellNode&&k.add(c.cellNode,this.cellOverClass)},onHeaderCellMouseOut:function(c){c.cellNode&&k.remove(c.cellNode,this.cellOverClass)},onHeaderCellMouseDown:function(){},onHeaderClick:function(){},onHeaderCellClick:function(c){this.setSortIndex(c.cell.index);
this.onHeaderClick(c)},onHeaderDblClick:function(){},onHeaderCellDblClick:function(c){this.onHeaderDblClick(c)},onHeaderCellContextMenu:function(c){this.onHeaderContextMenu(c)},onHeaderContextMenu:function(c){this.headerMenu||h.stop(c)},onStartEdit:function(){},onApplyCellEdit:function(){},onCancelEdit:function(){},onApplyEdit:function(){},onCanSelect:function(){return!0},onCanDeselect:function(){return!0},onSelected:function(c){this.updateRowStyles(c)},onDeselected:function(c){this.updateRowStyles(c)},
onSelectionChanged:function(){}})})},"dojox/grid/_Scroller":function(){define(["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(i,k,j,h,c){var e=function(b){b&&dojo.forEach(i.toArray(),function(f){f.domNode&&c.isDescendant(f.domNode,b,!0)&&f.destroy()})},g=function(b,f){for(var a=[],d=0,e;e=b.childNodes[d];){d++;var g=c.byId(e);(g&&g.tagName?g.tagName.toLowerCase():"")==f&&a.push(e)}return a};return k("dojox.grid._Scroller",null,{constructor:function(b){this.setContentNodes(b);
this.pageHeights=[];this.pageNodes=[];this.stack=[]},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(b,c,a){switch(arguments.length){case 3:this.rowsPerPage=a;case 2:this.keepRows=c;case 1:this.rowCount=b}this.defaultPageHeight=(0<this.grid.rowHeight?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=
this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode)this.scrollboxNode.scrollTop=0,this.scroll(0),this.scrollboxNode.onscroll=j.hitch(this,"onscroll")},_getPageCount:function(b,c){return b?Math.ceil(b/c)||1:0},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode},setKeepInfo:function(b){this.keepRows=b;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/
this.rowsPerPage),2)},setContentNodes:function(b){this.colCount=(this.contentNodes=b)?this.contentNodes.length:0;this.pageNodes=[];for(b=0;b<this.colCount;b++)this.pageNodes[b]=[]},getDefaultNodes:function(){return this.pageNodes[0]||[]},invalidate:function(){this._invalidating=!0;this.invalidateNodes();this.pageHeights=[];this.height=this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0;this.resize();this._invalidating=!1},updateRowCount:function(b){this.invalidateNodes();
this.rowCount=b;b=this.pageCount;if(0===b)this.height=1;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<b)for(b-=1;b>=this.pageCount;b--)this.height-=this.getPageHeight(b),delete this.pageHeights[b];else this.pageCount>b&&(this.height+=this.defaultPageHeight*(this.pageCount-b-1)+this.calcLastPageHeight());this.resize()},pageExists:function(b){return Boolean(this.getDefaultPageNode(b))},measurePage:function(b){return this.grid.rowHeight?((b+1)*this.rowsPerPage>this.rowCount?
this.rowCount-b*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight:(b=this.getDefaultPageNode(b))&&b.innerHTML?b.offsetHeight:void 0},positionPage:function(b,c){for(var a=0;a<this.colCount;a++)this.pageNodes[a][b].style.top=c+"px"},repositionPages:function(b){for(var c=this.getDefaultNodes(),a=0,d=0;d<this.stack.length;d++)a=Math.max(this.stack[d],a);for(var e=(d=c[b])?this.getPageNodePosition(d)+this.getPageHeight(b):0,b=b+1;b<=a;b++){if(d=c[b]){if(this.getPageNodePosition(d)==e)break;this.positionPage(b,
e)}e+=this.getPageHeight(b)}},installPage:function(b){for(var c=0;c<this.colCount;c++)this.contentNodes[c].appendChild(this.pageNodes[c][b])},preparePage:function(b,c){for(var a=c?this.popPage():null,d=0;d<this.colCount;d++){var e=this.pageNodes[d],g=null===a?this.createPageNode():this.invalidatePageNode(a,e);g.pageIndex=b;e[b]=g}},renderPage:function(b){var c=[],a;for(a=0;a<this.colCount;a++)c[a]=this.pageNodes[a][b];for(a=0,b*=this.rowsPerPage;a<this.rowsPerPage&&b<this.rowCount;a++,b++)this.renderRow(b,
c)},removePage:function(b){for(var c=0,b=b*this.rowsPerPage;c<this.rowsPerPage;c++,b++)this.removeRow(b)},destroyPage:function(b){for(var f=0;f<this.colCount;f++){var a=this.invalidatePageNode(b,this.pageNodes[f]);a&&c.destroy(a)}},pacify:function(){},pacifying:!1,pacifyTicks:200,setPacifying:function(b){if(this.pacifying!=b)this.pacifying=b,this.pacify(this.pacifying)},startPacify:function(){this.startPacifyTicks=(new Date).getTime()},doPacify:function(){var b=(new Date).getTime()-this.startPacifyTicks>
this.pacifyTicks;this.setPacifying(!0);this.startPacify();return b},endPacify:function(){this.setPacifying(!1)},resize:function(){if(this.scrollboxNode)this.windowHeight=this.scrollboxNode.clientHeight;for(var b=0;b<this.colCount;b++)h.setStyleHeightPx(this.contentNodes[b],Math.max(1,this.height));b=!this._invalidating;if(!b){var c=this.grid.get("autoHeight");"number"==typeof c&&c<=Math.min(this.rowsPerPage,this.rowCount)&&(b=!0)}b&&this.needPage(this.page,this.pageTop);b=this.page<this.pageCount-
1?this.rowsPerPage:this.rowCount%this.rowsPerPage||this.rowsPerPage;c=this.getPageHeight(this.page);this.averageRowHeight=0<c&&0<b?c/b:0},calcLastPageHeight:function(){if(!this.pageCount)return 0;var b=(this.rowCount%this.rowsPerPage||this.rowsPerPage)*this.defaultRowHeight;return this.pageHeights[this.pageCount-1]=b},updateContentHeight:function(b){this.height+=b;this.resize()},updatePageHeight:function(b,c,a){if(this.pageExists(b)){var d=this.getPageHeight(b),e=this.measurePage(b);void 0===e&&(e=
d);this.pageHeights[b]=e;if(d!=e){this.updateContentHeight(e-d);var g=this.grid.get("autoHeight");"number"==typeof g&&g>this.rowCount||!0===g&&!c?a?(c=this.grid.viewsNode.style,c.height=parseInt(c.height)+e-d+"px",this.repositionPages(b)):this.grid.sizeChange():this.repositionPages(b)}return e}return 0},rowHeightChanged:function(b,c){this.updatePageHeight(Math.floor(b/this.rowsPerPage),!1,c)},invalidateNodes:function(){for(;this.stack.length;)this.destroyPage(this.popPage())},createPageNode:function(){var b=
document.createElement("div");c.attr(b,"role","presentation");b.style.position="absolute";b.style[this.grid.isLeftToRight()?"left":"right"]="0";return b},getPageHeight:function(b){b=this.pageHeights[b];return void 0!==b?b:this.defaultPageHeight},pushPage:function(b){return this.stack.push(b)},popPage:function(){return this.stack.shift()},findPage:function(b){for(var c=0,a=0,d=0;c<this.pageCount&&!(d=this.getPageHeight(c),a+d>=b);c++,a+=d);this.page=c;this.pageTop=a},buildPage:function(b,c,a){this.preparePage(b,
c);this.positionPage(b,a);this.installPage(b);this.renderPage(b);this.pushPage(b)},needPage:function(b,c){var a=this.getPageHeight(b);this.pageExists(b)?this.positionPage(b,c):(this.buildPage(b,!this.grid._autoHeight&&this.keepPages&&this.stack.length>=this.keepPages,c),a=this.updatePageHeight(b,!0));return a},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop)},scroll:function(b){this.grid.scrollTop=b;if(this.colCount){this.startPacify();this.findPage(b);for(var c=this.height,a=this.getScrollBottom(b),
d=this.page,e=this.pageTop;d<this.pageCount&&(0>a||e<a);d++)e+=this.needPage(d,e);this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,b);this.lastVisibleRow=this.getLastVisibleRow(d-1,e,a);c!=this.height&&this.repositionPages(d-1);this.endPacify()}},getScrollBottom:function(b){return 0<=this.windowHeight?b+this.windowHeight:-1},processNodeEvent:function(b,c){for(var a=b.target;a&&a!=c&&a.parentNode&&a.parentNode.parentNode!=c;)a=a.parentNode;if(!a||!a.parentNode||a.parentNode.parentNode!=
c)return!1;b.topRowIndex=a.parentNode.pageIndex*this.rowsPerPage;var d=b.topRowIndex,e;a:{e=0;for(var g,h=a.parentNode;g=h.childNodes[e++];)if(g==a){e-=1;break a}e=-1}b.rowIndex=d+e;b.rowTarget=a;return!0},processEvent:function(b){return this.processNodeEvent(b,this.contentNode)},renderRow:function(){},removeRow:function(){},getDefaultPageNode:function(b){return this.getDefaultNodes()[b]},positionPageNode:function(){},getPageNodePosition:function(b){return b.offsetTop},invalidatePageNode:function(b,
c){var a=c[b];if(a)delete c[b],this.removePage(b,a),e(a),a.innerHTML="";return a},getPageRow:function(b){return b*this.rowsPerPage},getLastPageRow:function(b){return Math.min(this.rowCount,this.getPageRow(b+1))-1},getFirstVisibleRow:function(b,c,a){if(!this.pageExists(b))return 0;for(var d=this.getPageRow(b),e=this.getDefaultNodes(),b=g(e[b],"div"),e=0,h=b.length;e<h&&c<a;e++,d++)c+=b[e].offsetHeight;return d?d-1:d},getLastVisibleRow:function(b,c,a){if(!this.pageExists(b))return 0;for(var d=this.getDefaultNodes(),
e=this.getLastPageRow(b),b=g(d[b],"div"),d=b.length-1;0<=d&&c>a;d--,e--)c-=b[d].offsetHeight;return e+1},findTopRow:function(b){for(var c=this.getDefaultNodes(),c=g(c[this.page],"div"),a=0,d=c.length,e=this.pageTop,h;a<d;a++)if(h=c[a].offsetHeight,e+=h,e>=b)return this.offset=h-(e-b),a+this.page*this.rowsPerPage;return-1},findScrollTop:function(b){var c=Math.floor(b/this.rowsPerPage),a=0,d;for(d=0;d<c;d++)a+=this.getPageHeight(d);this.pageTop=a;this.page=c;this.needPage(c,this.pageTop);d=this.getDefaultNodes();
var e=g(d[c],"div"),c=b-this.rowsPerPage*c;for(d=0,b=e.length;d<b&&d<c;d++)a+=e[d].offsetHeight;return a},dummy:0})})},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom"],function(i,k,j){var h=k.getObject("grid.util",!0,i);h.na="...";h.rowIndexTag="gridRowIndex";h.gridViewTag="gridView";h.fire=function(c,e,g){var b=c&&e&&c[e];return b&&(g?b.apply(c,g):c[e]())};h.setStyleHeightPx=function(c,e){if(0<=e){var g=c.style,b=e+"px";c&&g.height!=b&&(g.height=b)}};h.mouseEvents="mouseover,mouseout,mousedown,mouseup,click,dblclick,contextmenu".split(",");
h.keyEvents=["keyup","keydown","keypress"];h.funnelEvents=function(c,e,g,b){for(var b=b?b:h.mouseEvents.concat(h.keyEvents),f=0,a=b.length;f<a;f++)e.connect(c,"on"+b[f],g)};h.removeNode=function(c){(c=j.byId(c))&&c.parentNode&&c.parentNode.removeChild(c);return c};h.arrayCompare=function(c,e){for(var g=0,b=c.length;g<b;g++)if(c[g]!=e[g])return!1;return c.length==e.length};h.arrayInsert=function(c,e,g){c.length<=e?c[e]=g:c.splice(e,0,g)};h.arrayRemove=function(c,e){c.splice(e,1)};h.arraySwap=function(c,
e,g){var b=c[e];c[e]=c[g];c[g]=b};return h})},"dojox/grid/_Layout":function(){define("dojo/_base/kernel,../main,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-geometry,./cells,./_RowSelector".split(","),function(i,k,j,h,c,e){return j("dojox.grid._Layout",null,{constructor:function(c){this.grid=c},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(c,b,f,a,d){for(var e=this.structure[c].cells[0],i=this.structure[b].cells[0],j=null,k=j=0,c=0,m;m=e[c];c++)if(m.index==f){j=c;
break}j=e.splice(j,1)[0];j.view=this.grid.views.views[b];for(c=0,m=null;m=i[c];c++)if(m.index==a){k=c;break}d||(k+=1);i.splice(k,0,j);if(f=this.grid.getCell(this.grid.getSortIndex()))f._currentlySorted=this.grid.getSortAsc();this.cells=[];for(c=f=0;b=this.structure[c];c++)for(a=0;d=b.cells[a];a++)for(e=0;m=d[e];e++){m.index=f;this.cells.push(m);if("_currentlySorted"in m)i=f+1,i*=m._currentlySorted?1:-1,this.grid.sortInfo=i,delete m._currentlySorted;f++}h.forEach(this.cells,function(a){var b=a.markup[2].split(" ");
parseInt(b[1].substring(5))!=a.index&&(b[1]='idx="'+a.index+'"',a.markup[2]=b.join(" "))});this.grid.setupHeaderMenu()},setColumnVisibility:function(c,b){var f=this.cells[c];if(f.hidden==b){f.hidden=!b;var a=f.view,d=a.viewWidth;if(d&&"auto"!=d)a._togglingColumn=e.getMarginBox(f.getHeaderNode()).w||0;a.update();return!0}return!1},addCellDef:function(e,b,f){var a=this,d=function(b){var c=0;1<b.colSpan?c=0:(c=b.width||a._defaultCellProps.width||a.defaultWidth,isNaN(c)||(c+="em"));return c},e={grid:this.grid,
subrow:e,layoutIndex:b,index:this.cells.length};if(f&&f instanceof k.grid.cells._Base)return b=c.clone(f),e.unitWidth=d(b._props),b=c.mixin(b,this._defaultCellProps,f._props,e);b=f.type||f.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||k.grid.cells.Cell;c.isString(b)&&(b=c.getObject(b));e.unitWidth=d(f);return new b(c.mixin({},this._defaultCellProps,f,e))},addRowDef:function(c,b){for(var f=[],a=0,d=0,e=!0,i=0,j;j=b[i];i++)if(j=this.addCellDef(c,i,j),f.push(j),this.cells.push(j),
e&&j.relWidth)a+=j.relWidth;else if(j.width)j=j.width,"string"==typeof j&&"%"==j.slice(-1)?d+=window.parseInt(j,10):"auto"==j&&(e=!1);a&&e&&h.forEach(f,function(b){if(b.relWidth)b.width=b.unitWidth=b.relWidth/a*(100-d)+"%"});return f},addRowsDef:function(e){var b=[];if(c.isArray(e))if(c.isArray(e[0]))for(var f=0,a;e&&(a=e[f]);f++)b.push(this.addRowDef(f,a));else b.push(this.addRowDef(0,e));return b},addViewDef:function(e){this._defaultCellProps=e.defaultCell||{};e.width&&"auto"==e.width&&delete e.width;
return c.mixin({},e,{cells:this.addRowsDef(e.rows||e.cells)})},setStructure:function(e){this.fieldIndex=0;this.cells=[];var b=this.structure=[];if(this.grid.rowSelector){var f={type:k._scopeName+".grid._RowSelector"};if(c.isString(this.grid.rowSelector)){var a=this.grid.rowSelector;"false"==a?f=null:"true"!=a&&(f.width=a)}else this.grid.rowSelector||(f=null);f&&b.push(this.addViewDef(f))}f=function(a){return null!==a&&c.isObject(a)&&("cells"in a||"rows"in a||"type"in a&&!("name"in a||"field"in a||
"get"in a))};if(c.isArray(e)){for(var a=!1,d=0,h;h=e[d];d++)if(f(h)){a=!0;break}if(a)for(d=0;h=e[d];d++)c.isArray(h)&&(c.isArray(h[0])||"name"in h[0]||"field"in h[0]||"get"in h[0])?b.push(this.addViewDef({cells:h})):f(h)&&b.push(this.addViewDef(h));else b.push(this.addViewDef({cells:e}))}else f(e)&&b.push(this.addViewDef(e));this.cellCount=this.cells.length;this.grid.setupHeaderMenu()}})})},"dojox/grid/cells":function(){define(["../main","./cells/_base"],function(i){return i.grid.cells})},"dojox/grid/cells/_base":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/lang,dojo/_base/event,dojo/_base/connect,dojo/_base/array,dojo/_base/sniff,dojo/dom,dojo/dom-attr,dojo/dom-construct,dijit/_Widget,../util".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l){var p=k("dojox.grid._DeferredTextWidget",d,{deferred:null,_destroyOnRemove:!0,postCreate:function(){this.deferred&&this.deferred.addBoth(j.hitch(this,function(a){if(this.domNode)this.domNode.innerHTML=a}))}}),r=function(){setTimeout(j.hitch.apply(i,arguments),0)},n=k("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:!1,alwaysEditing:!1,formatter:null,defaultValue:"...",value:null,hidden:!1,noresize:!1,draggable:!0,_valueProp:"value",_formatPending:!1,constructor:function(a){this._props=
a||{};j.mixin(this,a);if(void 0===this.draggable)this.draggable=!0},_defaultFormat:function(b,c){var q;var d=this.grid.formatterScope||this,f=this.formatter;if(f&&d&&"string"==typeof f)q=this.formatter=d[f],f=q;d=b!=this.defaultValue&&f?f.apply(d,c):b;if("undefined"==typeof d)return this.defaultValue;d&&d.addBoth&&(d=new p({deferred:d},a.create("span",{innerHTML:this.defaultValue})));return d&&d.declaredClass&&d.startup?"<div class='dojoxGridStubNode' linkWidget='"+d.id+"' cellIdx='"+this.index+"'>"+
this.defaultValue+"</div>":d},format:function(a,b){var c=this.grid.edit.info,d=this.get?this.get(a,b):this.value||this.defaultValue,d=d&&d.replace&&this.grid.escapeHTMLInData?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d;return this.editable&&(this.alwaysEditing||c.rowIndex==a&&c.cell==this)?this.formatEditing(d,a):this._defaultFormat(d,[d,a,this])},formatEditing:function(){},getNode:function(a){return this.view.getCellNode(a,this.index)},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index)},
getEditNode:function(a){return(this.getNode(a)||0).firstChild||0},canResize:function(){var a=this.unitWidth;return a&&"auto"!==a},isFlex:function(){var a=this.unitWidth;return a&&j.isString(a)&&("auto"==a||"%"==a.slice(-1))},applyEdit:function(a,b){this.getNode(b)&&this.grid.edit.applyCellEdit(a,this,b)},cancelEdit:function(a){this.grid.doCancelEdit(a)},_onEditBlur:function(a){this.grid.edit.isEditCell(a,this.index)&&this.grid.edit.apply()},registerOnBlur:function(a,b){this.commitOnBlur&&c.connect(a,
"onblur",function(){setTimeout(j.hitch(this,"_onEditBlur",b),250)})},needFormatNode:function(a,b){this._formatPending=!0;r(this,"_formatNode",a,b)},cancelFormatNode:function(){this._formatPending=!1},_formatNode:function(a,c){if(this._formatPending)this._formatPending=!1,g("ie")||b.setSelectable(this.grid.domNode,!0),this.formatNode(this.getEditNode(c),a,c)},formatNode:function(a,b,c){g("ie")?r(this,"focus",c,a):this.focus(c,a)},dispatchEvent:function(a,b){if(a in this)return this[a](b)},getValue:function(a){return this.getEditNode(a)[this._valueProp]},
setValue:function(a,b){var c=this.getEditNode(a);c&&(c[this._valueProp]=b)},focus:function(a,b){var c=b||this.getEditNode(a);try{l.fire(c,"focus"),l.fire(c,"select")}catch(d){}},save:function(a){this.value=this.value||this.getValue(a)},restore:function(a){this.setValue(a,this.value)},_finish:function(){b.setSelectable(this.grid.domNode,!1);this.cancelFormatNode()},apply:function(a){this.applyEdit(this.getValue(a),a);this._finish(a)},cancel:function(a){this.cancelEdit(a);this._finish(a)}});n.markupFactory=
function(a,b){var c=j.trim(f.get(a,"formatter")||"");if(c)b.formatter=j.getObject(c)||c;if(c=j.trim(f.get(a,"get")||""))b.get=j.getObject(c);c=function(b,c,d){var e=j.trim(f.get(a,b)||"");e&&(c[d||b]="false"!=e.toLowerCase())};c("sortDesc",b);c("editable",b);c("alwaysEditing",b);c("noresize",b);c("draggable",b);if(c=j.trim(f.get(a,"loadingText")||f.get(a,"defaultValue")||""))b.defaultValue=c;c=function(b,c,d){var e=j.trim(f.get(a,b)||"")||void 0;e&&(c[d||b]=e)};c("styles",b);c("headerStyles",b);c("cellStyles",
b);c("classes",b);c("headerClasses",b);c("cellClasses",b)};var m=k("dojox.grid.cells.Cell",n,{constructor:function(){this.keyFilter=this.keyFilter},keyFilter:null,formatEditing:function(a,b){this.needFormatNode(a,b);return'<input class="dojoxGridInput" type="text" value="'+a+'">'},formatNode:function(a,b,c){this.inherited(arguments);this.registerOnBlur(a,c)},doKey:function(a){this.keyFilter&&-1==String.fromCharCode(a.charCode).search(this.keyFilter)&&h.stop(a)},_finish:function(a){this.inherited(arguments);
var b=this.getEditNode(a);try{l.fire(b,"blur")}catch(c){}}});m.markupFactory=function(a,b){n.markupFactory(a,b);var c=j.trim(f.get(a,"keyFilter")||"");if(c)b.keyFilter=RegExp(c)};k("dojox.grid.cells.RowIndex",m,{name:"Row",postscript:function(){this.editable=!1},get:function(a){return a+1}}).markupFactory=function(a,b){m.markupFactory(a,b)};k("dojox.grid.cells.Select",m,{options:null,values:null,returnIndex:-1,constructor:function(){this.values=this.values||this.options},formatEditing:function(a,
b){this.needFormatNode(a,b);for(var c=['<select class="dojoxGridSelect">'],d=0,f,e;void 0!==(f=this.options[d])&&void 0!==(e=this.values[d]);d++)e=e.replace?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):e,f=f.replace?f.replace(/&/g,"&amp;").replace(/</g,"&lt;"):f,c.push("<option",a==e?" selected":"",' value="'+e+'"',">",f,"</option>");c.push("</select>");return c.join("")},_defaultFormat:function(a,b){var c=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var d=e.indexOf(this.values,
c);0<=d&&(c=this.options[d])}return c},getValue:function(a){var b=this.getEditNode(a);if(b)return a=b.selectedIndex,b=b.options[a],-1<this.returnIndex?a:b.value||b.innerHTML}}).markupFactory=function(a,b){m.markupFactory(a,b);var c=j.trim(f.get(a,"options")||"");if(c){var d=c.split(",");if(d[0]!=c)b.options=d}if(c=j.trim(f.get(a,"values")||""))if(d=c.split(","),d[0]!=c)b.values=d};var o=k("dojox.grid.cells.AlwaysEdit",m,{alwaysEditing:!0,_formatNode:function(a,b){this.formatNode(this.getEditNode(b),
a,b)},applyStaticValue:function(a){var b=this.grid.edit;b.applyCellEdit(this.getValue(a),this,a);b.start(this,a,!0)}});o.markupFactory=function(a,b){m.markupFactory(a,b)};k("dojox.grid.cells.Bool",o,{_valueProp:"checked",formatEditing:function(a){return'<input class="dojoxGridInput" type="checkbox"'+(a?' checked="checked"':"")+' style="width: auto" />'},doclick:function(a){"INPUT"==a.target.tagName&&this.applyStaticValue(a.rowIndex)}}).markupFactory=function(a,b){o.markupFactory(a,b)};return n})},
"dojox/grid/_RowSelector":function(){define(["dojo/_base/declare","./_View"],function(i,k){return i("dojox.grid._RowSelector",k,{defaultWidth:"2em",noscroll:!0,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden"},getWidth:function(){return this.viewWidth||this.defaultWidth},buildRowContent:function(i,h){h.innerHTML='<table class="dojoxGridRowbarTable" style="width:'+(this.contentWidth||
0)+'px;height:1px;" border="0" cellspacing="0" cellpadding="0" role="presentation"><tr><td class="dojoxGridRowbarInner">&nbsp;</td></tr></table>'},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight()},adaptWidth:function(){if(!("contentWidth"in this)&&this.contentNode&&0<this.contentNode.offsetWidth)this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth},doStyleRowNode:function(i,h){var c=["dojoxGridRowbar dojoxGridNonNormalizedCell"];this.grid.rows.isOver(i)&&
c.push("dojoxGridRowbarOver");this.grid.selection.isSelected(i)&&c.push("dojoxGridRowbarSelected");h.className=c.join(" ")},domouseover:function(i){this.grid.onMouseOverRow(i)},domouseout:function(i){if(!this.isIntraRowEvent(i))this.grid.onMouseOutRow(i)}})})},"dojox/grid/_View":function(){define("dojo,dijit/registry,../main,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/connect,dojo/_base/sniff,dojo/query,dojo/_base/window,dojo/text!./resources/View.html,dojo/dnd/Source,dijit/_Widget,dijit/_TemplatedMixin,dojox/html/metrics,./util,dojo/_base/html,./_Builder,dojo/dnd/Avatar,dojo/dnd/Manager".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m,o,s,t,q){var d=h("dojox.grid._View",[p,r],{defaultWidth:"18em",viewWidth:"",templateString:d,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:s._HeaderBuilder,_contentBuilderClass:s._ContentBuilder,postMixInProperties:function(){this.rowNodes={}},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");m.funnelEvents(this.contentNode,this,"doContentEvent","mouseover,mouseout,click,dblclick,contextmenu,mousedown".split(","));
m.funnelEvents(this.headerNode,this,"doHeaderEvent","dblclick,mouseover,mouseout,mousemove,mousedown,click,contextmenu".split(","));this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight())this.headerNodeContainer.style.width=""},destroy:function(){o.destroy(this.headerNode);delete this.headerNode;for(var a in this.rowNodes)this._cleanupRowWidgets(this.rowNodes[a]),o.destroy(this.rowNodes[a]);this.rowNodes={};this.source&&this.source.destroy();
this.inherited(arguments)},focus:function(){b("ie")||b("webkit")||b("opera")?this.hiddenFocusNode.focus():this.scrollboxNode.focus()},setStructure:function(a){a=this.structure=a;this.viewWidth=a.width&&!isNaN(a.width)?a.width+"em":a.width||(a.noscroll?"auto":this.viewWidth);this._onBeforeRow=a.onBeforeRow||function(){};this._onAfterRow=a.onAfterRow||function(){};if(this.noscroll=a.noscroll)this.scrollboxNode.style.overflow="hidden";this.simpleStructure=Boolean(1==a.cells.length);this.testFlexCells();
this.updateStructure()},_cleanupRowWidgets:function(a){a&&c.forEach(f("[widgetId]",a).map(k.byNode),function(a){a._destroyOnRemove?(a.destroy(),delete a):a.domNode&&a.domNode.parentNode&&a.domNode.parentNode.removeChild(a.domNode)})},onBeforeRow:function(a,b){this._onBeforeRow(a,b);0<=a&&this._cleanupRowWidgets(this.getRowNode(a))},onAfterRow:function(a,b,d){this._onAfterRow(a,b,d);var e=this.grid;c.forEach(f(".dojoxGridStubNode",d),function(a){if(a&&a.parentNode){var b=a.getAttribute("linkWidget"),
c=window.parseInt(o.attr(a,"cellIdx"),10);e.getCell(c);(b=k.byId(b))?(a.parentNode.replaceChild(b.domNode,a),b._started||b.startup(),i.destroy(a)):a.innerHTML=""}},this)},testFlexCells:function(){this.flexCells=!1;for(var a=0,b;b=this.structure.cells[a];a++)for(var c=0,d;d=b[c];c++)d.view=this,this.flexCells=this.flexCells||d.isFlex();return this.flexCells},updateStructure:function(){this.header.update();this.content.update()},getScrollbarWidth:function(){var a=this.hasVScrollbar(),b=o.style(this.scrollboxNode,
"overflow");this.noscroll||!b||"hidden"==b?a=!1:"scroll"==b&&(a=!0);return a?n.getScrollbar().w:0},getColumnsWidth:function(){var a=this.headerContentNode;return a&&a.firstChild?a.firstChild.offsetWidth||o.style(a.firstChild,"width"):0},setColumnsWidth:function(a){this.headerContentNode.firstChild.style.width=a+"px";if(this.viewWidth)this.viewWidth=a+"px"},getWidth:function(){return this.viewWidth||this.getColumnsWidth()+this.getScrollbarWidth()+"px"},getContentWidth:function(){return Math.max(0,
o._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px"},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(0<=this._togglingColumn)this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn),this._togglingColumn=-1;var c=this.grid.layout.cells,d=e.hitch(this,function(a,b){!this.grid.isLeftToRight()&&(b=!b);for(var d=b?-1:1,f=this.header.getCellNodeIndex(a)+d,e=c[f];e&&e.getHeaderNode()&&"none"==e.getHeaderNode().style.display;)f+=d,e=c[f];return e?e.getHeaderNode():
null});if(this.grid.columnReordering&&this.simpleStructure){this.source&&this.source.destroy();this.bottomMarker&&o.destroy(this.bottomMarker);this.bottomMarker=o.byId("dojoxGrid_bottomMarker");this.topMarker&&o.destroy(this.topMarker);this.topMarker=o.byId("dojoxGrid_topMarker");if(!this.bottomMarker)this.bottomMarker=o.create("div",{id:"dojoxGrid_bottomMarker","class":"dojoxGridColPlaceBottom"},a.body()),this._hide(this.bottomMarker),this.topMarker=o.create("div",{id:"dojoxGrid_topMarker","class":"dojoxGridColPlaceTop"},
a.body()),this._hide(this.topMarker);this.arrowDim=o.contentBox(this.bottomMarker);var f=o.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new l(this.headerContentNode.firstChild.rows[0],{horizontal:!0,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:!1,onMouseDown:e.hitch(this,function(a){this.header.decorateEvent(a);if((this.header.overRightResizeArea(a)||this.header.overLeftResizeArea(a))&&this.header.canResize(a)&&!this.header.moveable)this.header.beginColumnResize(a);
else{if(this.grid.headerMenu)this.grid.headerMenu.onCancel(!0);a.button===(9>b("ie")?1:0)&&l.prototype.onMouseDown.call(this.source,a)}}),onMouseOver:e.hitch(this,function(a){var b=this.source;b._getChildByEvent(a)&&l.prototype.onMouseOver.apply(b,arguments)}),_markTargetAnchor:e.hitch(this,function(a){var b=this.source;if(!(b.current==b.targetAnchor&&b.before==a)){b.targetAnchor&&d(b.targetAnchor,b.before)&&b._removeItemClass(d(b.targetAnchor,b.before),b.before?"After":"Before");l.prototype._markTargetAnchor.call(b,
a);var c=a?b.targetAnchor:d(b.targetAnchor,b.before),a=0;if(!c)c=b.targetAnchor,a=o.contentBox(c).w+this.arrowDim.w/2+2;c=o.position(c,!0);a=Math.floor(c.x-this.arrowDim.w/2+a);o.style(this.bottomMarker,"visibility","visible");o.style(this.topMarker,"visibility","visible");o.style(this.bottomMarker,{left:a+"px",top:f+c.y+"px"});o.style(this.topMarker,{left:a+"px",top:c.y-this.arrowDim.h+"px"});b.targetAnchor&&d(b.targetAnchor,b.before)&&b._addItemClass(d(b.targetAnchor,b.before),b.before?"After":
"Before")}}),_unmarkTargetAnchor:e.hitch(this,function(){var a=this.source;a.targetAnchor&&(a.targetAnchor&&d(a.targetAnchor,a.before)&&a._removeItemClass(d(a.targetAnchor,a.before),a.before?"After":"Before"),this._hide(this.bottomMarker),this._hide(this.topMarker),l.prototype._unmarkTargetAnchor.call(a))}),destroy:e.hitch(this,function(){g.disconnect(this._source_conn);g.unsubscribe(this._source_sub);l.prototype.destroy.call(this.source);this.bottomMarker&&(o.destroy(this.bottomMarker),delete this.bottomMarker);
this.topMarker&&(o.destroy(this.topMarker),delete this.topMarker)}),onDndCancel:e.hitch(this,function(){l.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker)})});this._source_conn=g.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=g.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup()}},_hide:function(a){o.style(a,{top:"-10000px",visibility:"hidden"})},_onDndDropBefore:function(a){if(q.manager().target===this.source){this.source._targetNode=
this.source.targetAnchor;this.source._beforeTarget=this.source.before;var b=this.grid.views.views,a=b[a.viewIndex],b=b[this.index];b!=a&&(a.convertColPctToFixed(),b.convertColPctToFixed())}},_onDndDrop:function(a,b){if(q.manager().target!==this.source){if(q.manager().source===this.source)this._removingColumn=!0}else{this._hide(this.bottomMarker);this._hide(this.topMarker);var c=o.marginBox(b[0]).w;if(a.viewIndex!==this.index){var d=this.grid.views.views,f=d[a.viewIndex],d=d[this.index];f.viewWidth&&
"auto"!=f.viewWidth&&f.setColumnsWidth(f.getColumnsWidth()-c);d.viewWidth&&"auto"!=d.viewWidth&&d.setColumnsWidth(d.getColumnsWidth())}c=this.source._targetNode;f=this.source._beforeTarget;!this.grid.isLeftToRight()&&(f=!f);var d=this.grid.layout,e=this.index;delete this.source._targetNode;delete this.source._beforeTarget;d.moveColumn(a.viewIndex,e,b[0]?o.attr(b[0],"idx"):null,c?o.attr(c,"idx"):null,f)}},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);
if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;m.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode])},_getHeaderContent:function(a){var b=a.name||a.grid.getCellName(a);/^\s+$/.test(b)&&(b="&nbsp;");var c=['<div class="dojoxGridSortNode'];a.index!=a.grid.getSortIndex()?c.push('">'):c=c.concat([" ",0<a.grid.sortInfo?"dojoxGridSortUp":"dojoxGridSortDown",'"><div class="dojoxGridArrowButtonChar">',0<a.grid.sortInfo?
"&#9650;":"&#9660;",'</div><div class="dojoxGridArrowButtonNode" role="presentation"></div>','<div class="dojoxGridColCaption">']);c=c.concat([b,"</div></div>"]);return c.join("")},resize:function(){this.adaptHeight();this.adaptWidth()},hasHScrollbar:function(a){var b=this._hasHScroll||!1;if(void 0==this._hasHScroll||a)this.noscroll?this._hasHScroll=!1:(a=o.style(this.scrollboxNode,"overflow"),this._hasHScroll="hidden"==a?!1:"scroll"==a?!0:this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);
b!==this._hasHScroll&&this.grid.update();return this._hasHScroll},hasVScrollbar:function(a){var b=this._hasVScroll||!1;if(void 0==this._hasVScroll||a)this.noscroll?this._hasVScroll=!1:(a=o.style(this.scrollboxNode,"overflow"),this._hasVScroll="hidden"==a?!1:"scroll"==a?!0:this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);b!==this._hasVScroll&&this.grid.update();return this._hasVScroll},convertColPctToFixed:function(){var a=!1;this.grid.initialWidth="";var b=f("th",this.headerContentNode),
d=c.map(b,function(b,c){var d=b.style.width;o.attr(b,"vIdx",c);if(d&&"%"==d.slice(-1))a=!0;else if(d&&"px"==d.slice(-2))return window.parseInt(d,10);return o.contentBox(b).w});return a?(c.forEach(this.grid.layout.cells,function(a,b){if(a.view==this){var c=a.view.getHeaderCellNode(a.index);if(c&&o.hasAttr(c,"vIdx")){var f=window.parseInt(o.attr(c,"vIdx"));this.setColWidth(b,d[f]);o.removeAttr(c,"vIdx")}}},this),!0):!1},adaptHeight:function(a){if(!this.grid._autoHeight){var b=this.domNode.style.height&&
parseInt(this.domNode.style.height.replace(/px/,""),10)||this.domNode.clientHeight;if(!a&&(a=this.noscroll))a:{for(var c in this.grid.views.views)if(a=this.grid.views.views[c],a!==this&&a.hasHScrollbar()){a=!0;break a}a=!1}a&&(b-=n.getScrollbar().h);m.setStyleHeightPx(this.scrollboxNode,b)}this.hasVScrollbar(!0)},adaptWidth:function(){if(this.flexCells)this.contentWidth=this.getContentWidth(),this.headerContentNode.firstChild.style.width=this.contentWidth;var a=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();
this._removingColumn?(a=Math.min(a,this.getColumnsWidth())+"px",this._removingColumn=!1):a=Math.max(a,this.getColumnsWidth())+"px";this.contentNode.style.width=a;this.hasHScrollbar(!0)},setSize:function(a,b){var c=this.domNode.style,d=this.headerNode.style;if(a)c.width=a,d.width=a;c.height=0<=b?b+"px":""},renderRow:function(a){var b=this.createRowNode(a);this.buildRow(a,b);return b},createRowNode:function(a){var b=document.createElement("div");b.className=this.classTag+"Row";this instanceof j.grid._RowSelector?
o.attr(b,"role","presentation"):(o.attr(b,"role","row"),"none"!=this.grid.selectionMode&&b.setAttribute("aria-selected","false"));b[m.gridViewTag]=this.id;b[m.rowIndexTag]=a;return this.rowNodes[a]=b},buildRow:function(a,b){this.buildRowContent(a,b);this.styleRow(a,b)},buildRowContent:function(a,b){b.innerHTML=this.content.generateHtml(a,a);if(this.flexCells&&this.contentWidth)b.firstChild.style.width=this.contentWidth;m.fire(this,"onAfterRow",[a,this.structure.cells,b])},rowRemoved:function(a){0<=
a&&this._cleanupRowWidgets(this.getRowNode(a));this.grid.edit.save(this,a);delete this.rowNodes[a]},getRowNode:function(a){return this.rowNodes[a]},getCellNode:function(a,b){var c=this.getRowNode(a);if(c)return this.content.getCellNode(c,b)},getHeaderCellNode:function(a){if(this.headerContentNode)return this.header.getCellNode(this.headerContentNode,a)},styleRow:function(a,b){b._style=void 0==b.style.cssText?b.getAttribute("style"):b.style.cssText;this.styleRowNode(a,b)},styleRowNode:function(a,b){b&&
this.doStyleRowNode(a,b)},doStyleRowNode:function(a,b){this.grid.styleRowNode(a,b)},updateRow:function(a){var b=this.getRowNode(a);if(b)b.style.height="",this.buildRow(a,b);return b},updateRowStyles:function(a){this.styleRowNode(a,this.getRowNode(a))},lastTop:0,firstScroll:0,_nativeScroll:!1,doscroll:function(){if(13<=b("ff"))this._nativeScroll=!0;var a=this.grid.isLeftToRight();if(2>this.firstScroll){if(!a&&1==this.firstScroll||a&&0===this.firstScroll){var c=o.marginBox(this.headerNodeContainer);
if(b("ie"))this.headerNodeContainer.style.width=c.w+this.getScrollbarWidth()+"px";else if(b("mozilla"))this.headerNodeContainer.style.width=c.w-this.getScrollbarWidth()+"px",this.scrollboxNode.scrollLeft=a?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth}this.firstScroll++}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;a=this.scrollboxNode.scrollTop;a!==this.lastTop&&this.grid.scrollTo(a);this._nativeScroll=!1},setScrollTop:function(a){this.lastTop=
a;if(!this._nativeScroll)this.scrollboxNode.scrollTop=a;return this.scrollboxNode.scrollTop},doContentEvent:function(a){if(this.content.decorateEvent(a))this.grid.onContentEvent(a)},doHeaderEvent:function(a){if(this.header.decorateEvent(a))this.grid.onHeaderEvent(a)},dispatchContentEvent:function(a){return this.content.dispatchEvent(a)},dispatchHeaderEvent:function(a){return this.header.dispatchEvent(a)},setColWidth:function(a,b){this.grid.setCellWidth(a,b+"px")},update:function(){if(this.domNode){this.content.update();
this.grid.update();var a=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=a;this.headerNode.scrollLeft=a}}}),u=h("dojox.grid._GridAvatar",t,{construct:function(){var b=a.doc,c=b.createElement("table");c.cellPadding=c.cellSpacing="0";c.className="dojoxGridDndAvatar";c.style.position="absolute";c.style.zIndex=1999;c.style.margin="0px";var d=b.createElement("tbody"),f=b.createElement("tr"),e=b.createElement("td"),g=b.createElement("td");f.className="dojoxGridDndAvatarItem";g.className="dojoxGridDndAvatarItemImage";
g.style.width="16px";var h=this.manager.source;if(h.creator)h=h._normalizedCreator(h.getItem(this.manager.nodes[0].id).data,"avatar").node;else{var h=this.manager.nodes[0].cloneNode(!0),i,j;if("tr"==h.tagName.toLowerCase())i=b.createElement("table"),j=b.createElement("tbody"),j.appendChild(h),i.appendChild(j),h=i;else if("th"==h.tagName.toLowerCase())i=b.createElement("table"),j=b.createElement("tbody"),b=b.createElement("tr"),i.cellPadding=i.cellSpacing="0",b.appendChild(h),j.appendChild(b),i.appendChild(j),
h=i}h.id="";e.appendChild(h);f.appendChild(g);f.appendChild(e);o.style(f,"opacity",0.9);d.appendChild(f);c.appendChild(d);this.node=c;c=q.manager();this.oldOffsetY=c.OFFSET_Y;c.OFFSET_Y=1},destroy:function(){q.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments)}}),v=q.manager().makeAvatar;q.manager().makeAvatar=function(){return void 0!==this.source.viewIndex&&!o.hasClass(a.body(),"dijit_a11y")?new u(this):v.call(q.manager())};return d})},"url:dojox/grid/resources/View.html":'<div class="dojoxGridView" role="presentation">\n\t<div class="dojoxGridHeader" dojoAttachPoint="headerNode" role="presentation">\n\t\t<div dojoAttachPoint="headerNodeContainer" style="width:9000em" role="presentation">\n\t\t\t<div dojoAttachPoint="headerContentNode" role="row"></div>\n\t\t</div>\n\t</div>\n\t<input type="checkbox" class="dojoxGridHiddenFocus" dojoAttachPoint="hiddenFocusNode" role="presentation" />\n\t<input type="checkbox" class="dojoxGridHiddenFocus" role="presentation" />\n\t<div class="dojoxGridScrollbox" dojoAttachPoint="scrollboxNode" role="presentation">\n\t\t<div class="dojoxGridContent" dojoAttachPoint="contentNode" hidefocus="hidefocus" role="presentation"></div>\n\t</div>\n</div>\n',
"dojo/dnd/Source":function(){define("../_base/array,../_base/connect,../_base/declare,../_base/kernel,../_base/lang,../dom-class,../dom-geometry,../mouse,../ready,../topic,./common,./Selector,./Manager".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p){h.isAsync||f(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var r=j("dojo.dnd.Source",l,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,
constructor:function(b,d){c.mixin(this,c.mixin({},d));var f=this.accept;if(f.length){this.accept={};for(var g=0;g<f.length;++g)this.accept[f[g]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&e.add(this.node,"dojoDndSource");this.targetState="";this.accept&&e.add(this.node,"dojoDndTarget");this.horizontal&&e.add(this.node,"dojoDndHorizontal");this.topics=[a.subscribe("/dnd/source/over",c.hitch(this,
"onDndSourceOver")),a.subscribe("/dnd/start",c.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",c.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",c.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var d=a.getItem(b[c].id).type,f=!1,e=0;e<d.length;++e)if(d[e]in this.accept){f=!0;break}if(!f)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==p.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;
return!1},destroy:function(){r.superclass.destroy.call(this);i.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){r.superclass.onMouseMove.call(this,a);var b=p.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(d.getCopyKeyState(a),!0))}if(this.isDragging){c=
!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=g.position(this.current,!0);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==g.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||c!=this.before)this._markTargetAnchor(c),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||
!d.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,r.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,r.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):this.isDragging&&(a=p.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&
this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&p.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,d){if(this==d)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),this.targetAnchor=null;this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target",
"")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var f=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return f.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=d.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();
this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=f},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);a.id=d.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=
function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){r.superclass.onOverEvent.call(this);p.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},onOutEvent:function(){r.superclass.onOutEvent.call(this);p.manager().outSource(this);if(this.isDragging&&"Disabled"!=
this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetBox=
this.targetAnchor=null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!b.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(e.contains(a,"dojoDndHandle"))return!0;if(e.contains(a,"dojoDndItem")||e.contains(a,"dojoDndIgnore"))break}return!1}});return r})},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],
function(i,k,j,h){var c={};c.getCopyKeyState=i.isCopyKey;c._uniqueId=0;c.getUniqueId=function(){var e;do e=k._scopeName+"Unique"+ ++c._uniqueId;while(h.byId(e));return e};c._empty={};c.isFormElement=function(c){c=c.target;if(3==c.nodeType)c=c.parentNode;return 0<=" button textarea input select option ".indexOf(" "+c.tagName.toLowerCase()+" ")};j.mixin(j.getObject("dojo.dnd",!0),c);return c})},"dojo/dnd/Selector":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../dom,../dom-construct,../mouse,../_base/NodeList,../on,../touch,./common,./Container".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p){var r=k("dojo.dnd.Selector",p,{constructor:function(b,f){f||(f={});this.singular=f.singular;this.autoSync=f.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(a(this.node,d.press,c.hitch(this,"onMouseDown")),a(this.node,d.release,c.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new f,b=l._empty,c;for(c in this.selection)c in b||a.push(e.byId(c));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(e.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=l._empty,b;for(b in this.selection)if(!(b in a)){var c=e.byId(b);this.delItem(b);g.destroy(c)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){var b=b||h.global,c=this.selection,d=l._empty,f;for(f in c)f in d||a.call(b,this.getItem(f),f,this)},sync:function(){r.superclass.sync.call(this);
if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=l._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);i.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,d){var f=this._normalizedCreator;this._normalizedCreator=function(b,c){var d=f.call(this,b,c);a?(this.anchor?this.anchor!=d.node&&(this._removeItemClass(d.node,"Anchor"),this._addItemClass(d.node,"Selected")):(this.anchor=d.node,this._removeItemClass(d.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[d.node.id]=1):(this._removeItemClass(d.node,"Selected"),this._removeItemClass(d.node,"Anchor"));return d};r.superclass.insertNodes.call(this,b,c,d);this._normalizedCreator=f;return this},destroy:function(){r.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!l.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,b.isLeft(a)&&j.stop(a);else{if(!this.singular&&a.shiftKey){l.getCopyKeyState(a)||this._removeSelection();var c=this.getAllNodes();if(c.length){if(!this.anchor)this.anchor=c[0],this._addItemClass(this.anchor,"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var d=0,f;d<c.length&&!(f=c[d],f==this.anchor||f==this.current);++d);for(++d;d<c.length;++d){f=c[d];if(f==this.anchor||f==this.current)break;this._addItemClass(f,"Selected");this.selection[f.id]=1}this._addItemClass(this.current,
"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?l.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1);else if(l.getCopyKeyState(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&
(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;j.stop(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=a(this.node,d.move,c.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=l._empty,b;for(b in this.selection)if(!(b in a)){var c=e.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,
"Anchor"),this.anchor=null;return this}});return r})},"dojo/dnd/Container":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../_base/window,../dom,../dom-class,../dom-construct,../Evented,../has,../on,../query,../ready,../touch,./common".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n,m){k=k("dojo.dnd.Container",a,{skipForm:!1,allowNested:!1,constructor:function(a,d){this.node=g.byId(a);d||(d={});this.creator=d.creator||null;this.skipForm=d.skipForm;
this.parent=d.dropParent&&g.byId(d.dropParent);this.map={};this.current=null;this.containerState="";b.add(this.node,"dojoDndContainer");(!d||!d._skipStartup)&&this.startup();this.events=[l(this.node,n.over,c.hitch(this,"onMouseOver")),l(this.node,n.out,c.hitch(this,"onMouseOut")),l(this.node,"dragstart",c.hitch(this,"onSelectStart")),l(this.node,"selectstart",c.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},
forInItems:function(a,b){var b=b||h.global,c=this.map,d=m._empty,f;for(f in c)f in d||a.call(b,c[f],f,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return p((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=m.getUniqueId();var c=b.getAttribute("dndType"),d=b.getAttribute("dndData");a[b.id]={data:d||b.innerHTML,type:c?c.split(/\s*,\s*/):
["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=null;var d;if(c)for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),c.parentNode.insertBefore(d.node,c);else for(b=0;b<a.length;++b)d=this._normalizedCreator(a[b]),this.setItem(d.node.id,{data:d.data,type:d.type}),this.parent.appendChild(d.node);return this},destroy:function(){i.forEach(this.events,
function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}this.defaultCreator=m._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&!(b==this.node);)try{b=b.parentNode}catch(c){b=null}b||
(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){(!this.skipForm||!m.isFormElement(a))&&
j.stop(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,c){var d="dojoDnd"+a,f=a.toLowerCase()+"State";b.replace(this.node,d+c,d+this[f]);this[f]=c},_addItemClass:function(a,c){b.add(a,"dojoDndItem"+c)},_removeItemClass:function(a,c){b.remove(a,"dojoDndItem"+c)},_getChildByEvent:function(a){if(a=a.target)for(var c=a.parentNode;c;a=c,c=a.parentNode)if((c==this.parent||this.allowNested)&&b.contains(a,"dojoDndItem"))return a;return null},_normalizedCreator:function(a,d){var f=
(this.creator||this.defaultCreator).call(this,a,d);if(!c.isArray(f.type))f.type=["text"];if(!f.node.id)f.node.id=m.getUniqueId();b.add(f.node,"dojoDndItem");return f}});m._createNode=function(a){return!a?m._createSpan:function(b){return f.create(a,{innerHTML:b})}};m._createTrTd=function(a){var b=f.create("tr");f.create("td",{innerHTML:a},b);return b};m._createSpan=function(a){return f.create("span",{innerHTML:a})};m._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};m._defaultCreator=function(a){var a=
a.tagName.toLowerCase(),b="tbody"==a||"thead"==a?m._createTrTd:m._createNode(m._defaultCreatorNodes[a]);return function(a,d){var f=a&&c.isObject(a),e,g;f&&a.tagName&&a.nodeType&&a.getAttribute?(e=a.getAttribute("dndData")||a.innerHTML,f=(f=a.getAttribute("dndType"))?f.split(/\s*,\s*/):["text"],g=a):(e=f&&a.data?a.data:a,f=f&&a.type?a.type:["text"],g=("avatar"==d?m._createSpan:b)(""+e));if(!g.id)g.id=m.getUniqueId();return{node:g,data:e,type:f}}};return k})},"dojo/dnd/Manager":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n){var m=k("dojo.dnd.Manager",[g],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:b("touch")?0:16,OFFSET_Y:b("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();d.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=
null,this.canDropFlag=!1,this.avatar.update(),d.publish("/dnd/source/over",null)}else d.publish("/dnd/source/over",null)},startDrag:function(b,f,g){r.autoScrollStart(c.doc);this.source=b;this.nodes=f;this.copy=Boolean(g);this.avatar=this.makeAvatar();c.body().appendChild(this.avatar.node);d.publish("/dnd/start",b,f,this.copy);this.events=[a(c.doc,l.move,h.hitch(this,"onMouseMove")),a(c.doc,l.release,h.hitch(this,"onMouseUp")),a(c.doc,"keydown",h.hitch(this,"onKeyDown")),a(c.doc,"keyup",h.hitch(this,
"onKeyUp")),a(c.doc,"dragstart",j.stop),a(c.body(),"selectstart",j.stop)];e.add(c.body(),"dojoDnd"+(g?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){e.remove(c.body(),["dojoDndCopy","dojoDndMove"]);i.forEach(this.events,function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new n(this)},updateAvatar:function(){this.avatar.update()},
onMouseMove:function(a){var c=this.avatar;if(c)r.autoScrollNodes(a),c=c.node.style,c.left=a.pageX+this.OFFSET_X+"px",c.top=a.pageY+this.OFFSET_Y+"px",c=Boolean(this.source.copyState(p.getCopyKeyState(a))),this.copy!=c&&this._setCopyStatus(c);b("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&this.canDropFlag){var b=Boolean(this.source.copyState(p.getCopyKeyState(a)));d.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);d.publish("/dnd/drop",this.source,
this.nodes,b,this.target,a)}else d.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case f.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case f.ESCAPE:d.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==f.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();
e.replace(c.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});p._manager=null;m.manager=p.manager=function(){if(!p._manager)p._manager=new m;return p._manager};return m})},"dojo/dnd/autoscroll":function(){define("../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),function(i,k,j,h,c,e){var g={};i.setObject("dojo.dnd.autoscroll",g);g.getViewport=e.getBox;g.V_TRIGGER_AUTOSCROLL=32;g.H_TRIGGER_AUTOSCROLL=32;g.V_AUTOSCROLL_VALUE=16;
g.H_AUTOSCROLL_VALUE=16;var b,f=j.doc,a=Infinity,d=Infinity;g.autoScrollStart=function(c){f=c;b=e.getBox(f);c=j.body(f).parentNode;a=Math.max(c.scrollHeight-b.h,0);d=Math.max(c.scrollWidth-b.w,0)};g.autoScroll=function(c){var h=b||e.getBox(f),i=j.body(f).parentNode,k=0,m=0;c.clientX<g.H_TRIGGER_AUTOSCROLL?k=-g.H_AUTOSCROLL_VALUE:c.clientX>h.w-g.H_TRIGGER_AUTOSCROLL&&(k=Math.min(g.H_AUTOSCROLL_VALUE,d-i.scrollLeft));c.clientY<g.V_TRIGGER_AUTOSCROLL?m=-g.V_AUTOSCROLL_VALUE:c.clientY>h.h-g.V_TRIGGER_AUTOSCROLL&&
(m=Math.min(g.V_AUTOSCROLL_VALUE,a-i.scrollTop));window.scrollBy(k,m)};g._validNodes={div:1,p:1,td:1};g._validOverflow={auto:1,scroll:1};g.autoScrollNodes=function(a){for(var b,d,f,e,i,s,t=0,q=0,u=a.target;u;){if(1==u.nodeType&&u.tagName.toLowerCase()in g._validNodes){f=c.getComputedStyle(u);e=f.overflow.toLowerCase()in g._validOverflow;i=f.overflowX.toLowerCase()in g._validOverflow;s=f.overflowY.toLowerCase()in g._validOverflow;if(e||i||s)b=h.getContentBox(u,f),d=h.position(u,!0);if(e||i){f=Math.min(g.H_TRIGGER_AUTOSCROLL,
b.w/2);i=a.pageX-d.x;if(k("webkit")||k("opera"))i+=j.body().scrollLeft;t=0;0<i&&i<b.w&&(i<f?t=-f:i>b.w-f&&(t=f),u.scrollLeft+=t)}if(e||s){e=Math.min(g.V_TRIGGER_AUTOSCROLL,b.h/2);s=a.pageY-d.y;if(k("webkit")||k("opera"))s+=j.body().scrollTop;q=0;0<s&&s<b.h&&(s<e?q=-e:s>b.h-e&&(q=e),u.scrollTop+=q)}if(t||q)return}try{u=u.parentNode}catch(v){u=null}}g.autoScroll(a)};return g})},"dojo/dnd/Avatar":function(){define("../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),
function(i,k,j,h,c,e,g,b){return i("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var b=e.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,c,i=e.create("tbody",null,b),j=e.create("tr",null,i),k=e.create("td",null,j),n=Math.min(5,this.manager.nodes.length),m=0;g("highcontrast")&&e.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},k);e.create("span",{innerHTML:a.generateText?
this._generateText():""},k);for(h.set(j,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});m<n;++m)a.creator?c=a._normalizedCreator(a.getItem(this.manager.nodes[m].id).data,"avatar").node:(c=this.manager.nodes[m].cloneNode(!0),"tr"==c.tagName.toLowerCase()&&(j=e.create("table"),e.create("tbody",null,j).appendChild(c),c=j)),c.id="",j=e.create("tr",null,i),k=e.create("td",null,j),k.appendChild(c),h.set(j,{"class":"dojoDndAvatarItem",style:{opacity:(9-m)/10}});this.node=b},destroy:function(){e.destroy(this.node);
this.node=!1},update:function(){c.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(g("highcontrast")){var f=j.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="< ":!this.manager.canDropFlag&&!this.manager.copy?a="o":this.manager.canDropFlag||(a="x");f.innerHTML=a}b("tr.dojoDndAvatarHeader td span"+(g("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"dojox/html/metrics":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/sniff,dojo/ready,dojo/_base/unload,dojo/_base/window,dojo/dom-geometry".split(","),function(i,k,j,h,c,e,g){var b=k.getObject("dojox.html.metrics",!0),f=k.getObject("dojox");b.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(j("ie"))e.doc.documentElement.style.fontSize="100%";var b=e.doc.createElement("div"),
c=b.style;c.position="absolute";c.left="-100px";c.top="0";c.width="30px";c.height="1000em";c.borderWidth="0";c.margin="0";c.padding="0";c.outline="0";c.lineHeight="1";c.overflow="hidden";e.body().appendChild(b);for(var d in a)c.fontSize=d,a[d]=16*Math.round(12*b.offsetHeight/16)/12/1E3;e.body().removeChild(b);return a};var a=null;b.getCachedFontMeasurements=function(c){if(c||!a)a=b.getFontMeasurements();return a};var d=null,l={};b.getTextBox=function(a,b,c){var f,h;if(d)f=d;else{f=d=e.doc.createElement("div");
var i=e.doc.createElement("div");i.appendChild(f);h=i.style;h.overflow="scroll";h.position="absolute";h.left="0px";h.top="-10000px";h.width="1px";h.height="1px";h.visibility="hidden";h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";e.body().appendChild(i)}f.className="";h=f.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(1<arguments.length&&b)for(var j in b)j in l||(h[j]=b[j]);if(2<arguments.length&&c)f.className=c;f.innerHTML=a;h=g.position(f);h.w=f.parentNode.scrollWidth;
return h};var p=16,r=16;b.getScrollbar=function(){return{w:p,h:r}};b._fontResizeNode=null;b.initOnFontResize=function(){var a=b._fontResizeNode=e.doc.createElement("iframe"),c=a.style;c.position="absolute";c.width="5em";c.height="10em";c.top="-10000px";c.display="none";j("ie")?a.onreadystatechange=function(){if("complete"==a.contentWindow.document.readyState)a.onresize=a.contentWindow.parent[f._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=a.contentWindow.parent[f._scopeName].html.metrics._fontresize};
a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");e.body().appendChild(a);b.initOnFontResize=function(){}};b.onFontResize=function(){};b._fontresize=function(){b.onFontResize()};c.addOnUnload(function(){var a=b._fontResizeNode;if(a){if(j("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=null;b._fontResizeNode=null}});h(function(){try{var a=
e.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";e.body().appendChild(a);p=a.offsetWidth-a.clientWidth;r=a.offsetHeight-a.clientHeight;e.body().removeChild(a);delete a}catch(c){}"fontSizeWatch"in i.config&&i.config.fontSizeWatch&&b.initOnFontResize()});return b})},"dojox/grid/_Builder":function(){define("../main,dojo/_base/array,dojo/_base/lang,dojo/_base/window,dojo/_base/event,dojo/_base/sniff,dojo/_base/connect,dojo/dnd/Moveable,dojox/html/metrics,./util,dojo/_base/html".split(","),
function(i,k,j,h,c,e,g,b,f,a,d){var l=i.grid,p=function(a){for(;a&&"TABLE"!=a.tagName;a=a.parentNode);return a},r=function(a,b){for(var c=a;c&&b(c);c=c.parentNode);return c},n=function(a){var b=a.toUpperCase();return function(a){return a.tagName!=b}},m=a.rowIndexTag,o=a.gridViewTag,s=l._Builder=j.extend(function(a){if(a)this.view=a,this.grid=a.grid},{view:null,_table:'<table class="dojoxGridRowTable" border="0" cellspacing="0" cellpadding="0" role="presentation"',getTableArray:function(){var a=[this._table];
this.view.viewWidth&&a.push([' style="width:',this.view.viewWidth,';"'].join(""));a.push(">");return a},generateCellMarkup:function(a,b,c,d){var f=[],e;if(d){e=a.index!=a.grid.getSortIndex()?"":0<a.grid.sortInfo?'aria-sort="ascending"':'aria-sort="descending"';if(!a.id)a.id=this.grid.id+"Hdr"+a.index;e=['<th tabIndex="-1" aria-readonly="true" role="columnheader"',e,'id="',a.id,'"']}else e=['<td tabIndex="-1" role="gridcell"',this.grid.editable&&!a.editable?'aria-readonly="true"':""];a.colSpan&&e.push(' colspan="',
a.colSpan,'"');a.rowSpan&&e.push(' rowspan="',a.rowSpan,'"');e.push(' class="dojoxGridCell ');a.classes&&e.push(a.classes," ");c&&e.push(c," ");f.push(e.join(""));f.push("");e=['" idx="',a.index,'" style="'];b&&";"!=b[b.length-1]&&(b+=";");e.push(a.styles,b||"",a.hidden?"display:none;":"");a.unitWidth&&e.push("width:",a.unitWidth,";");f.push(e.join(""));f.push("");e=['"'];a.attrs&&e.push(" ",a.attrs);e.push(">");f.push(e.join(""));f.push("");f.push(d?"</th>":"</td>");return f},isCellNode:function(a){return Boolean(a&&
a!=h.doc&&d.attr(a,"idx"))},getCellNodeIndex:function(a){return a?Number(d.attr(a,"idx")):-1},getCellNode:function(a,b){for(var c=0,d;(d=a.firstChild&&((a.firstChild.rows||0)[c]||a.firstChild.childNodes[c]))&&d.cells;c++)for(var f=0,e;e=d.cells[f];f++)if(this.getCellNodeIndex(e)==b)return e;return null},findCellTarget:function(a,b){for(var c=a;c&&(!this.isCellNode(c)||c.offsetParent&&o in c.offsetParent.parentNode&&c.offsetParent.parentNode[o]!=this.view.id)&&c!=b;)c=c.parentNode;return c!=b?c:null},
baseDecorateEvent:function(a){a.dispatch="do"+a.type;a.grid=this.grid;a.sourceView=this.view;a.cellNode=this.findCellTarget(a.target,a.rowNode);a.cellIndex=this.getCellNodeIndex(a.cellNode);a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null},findTarget:function(a,b){for(var c=a;c&&c!=this.domNode&&(!(b in c)||o in c&&c[o]!=this.view.id);)c=c.parentNode;return c!=this.domNode?c:null},findRowTarget:function(a){return this.findTarget(a,m)},isIntraNodeEvent:function(a){try{return a.cellNode&&a.relatedTarget&&
d.isDescendant(a.relatedTarget,a.cellNode)}catch(b){return!1}},isIntraRowEvent:function(a){try{var b=a.relatedTarget&&this.findRowTarget(a.relatedTarget);return!b&&-1==a.rowIndex||b&&a.rowIndex==b.gridRowIndex}catch(c){return!1}},dispatchEvent:function(a){return a.dispatch in this?this[a.dispatch](a):!1},domouseover:function(a){if(a.cellNode&&a.cellNode!=this.lastOverCellNode)this.lastOverCellNode=a.cellNode,this.grid.onMouseOver(a);this.grid.onMouseOverRow(a)},domouseout:function(a){if(a.cellNode&&
a.cellNode==this.lastOverCellNode&&!this.isIntraNodeEvent(a,this.lastOverCellNode)&&(this.lastOverCellNode=null,this.grid.onMouseOut(a),!this.isIntraRowEvent(a)))this.grid.onMouseOutRow(a)},domousedown:function(a){if(a.cellNode)this.grid.onMouseDown(a);this.grid.onMouseDownRow(a)}}),i=l._ContentBuilder=j.extend(function(a){s.call(this,a)},s.prototype,{update:function(){this.prepareHtml()},prepareHtml:function(){for(var a=this.grid.get,b=this.view.structure.cells,c=0,d;d=b[c];c++)for(var f=0,e;e=d[f];f++)if(e.get=
e.get||void 0==e.value&&a,e.markup=this.generateCellMarkup(e,e.cellStyles,e.cellClasses,!1),!this.grid.editable&&e.editable)this.grid.editable=!0},generateHtml:function(b,c){var d=this.getTableArray(),f=this.view.structure.cells,e=this.grid.getItem(c);a.fire(this.view,"onBeforeRow",[c,f]);for(var g=0,h;h=f[g];g++)if(!h.hidden&&!h.header){d.push(!h.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var i=0,j,k,l,n;j=h[i];i++)k=j.markup,l=j.customClasses=[],n=j.customStyles=[],k[5]=j.format(c,
e),k[1]=l.join(" "),k[3]=n.join(";"),d.push.apply(d,k);d.push("</tr>")}d.push("</table>");return d.join("")},decorateEvent:function(a){a.rowNode=this.findRowTarget(a.target);if(!a.rowNode)return!1;a.rowIndex=a.rowNode[m];this.baseDecorateEvent(a);a.cell=this.grid.getCell(a.cellIndex);return!0}}),t=l._HeaderBuilder=j.extend(function(a){this.moveable=null;s.call(this,a)},s.prototype,{_skipBogusClicks:!1,overResizeWidth:4,minColWidth:1,update:function(){this.tableMap?this.tableMap.mapRows(this.view.structure.cells):
this.tableMap=new l._TableMap(this.view.structure.cells)},generateHtml:function(b,c){var d=this.getTableArray(),f=this.view.structure.cells;a.fire(this.view,"onBeforeRow",[-1,f]);for(var e=0,g;g=f[e];e++)if(!g.hidden){d.push(!g.invisible?"<tr>":'<tr class="dojoxGridInvisible">');for(var h=0,i,j;i=g[h];h++){i.customClasses=[];i.customStyles=[];if(this.view.simpleStructure){if(i.draggable)i.headerClasses?-1==i.headerClasses.indexOf("dojoDndItem")&&(i.headerClasses+=" dojoDndItem"):i.headerClasses="dojoDndItem";
i.attrs?-1==i.attrs.indexOf("dndType='gridColumn_")&&(i.attrs+=" dndType='gridColumn_"+this.grid.id+"'"):i.attrs="dndType='gridColumn_"+this.grid.id+"'"}j=this.generateCellMarkup(i,i.headerStyles,i.headerClasses,!0);j[5]=void 0!=c?c:b(i);j[3]=i.customStyles.join(";");j[1]=i.customClasses.join(" ");d.push(j.join(""))}d.push("</tr>")}d.push("</table>");return d.join("")},getCellX:function(a){var b,c=a.layerX;if(e("mozilla")||9<=e("ie"))b=r(a.target,n("th")),c-=b&&b.offsetLeft||0,a.sourceView.getScrollbarWidth(),
this.grid.isLeftToRight()||(table=r(b,n("table")),c-=table&&table.offsetLeft||0);b=r(a.target,function(){if(!b||b==a.cellNode)return!1;c+=0>b.offsetLeft?0:b.offsetLeft;return!0});return c},decorateEvent:function(a){this.baseDecorateEvent(a);a.rowIndex=-1;a.cellX=this.getCellX(a);return!0},prepareResize:function(a,b){do{var c=a.cellIndex;a.cellNode=c?a.cellNode.parentNode.cells[c+b]:null;a.cellIndex=a.cellNode?this.getCellNodeIndex(a.cellNode):-1}while(a.cellNode&&"none"==a.cellNode.style.display);
return Boolean(a.cellNode)},canResize:function(a){if(!a.cellNode||1<a.cellNode.colSpan)return!1;a=this.grid.getCell(a.cellIndex);return!a.noresize&&a.canResize()},overLeftResizeArea:function(a){if(d.hasClass(h.body(),"dojoDndMove"))return!1;if(e("ie")){var b=a.target;if(d.hasClass(b,"dojoxGridArrowButtonNode")||d.hasClass(b,"dojoxGridArrowButtonChar")||d.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?0<a.cellIndex&&0<a.cellX&&a.cellX<this.overResizeWidth&&this.prepareResize(a,
-1):a.cellNode&&0<a.cellX&&a.cellX<this.overResizeWidth},overRightResizeArea:function(a){if(d.hasClass(h.body(),"dojoDndMove"))return!1;if(e("ie")){var b=a.target;if(d.hasClass(b,"dojoxGridArrowButtonNode")||d.hasClass(b,"dojoxGridArrowButtonChar")||d.hasClass(b,"dojoxGridColCaption"))return!1}return this.grid.isLeftToRight()?a.cellNode&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth:0<a.cellIndex&&a.cellX>=a.cellNode.offsetWidth-this.overResizeWidth&&this.prepareResize(a,-1)},domousemove:function(a){if(!this.moveable){var b=
this.overRightResizeArea(a)?"dojoxGridColResize":this.overLeftResizeArea(a)?"dojoxGridColResize":"";b&&!this.canResize(a)&&(b="dojoxGridColNoResize");d.toggleClass(a.sourceView.headerNode,"dojoxGridColNoResize","dojoxGridColNoResize"==b);d.toggleClass(a.sourceView.headerNode,"dojoxGridColResize","dojoxGridColResize"==b);b&&c.stop(a)}},domousedown:function(a){this.moveable||((this.overRightResizeArea(a)||this.overLeftResizeArea(a))&&this.canResize(a)?this.beginColumnResize(a):(this.grid.onMouseDown(a),
this.grid.onMouseOverRow(a)))},doclick:function(a){return this._skipBogusClicks?(c.stop(a),!0):!1},colResizeSetup:function(a,b){var c=d.contentBox(a.sourceView.headerNode);if(b){this.lineDiv=document.createElement("div");var g=d.position(a.sourceView.headerNode,!0),i=d.contentBox(a.sourceView.domNode),j=a.pageX;!this.grid.isLeftToRight()&&8>e("ie")&&(j-=f.getScrollbar().w);d.style(this.lineDiv,{top:g.y+"px",left:j+"px",height:i.h+c.h+"px"});d.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=
j;h.body().appendChild(this.lineDiv)}for(var g=[],i=this.tableMap.findOverlappingNodes(a.cellNode),j=0,k;k=i[j];j++)g.push({node:k,index:this.getCellNodeIndex(k),width:k.offsetWidth});i=a.sourceView;k=this.grid.isLeftToRight()?1:-1;for(var l=a.grid.views.views,j=[],n=i.idx+k,m;m=l[n];n+=k)j.push({node:m.headerNode,left:window.parseInt(m.headerNode.style.left)});k=i.headerContentNode.firstChild;return{scrollLeft:a.sourceView.headerNode.scrollLeft,view:i,node:a.cellNode,index:a.cellIndex,w:d.contentBox(a.cellNode).w,
vw:c.w,table:k,tw:d.contentBox(k).w,spanners:g,followers:j}},beginColumnResize:function(a){this.moverDiv=document.createElement("div");d.style(this.moverDiv,{position:"absolute",left:0});h.body().appendChild(this.moverDiv);d.addClass(this.grid.domNode,"dojoxGridColumnResizing");var c=this.moveable=new b(this.moverDiv),f=this.colResizeSetup(a,!0);c.onMove=j.hitch(this,"doResizeColumn",f);g.connect(c,"onMoveStop",j.hitch(this,function(){this.endResizeColumn(f);f.node.releaseCapture&&f.node.releaseCapture();
this.moveable.destroy();delete this.moveable;this.moveable=null;d.removeClass(this.grid.domNode,"dojoxGridColumnResizing")}));a.cellNode.setCapture&&a.cellNode.setCapture();c.onMouseDown(a)},doResizeColumn:function(a,b,c){var f=c.l,f={deltaX:f,w:a.w+(this.grid.isLeftToRight()?f:-f),vw:a.vw+f,tw:a.tw+f};this.dragRecord={inDrag:a,mover:b,leftTop:c};f.w>=this.minColWidth&&(b?d.style(this.lineDiv,"left",this.lineDiv._origLeft+f.deltaX+"px"):this.doResizeNow(a,f))},endResizeColumn:function(a){if(this.dragRecord){var b=
this.dragRecord.leftTop,b=this.grid.isLeftToRight()?b.l:-b.l,b=b+(Math.max(a.w+b,this.minColWidth)-(a.w+b));e("webkit")&&a.spanners.length&&(b+=d._getPadBorderExtents(a.spanners[0].node).w);this.doResizeNow(a,{deltaX:b,w:a.w+b,vw:a.vw+b,tw:a.tw+b});delete this.dragRecord}d.destroy(this.lineDiv);d.destroy(this.moverDiv);d.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=!0;a.view.update();this._skipBogusClicks=!1;this.grid.onResizeColumn(a.index)},doResizeNow:function(a,b){a.view.convertColPctToFixed();
if(a.view.flexCells&&!a.view.testFlexCells()){var c=p(a.node);if(c)c.style.width=""}for(var d,f,c=0;d=a.spanners[c];c++)if(f=d.width+b.deltaX,0<f)d.node.style.width=f+"px",a.view.setColWidth(d.index,f);if(this.grid.isLeftToRight()||!e("ie"))for(c=0;d=a.followers[c];c++)f=d.left+b.deltaX,d.node.style.left=f+"px";a.node.style.width=b.w+"px";a.view.setColWidth(a.index,b.w);a.view.headerNode.style.width=b.vw+"px";a.view.setColumnsWidth(b.tw);if(!this.grid.isLeftToRight())a.view.headerNode.scrollLeft=
a.scrollLeft+b.deltaX}});l._TableMap=j.extend(function(a){this.mapRows(a)},{map:null,mapRows:function(a){if(a.length){this.map=[];var b;for(b=0;a[b];b++)this.map[b]=[];for(var c=0;b=a[c];c++)for(var d=0,f=0,e,g;e=b[d];d++){for(;this.map[c][f];)f++;this.map[c][f]={c:d,r:c};g=e.rowSpan||1;e=e.colSpan||1;for(var h=0;h<g;h++)for(var i=0;i<e;i++)this.map[c+h][f+i]=this.map[c][f];f+=e}}},dumpMap:function(){for(var a=0,b;b=this.map[a];a++)for(var c=0;b[c];c++);},getMapCoords:function(a,b){for(var c=0,d;d=
this.map[c];c++)for(var f=0,e;e=d[f];f++)if(e.c==b&&e.r==a)return{j:c,i:f};return{j:-1,i:-1}},getNode:function(a,b,c){return(a=a&&a.rows[b])&&a.cells[c]},_findOverlappingNodes:function(a,b,c){var q;for(var d=[],b=this.getMapCoords(b,c),c=0,f;f=this.map[c];c++)c!=b.j&&(q=(f=f[b.i])?this.getNode(a,f.r,f.c):null,f=q)&&d.push(f);return d},findOverlappingNodes:function(a){return this._findOverlappingNodes(p(a),0<=a.parentNode.rowIndex?a.parentNode.rowIndex:k.indexOf(a.parentNode.parentNode.childNodes,
a.parentNode),0<=a.cellIndex?a.cellIndex:k.indexOf(a.parentNode.cells,a))}});return{_Builder:s,_HeaderBuilder:t,_ContentBuilder:i}})},"dojo/dnd/Moveable":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p){return k("dojo.dnd.Moveable",[g],{handle:"",delay:0,skip:!1,constructor:function(d,f){this.node=c.byId(d);f||(f={});this.handle=f.handle?
c.byId(f.handle):null;if(!this.handle)this.handle=this.node;this.delay=0<f.delay?f.delay:0;this.skip=f.skip;this.mover=f.mover?f.mover:l;this.events=[b(this.handle,a.press,h.hitch(this,"onMouseDown")),b(this.handle,"dragstart",h.hitch(this,"onSelectStart")),b(this.handle,"selectstart",h.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){i.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(c){if(!this.skip||
!d.isFormElement(c)){if(this.delay)this.events.push(b(this.handle,a.move,h.hitch(this,"onMouseMove")),b(this.handle,a.release,h.hitch(this,"onMouseUp"))),this._lastX=c.pageX,this._lastY=c.pageY;else this.onDragDetected(c);j.stop(c)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);j.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();j.stop(a)},onSelectStart:function(a){(!this.skip||
!d.isFormElement(a))&&j.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){f.publish("/dnd/move/start",a);e.add(p.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){f.publish("/dnd/move/stop",a);e.remove(p.body(),"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},
"dojo/dnd/Mover":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l,p,r){return k("dojo.dnd.Mover",[a],{constructor:function(a,b,c){this.node=g.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[d(a,l.move,h.hitch(this,"onFirstMove")),d(a,l.move,h.hitch(this,
"onMouseMove")),d(a,l.release,h.hitch(this,"onMouseUp")),d(a,"dragstart",j.stop),d(a.body,"selectstart",j.stop)];r.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){r.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);j.stop(a)},onMouseUp:function(a){(c("webkit")&&c("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();j.stop(a)},onFirstMove:function(a){var c=this.node.style,d,g=this.host;switch(c.position){case "relative":case "absolute":d=
Math.round(parseFloat(c.left))||0;c=Math.round(parseFloat(c.top))||0;break;default:c.position="absolute";c=b.getMarginBox(this.node);d=e.doc.body;var h=f.getComputedStyle(d),i=b.getMarginBox(d,h),h=b.getContentBox(d,h);d=c.l-(h.l-i.l);c=c.t-(h.t-i.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=c-this.marginBox.t;if(g&&g.onFirstMove)g.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){i.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);
this.events=this.node=this.host=null}})})},"dojox/grid/_ViewManager":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(i,k,j){return i("dojox.grid._ViewManager",null,{constructor:function(h){this.grid=h},defaultWidth:200,views:[],resize:function(){this.onEach("resize")},render:function(){this.onEach("render")},addView:function(h){h.idx=this.views.length;this.views.push(h)},destroyViews:function(){for(var h=0,c;c=this.views[h];h++)c.destroy();this.views=[]},getContentNodes:function(){for(var h=
[],c=0,e;e=this.views[c];c++)h.push(e.contentNode);return h},forEach:function(h){for(var c=0,e;e=this.views[c];c++)h(e,c)},onEach:function(h,c){for(var c=c||[],e=0,g;g=this.views[e];e++)h in g&&g[h].apply(g,c)},normalizeHeaderNodeHeight:function(){for(var h=[],c=0,e;e=this.views[c];c++)e.headerContentNode.firstChild&&h.push(e.headerContentNode);this.normalizeRowNodeHeights(h)},normalizeRowNodeHeights:function(h){var c=0,e=[];if(this.grid.rowHeight)c=this.grid.rowHeight;else{if(1>=h.length)return;
for(var g=0,b;b=h[g];g++)if(!j.contains(b,"dojoxGridNonNormalizedCell"))e[g]=b.firstChild.offsetHeight,c=Math.max(c,e[g]);c=0<=c?c:0;(k("mozilla")||8<k("ie"))&&c&&c++}for(g=0;b=h[g];g++)if(e[g]!=c)b.firstChild.style.height=c+"px"},resetHeaderNodeHeight:function(){for(var h=0,c;c=this.views[h];h++)if(c=c.headerContentNode.firstChild)c.style.height=""},renormalizeRow:function(h){for(var c=[],e=0,g,b;(g=this.views[e])&&(b=g.getRowNode(h));e++)b.firstChild.style.height="",c.push(b);this.normalizeRowNodeHeights(c)},
getViewWidth:function(h){return this.views[h].getWidth()||this.defaultWidth},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(c){c.headerContentNode.style.height=""});var h=0;this.forEach(function(c){h=Math.max(c.headerNode.offsetHeight,h)});return h},measureContent:function(){var h=0;this.forEach(function(c){h=Math.max(c.domNode.offsetHeight,h)});return h},findClient:function(){var h=this.grid.elasticView||-1;if(0>h)for(var c=1,e;e=this.views[c];c++)if(e.viewWidth){for(c=
1;e=this.views[c];c++)if(!e.viewWidth){h=c;break}break}0>h&&(h=Math.floor(this.views.length/2));return h},arrange:function(h,c){var e,g,b,f=this.views.length,a=this,d=0>=c?f:this.findClient(),i=function(b,c){var d=b.domNode.style,f=b.headerNode.style;if(a.grid.isLeftToRight())d.left=c+"px",f.left=c+"px";else if(d.right=c+"px",f.right=4>k("ff")?c+b.getScrollbarWidth()+"px":c+"px",!k("webkit"))f.width=parseInt(f.width,10)-b.getScrollbarWidth()+"px";d.top="0px";f.top=0};for(e=0;(g=this.views[e])&&e<
d;e++)b=this.getViewWidth(e),g.setSize(b,0),i(g,h),b=g.headerContentNode&&g.headerContentNode.firstChild?g.getColumnsWidth()+g.getScrollbarWidth():g.domNode.offsetWidth,h+=b;e++;for(var j=c,r=f-1;(g=this.views[r])&&e<=r;r--)b=this.getViewWidth(r),g.setSize(b,0),b=g.domNode.offsetWidth,j-=b,i(g,j);d<f&&(g=this.views[d],b=Math.max(1,j-h),g.setSize(b+"px",0),i(g,h));return h},renderRow:function(h,c,e){for(var g=[],b=0,f,a;(f=this.views[b])&&(a=c[b]);b++)f=f.renderRow(h),a.appendChild(f),g.push(f);e||
this.normalizeRowNodeHeights(g)},rowRemoved:function(h){this.onEach("rowRemoved",[h])},updateRow:function(h,c){for(var e=0,g;g=this.views[e];e++)g.updateRow(h);c||this.renormalizeRow(h)},updateRowStyles:function(h){this.onEach("updateRowStyles",[h])},setScrollTop:function(h){for(var c=h,e=0,g;g=this.views[e];e++)if(c=g.setScrollTop(h),k("ie")&&g.headerNode&&g.scrollboxNode)g.headerNode.scrollLeft=g.scrollboxNode.scrollLeft;return c},getFirstScrollingView:function(){for(var h=0,c;c=this.views[h];h++)if(c.hasHScrollbar()||
c.hasVScrollbar())return c;return null}})})},"dojox/grid/_RowManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(i,k,j){return i("dojox.grid._RowManager",null,{constructor:function(h){this.grid=h},linesToEms:2,overRow:-2,prepareStylingRow:function(h,c){return{index:h,node:c,odd:Boolean(h&1),selected:!!this.grid.selection.isSelected(h),over:this.isOver(h),customStyles:"",customClasses:"dojoxGridRow"}},styleRowNode:function(h,c){var e=this.prepareStylingRow(h,
c);this.grid.onStyleRow(e);this.applyStyles(e)},applyStyles:function(h){h.node.className=h.customClasses;var c=h.node.style.height,e=h.node,g=h.customStyles+";"+(h.node._style||"");void 0==e.style.cssText?e.setAttribute("style",g):e.style.cssText=g;h.node.style.height=c},updateStyles:function(h){this.grid.updateRowStyles(h)},setOverRow:function(h){var c=this.overRow;this.overRow=h;c!=this.overRow&&(k.isString(c)||0<=c)&&this.updateStyles(c);this.updateStyles(this.overRow)},isOver:function(h){return this.overRow==
h&&!j.contains(this.grid.domNode,"dojoxGridColumnResizing")}})})},"dojox/grid/_FocusManager":function(){define("dojo/_base/array,dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,dojo/_base/event,dojo/_base/sniff,dojo/query,./util,dojo/_base/html".split(","),function(i,k,j,h,c,e,g,b,f){return j("dojox.grid._FocusManager",null,{constructor:function(a){this.grid=a;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(h.connect(this.grid.domNode,
"onfocus",this,"doFocus"));this._connects.push(h.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(h.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(h.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(h.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(h.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(h.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));
this._connects.push(h.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(h.connect(this.grid,"postrender",this,"_delayedHeaderFocus"))},destroy:function(){i.forEach(this._connects,h.disconnect);i.forEach(this._headerConnects,h.disconnect);delete this.grid;delete this.cell},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:!1,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||
this.focusView||this.grid.views.views[0];this._initColumnHeaders()},isFocusCell:function(a,b){return this.cell==a&&this.rowIndex==b},isLastFocusCell:function(){return this.cell?this.rowIndex==this.grid.rowCount-1&&this.cell.index==this.grid.layout.cellCount-1:!1},isFirstFocusCell:function(){return this.cell?0===this.rowIndex&&0===this.cell.index:!1},isNoFocusCell:function(){return 0>this.rowIndex||!this.cell},isNavHeader:function(){return!!this._colHeadNode},getHeaderIndex:function(){return this._colHeadNode?
i.indexOf(this._findHeaderCells(),this._colHeadNode):-1},_focusifyCellNode:function(a){var c=this.cell&&this.cell.getNode(this.rowIndex);if(c&&(f.toggleClass(c,this.focusClass,a),a)){a=this.scrollIntoView();try{if(e("webkit")||!this.grid.edit.isEditing())if(b.fire(c,"focus"),a)this.cell.view.scrollboxNode.scrollLeft=a}catch(g){}}},_delayedCellFocus:function(){if(!this.isNavHeader()&&this.grid.focused){var a=this.cell&&this.cell.getNode(this.rowIndex);if(a)try{this.grid.edit.isEditing()||(f.toggleClass(a,
this.focusClass,!0),this._colHeadNode&&this.blurHeader(),b.fire(a,"focus"))}catch(c){}}},_delayedHeaderFocus:function(){this.isNavHeader()&&this.focusHeader()},_initColumnHeaders:function(){i.forEach(this._headerConnects,h.disconnect);this._headerConnects=[];for(var a=this._findHeaderCells(),b=0;b<a.length;b++)this._headerConnects.push(h.connect(a[b],"onfocus",this,"doColHeaderFocus")),this._headerConnects.push(h.connect(a[b],"onblur",this,"doColHeaderBlur"))},_findHeaderCells:function(){for(var a=
g("th",this.grid.viewsHeaderNode),b=[],c=0;c<a.length;c++){var e=a[c],h=f.hasAttr(e,"tabIndex"),i=f.attr(e,"tabIndex");h&&0>i&&b.push(e)}return b},_setActiveColHeader:function(a,b,c){this.grid.domNode.setAttribute("aria-activedescendant",a.id);null!=c&&0<=c&&c!=b&&f.toggleClass(this._findHeaderCells()[c],this.focusClass,!1);f.toggleClass(a,this.focusClass,!0);this._colHeadNode=a;this._colHeadFocusIdx=b;this._scrollHeader(this._colHeadFocusIdx)},scrollIntoView:function(){var a=this.cell?this._scrollInfo(this.cell):
null;if(!a||!a.s)return null;var b=this.grid.scroller.findScrollTop(this.rowIndex);if(a.n&&a.sr)if(a.n.offsetLeft+a.n.offsetWidth>a.sr.l+a.sr.w)a.s.scrollLeft=a.n.offsetLeft+a.n.offsetWidth-a.sr.w;else if(a.n.offsetLeft<a.sr.l)a.s.scrollLeft=a.n.offsetLeft;a.r&&a.sr&&(b+a.r.offsetHeight>a.sr.t+a.sr.h?this.grid.setScrollTop(b+a.r.offsetHeight-a.sr.h):b<a.sr.t&&this.grid.setScrollTop(b));return a.s.scrollLeft},_scrollInfo:function(a,b){if(a){var c=a.view.scrollboxNode,f={w:c.clientWidth,l:c.scrollLeft,
t:c.scrollTop,h:c.clientHeight},e=a.view.getRowNode(this.rowIndex);return{c:a,s:c,sr:f,n:b?b:a.getNode(this.rowIndex),r:e}}return null},_scrollHeader:function(a){var b=null;if(this._colHeadNode){var c=this.grid.getCell(a);if(!c)return;b=this._scrollInfo(c,c.getNode(0))}if(b&&b.s&&b.sr&&b.n)if(b.n.offsetLeft+b.n.offsetWidth>b.sr.l+b.sr.w)b.s.scrollLeft=b.n.offsetLeft+b.n.offsetWidth-b.sr.w;else if(b.n.offsetLeft<b.sr.l)b.s.scrollLeft=b.n.offsetLeft;else if(7>=e("ie")&&c&&c.view.headerNode)c.view.headerNode.scrollLeft=
b.s.scrollLeft},_isHeaderHidden:function(){var a=this.focusView;if(!a)for(var b=0,c;c=this.grid.views.views[b];b++)if(c.headerNode){a=c;break}return a&&"none"==f.getComputedStyle(a.headerNode).display},colSizeAdjust:function(a,b,c){var f=this._findHeaderCells(),e=this.focusView;if(!e||!e.header.tableMap.map)for(var g=0,h;h=this.grid.views.views[g];g++)if(h.header.tableMap.map){e=h;break}g=f[b];if(e&&!(b==f.length-1&&0===b))e.content.baseDecorateEvent(a),a.cellNode=g,a.cellIndex=e.content.getCellNodeIndex(a.cellNode),
a.cell=0<=a.cellIndex?this.grid.getCell(a.cellIndex):null,e.header.canResize(a)&&(b={l:c},a=e.header.colResizeSetup(a,!1),e.header.doResizeColumn(a,null,b),e.update())},styleRow:function(){},setFocusIndex:function(a,b){this.setFocusCell(this.grid.getCell(b),a)},setFocusCell:function(a,b){if(a&&!this.isFocusCell(a,b))this.tabbingOut=!1,this._colHeadNode&&this.blurHeader(),this._colHeadNode=this._colHeadFocusIdx=null,this.focusGridView(),this._focusifyCellNode(!1),this.cell=a,this.rowIndex=b,this._focusifyCellNode(!0);
if(e("opera"))setTimeout(k.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);else this.grid.onCellFocus(this.cell,this.rowIndex)},next:function(){if(this.cell){var a=this.rowIndex,b=this.cell.index+1,c=this.grid.layout.cellCount-1,f=this.grid.rowCount-1;b>c&&(b=0,a++);a>f&&(b=c,a=f);if(this.grid.edit.isEditing()&&(c=this.grid.getCell(b),!this.isLastFocusCell()&&(!c.editable||this.grid.canEdit&&!this.grid.canEdit(c,a)))){this.cell=c;this.rowIndex=a;this.next();return}this.setFocusIndex(a,b)}},
previous:function(){if(this.cell){var a=this.rowIndex||0,b=(this.cell.index||0)-1;0>b&&(b=this.grid.layout.cellCount-1,a--);0>a&&(b=a=0);if(this.grid.edit.isEditing()){var c=this.grid.getCell(b);if(!this.isFirstFocusCell()&&!c.editable){this.cell=c;this.rowIndex=a;this.previous();return}}this.setFocusIndex(a,b)}},move:function(a,b){var c=0>b?-1:1;if(this.isNavHeader()){var e=this._findHeaderCells(),g=currentIdx=i.indexOf(e,this._colHeadNode);for(currentIdx+=b;0<=currentIdx&&currentIdx<e.length&&"none"==
e[currentIdx].style.display;)currentIdx+=c;0<=currentIdx&&currentIdx<e.length&&this._setActiveColHeader(e[currentIdx],currentIdx,g)}else if(this.cell){var h=this.grid.scroller,e=this.rowIndex,g=this.grid.rowCount-1,j=Math.min(g,Math.max(0,e+a));a&&(0<a?j>h.getLastPageRow(h.page)&&this.grid.setScrollTop(this.grid.scrollTop+h.findScrollTop(j)-h.findScrollTop(e)):0>a&&j<=h.getPageRow(h.page)&&this.grid.setScrollTop(this.grid.scrollTop-h.findScrollTop(e)-h.findScrollTop(j)));for(var h=this.grid.layout.cellCount-
1,k=this.cell.index,s=Math.min(h,Math.max(0,k+b)),t=this.grid.getCell(s);0<=s&&s<h&&t&&!0===t.hidden;)s+=c,t=this.grid.getCell(s);if(!t||!0===t.hidden)s=k;c=t.getNode(j);!c&&a?0<=j+a&&j+a<=g&&this.move(0<a?++a:--a,b):(!c||"none"===f.style(c,"display"))&&b?0<=s+b&&s+b<=h&&this.move(a,0<b?++b:--b):(this.setFocusIndex(j,s),a&&this.grid.updateRow(e))}},previousKey:function(a){if(this.grid.edit.isEditing())c.stop(a),this.previous();else if(!this.isNavHeader()&&!this._isHeaderHidden())this.grid.domNode.focus(),
c.stop(a);else{this.tabOut(this.grid.domNode);if(null!=this._colHeadFocusIdx)f.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,!1),this._colHeadFocusIdx=null;this._focusifyCellNode(!1)}},nextKey:function(a){a.target===this.grid.domNode&&null==this._colHeadFocusIdx?(this.focusHeader(),c.stop(a)):this.isNavHeader()?(this.blurHeader(),this.findAndFocusGridCell()||this.tabOut(this.grid.lastFocusNode),this._colHeadNode=this._colHeadFocusIdx=null):this.grid.edit.isEditing()?(c.stop(a),
this.next()):this.tabOut(this.grid.lastFocusNode)},tabOut:function(a){this.tabbingOut=!0;a.focus()},focusGridView:function(){b.fire(this.focusView,"focus")},focusGrid:function(){this.focusGridView();this._focusifyCellNode(!0)},findAndFocusGridCell:function(){var a=!0,b=0===this.grid.rowCount;this.isNoFocusCell()&&!b?(b=0,this.grid.getCell(b).hidden&&(b=this.isNavHeader()?this._colHeadFocusIdx:0),this.setFocusIndex(0,b)):this.cell&&!b?(this.focusView&&!this.focusView.rowNodes[this.rowIndex]&&this.grid.scrollToRow(this.rowIndex),
this.focusGrid()):a=!1;this._colHeadNode=this._colHeadFocusIdx=null;return a},focusHeader:function(){var a=this._findHeaderCells(),b=this._colHeadFocusIdx;if(this._isHeaderHidden())this.findAndFocusGridCell();else if(!this._colHeadFocusIdx)this._colHeadFocusIdx=this.isNoFocusCell()?0:this.cell.index;for(this._colHeadNode=a[this._colHeadFocusIdx];this._colHeadNode&&0<=this._colHeadFocusIdx&&this._colHeadFocusIdx<a.length&&"none"==this._colHeadNode.style.display;)this._colHeadFocusIdx++,this._colHeadNode=
a[this._colHeadFocusIdx];if(this._colHeadNode&&"none"!=this._colHeadNode.style.display){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode)this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode),this.headerMenu.bindDomNode(this.grid.domNode),this._contextMenuBindNode=this.grid.domNode;this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,b);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(!1)}else this.findAndFocusGridCell()},blurHeader:function(){f.removeClass(this._colHeadNode,
this.focusClass);f.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var a=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(a);this._contextMenuBindNode=a}},doFocus:function(a){if(a&&a.target!=a.currentTarget)c.stop(a);else if(!this._clickFocus)this.tabbingOut||this.focusHeader(),this.tabbingOut=!1,c.stop(a)},doBlur:function(a){c.stop(a)},doContextMenu:function(a){this.headerMenu||
c.stop(a)},doLastNodeFocus:function(a){this.tabbingOut?this._focusifyCellNode(!1):0<this.grid.rowCount?(this.isNoFocusCell()&&this.setFocusIndex(0,0),this._focusifyCellNode(!0)):this.focusHeader();this.tabbingOut=!1;c.stop(a)},doLastNodeBlur:function(a){c.stop(a)},doColHeaderFocus:function(a){this._setActiveColHeader(a.target,f.attr(a.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());c.stop(a)},doColHeaderBlur:function(a){f.toggleClass(a.target,this.focusClass,!1)},_mouseDown:function(a){this._clickFocus=
dojo.some(this.grid.views.views,function(b){return b.scrollboxNode===a.target})},_mouseUp:function(){this._clickFocus=!1}})})},"dojox/grid/_EditManager":function(){define("dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/connect,dojo/_base/sniff,./util".split(","),function(i,k,j,h,c,e){return j("dojox.grid._EditManager",null,{constructor:function(e){this.grid=e;this.connections=c("ie")?[h.connect(document.body,"onfocus",i.hitch(this,"_boomerangFocus"))]:[h.connect(this.grid,"onBlur",
this,"apply")]},info:{},destroy:function(){k.forEach(this.connections,h.disconnect)},cellFocus:function(c,b){this.grid.singleClickEdit||this.isEditRow(b)?this.setEditCell(c,b):this.apply();(this.isEditing()||c&&c.editable&&c.alwaysEditing)&&this._focusEditor(c,b)},rowClick:function(c){this.isEditing()&&!this.isEditRow(c.rowIndex)&&this.apply()},styleRow:function(c){c.index==this.info.rowIndex&&(c.customClasses+=" dojoxGridRowEditing")},dispatchEvent:function(c){var b=c.cell;return(b=b&&b.editable?
b:0)&&b.dispatchEvent(c.dispatch,c)},isEditing:function(){return void 0!==this.info.rowIndex},isEditCell:function(c,b){return this.info.rowIndex===c&&this.info.cell.index==b},isEditRow:function(c){return this.info.rowIndex===c},setEditCell:function(c,b){!this.isEditCell(b,c.index)&&this.grid.canEdit&&this.grid.canEdit(c,b)&&this.start(c,b,this.isEditRow(b)||c.editable)},_focusEditor:function(c,b){e.fire(c,"focus",[b])},focusEditor:function(){this.isEditing()&&this._focusEditor(this.info.cell,this.info.rowIndex)},
_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>(new Date).getTime()},_boomerangFocus:function(){if(this._shouldCatchBoomerang())this.grid.focus.focusGrid(),this.focusEditor(),this._catchBoomerang=0},_doCatchBoomerang:function(){if(c("ie"))this._catchBoomerang=(new Date).getTime()+this._boomerangWindow},start:function(c,b,f){if(this._isValidInput())this.grid.beginUpdate(),this.editorApply(),this.isEditing()&&!this.isEditRow(b)&&(this.applyRowEdit(),this.grid.updateRow(b)),
f?(this.info={cell:c,rowIndex:b},this.grid.doStartEdit(c,b),this.grid.updateRow(b)):this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._focusEditor(c,b),this._doCatchBoomerang()},_editorDo:function(c){var b=this.info.cell;if(b&&b.editable)b[c](this.info.rowIndex)},editorApply:function(){this._editorDo("apply")},editorCancel:function(){this._editorDo("cancel")},applyCellEdit:function(c,b,f){this.grid.canEdit(b,f)&&this.grid.doApplyCellEdit(c,f,b.field)},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,
this.info.cell.field)},apply:function(){if(this.isEditing()&&this._isValidInput())this.grid.beginUpdate(),this.editorApply(),this.applyRowEdit(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},cancel:function(){if(this.isEditing())this.grid.beginUpdate(),this.editorCancel(),this.info={},this.grid.endUpdate(),this.grid.focus.focusGrid(),this._doCatchBoomerang()},save:function(c,b){var f=this.info.cell;this.isEditRow(c)&&(!b||f.view==b)&&f.editable&&f.save(f,
this.info.rowIndex)},restore:function(c,b){var f=this.info.cell;this.isEditRow(b)&&f.view==c&&f.editable&&f.restore(this.info.rowIndex)},_isValidInput:function(){var c=(this.info.cell||{}).widget;if(!c||!c.isValid)return!0;c.focused=!0;return c.isValid(!0)}})})},"dojox/grid/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(i,k,j,h){return i("dojox.grid.Selection",null,{constructor:function(c){this.grid=c;this.selected=[];this.setMode(c.selectionMode)},
mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(c){this.selected.length&&this.deselectAll();this.mode="extended"!=c&&"multiple"!=c&&"single"!=c&&"none"!=c?"extended":c},onCanSelect:function(c){return this.grid.onCanSelect(c)},onCanDeselect:function(c){return this.grid.onCanDeselect(c)},onSelected:function(){},onDeselected:function(){},onChanging:function(){},onChanged:function(){},isSelected:function(c){return"none"==this.mode?!1:this.selected[c]},getFirstSelected:function(){if(!this.selected.length||
"none"==this.mode)return-1;for(var c=0,e=this.selected.length;c<e;c++)if(this.selected[c])return c;return-1},getNextSelected:function(c){if("none"==this.mode)return-1;for(var c=c+1,e=this.selected.length;c<e;c++)if(this.selected[c])return c;return-1},getSelected:function(){for(var c=[],e=0,g=this.selected.length;e<g;e++)this.selected[e]&&c.push(e);return c},getSelectedCount:function(){for(var c=0,e=0;e<this.selected.length;e++)this.selected[e]&&c++;return c},_beginUpdate:function(){if(0===this.updating)this.onChanging();
this.updating++},_endUpdate:function(){this.updating--;if(0===this.updating)this.onChanged()},select:function(c){"none"!=this.mode&&("multiple"!=this.mode?(this.deselectAll(c),this.addToSelection(c)):this.toggleSelect(c))},addToSelection:function(c){if("none"!=this.mode)if(j.isArray(c))k.forEach(c,this.addToSelection,this);else if(c=Number(c),this.selected[c])this.selectedIndex=c;else if(!1!==this.onCanSelect(c)){this.selectedIndex=c;var e=this.grid.getRowNode(c);e&&h.set(e,"aria-selected","true");
this._beginUpdate();this.selected[c]=!0;this.onSelected(c);this._endUpdate()}},deselect:function(c){if("none"!=this.mode)if(j.isArray(c))k.forEach(c,this.deselect,this);else{c=Number(c);if(this.selectedIndex==c)this.selectedIndex=-1;if(this.selected[c]&&!1!==this.onCanDeselect(c)){var e=this.grid.getRowNode(c);e&&h.set(e,"aria-selected","false");this._beginUpdate();delete this.selected[c];this.onDeselected(c);this._endUpdate()}}},setSelected:function(c,e){this[e?"addToSelection":"deselect"](c)},toggleSelect:function(c){j.isArray(c)?
k.forEach(c,this.toggleSelect,this):this.setSelected(c,!this.selected[c])},_range:function(c,e,g){var b=0<=c?c:e,c=e;b>c&&(c=b,b=e);for(e=b;e<=c;e++)g(e)},selectRange:function(c,e){this._range(c,e,j.hitch(this,"addToSelection"))},deselectRange:function(c,e){this._range(c,e,j.hitch(this,"deselect"))},insert:function(c){this.selected.splice(c,0,!1);this.selectedIndex>=c&&this.selectedIndex++},remove:function(c){this.selected.splice(c,1);this.selectedIndex>=c&&this.selectedIndex--},deselectAll:function(c){for(var e in this.selected)e!=
c&&!0===this.selected[e]&&this.deselect(e)},clickSelect:function(c,e,g){if("none"!=this.mode){this._beginUpdate();if("extended"!=this.mode)this.select(c);else{if(!g||0>this.rangeStartIndex)this.rangeStartIndex=c;e||this.deselectAll(c);g?this.selectRange(this.rangeStartIndex,c):e?this.toggleSelect(c):this.addToSelection(c)}this._endUpdate()}},clickSelectEvent:function(c){this.clickSelect(c.rowIndex,dojo.isCopyKey(c),c.shiftKey)},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate()}})})},
"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(i,k,j,h){return i("dijit.CheckedMenuItem",j,{templateString:h,checked:!1,_setCheckedAttr:function(c){k.toggle(this.domNode,"dijitCheckedMenuItemChecked",c);this.domNode.setAttribute("aria-checked",c?"true":"false");this._set("checked",c)},iconClass:"",onChange:function(){},_onClick:function(c){this.disabled||(this.set("checked",!this.checked),
this.onChange(this.checked));this.onClick(c)}})})},"url:dijit/templates/CheckedMenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitemcheckbox" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t\t<span class="dijitCheckedMenuItemIconChar">&#10003;</span>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td>\n</tr>\n',
"url:dojox/grid/resources/_Grid.html":'<div hidefocus="hidefocus" role="grid" dojoAttachEvent="onmouseout:_mouseOut">\n\t<div class="dojoxGridMasterHeader" dojoAttachPoint="viewsHeaderNode" role="presentation"></div>\n\t<div class="dojoxGridMasterView" dojoAttachPoint="viewsNode" role="presentation"></div>\n\t<div class="dojoxGridMasterMessages" style="display: none;" dojoAttachPoint="messagesNode"></div>\n\t<span dojoAttachPoint="lastFocusNode" tabindex="0"></span>\n</div>\n',"dojox/grid/DataSelection":function(){define(["dojo/_base/declare",
"./_SelectionPreserver","./Selection"],function(i,k,j){return i("dojox.grid.DataSelection",j,{constructor:function(h){if(h.keepSelection)this.preserver=new k(this)},destroy:function(){this.preserver&&this.preserver.destroy()},getFirstSelected:function(){var h=j.prototype.getFirstSelected.call(this);return-1==h?null:this.grid.getItem(h)},getNextSelected:function(h){h=this.grid.getItemIndex(h);h=j.prototype.getNextSelected.call(this,h);return-1==h?null:this.grid.getItem(h)},getSelected:function(){for(var h=
[],c=0,e=this.selected.length;c<e;c++)this.selected[c]&&h.push(this.grid.getItem(c));return h},addToSelection:function(h){if("none"!=this.mode){var c=null,c="number"==typeof h||"string"==typeof h?h:this.grid.getItemIndex(h);j.prototype.addToSelection.call(this,c)}},deselect:function(h){if("none"!=this.mode){var c=null,c="number"==typeof h||"string"==typeof h?h:this.grid.getItemIndex(h);j.prototype.deselect.call(this,c)}},deselectAll:function(h){var c=null;h||"number"==typeof h?(c="number"==typeof h||
"string"==typeof h?h:this.grid.getItemIndex(h),j.prototype.deselectAll.call(this,c)):this.inherited(arguments)}})})},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(i,k,j,h){return i("dojox.grid._SelectionPreserver",null,{constructor:function(c){this.selection=c;var e=this.grid=c.grid;this.reset();this._connects=[k.connect(e,"_setStore",this,"reset"),k.connect(e,"_addItem",this,"_reSelectById"),k.connect(c,
"onSelected",j.hitch(this,"_selectById",!0)),k.connect(c,"onDeselected",j.hitch(this,"_selectById",!1)),k.connect(c,"deselectAll",this,"reset")]},destroy:function(){this.reset();h.forEach(this._connects,k.disconnect);delete this._connects},reset:function(){this._selectedById={}},_reSelectById:function(c,e){c&&this.grid._hasIdentity&&(this.selection.selected[e]=this._selectedById[this.grid.store.getIdentity(c)])},_selectById:function(c,e){if("none"!=this.selection.mode&&this.grid._hasIdentity){var g=
e,b=this.grid;if("number"==typeof e||"string"==typeof e)g=(g=b._by_idx[e])&&g.item;g&&(this._selectedById[b.store.getIdentity(g)]=!!c);return g}}})})},"dojo/data/ItemFileWriteStore":function(){define("../_base/lang,../_base/declare,../_base/array,../_base/json,../_base/kernel,./ItemFileReadStore,../date/stamp".split(","),function(i,k,j,h,c,e,g){return k("dojo.data.ItemFileWriteStore",e,{constructor:function(b){this._features["dojo.data.api.Write"]=!0;this._features["dojo.data.api.Notification"]=!0;
this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap.Date.serialize)this._datatypeMap.Date.serialize=function(b){return g.toISOString(b,{zulu:!0})};if(b&&!1===b.referenceIntegrity)this.referenceIntegrity=!1;this._saveInProgress=!1},referenceIntegrity:!0,_assert:function(b){if(!b)throw Error("assertion failed in ItemFileWriteStore");},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"]},newItem:function(b,c){this._assert(!this._saveInProgress);
this._loadFinished||this._forceLoad();if("object"!=typeof b&&"undefined"!=typeof b)throw Error("newItem() was passed something other than an object");var a=null,d=this._getIdentifierAttribute();if(d===Number)a=this._arrayOfAllItems.length;else{a=b[d];if("undefined"===typeof a)throw Error("newItem() was not passed an identity for the new item");if(i.isArray(a))throw Error("newItem() was not passed an single-valued identity");}this._itemsByIdentity&&this._assert("undefined"===typeof this._itemsByIdentity[a]);
this._assert("undefined"===typeof this._pending._newItems[a]);this._assert("undefined"===typeof this._pending._deletedItems[a]);var e={};e[this._storeRefPropName]=this;e[this._itemNumPropName]=this._arrayOfAllItems.length;this._itemsByIdentity&&(this._itemsByIdentity[a]=e,e[d]=[a]);this._arrayOfAllItems.push(e);d=null;if(c&&c.parent&&c.attribute){var d={item:c.parent,attribute:c.attribute,oldValue:void 0},g=this.getValues(c.parent,c.attribute);if(g&&0<g.length){var h=g.slice(0,g.length);d.oldValue=
1===g.length?g[0]:g.slice(0,g.length);h.push(e);this._setValueOrValues(c.parent,c.attribute,h,!1);d.newValue=this.getValues(c.parent,c.attribute)}else this._setValueOrValues(c.parent,c.attribute,e,!1),d.newValue=e}else e[this._rootItemPropName]=!0,this._arrayOfTopLevelItems.push(e);this._pending._newItems[a]=e;for(var j in b){if(j===this._storeRefPropName||j===this._itemNumPropName)throw Error("encountered bug in ItemFileWriteStore.newItem");a=b[j];i.isArray(a)||(a=[a]);e[j]=a;if(this.referenceIntegrity)for(g=
0;g<a.length;g++)h=a[g],this.isItem(h)&&this._addReferenceToMap(h,e,j)}this.onNew(e,d);return e},_removeArrayElement:function(b,c){var a=j.indexOf(b,c);return-1!=a?(b.splice(a,1),!0):!1},deleteItem:function(b){this._assert(!this._saveInProgress);this._assertIsItem(b);var c=b[this._itemNumPropName],a=this.getIdentity(b);if(this.referenceIntegrity){var d=this.getAttributes(b);b[this._reverseRefMap]&&(b["backup_"+this._reverseRefMap]=i.clone(b[this._reverseRefMap]));j.forEach(d,function(a){j.forEach(this.getValues(b,
a),function(c){this.isItem(c)&&(b["backupRefs_"+this._reverseRefMap]||(b["backupRefs_"+this._reverseRefMap]=[]),b["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(c),attr:a}),this._removeReferenceFromMap(c,b,a))},this)},this);if(d=b[this._reverseRefMap])for(var e in d){var g=null;if(g=this._itemsByIdentity?this._itemsByIdentity[e]:this._arrayOfAllItems[e])for(var h in d[e]){var k=this.getValues(g,h)||[],m=j.filter(k,function(b){return!(this.isItem(b)&&this.getIdentity(b)==a)},this);this._removeReferenceFromMap(b,
g,h);m.length<k.length&&this._setValueOrValues(g,h,m,!0)}}}this._arrayOfAllItems[c]=null;b[this._storeRefPropName]=null;this._itemsByIdentity&&delete this._itemsByIdentity[a];this._pending._deletedItems[a]=b;b[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,b);this.onDelete(b);return!0},setValue:function(b,c,a){return this._setValueOrValues(b,c,a,!0)},setValues:function(b,c,a){return this._setValueOrValues(b,c,a,!0)},unsetAttribute:function(b,c){return this._setValueOrValues(b,
c,[],!0)},_setValueOrValues:function(b,c,a,d){this._assert(!this._saveInProgress);this._assertIsItem(b);this._assert(i.isString(c));this._assert("undefined"!==typeof a);var e=this._getIdentifierAttribute();if(c==e)throw Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");var e=this._getValueOrValues(b,c),g=this.getIdentity(b);if(!this._pending._modifiedItems[g]){var h={},k;for(k in b)h[k]=k===this._storeRefPropName||k===this._itemNumPropName||k===this._rootItemPropName?
b[k]:k===this._reverseRefMap?i.clone(b[k]):b[k].slice(0,b[k].length);this._pending._modifiedItems[g]=h}g=!1;if(i.isArray(a)&&0===a.length){if(g=delete b[c],a=void 0,this.referenceIntegrity&&e){k=e;i.isArray(k)||(k=[k]);for(var m=0;m<k.length;m++)h=k[m],this.isItem(h)&&this._removeReferenceFromMap(h,b,c)}}else{g=i.isArray(a)?a.slice(0,a.length):[a];if(this.referenceIntegrity)if(e){k=e;i.isArray(k)||(k=[k]);var o={};j.forEach(k,function(a){this.isItem(a)&&(a=this.getIdentity(a),o[a.toString()]=!0)},
this);j.forEach(g,function(a){if(this.isItem(a)){var d=this.getIdentity(a);o[d.toString()]?delete o[d.toString()]:this._addReferenceToMap(a,b,c)}},this);for(m in o)this._removeReferenceFromMap(this._itemsByIdentity?this._itemsByIdentity[m]:this._arrayOfAllItems[m],b,c)}else for(m=0;m<g.length;m++)h=g[m],this.isItem(h)&&this._addReferenceToMap(h,b,c);b[c]=g;g=!0}if(d)this.onSet(b,c,e,a);return g},_addReferenceToMap:function(b,c,a){var c=this.getIdentity(c),d=b[this._reverseRefMap];d||(d=b[this._reverseRefMap]=
{});(b=d[c])||(b=d[c]={});b[a]=!0},_removeReferenceFromMap:function(b,c,a){var c=this.getIdentity(c),d=b[this._reverseRefMap],e;if(d){for(e in d)e==c&&(delete d[e][a],this._isEmpty(d[e])&&delete d[e]);this._isEmpty(d)&&delete b[this._reverseRefMap]}},_dumpReferenceMap:function(){var b;for(b=0;b<this._arrayOfAllItems.length;b++);},_getValueOrValues:function(b,c){var a=void 0;this.hasAttribute(b,c)&&(a=this.getValues(b,c),a=1==a.length?a[0]:a);return a},_flatten:function(b){if(this.isItem(b))return{_reference:this.getIdentity(b)};
if("object"===typeof b)for(var c in this._datatypeMap){var a=this._datatypeMap[c];if(i.isObject(a)&&!i.isFunction(a)){if(b instanceof a.type){if(!a.serialize)throw Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+c+"]");return{_type:c,_value:a.serialize(b)}}}else if(b instanceof a)return{_type:c,_value:b.toString()}}return b},_getNewFileContentString:function(){var b={},c=this._getIdentifierAttribute();if(c!==Number)b.identifier=c;if(this._labelAttr)b.label=this._labelAttr;b.items=
[];for(c=0;c<this._arrayOfAllItems.length;++c){var a=this._arrayOfAllItems[c];if(null!==a){var d={},e;for(e in a)if(e!==this._storeRefPropName&&e!==this._itemNumPropName&&e!==this._reverseRefMap&&e!==this._rootItemPropName){var g=this.getValues(a,e);if(1==g.length)d[e]=this._flatten(g[0]);else for(var i=[],j=0;j<g.length;++j)i.push(this._flatten(g[j])),d[e]=i}b.items.push(d)}}return h.toJson(b,!0)},_isEmpty:function(b){var c=!0;if(i.isObject(b))for(var a in b){c=!1;break}else i.isArray(b)&&0<b.length&&
(c=!1);return c},save:function(b){this._assert(!this._saveInProgress);this._saveInProgress=!0;var f=this,a=function(){f._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};f._saveInProgress=!1;b&&b.onComplete&&b.onComplete.call(b.scope||c.global)},d=function(a){f._saveInProgress=!1;b&&b.onError&&b.onError.call(b.scope||c.global,a)};if(this._saveEverything){var e=this._getNewFileContentString();this._saveEverything(a,d,e)}this._saveCustom&&this._saveCustom(a,d);!this._saveEverything&&!this._saveCustom&&
a()},revert:function(){this._assert(!this._saveInProgress);for(var b in this._pending._modifiedItems){var c=this._pending._modifiedItems[b],a=null,a=this._itemsByIdentity?this._itemsByIdentity[b]:this._arrayOfAllItems[b];c[this._storeRefPropName]=this;for(var d in a)delete a[d];i.mixin(a,c)}var e;for(b in this._pending._deletedItems)e=this._pending._deletedItems[b],e[this._storeRefPropName]=this,c=e[this._itemNumPropName],e["backup_"+this._reverseRefMap]&&(e[this._reverseRefMap]=e["backup_"+this._reverseRefMap],
delete e["backup_"+this._reverseRefMap]),this._arrayOfAllItems[c]=e,this._itemsByIdentity&&(this._itemsByIdentity[b]=e),e[this._rootItemPropName]&&this._arrayOfTopLevelItems.push(e);for(b in this._pending._deletedItems)e=this._pending._deletedItems[b],e["backupRefs_"+this._reverseRefMap]&&(j.forEach(e["backupRefs_"+this._reverseRefMap],function(a){this._addReferenceToMap(this._itemsByIdentity?this._itemsByIdentity[a.id]:this._arrayOfAllItems[a.id],e,a.attr)},this),delete e["backupRefs_"+this._reverseRefMap]);
for(b in this._pending._newItems)c=this._pending._newItems[b],c[this._storeRefPropName]=null,this._arrayOfAllItems[c[this._itemNumPropName]]=null,c[this._rootItemPropName]&&this._removeArrayElement(this._arrayOfTopLevelItems,c),this._itemsByIdentity&&delete this._itemsByIdentity[b];this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return!0},isDirty:function(b){return b?(b=this.getIdentity(b),(new Boolean(this._pending._newItems[b]||this._pending._modifiedItems[b]||this._pending._deletedItems[b])).valueOf()):
!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)},onSet:function(){},onNew:function(){},onDelete:function(){},close:function(b){if(this.clearOnClose){if(this.isDirty())throw Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");this.inherited(arguments)}}})})},"dojo/data/ItemFileReadStore":function(){define("../_base/kernel,../_base/lang,../_base/declare,../_base/array,../_base/xhr,../Evented,./util/filter,./util/simpleFetch,../date/stamp".split(","),
function(i,k,j,h,c,e,g,b,f){j=j("dojo.data.ItemFileReadStore",[e],{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=!1;this.url=this._ccUrl=this._jsonFileUrl=a.url;this._jsonData=a.data;this.data=null;this._datatypeMap=a.typeMap||{};this._datatypeMap.Date||(this._datatypeMap.Date={type:Date,deserialize:function(a){return f.fromISOString(a)}});this._features={"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0};this._itemsByIdentity=null;this._storeRefPropName=
"_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=!1;this._queuedFetches=[];if(void 0!==a.urlPreventCache)this.urlPreventCache=a.urlPreventCache?!0:!1;if(void 0!==a.hierarchical)this.hierarchical=a.hierarchical?!0:!1;if(a.clearOnClose)this.clearOnClose=!0;if("failOk"in a)this.failOk=a.failOk?!0:!1},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:!1,urlPreventCache:!1,failOk:!1,hierarchical:!0,_assertIsItem:function(a){if(!this.isItem(a))throw Error(this.declaredClass+
": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this.declaredClass+": Invalid attribute argument.");},getValue:function(a,b,c){a=this.getValues(a,b);return 0<a.length?a[0]:c},getValues:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return(a[b]||[]).slice(0)},getAttributes:function(a){this._assertIsItem(a);var b=[],c;for(c in a)c!==this._storeRefPropName&&c!==this._itemNumPropName&&c!==this._rootItemPropName&&c!==this._reverseRefMap&&
b.push(c);return b},hasAttribute:function(a,b){this._assertIsItem(a);this._assertIsAttribute(b);return b in a},containsValue:function(a,b,c){var f=void 0;"string"===typeof c&&(f=g.patternToRegExp(c,!1));return this._containsValue(a,b,c,f)},_containsValue:function(a,b,c,f){return h.some(this.getValues(a,b),function(a){if(null!==a&&!k.isObject(a)&&f){if(a.toString().match(f))return!0}else if(c===a)return!0})},isItem:function(a){return a&&a[this._storeRefPropName]===this&&this._arrayOfAllItems[a[this._itemNumPropName]]===
a?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(){return this._labelAttr?[this._labelAttr]:null},filter:function(a,b,c){var f=[],e,h;if(a.query){var i;e=a.queryOptions?a.queryOptions.ignoreCase:!1;var j={};for(h in a.query)i=a.query[h],"string"===typeof i?j[h]=g.patternToRegExp(i,
e):i instanceof RegExp&&(j[h]=i);for(e=0;e<b.length;++e){var k=!0,t=b[e];if(null===t)k=!1;else for(h in a.query)i=a.query[h],this._containsValue(t,h,i,j[h])||(k=!1);k&&f.push(t)}}else for(e=0;e<b.length;++e)h=b[e],null!==h&&f.push(h);c(f,a)},_fetchItems:function(a,b,f){var e=this;if(this._loadFinished)this.filter(a,this._getItemsArray(a.queryOptions),b);else{if(this._jsonFileUrl!==this._ccUrl)i.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),
this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(null!=this.data)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)if(this._loadInProgress)this._queuedFetches.push({args:a,filter:k.hitch(e,"filter"),findCallback:k.hitch(e,b)});else{this._loadInProgress=!0;var g=c.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk});g.addCallback(function(c){try{e._getItemsFromLoadedData(c),
e._loadFinished=!0,e._loadInProgress=!1,e.filter(a,e._getItemsArray(a.queryOptions),b),e._handleQueuedFetches()}catch(g){e._loadFinished=!0,e._loadInProgress=!1,f(g,a)}});g.addErrback(function(b){e._loadInProgress=!1;f(b,a)});var h=null;if(a.abort)h=a.abort;a.abort=function(){g&&-1===g.fired&&g.cancel();h&&h.call(a)}}else if(this._jsonData)try{this._loadFinished=!0,this._getItemsFromLoadedData(this._jsonData),this._jsonData=null,e.filter(a,this._getItemsArray(a.queryOptions),b)}catch(j){f(j,a)}else f(Error(this.declaredClass+
": No JSON source data was provided as either URL or a nested Javascript object."),a)}},_handleQueuedFetches:function(){if(0<this._queuedFetches.length){for(var a=0;a<this._queuedFetches.length;a++){var b=this._queuedFetches[a],c=b.args,f=b.filter,b=b.findCallback;f?f(c,this._getItemsArray(c.queryOptions),b):this.fetchItemByIdentity(c)}this._queuedFetches=[]}},_getItemsArray:function(a){return a&&a.deep?this._arrayOfAllItems:this._arrayOfTopLevelItems},close:function(){if(this.clearOnClose&&this._loadFinished&&
!this._loadInProgress)this._arrayOfAllItems=[],this._arrayOfTopLevelItems=[],this._loadFinished=!1,this._itemsByIdentity=null,this._loadInProgress=!1,this._queuedFetches=[]},_getItemsFromLoadedData:function(a){function b(a){return null!==a&&"object"===typeof a&&(!k.isArray(a)||f)&&!k.isFunction(a)&&(a.constructor==Object||k.isArray(a))&&"undefined"===typeof a._reference&&"undefined"===typeof a._type&&"undefined"===typeof a._value&&e.hierarchical}function c(a){e._arrayOfAllItems.push(a);for(var f in a){var g=
a[f];if(g)if(k.isArray(g))for(var h=0;h<g.length;++h){var i=g[h];b(i)&&c(i)}else b(g)&&c(g)}}var f=!1,e=this;this._labelAttr=a.label;var g,h;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=a.items;for(g=0;g<this._arrayOfTopLevelItems.length;++g)h=this._arrayOfTopLevelItems[g],k.isArray(h)&&(f=!0),c(h),h[this._rootItemPropName]=!0;var i={},j;for(g=0;g<this._arrayOfAllItems.length;++g)for(j in h=this._arrayOfAllItems[g],h){if(j!==this._rootItemPropName){var t=h[j];null!==t?k.isArray(t)||(h[j]=[t]):
h[j]=[null]}i[j]=j}for(;i[this._storeRefPropName];)this._storeRefPropName+="_";for(;i[this._itemNumPropName];)this._itemNumPropName+="_";for(;i[this._reverseRefMap];)this._reverseRefMap+="_";if(i=a.identifier){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=i;for(g=0;g<this._arrayOfAllItems.length;++g)if(h=this._arrayOfAllItems[g],a=h[i],a=a[0],Object.hasOwnProperty.call(this._itemsByIdentity,a)){if(this._jsonFileUrl)throw Error(this.declaredClass+":  The json data as specified by: ["+
this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+i+"].  Value collided: ["+a+"]");if(this._jsonData)throw Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+i+"].  Value collided: ["+a+"]");}else this._itemsByIdentity[a]=h}else this._features["dojo.data.api.Identity"]=Number;for(g=0;g<this._arrayOfAllItems.length;++g)h=this._arrayOfAllItems[g],h[this._storeRefPropName]=this,h[this._itemNumPropName]=
g;for(g=0;g<this._arrayOfAllItems.length;++g)for(j in h=this._arrayOfAllItems[g],h){a=h[j];for(i=0;i<a.length;++i)if(t=a[i],null!==t&&"object"==typeof t){if("_type"in t&&"_value"in t){var q=t._type,u=this._datatypeMap[q];if(u)if(k.isFunction(u))a[i]=new u(t._value);else if(k.isFunction(u.deserialize))a[i]=u.deserialize(t._value);else throw Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");else throw Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+
q+"'");}if(t._reference){t=t._reference;if(k.isObject(t))for(q=0;q<this._arrayOfAllItems.length;++q){var u=this._arrayOfAllItems[q],v=!0,y;for(y in t)u[y]!=t[y]&&(v=!1);v&&(a[i]=u)}else a[i]=this._getItemByIdentity(t);this.referenceIntegrity&&(t=a[i],this.isItem(t)&&this._addReferenceToMap(t,h,j))}else this.isItem(t)&&this.referenceIntegrity&&this._addReferenceToMap(t,h,j)}}},_addReferenceToMap:function(){},getIdentity:function(a){var b=this._features["dojo.data.api.Identity"];return b===Number?a[this._itemNumPropName]:
(a=a[b])?a[0]:null},fetchItemByIdentity:function(a){var b,f;if(this._loadFinished)b=this._getItemByIdentity(a.identity),a.onItem&&(f=a.scope?a.scope:i.global,a.onItem.call(f,b));else{var e=this;if(this._jsonFileUrl!==this._ccUrl)i.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;if(null!=
this.data&&null==this._jsonData)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl)this._loadInProgress?this._queuedFetches.push({args:a}):(this._loadInProgress=!0,f=c.get({url:e._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk}),f.addCallback(function(c){var f=a.scope?a.scope:i.global;try{e._getItemsFromLoadedData(c),e._loadFinished=!0,e._loadInProgress=!1,b=e._getItemByIdentity(a.identity),a.onItem&&a.onItem.call(f,b),e._handleQueuedFetches()}catch(g){e._loadInProgress=
!1,a.onError&&a.onError.call(f,g)}}),f.addErrback(function(b){e._loadInProgress=!1;a.onError&&a.onError.call(a.scope?a.scope:i.global,b)}));else if(this._jsonData)e._getItemsFromLoadedData(e._jsonData),e._jsonData=null,e._loadFinished=!0,b=e._getItemByIdentity(a.identity),a.onItem&&(f=a.scope?a.scope:i.global,a.onItem.call(f,b))}},_getItemByIdentity:function(a){var b=null;this._itemsByIdentity?Object.hasOwnProperty.call(this._itemsByIdentity,a)&&(b=this._itemsByIdentity[a]):Object.hasOwnProperty.call(this._arrayOfAllItems,
a)&&(b=this._arrayOfAllItems[a]);void 0===b&&(b=null);return b},getIdentityAttributes:function(){var a=this._features["dojo.data.api.Identity"];return a===Number?null:[a]},_forceLoad:function(){var a=this;if(this._jsonFileUrl!==this._ccUrl)i.deprecated(this.declaredClass+": ","To change the url, set the url property of the store, not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0"),this.url=this._ccUrl=this._jsonFileUrl;else if(this.url!==this._ccUrl)this._ccUrl=this._jsonFileUrl=this.url;
if(null!=this.data)this._jsonData=this.data,this.data=null;if(this._jsonFileUrl){var b=c.get({url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:!0});b.addCallback(function(b){try{if(!0!==a._loadInProgress&&!a._loadFinished)a._getItemsFromLoadedData(b),a._loadFinished=!0;else if(a._loadInProgress)throw Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}catch(c){throw c;}});b.addErrback(function(a){throw a;
})}else if(this._jsonData)a._getItemsFromLoadedData(a._jsonData),a._jsonData=null,a._loadFinished=!0}});k.extend(j,b);return j})},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(i,k,j){var h={};i.setObject("dojo.data.util.simpleFetch",h);h.errorHandler=function(c,e){e.onError&&e.onError.call(e.scope||k.global,c,e)};h.fetchHandler=function(c,e){var g=e.abort||null,b=!1,f=e.start?e.start:0,a=e.count&&Infinity!==e.count?f+e.count:c.length;
e.abort=function(){b=!0;g&&g.call(e)};var d=e.scope||k.global;if(!e.store)e.store=this;e.onBegin&&e.onBegin.call(d,c.length,e);e.sort&&c.sort(j.createSortFunction(e.sort,this));if(e.onItem)for(var h=f;h<c.length&&h<a;++h){var i=c[h];b||e.onItem.call(d,i,e)}e.onComplete&&!b&&(h=null,e.onItem||(h=c.slice(f,a)),e.onComplete.call(d,h,e))};h.fetch=function(c){c=c||{};if(!c.store)c.store=this;this._fetchItems(c,i.hitch(this,"fetchHandler"),i.hitch(this,"errorHandler"));return c};return h})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],
function(i){var k={};i.setObject("dojo.data.util.sorter",k);k.basicComparator=function(i,h){var c=-1;null===i&&(i=void 0);null===h&&(h=void 0);if(i==h)c=0;else if(i>h||null==i)c=1;return c};k.createSortFunction=function(i,h){function c(a,b,c,d){return function(f,e){var g=d.getValue(f,a),h=d.getValue(e,a);return b*c(g,h)}}for(var e=[],g,b=h.comparatorMap,f=k.basicComparator,a=0;a<i.length;a++){g=i[a];var d=g.attribute;if(d){g=g.descending?-1:1;var l=f;b&&("string"!==typeof d&&"toString"in d&&(d=d.toString()),
l=b[d]||f);e.push(c(d,g,l,h))}}return function(a,b){for(var c=0;c<e.length;){var d=e[c++](a,b);if(0!==d)return d}return 0}};return k})},"phpr/ProjectChooser":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-class,dojo/store/Memory,dojo/promise/all,dojo/Deferred,dojo/when,dijit/form/FilteringSelect,phpr/models/Project,phpr/Api,phpr/SearchQueryEngine".split(","),function(i,k,j,h,c,e,g,b,f,a,d,l){return i([f],{renderDeferred:null,autoComplete:!1,labelType:"html",searchAttr:"name",
labelAttr:"label",dataLoaded:!1,constructor:function(){this.connect(this,"_openResultList",function(a){0<a.length&&this.dropDown.selectFirstNode()})},createOptions:function(a){var b=new g,c=[],d=this,f=!0,e=function(a){var b={id:""+a.id,name:""+a.id+" "+a.title,label:'<span class="projectId">'+a.id+"</span> "+a.title};if(f)f=!1,d.postStoreSet=function(){this.set("value",""+a.id)};c.push(b)};j.forEach(a.recent,e);0<a.recent.length&&c.push({label:"<hr />"});for(var h in a.projects)e(a.projects[h]);
b.resolve(c);return b},buildRendering:function(){this.inherited(arguments);h.add(this.domNode,"project");this.renderOptions()},renderOptions:function(){var a=this.renderDeferred=new g;this.getData().then(k.hitch(this,this.createOptions)).then(k.hitch(this,function(b){if(!0!==this._destroyed)this.set("store",new c({queryEngine:l,data:b})),this.dataLoaded=!0,this.postStoreSet(),this.renderDeferred=null,a.resolve()}))},postStoreSet:function(){},_setValueAttr:function(){this.dataLoaded&&this.inherited(arguments)},
_setCreateOptionsAttr:function(){var a=this,b=arguments;this.renderDeferred&&!0===this._started?this.renderDeferred.then(function(){a.inherited(b);a.renderOptions()}):!0===this._started&&(this.inherited(arguments),a.renderOptions())},_setGetDataAttr:function(){var a=this,b=arguments;this.renderDeferred&&!0===this._started?this.renderDeferred.then(function(){a.inherited(b);a.renderOptions()}):!0===this._started&&(this.inherited(arguments),a.renderOptions())},getData:function(){return e({recent:a.getRecentProjects(),
projects:a.getProjects()})},_selectOption:function(a){this._hasSearchAttr(a)&&this.inherited(arguments)},_announceOption:function(a){this._hasSearchAttr(a)&&this.inherited(arguments)},_hasSearchAttr:function(a){if(!a)return!1;if(this.dropDown.items[a.getAttribute("item")].hasOwnProperty(this.searchAttr))return!0},_startSearch:function(a){if(!this.dropDown){var c=this.id+"_popup";this.dropDown=new (k.isString(this.dropDownClass)?k.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:k.hitch(this,
this._selectOption),id:c,baseClass:"projectChooserDropDown",dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",c)}this._lastInput=a;this._abortQuery();var d=this,f=k.clone(this.query),e={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},g=function(){var c=d._fetchHandle=d.store.query(f,e);!d.disabled&&!(d.readOnly||a!==d._lastQuery)&&b(c,function(h){d._fetchHandle=null;!d.disabled&&!d.readOnly&&
a===d._lastQuery&&b(c.total,function(a){h.total=a;var b=d.pageSize;if(isNaN(b)||b>h.total)b=h.total;h.nextPage=function(a){e.direction=a=!1!==a;e.count=b;if(a){if(e.start+=h.length,e.start>=h.total)e.count=0}else if(e.start-=b,0>e.start)e.count=Math.max(b+e.start,0),e.start=0;0>=e.count?(h.length=0,d.onSearch(h,f,e)):g()};d.onSearch(h,f,e)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};k.mixin(e,this.fetchProperties);this._lastQuery=f[this.searchAttr]=
a;this._queryDeferHandle=this.defer(g,this.searchDelay)},_setDisplayedValueAttr:function(a,c){null===a&&(a="");if(!this._created){if(!("displayedValue"in this.params))return;c=!1}if(this.store){this.closeDropDown();var d=k.clone(this.query),f=this._getDisplayQueryString(a);this._lastQuery=d[this.searchAttr]=f;this._lastDisplayedValue=this.textbox.value=a;this._set("displayedValue",a);var e=this,g={ignoreCase:this.ignoreCase,deep:!0};k.mixin(g,this.fetchProperties);this._fetchHandle=this.store.query(d,
g);b(this._fetchHandle,function(a){e._fetchHandle=null;e._callbackSetLabel(a||[],d,g,c)},function(a){e._fetchHandle=null;e._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}}})})},"phpr/SearchQueryEngine":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred"],function(i,k){return function(i,h){var c=i.name.split("").join(".*"),e=RegExp("^.*"+c+".*$","i"),g=function(b,c){return b&&b.name&&c&&c.name?b.name.localeCompare(c.name):!b||!b.name?-1:!c||!c.name?
1:0};return function(b){b=k.filter(b,function(a){return e.test(a.name)});if(""!==i.name){b.sort(g);var c=null,b=b.filter(function(a){if(!a.hasOwnProperty("name"))return!1;var b=a.name!==c;c=a.name;return b})}if(h&&(h.start||h.count)){var a=b.length,b=b.slice(h.start||0,(h.start||0)+(h.count||Infinity));b.total=a}return b}}})},"phpr/Statistics/ProjectUserTimeTable":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/date/locale,dijit/_Widget,phpr/models/Timecard,phpr/Timehelper,dojox/grid/DataGrid,dojo/data/ItemFileWriteStore".split(","),
function(i,k,j,h,c,e,g,b,f){return i([c],{baseClass:"projectUserTimeTable",startDate:null,endDate:null,buildRendering:function(){this.inherited(arguments);e.getProjectUserMinutes(this._getModelParams()).then(k.hitch(this,"_renderData"))},_renderData:function(a){if(!this._destroyed){var c={};j.forEach(a.projectUserMinutes,function(a){if(0!==parseInt(a.minutes,10)){var b=a.user_id;if("1"==a.project_id)a.project="Unassigned";var e={projectId:a.project_id,project:a.project,time:g.minutesToHMString(a.minutes)};
c.hasOwnProperty(b)?c[b].projects.push(e):c[b]={user:a.user,id:b,projects:[e]}}});var e=[],a=[],h=0;for(h in c)a.push(c[h]);a=j.filter(a,function(a){return a&&"string"===typeof a.user});a.sort(function(a,b){return!a||!b?0:a.user.localeCompare(b.user)});j.forEach(a,function(a){var b=a.projects;b.sort(function(a,b){return a.project.localeCompare(b.project)});b.forEach(function(b){e.push({id:""+h++,user:a.user,project:b.project,time:b.time})})});a=new f({data:{identifier:"id",items:e}});a=new b({store:a,
structure:[[{name:"User",field:"user",width:"150px"},{name:"Project",field:"project",width:"250px"},{name:"Time",field:"time",width:"150px"}]],autoHeight:20});this.own(a);a.placeAt(this.domNode)}},_getModelParams:function(){return{start:this.startDate,end:this.endDate}}})})},"phpr/TeamStatisticsView":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-construct,dojo/promise/all,dojo/Deferred,dojo/on,dijit/_Widget,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/text!phpr/template/teamStatisticsView.html,phpr/ProjectChooser,phpr/models/Project,phpr/Statistics/ProjectBookingsTable,phpr/models/Timecard,dijit/layout/ContentPane".split(","),
function(i,k,j,h,c,e,g,b,f,a,d,l,p,r,n){var m=i([l],{createOptions:function(a){var b=new e,c=[];this.first=null;for(var d in a.projects){if(null===this.first)this.first=a.projects[d];var f=a.projects[d];c.push({id:""+f.id,name:""+f.id+" "+f.title,label:'<span class="projectId">'+f.id+"</span> "+f.title})}b.resolve(c);return b},getData:function(){return c({projects:p.getManagedProjects()})},postStoreSet:function(){null!==this.first&&this.set("value",""+this.first.id)}});return i([b,f,a],{templateString:d,
_tableUpdateTimer:null,buildRendering:function(){this.inherited(arguments);this.projectChooser=new m({},h.create("select"));this.projectChooserContainer.set("content",this.projectChooser);this.own(g(this.projectChooser,"change",k.hitch(this,"_updateTableWidget")));this.own(g(this.startDate,"change",k.hitch(this,"_updateTableWidget")));this.own(g(this.endDate,"change",k.hitch(this,"_updateTableWidget")));this.own(this.exportButton.on("click",k.hitch(this,this._openExport)))},_updateTableWidget:function(){this._scheduleTableWidgetUpdate()},
_scheduleTableWidgetUpdate:function(){clearTimeout(this._tableUpdateTimer);this._tableUpdateTimer=setTimeout(k.hitch(this,function(){this._setTable()}),250)},_setTable:function(){this.tableContainer.set("content",new r(this._getTableParams()))},_getSelectedProjects:function(){var a=this.projectChooser.get("value");return"-1"===a||""===a?[]:[a]},_getTableParams:function(){return{projects:this._getSelectedProjects(),startDate:this.startDate.get("value"),endDate:this.endDate.get("value")}},_openExport:function(a){a&&
a.stopPropagation();this.filterForm.validate()&&(a=this._getTableParams(),a=n.getMemberBookingsCSVUrl({projects:a.projects,start:a.startDate,end:a.endDate}),window.open(a));return!1}})})},"url:phpr/template/teamStatisticsView.html":'<div class="statisticsView">\n    <div class="filters open" data-dojo-attach-point="filters">\n        <div class="filters-inner">\n            <h3>Filter</h3>\n            <div class="exportForm" data-dojo-attach-point="filterForm" data-dojo-type="dijit/form/Form">\n                <table><tbody>\n                    <tr>\n                        <td>Projekt:</td>\n                        <td>\n                            <div data-dojo-attach-point="projectChooserContainer"\n                                 data-dojo-type="dijit/layout/ContentPane"></div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>Zeitraum:</td>\n                        <td>\n                            <input type="text"\n                                name="start"\n                                class="date"\n                                data-dojo-type="phpr/DateTextBox"\n                                data-dojo-attach-point="startDate"\n                                data-dojo-props="placeholder:\'Start date\', value: \'firstOfMonth\'" />\n                            -\n                            <input type="text"\n                                name="end"\n                                class="date"\n                                data-dojo-type="phpr/DateTextBox"\n                                data-dojo-attach-point="endDate"\n                                data-dojo-props="placeholder:\'End date\', value: \'lastOfMonth\'" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td></td>\n                        <td>\n                            <button data-dojo-type="dijit/form/Button"\n                                type="submit"\n                                data-dojo-attach-point="exportButton"\n                                data-dojo-props="baseClass:\'submitButton\'">Export to CSV</button>\n                        </td>\n                    </tr>\n                </tbody></table>\n            </div>\n        </div>\n    </div>\n    <div data-dojo-attach-point="tableContainer" data-dojo-type="dijit/layout/ContentPane">\n    </div>\n</div>\n',
"phpr/Statistics/ProjectBookingsTable":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/date/locale,dojo/dom-construct,dijit/_Widget,phpr/models/Timecard,phpr/Timehelper,dojox/grid/DataGrid,dojo/data/ItemFileWriteStore,phpr/models/Project".split(","),function(i,k,j,h,c,e,g,b,f,a){return i([e],{baseClass:"teamStatisticsGrid",buildRendering:function(){this.inherited(arguments);g.getMemberBookings(this._getModelParams()).then(k.hitch(this,"_renderData"))},_renderData:function(b){if(!this._destroyed){if(0===
b.length)return c.place('<span class="info">No bookings for this Project selection.</span>',this.domNode,"only");b={identifier:"id",items:b.map(function(a,b){if("1"==a.projectId)a.project="Unassigned";a.id=""+(b+1);return a})};b=new a({data:b});b=new f({store:b,structure:[[{name:"Project",field:"project",width:"100px"},{name:"Date",field:"date",width:"80px"},{name:"Start",field:"start",width:"65px"},{name:"End",field:"end",width:"65px"},{name:"Minutes",field:"minutes",width:"60px"},{name:"User",field:"user",
width:"150px"},{name:"Notes",field:"notes",width:"220px"}]],autoHeight:20});this.own(b);b.placeAt(this.domNode);b.startup()}},_getModelParams:function(){return{start:this.startDate,end:this.endDate,projects:this.projects}}})})},"dijit/dijit":function(){define("./main,./_base,dojo/parser,./_Widget,./_TemplatedMixin,./_Container,./layout/_LayoutWidget,./form/_FormWidget,./form/_FormValueWidget".split(","),function(i){return i})},"dijit/_base":function(){define("./main,./a11y,./WidgetSet,./_base/focus,./_base/manager,./_base/place,./_base/popup,./_base/scroll,./_base/sniff,./_base/typematic,./_base/wai,./_base/window".split(","),
function(i){return i._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(i,k,j,h){var c=k("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(c){if(this._hash[c.id])throw Error("Tried to register widget with id=="+c.id+" but that id is already registered");this._hash[c.id]=c;this.length++},remove:function(c){this._hash[c]&&(delete this._hash[c],this.length--)},forEach:function(c,g){var g=
g||j.global,b=0,f;for(f in this._hash)c.call(g,this._hash[f],b++,this._hash);return this},filter:function(e,g){var g=g||j.global,b=new c,f=0,a;for(a in this._hash){var d=this._hash[a];e.call(g,d,f++,this._hash)&&b.add(d)}return b},byId:function(c){return this._hash[c]},byClass:function(e){var g=new c,b,f;for(b in this._hash)f=this._hash[b],f.declaredClass==e&&g.add(f);return g},toArray:function(){var c=[],g;for(g in this._hash)c.push(this._hash[g]);return c},map:function(c,g){return i.map(this.toArray(),
c,g)},every:function(c,g){var g=g||j.global,b=0,f;for(f in this._hash)if(!c.call(g,this._hash[f],b++,this._hash))return!1;return!0},some:function(c,g){var g=g||j.global,b=0,f;for(f in this._hash)if(c.call(g,this._hash[f],b++,this._hash))return!0;return!1}});i.forEach("forEach,filter,byClass,map,every,some".split(","),function(e){h[e]=c.prototype[e]});return c})},"dijit/_base/focus":function(){define("dojo/_base/array,dojo/dom,dojo/_base/lang,dojo/topic,dojo/_base/window,../focus,../main".split(","),
function(i,k,j,h,c,e,g){e.focus=function(b){if(b){var f="node"in b?b.node:b,a=b.bookmark,b=b.openedForWindow,d=a?a.isCollapsed:!1;if(f){var h="iframe"==f.tagName.toLowerCase()?f.contentWindow:f;if(h&&h.focus)try{h.focus()}catch(i){}e._onFocusNode(f)}if(a&&c.withGlobal(b||c.global,g.isCollapsed)&&!d){b&&b.focus();try{c.withGlobal(b||c.global,g.moveToBookmark,null,[a])}catch(j){}}}};e.watch("curNode",function(b,c,a){g._curFocus=a;g._prevFocus=c;a&&h.publish("focusNode",a)});e.watch("activeStack",function(b,
c,a){g._activeStack=a});e.on("widget-blur",function(b,c){h.publish("widgetBlur",b,c)});e.on("widget-focus",function(b,c){h.publish("widgetFocus",b,c)});j.mixin(g,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return g.getBookmark().isCollapsed},getBookmark:function(){var b,f,a=c.doc.selection,d=e.curNode;if(c.global.getSelection){if(a=c.global.getSelection())if(a.isCollapsed){if(b=d?d.tagName:"")if(b=b.toLowerCase(),"textarea"==b||"input"==b&&(!d.type||"text"==d.type.toLowerCase()))return a=
{start:d.selectionStart,end:d.selectionEnd,node:d,pRange:!0},{isCollapsed:a.end<=a.start,mark:a};b={isCollapsed:!0};if(a.rangeCount)b.mark=a.getRangeAt(0).cloneRange()}else f=a.getRangeAt(0),b={isCollapsed:!1,mark:f.cloneRange()}}else if(a){b=d?d.tagName:"";b=b.toLowerCase();if(d&&b&&("button"==b||"textarea"==b||"input"==b)){if(a.type&&"none"==a.type.toLowerCase())return{isCollapsed:!0,mark:null};f=a.createRange();return{isCollapsed:f.text&&f.text.length?!1:!0,mark:{range:f,pRange:!0}}}b={};try{f=
a.createRange(),b.isCollapsed=!("Text"==a.type?f.htmlText.length:f.length)}catch(g){return b.isCollapsed=!0,b}if("CONTROL"==a.type.toUpperCase())if(f.length){b.mark=[];a=0;for(d=f.length;a<d;)b.mark.push(f.item(a++))}else b.isCollapsed=!0,b.mark=null;else b.mark=f.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return b},moveToBookmark:function(b){var f=c.doc;if(b=b.mark)if(c.global.getSelection)(f=c.global.getSelection())&&f.removeAllRanges?b.pRange?
(f=b.node,f.selectionStart=b.start,f.selectionEnd=b.end):(f.removeAllRanges(),f.addRange(b)):console.warn("No idea how to restore selection for this browser!");else if(f.selection&&b){var a;b.pRange?a=b.range:j.isArray(b)?(a=f.body.createControlRange(),i.forEach(b,function(b){a.addElement(b)})):(a=f.body.createTextRange(),a.moveToBookmark(b));a.select()}},getFocus:function(b,f){var a=!e.curNode||b&&k.isDescendant(e.curNode,b.domNode)?g._prevFocus:e.curNode;return{node:a,bookmark:a&&a==e.curNode&&
c.withGlobal(f||c.global,g.getBookmark),openedForWindow:f}},_activeStack:[],registerIframe:function(b){return e.registerIframe(b)},unregisterIframe:function(b){b&&b.remove()},registerWin:function(b,c){return e.registerWin(b,c)},unregisterWin:function(b){b&&b.remove()}});return g})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(i,k,j,h,c){var e={getViewport:function(){return j.getBox()}};e.placeOnScreen=h.at;e.placeOnScreenAroundElement=
function(c,b,f,a){var d;if(k.isArray(f))d=f;else{d=[];for(var e in f)d.push({aroundCorner:e,corner:f[e]})}return h.around(c,b,d,!0,a)};e.placeOnScreenAroundNode=e.placeOnScreenAroundElement;e.placeOnScreenAroundRectangle=e.placeOnScreenAroundElement;e.getPopupAroundAlignment=function(c,b){var f={};i.forEach(c,function(a){var c=b;switch(a){case "after":f[b?"BR":"BL"]=b?"BL":"BR";break;case "before":f[b?"BL":"BR"]=b?"BR":"BL";break;case "below-alt":c=!c;case "below":f[c?"BL":"BR"]=c?"TL":"TR";f[c?"BR":
"BL"]=c?"TR":"TL";break;case "above-alt":c=!c;default:f[c?"TL":"TR"]=c?"BL":"BR",f[c?"TR":"TL"]=c?"BR":"BL"}});return f};k.mixin(c,e);return c})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(i,k,j){var h=j._createWrapper;j._createWrapper=function(c){c.declaredClass||(c={_popupWrapper:c.parentNode&&i.contains(c.parentNode,"dijitPopup")?c.parentNode:null,domNode:c,destroy:function(){},ownerDocument:c.ownerDocument,ownerDocumentBody:k.body(c.ownerDocument)});
return h.call(this,c)};var c=j.open;j.open=function(e){if(e.orient&&"string"!=typeof e.orient&&!("length"in e.orient)){var g=[],b;for(b in e.orient)g.push({aroundCorner:b,corner:e.orient[b]});e.orient=g}return c.call(this,e)};return j})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(i,k){k.scrollIntoView=function(j,h){i.scrollIntoView(j,h)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],
function(){})},"dijit/typematic":function(){define("dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,./main".split(","),function(i,k,j,h,c,e,g,b){var f=b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay);
this._timer=setTimeout(c.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,f,e,g,h,i,j){if(g!=this._obj){this.stop();this._initialDelay=i||500;this._subsequentDelay=h||0.9;this._minDelay=j||10;this._obj=g;this._node=f;this._count=this._currentTimeout=-1;this._callback=c.hitch(b,e);this._evt={faux:!0};for(var k in a)"layerX"!=k&&"layerY"!=k&&(b=a[k],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[k]=b));this._fireEventAndReload()}},stop:function(){if(this._timer)clearTimeout(this._timer),
this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(a,b,g,p,r,n,m){if(b.keyCode)b.charOrCode=b.keyCode,h.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(b.charCode)b.charOrCode=String.fromCharCode(b.charCode),h.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");var o=[e(a,k._keypress,
c.hitch(this,function(c){c.charOrCode==b.charOrCode&&(void 0===b.ctrlKey||b.ctrlKey==c.ctrlKey)&&(void 0===b.altKey||b.altKey==c.altKey)&&(void 0===b.metaKey||b.metaKey==(c.metaKey||!1))&&(void 0===b.shiftKey||b.shiftKey==c.shiftKey)?(j.stop(c),f.trigger(c,g,a,p,b,r,n,m)):f._obj==b&&f.stop()})),e(a,"keyup",c.hitch(this,function(){f._obj==b&&f.stop()}))];return{remove:function(){i.forEach(o,function(a){a.remove()})}}},addMouseListener:function(a,b,h,j,k,n){var m=[e(a,"mousedown",c.hitch(this,function(c){c.preventDefault();
f.trigger(c,b,a,h,a,j,k,n)})),e(a,"mouseup",c.hitch(this,function(a){this._obj&&a.preventDefault();f.stop()})),e(a,"mouseout",c.hitch(this,function(a){this._obj&&a.preventDefault();f.stop()})),e(a,"dblclick",c.hitch(this,function(e){e.preventDefault();9>g("ie")&&(f.trigger(e,b,a,h,a,j,k,n),setTimeout(c.hitch(this,f.stop),50))}))];return{remove:function(){i.forEach(m,function(a){a.remove()})}}},addListener:function(a,b,c,f,e,g,h,j){var k=[this.addKeyListener(b,c,f,e,g,h,j),this.addMouseListener(a,
f,e,g,h,j)];return{remove:function(){i.forEach(k,function(a){a.remove()})}}}};return f})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(i,k,j){k.mixin(j,{hasWaiRole:function(h,c){var e=this.getWaiRole(h);return c?-1<e.indexOf(c):0<e.length},getWaiRole:function(h){return k.trim((i.get(h,"role")||"").replace("wairole:",""))},setWaiRole:function(h,c){i.set(h,"role",c)},removeWaiRole:function(h,c){var e=i.get(h,"role");e&&(c?(e=k.trim((" "+e+" ").replace(" "+
c+" "," ")),i.set(h,"role",e)):h.removeAttribute("role"))},hasWaiState:function(h,c){return h.hasAttribute?h.hasAttribute("aria-"+c):!!h.getAttribute("aria-"+c)},getWaiState:function(h,c){return h.getAttribute("aria-"+c)||""},setWaiState:function(h,c,e){h.setAttribute("aria-"+c,e)},removeWaiState:function(h,c){h.removeAttribute("aria-"+c)}});return j})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(i,k){k.getDocumentWindow=function(j){return i.get(j)}})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),
function(i,k,j,h,c,e,g,b,f){return e("dijit.layout._LayoutWidget",[k,j,h],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);g.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(c.on("resize",i.hitch(this,"resize")))}},resize:function(a,c){var e=this.domNode;a&&b.setMarginBox(e,a);var g=c||{};i.mixin(g,a||
{});if(!("h"in g)||!("w"in g))g=i.mixin(b.getMarginBox(e),g);var h=f.getComputedStyle(e),j=b.getMarginExtents(e,h),k=b.getBorderExtents(e,h),g=this._borderBox={w:g.w-(j.w+k.w),h:g.h-(j.h+k.h)},j=b.getPadExtents(e,h);this._contentBox={l:f.toPixelValue(e,h.paddingLeft),t:f.toPixelValue(e,h.paddingTop),w:g.w-j.w,h:g.h-j.h};this.layout()},layout:function(){},_setupChild:function(a){g.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);
this._started&&this._setupChild(a)},removeChild:function(a){g.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"phpr/run":function(){require({cache:{}},["phpr"])},"*now":function(i){i(['dojo/i18n!*preload*phpr/nls/main*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
(function(){var i=this.require;i({cache:{}});!i.async&&i(["dojo"]);i.boot&&i.apply(null,i.boot)})();