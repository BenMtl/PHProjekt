//>>built
define("phpr/models/Project","exports,dojo/_base/array,dojo/_base/lang,dojo/_base/json,dojo/Deferred,dojo/promise/all,phpr/Api".split(","),function(d,g,j,k,f,h,e){d.getProjects=function(){var a=new f,c;e.getData("index.php/Project/Project",{query:{recursive:!0,projectId:1}}).then(function(b){var i={1:{id:"1",title:"Unassigned"}};g.forEach(b,function(b){i[b.id]=b});c=i;b=a;a=null;b.resolve(i)},e.defaultErrorHandler);d.getProjects=function(){if(a)return a;var b=new f;b.resolve(c);return b};return d.getProjects()};
d.getRecentProjects=function(a){var c={count:2};j.mixin(c,a);var b=new f;h({projects:d.getProjects(),recent:e.getData("index.php/Timecard/index/recentProjects",{query:{n:c.count}})}).then(function(a){var c=g.map(a.recent,function(b){return a.projects[b]});b.resolve(c)},e.defaultErrorHandler);return b};d.getManagedProjects=function(){var a=new f;h({projects:d.getProjects(),managed:e.getData("index.php/Project/index/managedProjects")}).then(function(c){var b={};g.forEach(c.managed,function(a){b[a]=
c.projects[a]});a.resolve(b)},e.defaultErrorHandler);return a};d.getBookedProjects=function(){var a=new f;h({projects:d.getProjects(),booked:e.getData("index.php/Timecard/index/bookedProjects")}).then(function(c){var b={};g.forEach(c.booked,function(a){b[a]=c.projects[a]});a.resolve(b)},e.defaultErrorHandler);return a}});