<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Modules</title><link rel="stylesheet" href="book.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.72.0" /><link rel="start" href="index.html" title="PHProjekt 6.x Developer Documentation" /><link rel="up" href="ch02.html" title="Chapter 2. Basic concepts" /><link rel="prev" href="ch02.html" title="Chapter 2. Basic concepts" /><link rel="next" href="ch02s03.html" title="Database Abstraction" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Modules</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html">Prev</a> </td><th width="60%" align="center">Chapter 2. Basic concepts</th><td width="20%" align="right"> <a accesskey="n" href="ch02s03.html">Next</a></td></tr></table><hr /></div><div class="sect1" lang="en-US" xml:lang="en-US"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id282139"></a>Modules</h2></div></div></div><p>Modules are a core part of PHProjekt. They constist of a set of features, that are related to each other. E.g. managing tasks or managing appointments are combined into a module. Modules have a <span class="emphasis"><em>specific</em></span> <span class="emphasis"><em>directory layou</em></span>t. </p><p><span class="emphasis"><em>Every module is displayed on a per-project base</em></span>. This means, that a e.g. the task module is displayed if you click on a project at the project tree. Therefore data saved by a model is usually related to a project id, but need't to.</p><p>PHProjekt provides a <span class="emphasis"><em>default module</em></span>. Every module in PHProjekt uses those parts of the default module automaticly, that are not overwritten by own written code.</p><div class="sect2" lang="en-US" xml:lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="id282369"></a>Structure of a module</h3></div></div></div><p>Every module is a directory located in the <span class="emphasis"><em>application/ </em></span>directory. The directory name is usually the module name, but must not. The module directory has three subdirectories. The <span class="emphasis"><em>Views/ </em></span>directory, the <span class="emphasis"><em>Models/ </em></span>directory and the <span class="emphasis"><em>Controllers/</em></span> directory. <span class="emphasis"><em>Please notice that directory names are case-sensitiv.</em></span> </p><pre class="screen">
/application
  /MyModule
    /Controllers
    /Models
    /Views
</pre><p>The controller classes, derived from the IndexController class, are located in the <span class="emphasis"><em>Controller/</em></span> directory. They start with a name and end with the suffix <span class="emphasis"><em>Controller</em></span>. A valid controller name would be e.g.: <span class="emphasis"><em>IndexController</em></span> or <span class="emphasis"><em>FormController</em></span>. If nothing else is specified, the dispatcher class will always call the <span class="emphasis"><em>IndexController.</em></span> See chapter <a href="ch02s02.html#sec:Mapping-of-controllers" title="Mapping of controllers">the section called “Mapping of controllers”</a> for further details about calling controllers. </p><p>The model classes are located in <span class="emphasis"><em>Models/</em></span>. They must have the format <span class="emphasis"><em>Modulename</em></span>_Models_<span class="emphasis"><em>Modelname</em></span>. A valid model name would be e.g.: <span class="emphasis"><em>WorkingHours_Models_WorkingHour</em></span> or <span class="emphasis"><em>Files_Models_Directory</em></span>. Every model must inherite the <span class="emphasis"><em>Phprojekt_Model_Interface</em></span> class.</p><p>In the <span class="emphasis"><em>Views/ </em></span>diretory you can place PHP files that render output. Usually you are layouting the JavaScript components there, but the developer is free and responsable to do what ever he wants there, as long as there is no business logic there.</p><div class="sect3" lang="en-US" xml:lang="en-US"><div class="titlepage"><div><div><h4 class="title"><a id="sec:Mapping-of-controllers"></a>Mapping of controllers</h4></div></div></div><p>The decision, which controller and which method of this controller is called, is made by the Zend Dispatcher. This class maps a url e.g. http://example.com/index/list/1 to an controller. If you want to know, how the dispatcher works, and which mappings it provides, please read the Zend Framework Documentation<sup>[<a id="id282481" href="#ftn.id282481">2</a>]</sup>. PHProjekt uses a special way of mapping.</p><p>As an example, the url: http://myphprojekt.com/index.php/Projects/index/list is mapped to the IndexController of the Project module. The class will be instantiated by the dispatcher and then the listAction() method will be called. Therefore the first part, after the index.php, in this case <span class="emphasis"><em>Projects</em></span> is the name of the module thats called. The second part of the url, is the controller name. The <span class="emphasis"><em>index</em></span> will refer to a <span class="emphasis"><em>IndexController</em></span> class, as <span class="emphasis"><em>foo</em></span> would refer to <span class="emphasis"><em>FooController</em></span>. As you can see, the suffix <span class="emphasis"><em>Controller</em></span> is appended. The last part is the name of the method thats called. The string “Action” is appended to the given name. In our case not the method <span class="emphasis"><em>list()</em></span> is called, but the method <span class="emphasis"><em>listAction()</em></span> is called. Every additional part, seperated by an /, would be mapped into the post variables array and therefore can be access through $_POST or (better) the Zend_Request object. </p><p>So the url http://myprojekt.com/index.php/Projects/index/list/id/2/ will be have the request array </p><pre class="screen">
array(
     "id" =&gt; 2
     )
</pre></div></div><div class="sect2" lang="en-US" xml:lang="en-US"><div class="titlepage"><div><div><h3 class="title"><a id="id322626"></a>The default module</h3></div></div></div></div><div class="footnotes"><br /><hr width="100" align="left" /><div class="footnote"><p><sup>[<a id="ftn.id282481" href="#id282481">2</a>] </sup><a href="http://framework.zend.com" target="_top">http://framework.zend.com</a></p></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s03.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 2. Basic concepts </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Database Abstraction</td></tr></table></div></body></html>
